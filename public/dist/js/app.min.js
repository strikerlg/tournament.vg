!function(){"use strict";angular.module("vg.app",["ngAnimate","ui.router","firebase","validation.match","ordinal","ngFileUpload","ngImgur"])}(),function(){"use strict";function e(e,t){t.otherwise("/"),e.state("home",{url:"/",templateUrl:"app/home/home.htm",controller:"HomeController as home"}).state("registerOrLogin",{url:"/registerOrLogin",templateUrl:"/app/home/reg.htm",controller:"RegController as reg"}).state("profile",{url:"/profile/:username",templateUrl:"/app/home/profile.htm",controller:"ProfileController as profile"}).state("leaderboard",{url:"/leaderboard",templateUrl:"/app/home/leaderboard.htm",controller:"LeaderboardController as leaderboard"}).state("event",{url:"/event/:eventName/main",templateUrl:"/app/event/main.htm",controller:"EventMainController as event"}).state("customizeAvatar",{url:"/customizeAvatar",templateUrl:"/app/home/avatar.htm",controller:"AvatarController as avatar",resolve:{currentAuth:["AuthWrapper",function(e){return e.$requireAuth()}]}}).state("changePassword",{url:"/changePassword",templateUrl:"/app/home/changePassword.htm",controller:"ChangePasswordController as pwchange",resolve:{currentAuth:["AuthWrapper",function(e){return e.$requireAuth()}]}})}angular.module("vg.app").constant("FIREBASEDATA",{FBURL:"https://wolfscontests.firebaseio.com"}).config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e,t,r,n,o,a){e.$on("$stateChangeError",function(e,t,n,o,a,i){"AUTH_REQUIRED"===i&&r.go("registerOrLogin")}),e.$on("$stateChangeSuccess",function(){if(o.$getAuth()){var t=o.$getAuth(),r=new Firebase(a.FBURL),i=n(r.child("users").child(t.uid));i.$bindTo(e,"profile").then(function(t){e.unbindFunction=t})}})}angular.module("vg.app").run(e),e.$inject=["$rootScope","$location","$state","$firebaseObject","AuthWrapper","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,r,n,o,a,i,s){function l(t){var r=e.defer(),a=!1,i=new n.Firebase(s.FBURL+"/users");return i.once("value",function(e){o(function(){e.forEach(function(e){e.val().userName===t&&(a=!0)}),r.resolve(a)})}),r.promise}function c(t,r,n){var o=e.defer();return i.$createUser({email:t,password:r}).then(function(e){new Firebase(s.FBURL).child("users/"+e.uid).set({userName:n,role:"User"},function(e){return console.error(e),e.code}),new Firebase(s.FBURL).child("avatars").child(n).set("http://api.adorable.io/avatars/42/"+n),i.$authWithPassword({email:t,password:r}).then(function(){o.resolve("ACCOUNT_CREATED")})})["catch"](function(e){console.error(e),"EMAIL_TAKEN"===e.code&&o.resolve(e.code)}),o.promise}function u(t,r){var n=e.defer();return i.$authWithPassword({email:t,password:r}).then(function(e){n.resolve("LOGIN_SUCCESS")})["catch"](function(e){"INVALID_USER"===e.code?n.resolve("INVALID_USER"):"INVALID_PASSWORD"===e.code&&n.resolve("INVALID_PASSWORD")}),n.promise}function d(){i.$unauth(),t.unbindFunction()}this.testData="hello world!",this.checkIfUserExists=l,this.createNewUser=c,this.loginToAccount=u,this.logOut=d}angular.module("vg.app").service("authService",e),e.$inject=["$q","$rootScope","$state","$window","$timeout","$firebaseObject","AuthWrapper","FIREBASEDATA"]}(),function(){"use strict";function e(e,t){var r=new Firebase(t.FBURL);return e(r)}angular.module("vg.app").factory("AuthWrapper",e),e.$inject=["$firebaseAuth","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,r,n,o){function a(e){c(e).then(function(t){var n=new Firebase(o.FBURL),a=r(n.child("standings").child(e));a.$loaded().then(function(){t.forEach(function(e){a[e.key]=e.position}),a.$save()})})}function i(t){var n=e.defer(),a=new Firebase(o.FBURL),i=r(a.child("contests").child(t).child("properties"));return n.resolve(i),n.promise}function s(t,r){{var n=e.defer();new Firebase(o.FBURL)}return l(t).then(function(e){e.forEach(function(e){e.camelName===r&&n.resolve(e)})}),n.promise}function l(t){var r=e.defer(),a=new Firebase(o.FBURL),i=n(a.child("contests").child(t).child("activeGames"));return i.$loaded().then(function(){r.resolve(i)}),r.promise}function c(r){var n=e.defer(),o={};return l(r).then(function(e){var r=e;r.forEach(function(e){if(e.scores){var r=$.map(e.scores,function(e){return e});r=t("orderBy")(r,"-score");for(var n=12,a=0;a<r.length;a++)o[r[a].userName]||(o[r[a].userName]={points:0}),o[r[a].userName].points+=n,n>0&&(n-=1)}}),o=t("orderObjectBy")(o,"points",!0);for(var a=!1,i=0,s=0;s<o.length;s+=1)if(o[s-1]&&o[s].points&&o[s-1].points)o[s].position=o[s].points===o[s-1].points?o[s-1].position:s+1;else if(0===s)o[s].position=1;else{if(!a){for(var l=o[s-1].points,c=0;c<o.length;c+=1)o[c].points===l&&(i+=1);a=!0}o[s].position=o.length+1-i}n.resolve(o)}),n.promise}function u(t){var r=e.defer(),a=new Firebase(o.FBURL),i=n(a.child("contests").child(t).child("scores"));return r.resolve(i),r.promise}function d(r,n,o){var a=e.defer(),i=[];return n.forEach(function(e){if(e.scores){var r=$.map(e.scores,function(e){return e});r=t("orderBy")(r,"-score");for(var n=12,a=0;a<r.length;a++){if(r[a].userName===o){var s=e;s.position=a+1,s.score=r[a].score,s.pointsEarned=n,s.inpUrl=r[a].inpUrl?r[a].inpUrl:null,s.twitchUrl=r[a].twitchUrl?r[a].twitchUrl:null,s.mameVersion=r[a].mameVersion?r[a].mameVersion:null,i.push(s),n=12;break}n>0&&(n-=1)}}}),a.resolve(i),a.promise}this.createMultiGameFinalStandings=a,this.getEventProperties=i,this.getGameData=s,this.getGamesList=l,this.getMultiGameLeaderboard=c,this.getSingleGameLeaderboard=u,this.getPlayerScores=d}angular.module("vg.app").service("eventService",e),e.$inject=["$q","$filter","$firebaseObject","$firebaseArray","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,r,n,o,a,i,s,l,c,u){function d(){angular.element("#gameModal").closeModal()}function m(){angular.element("#multiGameLeaderboardModal").closeModal()}function f(){angular.element("#playerModal").closeModal()}function p(){c.createTeam(D.eventName,D.newTeam).then(function(){Materialize.toast("Team "+D.newTeam.shortName+" created.",4e3),D.newTeam=null})}function h(e,r){var n;if(r>11)return n=0;n=12-r;var o=t("orderBy")(D.gameScores,"-score");return o[r-1]&&o[r-1].score===e.score&&(n+=1),n}function v(){D.gameList.forEach(function(e){if(e.scores){var r=$.map(e.scores,function(e){return e});r=t("orderBy")(r,"-score"),e.firstScore=r[0]}})}function g(e){angular.element("#playerModal").closeModal(),n.go("profile",{username:e})}function b(){i.getEventProperties(D.eventName).then(function(e){D.eventProperties=e,D.eventProperties.$loaded().then(function(){D.eventProperties.format.multiGame?(i.getGamesList(D.eventName).then(function(e){D.gameList=e,v()}),i.getMultiGameLeaderboard(D.eventName).then(function(e){var t=e;D.leaderboardLength=t.length,D.summarizedLeaderboard=t.slice(0,8)})):i.getSingleGameLeaderboard(D.eventName).then(function(e){var t=e;D.leaderboardLength=t.length,D.summarizedLeaderboard=t}),D.eventProperties.format.teamBased&&c.getTeamList(D.eventName).then(function(e){D.teamList=e}),"upcoming"===D.eventProperties.state&&$(".collapsible").collapsible({accordion:!0})})}),l.getAvatarData().then(function(e){D.avatarData=e})}function w(){angular.element("#badgesModal").openModal(),angular.element("#badgesModalContent").scrollTop(0)}function A(e){var t=new Firebase(u.FBURL);i.getGameData(D.eventName,e).then(function(e){D.gameData=e,D.gameScores=a(t.child("contests").child(D.eventName).child("activeGames").child(D.gameData.$id).child("scores"))}),angular.element("#gameModal").openModal(),angular.element("#gameModalContent").scrollTop(0)}function L(){angular.element("#managementModal").openModal(),angular.element("#managementModalContent").scrollTop(0)}function E(){i.getMultiGameLeaderboard(D.eventName).then(function(e){D.completeLeaderboard=e}),angular.element("#multiGameLeaderboardModal").openModal(),angular.element("#multiGameLeaderboardModalContent").scrollTop(0)}function S(e){D.focusPlayer=e,i.getPlayerScores(D.eventName,D.gameList,D.focusPlayer).then(function(e){D.playerScores=e}),angular.element("#playerModal").openModal(),angular.element("#playerModalContent").scrollTop(0)}function U(e){f(),o(function(){A(e)},450)}function F(e){d(),o(function(){S(e)},450)}function M(e){m(),o(function(){S(e)},450)}function P(){angular.element("#rulesModal").openModal()}var D=this;D.eventName=r.eventName,D.closeGameModal=d,D.closeMultiGameLeaderboardModal=m,D.closePlayerModal=f,D.createTeam=p,D.determinePoints=h,D.getFirstPlaceScores=v,D.goToPlayerProfile=g,D.openBadgesModal=w,D.openGameModal=A,D.openGameModalFromPlayerModal=U,D.openManagementModal=L,D.openMultiGameLeaderboardModal=E,D.openPlayerModal=S,D.openPlayerModalFromGameModal=F,D.openPlayerModalFromLeaderboardModal=M,D.openRulesModal=P,b()}angular.module("vg.app").controller("EventMainController",e),e.$inject=["$scope","$filter","$stateParams","$state","$timeout","$firebaseArray","eventService","authService","profileService","teamService","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,r,n){function o(t,o){var a=e.defer(),i=new Firebase(n.FBURL),s=r(i.child("contests").child(t).child("teamPool"));return s.$loaded().then(function(){s[o.shortName]={fullName:o.formalName},s.$save(),a.resolve()}),a.promise}function a(r){var o=e.defer(),a=new Firebase(n.FBURL),i=t(a.child("contests").child(r).child("teamPool"));return i.$loaded().then(function(){o.resolve(i)}),o.promise}this.createTeam=o,this.getTeamList=a}angular.module("vg.app").service("teamService",e),e.$inject=["$q","$firebaseArray","$firebaseObject","FIREBASEDATA"]}(),function(){"use strict";function e(){function e(e,t,r){}var r={bindToController:!0,controller:t,controllerAs:"vm",link:e,restrict:"E",templateUrl:"./app/eventComponents/gamesList.directive.htm",scope:{data:"=",openGameFunction:"="}};return r}function t(){}angular.module("vg.app").directive("vgGamesList",e)}(),function(){"use strict";function e(){function e(e,t,r){}var r={bindToController:!0,controller:t,controllerAs:"vm",link:e,restrict:"E",templateUrl:"./app/eventComponents/multiGameLeaderboard.directive.htm",scope:{data:"=",avatarData:"=",completeLength:"=",openPlayerFunction:"=",openLeaderboardFunction:"="}};return r}function t(){}angular.module("vg.app").directive("vgMultiGameLeaderboard",e)}(),function(){"use strict";function e(){function e(e,t,r){}var r={bindToController:!0,controller:t,controllerAs:"vm",link:e,restrict:"E",templateUrl:"./app/eventComponents/singleGameLeaderboard.directive.htm",scope:{data:"=",avatarData:"=",completeLength:"=",openLeaderboardFunction:"="}};return r}function t(){}angular.module("vg.app").directive("vgSingleGameLeaderboard",e)}(),function(){"use strict";function e(){function e(e,t,r){}var r={bindToController:!0,controller:t,controllerAs:"vm",link:e,restrict:"E",templateUrl:"./app/eventComponents/stickyMessage.directive.htm",scope:{properties:"="}};return r}function t(e){}angular.module("vg.app").directive("vgStickyMessage",e),t.$inject=["$timeout"]}(),function(){"use strict";function e(e,t,r,n,o){function a(){e(function(){angular.element(".dropdown-button").dropdown({inDuration:300,outDuration:225,constrain_width:!1,hover:!1,gutter:-114,belowOrigin:!0})},400)}function i(){o.logOut(),r.location.reload()}var s=this;s.logOut=i,a()}angular.module("vg.app").controller("HeaderController",e),e.$inject=["$timeout","$rootScope","$window","$state","authService"]}(),function(){"use strict";function e(){return function(e,t,r){var n=[];return angular.forEach(e,function(e,t){e.key=t,n.push(e)}),n.sort(function(e,r){return e[t]>r[t]?1:-1}),r&&n.reverse(),n}}angular.module("vg.app").filter("orderObjectBy",e)}(),function(){"use strict";function e(e,t,r,n,o,a,i){function s(){i.getAvatarData().then(function(e){c.avatarData=e}),n(function(){i.getBadgesData(e.profile.userName).then(function(e){c.badgesData=e})},500)}function l(){c.disableButton=!0,a.setAPIKey("Client-ID f53d6d5833b07bc"),a.upload(c.file).then(function(r){i.saveAvatarLink(r[0].link,e.profile.userName),Materialize.toast("Your avatar was uploaded",4e3),n(function(){t.go("home")},1e3)})}var c=this;c.uploadAvatar=l,s()}angular.module("vg.app").controller("AvatarController",e),e.$inject=["$rootScope","$state","$stateParams","$timeout","Upload","imgur","profileService"]}(),function(){"use strict";function e(e,t,r,n){function o(){e.pwChangeForm.$valid&&n.$changePassword({email:n.$getAuth().password.email,oldPassword:a.inputCurrentPassword,newPassword:a.inputNewPassword}).then(function(){Materialize.toast("Your password was changed.",4e3),t(function(){r.go("home")},1e3)})["catch"](function(e){"INVALID_PASSWORD"===e.code&&(a.showChangePasswordMessage=!0)})}var a=this;a.submitChangePassword=o}angular.module("vg.app").controller("ChangePasswordController",e),e.$inject=["$scope","$timeout","$state","AuthWrapper"]}(),function(){"use strict";function e(e,t){}angular.module("vg.app").controller("HomeController",e),e.$inject=["$scope","$timeout"]}(),function(){"use strict";function e(e,t,r,n,o){function a(){i().then(function(e){s.profileScoreData=e}),n.getAvatarData().then(function(e){s.avatarData=e})}function i(){var t=e.defer(),n=new Firebase(o.FBURL),a=r(n.child("badges"));return a.$loaded(function(){t.resolve(a)}),t.promise}var s=this;a()}angular.module("vg.app").controller("LeaderboardController",e),e.$inject=["$q","$timeout","$firebaseArray","profileService","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,r,n,o,a,i,s,l){function c(){s.getUserData(t.username).then(function(e){u.profileData=e,s.getTournamentHistory(u.profileData).then(function(e){var r=e;u.eventStandings=s.getTournamentStandings(r,t.username)}),$(".collapsible").collapsible({accordion:!0})}),s.getAvatarData().then(function(e){u.avatarData=e}),s.getBadgesData(t.username).then(function(e){u.badgesData=e})}var u=this;c()}angular.module("vg.app").controller("ProfileController",e),e.$inject=["$scope","$stateParams","$q","$timeout","$state","$firebaseArray","authService","profileService","eventService"]}(),function(){"use strict";function e(e,t,r,n,o,a){function i(){var e=t.defer(),r=new Firebase(a.FBURL),o=n(r.child("avatars"));return o.$loaded(function(){e.resolve(o)}),e.promise}function s(e){var r=t.defer(),o=new Firebase(a.FBURL),i=n(o.child("badges").child(e));return i.$loaded(function(){r.resolve(i)}),r.promise}function l(e){var r=t.defer(),n=(new Firebase(a.FBURL),[]);for(var o in e.pledgedTo)n.push(o);return r.resolve(n),r.promise}function c(e,t){var r=new Firebase(a.FBURL),i=[];return e.forEach(function(e){o.getEventProperties(e).then(function(o){o.$loaded().then(function(){if("concluded"===o.state){var a=n(r.child("standings").child(e));a.$loaded().then(function(){i.push(a[t]?{name:o.name,premier:o.premier?!0:null,shortName:e,state:"concluded",color:o.color,position:a[t]}:{name:o.name,premier:o.premier?!0:null,shortName:e,state:"concluded",color:o.color,position:-1})})}else("inprogress"===o.state||"upcoming"===o.state)&&i.push({name:o.name,premier:o.premier?!0:null,shortName:e,color:o.color,state:o.state})})})}),i}function u(e){var n=t.defer(),o=new Firebase(a.FBURL),i=r(o.child("users"));return i.$loaded(function(){i.forEach(function(t){t.userName===e&&n.resolve(t)})}),n.promise}function d(e,t){var r=new Firebase(a.FBURL),o=n(r.child("avatars"));o.$loaded(function(){o[t]=e,o.$save()})}this.getAvatarData=i,this.getBadgesData=s,this.getTournamentHistory=l,this.getTournamentStandings=c,this.getUserData=u,this.saveAvatarLink=d}angular.module("vg.app").service("profileService",e),e.$inject=["$rootScope","$q","$firebaseArray","$firebaseObject","eventService","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,r,n,o,a,i,s){function l(){i.loginToAccount(d.loginEmail,d.loginPassword).then(function(e){if(d.showInvalidUserError=!1,d.showInvalidPasswordError=!1,"LOGIN_SUCCESS"===e)o.go("home");else{if("INVALID_USER"===e)return void(d.showInvalidUserError=!0);"INVALID_PASSWORD"===e&&(d.showInvalidPasswordError=!0)}})}function c(){return d.loginEmail?void s.$resetPassword({email:d.loginEmail}).then(function(){d.showPasswordResetEmailMessage=!1,Materialize.toast("A password reset email has been sent to "+d.loginEmail+".",4e3)}):void(d.showPasswordResetEmailMessage=!0)}function u(){i.checkIfUserExists(d.newUsername).then(function(e){return d.showDuplicateUserError=!1,d.showEmailTakenError=!1,e?void(d.showDuplicateUserError=!0):void i.createNewUser(d.newEmail,d.newPassword,d.newUsername).then(function(e){return"EMAIL_TAKEN"===e?void(d.showEmailTakenError=!0):void("ACCOUNT_CREATED"===e&&o.go("profile",{username:d.newUsername}))})})}var d=this;d.loginToAccount=l,d.passwordReset=c,d.submitNewAccount=u}angular.module("vg.app").controller("RegController",e),e.$inject=["$scope","$rootScope","$timeout","$window","$state","$firebaseObject","authService","AuthWrapper"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJhcHAuY29uZmlnLmpzIiwiYXBwLm1pbi5qcyIsImFwcC5ydW4uanMiLCJhdXRoL2F1dGguc2VydmljZS5qcyIsImF1dGgvYXV0aHdyYXBwZXIuZmFjdG9yeS5qcyIsImV2ZW50L2V2ZW50LnNlcnZpY2UuanMiLCJldmVudC9tYWluLmNvbnRyb2xsZXIuanMiLCJldmVudC90ZWFtLnNlcnZpY2UuanMiLCJldmVudENvbXBvbmVudHMvZ2FtZXNMaXN0LmRpcmVjdGl2ZS5qcyIsImV2ZW50Q29tcG9uZW50cy9tdWx0aUdhbWVMZWFkZXJib2FyZC5kaXJlY3RpdmUuanMiLCJldmVudENvbXBvbmVudHMvc2luZ2xlR2FtZUxlYWRlcmJvYXJkLmRpcmVjdGl2ZS5qcyIsImV2ZW50Q29tcG9uZW50cy9zdGlja3lNZXNzYWdlLmRpcmVjdGl2ZS5qcyIsImhlYWRlci9oZWFkZXIuY29udHJvbGxlci5qcyIsImhlbHBlcnMvb3JkZXJPYmplY3RCeS5maWx0ZXIuanMiLCJob21lL2F2YXRhci5jb250cm9sbGVyLmpzIiwiaG9tZS9jaGFuZ2VQYXNzd29yZC5jb250cm9sbGVyLmpzIiwiaG9tZS9ob21lLmNvbnRyb2xsZXIuanMiLCJob21lL2xlYWRlcmJvYXJkLmNvbnRyb2xsZXIuanMiLCJob21lL3Byb2ZpbGUuY29udHJvbGxlci5qcyIsImhvbWUvcHJvZmlsZS5zZXJ2aWNlLmpzIiwiaG9tZS9yZWcuY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJvdGhlcndpc2UiLCJzdGF0ZSIsInVybCIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsInJlc29sdmUiLCJjdXJyZW50QXV0aCIsIkF1dGhXcmFwcGVyIiwiJHJlcXVpcmVBdXRoIiwiY29uc3RhbnQiLCJGQlVSTCIsIiRpbmplY3QiLCJydW4iLCIkcm9vdFNjb3BlIiwiJGxvY2F0aW9uIiwiJHN0YXRlIiwiJGZpcmViYXNlT2JqZWN0IiwiRklSRUJBU0VEQVRBIiwiJG9uIiwiZXZlbnQiLCJ0b1N0YXRlIiwidG9QYXJhbXMiLCJmcm9tU3RhdGUiLCJmcm9tUGFyYW1zIiwiZXJyb3IiLCJnbyIsIiRnZXRBdXRoIiwiYXV0aERhdGEiLCJyZWYiLCJGaXJlYmFzZSIsInByb2ZpbGVEYXRhIiwiY2hpbGQiLCJ1aWQiLCIkYmluZFRvIiwidGhlbiIsInVuYmluZCIsInVuYmluZEZ1bmN0aW9uIiwiYXV0aFNlcnZpY2UiLCIkcSIsIiR3aW5kb3ciLCIkdGltZW91dCIsImNoZWNrSWZVc2VyRXhpc3RzIiwiaW5wdXRVc2VybmFtZSIsImRlZmVycmVkIiwiZGVmZXIiLCJkb2VzVXNlckV4aXN0IiwidXNlcnNSZWYiLCJvbmNlIiwiZGF0YVNuYXBzaG90IiwiZm9yRWFjaCIsInVzZXIiLCJ2YWwiLCJ1c2VyTmFtZSIsInByb21pc2UiLCJjcmVhdGVOZXdVc2VyIiwiaW5wdXRFbWFpbCIsImlucHV0UGFzc3dvcmQiLCIkY3JlYXRlVXNlciIsImVtYWlsIiwicGFzc3dvcmQiLCJ1c2VyRGF0YSIsInNldCIsInJvbGUiLCJlcnJvckRhdGEiLCJjb25zb2xlIiwiY29kZSIsIiRhdXRoV2l0aFBhc3N3b3JkIiwibG9naW5Ub0FjY291bnQiLCJsb2dPdXQiLCIkdW5hdXRoIiwidGhpcyIsInRlc3REYXRhIiwic2VydmljZSIsIiRmaXJlYmFzZUF1dGgiLCJmYWN0b3J5IiwiZXZlbnRTZXJ2aWNlIiwiJGZpbHRlciIsIiRmaXJlYmFzZUFycmF5IiwiY3JlYXRlTXVsdGlHYW1lRmluYWxTdGFuZGluZ3MiLCJpbnB1dEV2ZW50IiwiZ2V0TXVsdGlHYW1lTGVhZGVyYm9hcmQiLCJtb2RlbCIsImlucHV0RXZlbnRTdGFuZGluZ3MiLCIkbG9hZGVkIiwic3RhbmRpbmciLCJrZXkiLCJwb3NpdGlvbiIsIiRzYXZlIiwiZ2V0RXZlbnRQcm9wZXJ0aWVzIiwiZXZlbnRQcm9wZXJ0aWVzIiwiZ2V0R2FtZURhdGEiLCJpbnB1dEdhbWUiLCJnZXRHYW1lc0xpc3QiLCJnYW1lc0xpc3QiLCJnYW1lIiwiY2FtZWxOYW1lIiwicGxheWVyUG9pbnRzIiwic2NvcmVzIiwic2NvcmVzQXJyYXkiLCIkIiwibWFwIiwiZWwiLCJ0b3RhbEF3YXJkIiwiaSIsImxlbmd0aCIsInBvaW50cyIsImhhdmVCb3R0b21TY29yZXJzRmxvb3IiLCJmbG9vclJhbmdlIiwiZ2V0U2NvcmVDb3VudE9mIiwiaiIsImdldFNpbmdsZUdhbWVMZWFkZXJib2FyZCIsImxlYWRlcmJvYXJkRGF0YSIsImdldFBsYXllclNjb3JlcyIsImlucHV0R2FtZXNMaXN0IiwiaW5wdXRQbGF5ZXIiLCJkaXNwbGF5U2NvcmVzIiwibmV3U2NvcmVPYmplY3QiLCJzY29yZSIsInBvaW50c0Vhcm5lZCIsImlucFVybCIsInR3aXRjaFVybCIsIm1hbWVWZXJzaW9uIiwicHVzaCIsIkV2ZW50TWFpbkNvbnRyb2xsZXIiLCIkc2NvcGUiLCIkc3RhdGVQYXJhbXMiLCJwcm9maWxlU2VydmljZSIsInRlYW1TZXJ2aWNlIiwiY2xvc2VHYW1lTW9kYWwiLCJlbGVtZW50IiwiY2xvc2VNb2RhbCIsImNsb3NlTXVsdGlHYW1lTGVhZGVyYm9hcmRNb2RhbCIsImNsb3NlUGxheWVyTW9kYWwiLCJjcmVhdGVUZWFtIiwidm0iLCJldmVudE5hbWUiLCJuZXdUZWFtIiwiTWF0ZXJpYWxpemUiLCJ0b2FzdCIsInNob3J0TmFtZSIsImRldGVybWluZVBvaW50cyIsImlucHV0U2NvcmVEYXRhIiwiaW5wdXRJbmRleCIsInVzZXJHYW1lUG9pbnRzIiwic29ydGVkU2NvcmVzIiwiZ2FtZVNjb3JlcyIsImdldEZpcnN0UGxhY2VTY29yZXMiLCJnYW1lTGlzdCIsImZpcnN0U2NvcmUiLCJnb1RvUGxheWVyUHJvZmlsZSIsInVzZXJuYW1lIiwiaW5pdEV2ZW50IiwiZm9ybWF0IiwibXVsdGlHYW1lIiwibGVhZGVyYm9hcmQiLCJsZWFkZXJib2FyZExlbmd0aCIsInN1bW1hcml6ZWRMZWFkZXJib2FyZCIsInNsaWNlIiwidGVhbUJhc2VkIiwiZ2V0VGVhbUxpc3QiLCJ0ZWFtTGlzdCIsImNvbGxhcHNpYmxlIiwiYWNjb3JkaW9uIiwiZ2V0QXZhdGFyRGF0YSIsImF2YXRhckRhdGEiLCJvcGVuQmFkZ2VzTW9kYWwiLCJvcGVuTW9kYWwiLCJzY3JvbGxUb3AiLCJvcGVuR2FtZU1vZGFsIiwiaW5wdXRHYW1lTmFtZSIsImdhbWVEYXRhIiwiJGlkIiwib3Blbk1hbmFnZW1lbnRNb2RhbCIsIm9wZW5NdWx0aUdhbWVMZWFkZXJib2FyZE1vZGFsIiwiY29tcGxldGVMZWFkZXJib2FyZCIsIm9wZW5QbGF5ZXJNb2RhbCIsImZvY3VzUGxheWVyIiwicGxheWVyU2NvcmVzIiwib3BlbkdhbWVNb2RhbEZyb21QbGF5ZXJNb2RhbCIsIm9wZW5QbGF5ZXJNb2RhbEZyb21HYW1lTW9kYWwiLCJvcGVuUGxheWVyTW9kYWxGcm9tTGVhZGVyYm9hcmRNb2RhbCIsIm9wZW5SdWxlc01vZGFsIiwiaW5wdXROZXdUZWFtUHJvcGVydGllcyIsInRlYW1Qb29sIiwiZnVsbE5hbWUiLCJmb3JtYWxOYW1lIiwidmdHYW1lc0xpc3QiLCJsaW5rIiwic2NvcGUiLCJhdHRycyIsImRpcmVjdGl2ZSIsImJpbmRUb0NvbnRyb2xsZXIiLCJHYW1lc0xpc3RDb250cm9sbGVyIiwiY29udHJvbGxlckFzIiwicmVzdHJpY3QiLCJkYXRhIiwib3BlbkdhbWVGdW5jdGlvbiIsInZnTXVsdGlHYW1lTGVhZGVyYm9hcmQiLCJNdWx0aUdhbWVMZWFkZXJib2FyZENvbnRyb2xsZXIiLCJjb21wbGV0ZUxlbmd0aCIsIm9wZW5QbGF5ZXJGdW5jdGlvbiIsIm9wZW5MZWFkZXJib2FyZEZ1bmN0aW9uIiwidmdTaW5nbGVHYW1lTGVhZGVyYm9hcmQiLCJTaW5nbGVHYW1lTGVhZGVyYm9hcmRDb250cm9sbGVyIiwidmdTdGlja3lNZXNzYWdlIiwiU3RpY2t5TWVzc2FnZUNvbnRyb2xsZXIiLCJwcm9wZXJ0aWVzIiwiSGVhZGVyQ29udHJvbGxlciIsImFjdGl2YXRlIiwiZHJvcGRvd24iLCJpbkR1cmF0aW9uIiwib3V0RHVyYXRpb24iLCJjb25zdHJhaW5fd2lkdGgiLCJob3ZlciIsImd1dHRlciIsImJlbG93T3JpZ2luIiwibG9jYXRpb24iLCJyZWxvYWQiLCJvcmRlck9iamVjdEJ5IiwiaXRlbXMiLCJmaWVsZCIsInJldmVyc2UiLCJmaWx0ZXJlZCIsIml0ZW0iLCJzb3J0IiwiYSIsImIiLCJmaWx0ZXIiLCJBdmF0YXJDb250cm9sbGVyIiwiVXBsb2FkIiwiaW1ndXIiLCJnZXRCYWRnZXNEYXRhIiwicHJvZmlsZSIsImJhZGdlc0RhdGEiLCJ1cGxvYWRBdmF0YXIiLCJkaXNhYmxlQnV0dG9uIiwic2V0QVBJS2V5IiwidXBsb2FkIiwiZmlsZSIsInNhdmVBdmF0YXJMaW5rIiwiQ2hhbmdlUGFzc3dvcmRDb250cm9sbGVyIiwic3VibWl0Q2hhbmdlUGFzc3dvcmQiLCJwd0NoYW5nZUZvcm0iLCIkdmFsaWQiLCIkY2hhbmdlUGFzc3dvcmQiLCJvbGRQYXNzd29yZCIsImlucHV0Q3VycmVudFBhc3N3b3JkIiwibmV3UGFzc3dvcmQiLCJpbnB1dE5ld1Bhc3N3b3JkIiwic2hvd0NoYW5nZVBhc3N3b3JkTWVzc2FnZSIsIkhvbWVDb250cm9sbGVyIiwiTGVhZGVyYm9hcmRDb250cm9sbGVyIiwiZ2V0UHJvZmlsZVNjb3JlcyIsInByb2ZpbGVTY29yZURhdGEiLCJQcm9maWxlQ29udHJvbGxlciIsImdldFVzZXJEYXRhIiwiZ2V0VG91cm5hbWVudEhpc3RvcnkiLCJ0b3VybmFtZW50SGlzdG9yeURhdGEiLCJldmVudFN0YW5kaW5ncyIsImdldFRvdXJuYW1lbnRTdGFuZGluZ3MiLCJpbnB1dFVzZXIiLCJpbnB1dFVzZXJEYXRhIiwiZXZlbnRzQXJyYXkiLCJwbGVkZ2VkVG8iLCJpbnB1dFRvdXJuYW1lbnRIaXN0b3J5IiwiZXZlbnRTdGFuZGluZ0RhdGEiLCJuYW1lIiwicHJlbWllciIsImNvbG9yIiwidXNlcnNEYXRhIiwiaW5wdXRMaW5rIiwiUmVnQ29udHJvbGxlciIsImxvZ2luRW1haWwiLCJsb2dpblBhc3N3b3JkIiwic2hvd0ludmFsaWRVc2VyRXJyb3IiLCJzaG93SW52YWxpZFBhc3N3b3JkRXJyb3IiLCJwYXNzd29yZFJlc2V0IiwiJHJlc2V0UGFzc3dvcmQiLCJzaG93UGFzc3dvcmRSZXNldEVtYWlsTWVzc2FnZSIsInN1Ym1pdE5ld0FjY291bnQiLCJuZXdVc2VybmFtZSIsInVzZXJFeGlzdHMiLCJzaG93RHVwbGljYXRlVXNlckVycm9yIiwic2hvd0VtYWlsVGFrZW5FcnJvciIsIm5ld0VtYWlsIl0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNBLFlBRUFBLFNBQ0FDLE9BQUEsVUFFQSxZQUdBLFlBQ0EsV0FDQSxtQkFDQSxVQUNBLGVBQ0EsZUNkQSxXQUNBLFlBVUEsU0FBQUMsR0FBQUMsRUFBQUMsR0FHQUEsRUFBQUMsVUFBQSxLQUVBRixFQUNBRyxNQUFBLFFBQ0FDLElBQUEsSUFDQUMsWUFBQSxvQkFDQUMsV0FBQSwyQkFHQUgsTUFBQSxtQkFDQUMsSUFBQSxtQkFDQUMsWUFBQSxvQkFDQUMsV0FBQSx5QkFHQUgsTUFBQSxXQUNBQyxJQUFBLHFCQUNBQyxZQUFBLHdCQUNBQyxXQUFBLGlDQUdBSCxNQUFBLGVBQ0FDLElBQUEsZUFDQUMsWUFBQSw0QkFDQUMsV0FBQSx5Q0FHQUgsTUFBQSxTQUNBQyxJQUFBLHlCQUNBQyxZQUFBLHNCQUNBQyxXQUFBLGlDQUdBSCxNQUFBLG1CQUNBQyxJQUFBLG1CQUNBQyxZQUFBLHVCQUNBQyxXQUFBLDZCQUVBQyxTQUNBQyxhQUFBLGNBQUEsU0FBQUMsR0FDQSxNQUFBQSxHQUFBQyxvQkFLQVAsTUFBQSxrQkFDQUMsSUFBQSxrQkFDQUMsWUFBQSwrQkFDQUMsV0FBQSx1Q0FFQUMsU0FDQUMsYUFBQSxjQUFBLFNBQUFDLEdBQ0EsTUFBQUEsR0FBQUMsb0JBL0RBYixRQUNBQyxPQUFBLFVBQ0FhLFNBQUEsZ0JBQ0FDLE1BQUEseUNBRUFiLE9BQUFBLEdDK0VDQSxFQUFPYyxTQUFXLGlCQUFrQix5QkN2RnJDLFdBQ0EsWUFNQSxTQUFBQyxHQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBVCxFQUFBVSxHQUVBSixFQUFBSyxJQUFBLG9CQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBQ0Esa0JBQUFBLEdBQ0FULEVBQUFVLEdBQUEscUJBSUFaLEVBQUFLLElBQUEsc0JBQUEsV0FJQSxHQUFBWCxFQUFBbUIsV0FBQSxDQUVBLEdBQUFDLEdBQUFwQixFQUFBbUIsV0FDQUUsRUFBQSxHQUFBQyxVQUFBWixFQUFBUCxPQUVBb0IsRUFBQWQsRUFBQVksRUFBQUcsTUFBQSxTQUFBQSxNQUFBSixFQUFBSyxLQUNBRixHQUFBRyxRQUFBcEIsRUFBQSxXQUFBcUIsS0FBQSxTQUFBQyxHQUNBdEIsRUFBQXVCLGVBQUFELE9BdkJBeEMsUUFDQUMsT0FBQSxVQUNBZ0IsSUFBQUEsR0RxSElBLEVBQUlELFNBQVcsYUFBYyxZQUFhLFNBQVUsa0JBQW1CLGNBQWUsbUJFMUgxRixXQUNBLFlBT0EsU0FBQTBCLEdBQUFDLEVBQUF6QixFQUFBRSxFQUFBd0IsRUFBQUMsRUFBQXhCLEVBQUFULEVBQUFVLEdBV0EsUUFBQXdCLEdBQUFDLEdBRUEsR0FBQUMsR0FBQUwsRUFBQU0sUUFFQUMsR0FBQSxFQUNBQyxFQUFBLEdBQUFQLEdBQUFWLFNBQUFaLEVBQUFQLE1BQUEsU0FnQkEsT0FkQW9DLEdBQUFDLEtBQUEsUUFBQSxTQUFBQyxHQUVBUixFQUFBLFdBQ0FRLEVBQUFDLFFBQUEsU0FBQUMsR0FDQUEsRUFBQUMsTUFBQUMsV0FBQVYsSUFDQUcsR0FBQSxLQUlBRixFQUFBdEMsUUFBQXdDLE9BS0FGLEVBQUFVLFFBSUEsUUFBQUMsR0FBQUMsRUFBQUMsRUFBQWQsR0FFQSxHQUFBQyxHQUFBTCxFQUFBTSxPQXVDQSxPQXJDQXJDLEdBQUFrRCxhQUNBQyxNQUFBSCxFQUNBSSxTQUFBSCxJQUNBdEIsS0FBQSxTQUFBMEIsR0FHQSxHQUFBL0IsVUFBQVosRUFBQVAsT0FBQXFCLE1BQUEsU0FBQTZCLEVBQUE1QixLQUFBNkIsS0FFQVQsU0FBQVYsRUFDQW9CLEtBQUEsUUFFQSxTQUFBQyxHQUVBLE1BREFDLFNBQUF4QyxNQUFBdUMsR0FDQUEsRUFBQUUsT0FJQSxHQUFBcEMsVUFBQVosRUFBQVAsT0FBQXFCLE1BQUEsV0FBQUEsTUFBQVcsR0FBQW1CLElBQUEscUNBQUFuQixHQUdBbkMsRUFBQTJELG1CQUNBUixNQUFBSCxFQUNBSSxTQUFBSCxJQUNBdEIsS0FBQSxXQUNBUyxFQUFBdEMsUUFBQSx1QkF4QkFFLFNBMkJBLFNBQUF3RCxHQUVBQyxRQUFBeEMsTUFBQXVDLEdBRUEsZ0JBQUFBLEVBQUFFLE1BQ0F0QixFQUFBdEMsUUFBQTBELEVBQUFFLFFBS0F0QixFQUFBVSxRQUlBLFFBQUFjLEdBQUFaLEVBQUFDLEdBRUEsR0FBQWIsR0FBQUwsRUFBQU0sT0FtQkEsT0FqQkFyQyxHQUFBMkQsbUJBQ0FSLE1BQUFILEVBQ0FJLFNBQUFILElBQ0F0QixLQUFBLFNBQUFQLEdBRUFnQixFQUFBdEMsUUFBQSxtQkFMQUUsU0FPQSxTQUFBd0QsR0FFQSxpQkFBQUEsRUFBQUUsS0FDQXRCLEVBQUF0QyxRQUFBLGdCQUNBLHFCQUFBMEQsRUFBQUUsTUFDQXRCLEVBQUF0QyxRQUFBLHNCQUtBc0MsRUFBQVUsUUFJQSxRQUFBZSxLQUNBN0QsRUFBQThELFVBQ0F4RCxFQUFBdUIsaUJBMUdBa0MsS0FBQUMsU0FBQSxlQUVBRCxLQUFBN0Isa0JBQUFBLEVBQ0E2QixLQUFBaEIsY0FBQUEsRUFDQWdCLEtBQUFILGVBQUFBLEVBQ0FHLEtBQUFGLE9BQUFBLEVBWkF6RSxRQUNBQyxPQUFBLFVBQ0E0RSxRQUFBLGNBQUFuQyxHRitPSUEsRUFBWTFCLFNBQVcsS0FBTSxhQUFjLFNBQVUsVUFBVyxXQUFZLGtCQUFtQixjQUFlLG1CR3BQbEgsV0FDQSxZQU9BLFNBQUFKLEdBQUFrRSxFQUFBeEQsR0FFQSxHQUFBVyxHQUFBLEdBQUFDLFVBQUFaLEVBQUFQLE1BQ0EsT0FBQStELEdBQUE3QyxHQVJBakMsUUFDQUMsT0FBQSxVQUNBOEUsUUFBQSxjQUFBbkUsR0g4UElBLEVBQVlJLFNBQVcsZ0JBQWlCLG1CSW5RNUMsV0FDQSxZQU9BLFNBQUFnRSxHQUFBckMsRUFBQXNDLEVBQUE1RCxFQUFBNkQsRUFBQTVELEdBWUEsUUFBQTZELEdBQUFDLEdBR0FDLEVBQUFELEdBQUE3QyxLQUFBLFNBQUErQyxHQUVBLEdBQUFyRCxHQUFBLEdBQUFDLFVBQUFaLEVBQUFQLE9BQ0F3RSxFQUFBbEUsRUFDQVksRUFDQUcsTUFBQSxhQUNBQSxNQUFBZ0QsR0FHQUcsR0FBQUMsVUFBQWpELEtBQUEsV0FFQStDLEVBQUFoQyxRQUFBLFNBQUFtQyxHQUNBRixFQUFBRSxFQUFBQyxLQUFBRCxFQUFBRSxXQUdBSixFQUFBSyxZQVFBLFFBQUFDLEdBQUFULEdBRUEsR0FBQXBDLEdBQUFMLEVBQUFNLFFBRUFoQixFQUFBLEdBQUFDLFVBQUFaLEVBQUFQLE9BQ0ErRSxFQUFBekUsRUFDQVksRUFDQUcsTUFBQSxZQUNBQSxNQUFBZ0QsR0FDQWhELE1BQUEsY0FLQSxPQUZBWSxHQUFBdEMsUUFBQW9GLEdBRUE5QyxFQUFBVSxRQUlBLFFBQUFxQyxHQUFBWCxFQUFBWSxHQUVBLENBQUEsR0FBQWhELEdBQUFMLEVBQUFNLE9BRUEsSUFBQWYsVUFBQVosRUFBQVAsT0FjQSxNQVpBa0YsR0FBQWIsR0FBQTdDLEtBQUEsU0FBQTJELEdBRUFBLEVBQUE1QyxRQUFBLFNBQUE2QyxHQUVBQSxFQUFBQyxZQUFBSixHQUNBaEQsRUFBQXRDLFFBQUF5RixPQU9BbkQsRUFBQVUsUUFJQSxRQUFBdUMsR0FBQWIsR0FFQSxHQUFBcEMsR0FBQUwsRUFBQU0sUUFFQWhCLEVBQUEsR0FBQUMsVUFBQVosRUFBQVAsT0FDQW1GLEVBQUFoQixFQUNBakQsRUFDQUcsTUFBQSxZQUNBQSxNQUFBZ0QsR0FDQWhELE1BQUEsZUFPQSxPQUpBOEQsR0FBQVYsVUFBQWpELEtBQUEsV0FDQVMsRUFBQXRDLFFBQUF3RixLQUdBbEQsRUFBQVUsUUFJQSxRQUFBMkIsR0FBQUQsR0FFQSxHQUFBcEMsR0FBQUwsRUFBQU0sUUFHQW9ELElBZ0ZBLE9BOUVBSixHQUFBYixHQUFBN0MsS0FBQSxTQUFBK0MsR0FFQSxHQUFBWSxHQUFBWixDQUNBWSxHQUFBNUMsUUFBQSxTQUFBNkMsR0FFQSxHQUFBQSxFQUFBRyxPQUFBLENBR0EsR0FBQUMsR0FBQUMsRUFBQUMsSUFBQU4sRUFBQUcsT0FBQSxTQUFBSSxHQUFBLE1BQUFBLElBQ0FILEdBQUF0QixFQUFBLFdBQUFzQixFQUFBLFNBS0EsS0FBQSxHQUhBSSxHQUFBLEdBR0FDLEVBQUEsRUFBQUEsRUFBQUwsRUFBQU0sT0FBQUQsSUFFQVAsRUFBQUUsRUFBQUssR0FBQW5ELFlBQ0E0QyxFQUFBRSxFQUFBSyxHQUFBbkQsV0FDQXFELE9BQUEsSUFJQVQsRUFBQUUsRUFBQUssR0FBQW5ELFVBQUFxRCxRQUFBSCxFQUVBQSxFQUFBLElBQ0FBLEdBQUEsTUFVQU4sRUFBQXBCLEVBQUEsaUJBQUFvQixFQUFBLFVBQUEsRUFHQSxLQUFBLEdBRkFVLElBQUEsRUFDQUMsRUFBQSxFQUNBSixFQUFBLEVBQUFBLEVBQUFQLEVBQUFRLE9BQUFELEdBQUEsRUFFQSxHQUFBUCxFQUFBTyxFQUFBLElBQUFQLEVBQUFPLEdBQUFFLFFBQUFULEVBQUFPLEVBQUEsR0FBQUUsT0FHQVQsRUFBQU8sR0FBQWpCLFNBREFVLEVBQUFPLEdBQUFFLFNBQUFULEVBQUFPLEVBQUEsR0FBQUUsT0FDQVQsRUFBQU8sRUFBQSxHQUFBakIsU0FFQWlCLEVBQUEsTUFLQSxJQUFBLElBQUFBLEVBQ0FQLEVBQUFPLEdBQUFqQixTQUFBLE1BQ0EsQ0FFQSxJQUFBb0IsRUFBQSxDQUlBLElBQUEsR0FGQUUsR0FBQVosRUFBQU8sRUFBQSxHQUFBRSxPQUVBSSxFQUFBLEVBQUFBLEVBQUFiLEVBQUFRLE9BQUFLLEdBQUEsRUFDQWIsRUFBQWEsR0FBQUosU0FBQUcsSUFDQUQsR0FBQSxFQUlBRCxJQUFBLEVBR0FWLEVBQUFPLEdBQUFqQixTQUFBVSxFQUFBUSxPQUFBLEVBQUFHLEVBT0FoRSxFQUFBdEMsUUFBQTJGLEtBSUFyRCxFQUFBVSxRQUlBLFFBQUF5RCxHQUFBL0IsR0FFQSxHQUFBcEMsR0FBQUwsRUFBQU0sUUFFQWhCLEVBQUEsR0FBQUMsVUFBQVosRUFBQVAsT0FDQXFHLEVBQUFsQyxFQUNBakQsRUFDQUcsTUFBQSxZQUNBQSxNQUFBZ0QsR0FDQWhELE1BQUEsVUFLQSxPQUZBWSxHQUFBdEMsUUFBQTBHLEdBRUFwRSxFQUFBVSxRQUlBLFFBQUEyRCxHQUFBakMsRUFBQWtDLEVBQUFDLEdBRUEsR0FBQXZFLEdBQUFMLEVBQUFNLFFBRUF1RSxJQTZDQSxPQTFDQUYsR0FBQWhFLFFBQUEsU0FBQTZDLEdBRUEsR0FBQUEsRUFBQUcsT0FBQSxDQUdBLEdBQUFDLEdBQUFDLEVBQUFDLElBQUFOLEVBQUFHLE9BQUEsU0FBQUksR0FBQSxNQUFBQSxJQUNBSCxHQUFBdEIsRUFBQSxXQUFBc0IsRUFBQSxTQUtBLEtBQUEsR0FIQUksR0FBQSxHQUdBQyxFQUFBLEVBQUFBLEVBQUFMLEVBQUFNLE9BQUFELElBQUEsQ0FHQSxHQUFBTCxFQUFBSyxHQUFBbkQsV0FBQThELEVBQUEsQ0FFQSxHQUFBRSxHQUFBdEIsQ0FDQXNCLEdBQUE5QixTQUFBaUIsRUFBQSxFQUNBYSxFQUFBQyxNQUFBbkIsRUFBQUssR0FBQWMsTUFDQUQsRUFBQUUsYUFBQWhCLEVBQ0FjLEVBQUFHLE9BQUFyQixFQUFBSyxHQUFBZ0IsT0FBQXJCLEVBQUFLLEdBQUFnQixPQUFBLEtBQ0FILEVBQUFJLFVBQUF0QixFQUFBSyxHQUFBaUIsVUFBQXRCLEVBQUFLLEdBQUFpQixVQUFBLEtBQ0FKLEVBQUFLLFlBQUF2QixFQUFBSyxHQUFBa0IsWUFBQXZCLEVBQUFLLEdBQUFrQixZQUFBLEtBRUFOLEVBQUFPLEtBQUFOLEdBQ0FkLEVBQUEsRUFDQSxPQUdBQSxFQUFBLElBQ0FBLEdBQUEsT0FVQTNELEVBQUF0QyxRQUFBOEcsR0FFQXhFLEVBQUFVLFFBNVBBaUIsS0FBQVEsOEJBQUFBLEVBQ0FSLEtBQUFrQixtQkFBQUEsRUFDQWxCLEtBQUFvQixZQUFBQSxFQUNBcEIsS0FBQXNCLGFBQUFBLEVBQ0F0QixLQUFBVSx3QkFBQUEsRUFDQVYsS0FBQXdDLHlCQUFBQSxFQUNBeEMsS0FBQTBDLGdCQUFBQSxFQWJBckgsUUFDQUMsT0FBQSxVQUNBNEUsUUFBQSxlQUFBRyxHSjJnQklBLEVBQWFoRSxTQUFXLEtBQU0sVUFBVyxrQkFBbUIsaUJBQWtCLG1CS2hoQmxGLFdBQ0EsWUFPQSxTQUFBZ0gsR0FBQUMsRUFBQWhELEVBQUFpRCxFQUFBOUcsRUFBQXlCLEVBQUFxQyxFQUFBRixFQUFBdEMsRUFBQXlGLEVBQUFDLEVBQUE5RyxHQTRCQSxRQUFBK0csS0FDQXJJLFFBQUFzSSxRQUFBLGNBQUFDLGFBR0EsUUFBQUMsS0FDQXhJLFFBQUFzSSxRQUFBLDhCQUFBQyxhQUdBLFFBQUFFLEtBQ0F6SSxRQUFBc0ksUUFBQSxnQkFBQUMsYUFHQSxRQUFBRyxLQUNBTixFQUFBTSxXQUFBQyxFQUFBQyxVQUFBRCxFQUFBRSxTQUFBdEcsS0FBQSxXQUNBdUcsWUFBQUMsTUFBQSxRQUFBSixFQUFBRSxRQUFBRyxVQUFBLFlBQUEsS0FDQUwsRUFBQUUsUUFBQSxPQUlBLFFBQUFJLEdBQUFDLEVBQUFDLEdBRUEsR0FBQUMsRUFHQSxJQUFBRCxFQUFBLEdBRUEsTUFEQUMsR0FBQSxDQUlBQSxHQUFBLEdBQUFELENBRUEsSUFBQUUsR0FBQXBFLEVBQUEsV0FBQTBELEVBQUFXLFdBQUEsU0FVQSxPQVBBRCxHQUFBRixFQUFBLElBRUFFLEVBQUFGLEVBQUEsR0FBQXpCLFFBQUF3QixFQUFBeEIsUUFDQTBCLEdBQUEsR0FJQUEsRUFJQSxRQUFBRyxLQUVBWixFQUFBYSxTQUFBbEcsUUFBQSxTQUFBNkMsR0FHQSxHQUFBQSxFQUFBRyxPQUFBLENBRUEsR0FBQUMsR0FBQUMsRUFBQUMsSUFBQU4sRUFBQUcsT0FBQSxTQUFBSSxHQUFBLE1BQUFBLElBQ0FILEdBQUF0QixFQUFBLFdBQUFzQixFQUFBLFVBQ0FKLEVBQUFzRCxXQUFBbEQsRUFBQSxNQVFBLFFBQUFtRCxHQUFBbkMsR0FFQXZILFFBQUFzSSxRQUFBLGdCQUFBQyxhQUNBbkgsRUFBQVUsR0FBQSxXQUFBNkgsU0FBQXBDLElBSUEsUUFBQXFDLEtBRUE1RSxFQUFBYSxtQkFBQThDLEVBQUFDLFdBQUFyRyxLQUFBLFNBQUErQyxHQUVBcUQsRUFBQTdDLGdCQUFBUixFQUVBcUQsRUFBQTdDLGdCQUFBTixVQUFBakQsS0FBQSxXQUdBb0csRUFBQTdDLGdCQUFBK0QsT0FBQUMsV0FFQTlFLEVBQUFpQixhQUFBMEMsRUFBQUMsV0FBQXJHLEtBQUEsU0FBQStDLEdBQ0FxRCxFQUFBYSxTQUFBbEUsRUFDQWlFLE1BR0F2RSxFQUFBSyx3QkFBQXNELEVBQUFDLFdBQUFyRyxLQUFBLFNBQUErQyxHQUNBLEdBQUF5RSxHQUFBekUsQ0FDQXFELEdBQUFxQixrQkFBQUQsRUFBQWxELE9BQ0E4QixFQUFBc0Isc0JBQUFGLEVBQUFHLE1BQUEsRUFBQSxNQU1BbEYsRUFBQW1DLHlCQUFBd0IsRUFBQUMsV0FBQXJHLEtBQUEsU0FBQStDLEdBQ0EsR0FBQXlFLEdBQUF6RSxDQUNBcUQsR0FBQXFCLGtCQUFBRCxFQUFBbEQsT0FDQThCLEVBQUFzQixzQkFBQUYsSUFNQXBCLEVBQUE3QyxnQkFBQStELE9BQUFNLFdBRUEvQixFQUFBZ0MsWUFBQXpCLEVBQUFDLFdBQUFyRyxLQUFBLFNBQUErQyxHQUNBcUQsRUFBQTBCLFNBQUEvRSxJQUtBLGFBQUFxRCxFQUFBN0MsZ0JBQUF4RixPQUNBa0csRUFBQSxnQkFBQThELGFBQ0FDLFdBQUEsUUFRQXBDLEVBQUFxQyxnQkFBQWpJLEtBQUEsU0FBQStDLEdBQ0FxRCxFQUFBOEIsV0FBQW5GLElBS0EsUUFBQW9GLEtBRUExSyxRQUFBc0ksUUFBQSxnQkFBQXFDLFlBQ0EzSyxRQUFBc0ksUUFBQSx1QkFBQXNDLFVBQUEsR0FJQSxRQUFBQyxHQUFBQyxHQUVBLEdBQUE3SSxHQUFBLEdBQUFDLFVBQUFaLEVBQUFQLE1BRUFpRSxHQUFBZSxZQUFBNEMsRUFBQUMsVUFBQWtDLEdBQUF2SSxLQUFBLFNBQUErQyxHQUNBcUQsRUFBQW9DLFNBQUF6RixFQUVBcUQsRUFBQVcsV0FBQXBFLEVBQ0FqRCxFQUNBRyxNQUFBLFlBQ0FBLE1BQUF1RyxFQUFBQyxXQUNBeEcsTUFBQSxlQUNBQSxNQUFBdUcsRUFBQW9DLFNBQUFDLEtBQ0E1SSxNQUFBLGFBSUFwQyxRQUFBc0ksUUFBQSxjQUFBcUMsWUFDQTNLLFFBQUFzSSxRQUFBLHFCQUFBc0MsVUFBQSxHQUlBLFFBQUFLLEtBRUFqTCxRQUFBc0ksUUFBQSxvQkFBQXFDLFlBQ0EzSyxRQUFBc0ksUUFBQSwyQkFBQXNDLFVBQUEsR0FJQSxRQUFBTSxLQUVBbEcsRUFBQUssd0JBQUFzRCxFQUFBQyxXQUFBckcsS0FBQSxTQUFBK0MsR0FDQXFELEVBQUF3QyxvQkFBQTdGLElBR0F0RixRQUFBc0ksUUFBQSw4QkFBQXFDLFlBQ0EzSyxRQUFBc0ksUUFBQSxxQ0FBQXNDLFVBQUEsR0FJQSxRQUFBUSxHQUFBN0QsR0FFQW9CLEVBQUEwQyxZQUFBOUQsRUFFQXZDLEVBQUFxQyxnQkFBQXNCLEVBQUFDLFVBQUFELEVBQUFhLFNBQUFiLEVBQUEwQyxhQUFBOUksS0FBQSxTQUFBK0MsR0FDQXFELEVBQUEyQyxhQUFBaEcsSUFHQXRGLFFBQUFzSSxRQUFBLGdCQUFBcUMsWUFDQTNLLFFBQUFzSSxRQUFBLHVCQUFBc0MsVUFBQSxHQUlBLFFBQUFXLEdBQUF2RixHQUVBeUMsSUFFQTVGLEVBQUEsV0FDQWdJLEVBQUE3RSxJQUNBLEtBSUEsUUFBQXdGLEdBQUFqRSxHQUVBYyxJQUVBeEYsRUFBQSxXQUNBdUksRUFBQTdELElBQ0EsS0FJQSxRQUFBa0UsR0FBQWxFLEdBRUFpQixJQUVBM0YsRUFBQSxXQUNBdUksRUFBQTdELElBQ0EsS0FJQSxRQUFBbUUsS0FDQTFMLFFBQUFzSSxRQUFBLGVBQUFxQyxZQW5QQSxHQUFBaEMsR0FBQWhFLElBRUFnRSxHQUFBQyxVQUFBVixFQUFBVSxVQUVBRCxFQUFBTixlQUFBQSxFQUNBTSxFQUFBSCwrQkFBQUEsRUFDQUcsRUFBQUYsaUJBQUFBLEVBQ0FFLEVBQUFELFdBQUFBLEVBQ0FDLEVBQUFNLGdCQUFBQSxFQUNBTixFQUFBWSxvQkFBQUEsRUFDQVosRUFBQWUsa0JBQUFBLEVBQ0FmLEVBQUErQixnQkFBQUEsRUFDQS9CLEVBQUFrQyxjQUFBQSxFQUNBbEMsRUFBQTRDLDZCQUFBQSxFQUNBNUMsRUFBQXNDLG9CQUFBQSxFQUNBdEMsRUFBQXVDLDhCQUFBQSxFQUNBdkMsRUFBQXlDLGdCQUFBQSxFQUNBekMsRUFBQTZDLDZCQUFBQSxFQUNBN0MsRUFBQThDLG9DQUFBQSxFQUNBOUMsRUFBQStDLGVBQUFBLEVBRUE5QixJQTdCQTVKLFFBQ0FDLE9BQUEsVUFDQVEsV0FBQSxzQkFBQXVILEdMOHdCSUEsRUFBb0JoSCxTQUFXLFNBQVUsVUFBVyxlQUFnQixTQUFVLFdBQVksaUJBQWtCLGVBQWdCLGNBQWUsaUJBQWtCLGNBQWUsbUJNbnhCaEwsV0FDQSxZQU9BLFNBQUFvSCxHQUFBekYsRUFBQXVDLEVBQUE3RCxFQUFBQyxHQU9BLFFBQUFvSCxHQUFBdEQsRUFBQXVHLEdBRUEsR0FBQTNJLEdBQUFMLEVBQUFNLFFBRUFoQixFQUFBLEdBQUFDLFVBQUFaLEVBQUFQLE9BQ0E2SyxFQUFBdkssRUFDQVksRUFDQUcsTUFBQSxZQUNBQSxNQUFBZ0QsR0FDQWhELE1BQUEsWUFhQSxPQVZBd0osR0FBQXBHLFVBQUFqRCxLQUFBLFdBRUFxSixFQUFBRCxFQUFBM0MsWUFDQTZDLFNBQUFGLEVBQUFHLFlBRUFGLEVBQUFoRyxRQUNBNUMsRUFBQXRDLFlBSUFzQyxFQUFBVSxRQUlBLFFBQUEwRyxHQUFBaEYsR0FFQSxHQUFBcEMsR0FBQUwsRUFBQU0sUUFFQWhCLEVBQUEsR0FBQUMsVUFBQVosRUFBQVAsT0FDQXNKLEVBQUFuRixFQUNBakQsRUFDQUcsTUFBQSxZQUNBQSxNQUFBZ0QsR0FDQWhELE1BQUEsWUFPQSxPQUpBaUksR0FBQTdFLFVBQUFqRCxLQUFBLFdBQ0FTLEVBQUF0QyxRQUFBMkosS0FHQXJILEVBQUFVLFFBL0NBaUIsS0FBQStELFdBQUFBLEVBQ0EvRCxLQUFBeUYsWUFBQUEsRUFSQXBLLFFBQ0FDLE9BQUEsVUFDQTRFLFFBQUEsY0FBQXVELEdONjBCSUEsRUFBWXBILFNBQVcsS0FBTSxpQkFBa0Isa0JBQW1CLG1CT2wxQnRFLFdBQ0EsWUFPQSxTQUFBK0ssS0FtQkEsUUFBQUMsR0FBQUMsRUFBQTNELEVBQUE0RCxJQWRBLEdBQUFDLElBQ0FDLGtCQUFBLEVBQ0EzTCxXQUFBNEwsRUFDQUMsYUFBQSxLQUNBTixLQUFBQSxFQUNBTyxTQUFBLElBQ0EvTCxZQUFBLGdEQUNBeUwsT0FDQU8sS0FBQSxJQUNBQyxpQkFBQSxLQUdBLE9BQUFOLEdBT0EsUUFBQUUsTUE3QkFyTSxRQUNBQyxPQUFBLFVBQ0FrTSxVQUFBLGNBQUFKLE1DTEEsV0FDQSxZQU9BLFNBQUFXLEtBc0JBLFFBQUFWLEdBQUFDLEVBQUEzRCxFQUFBNEQsSUFqQkEsR0FBQUMsSUFDQUMsa0JBQUEsRUFDQTNMLFdBQUFrTSxFQUNBTCxhQUFBLEtBQ0FOLEtBQUFBLEVBQ0FPLFNBQUEsSUFDQS9MLFlBQUEsMkRBQ0F5TCxPQUNBTyxLQUFBLElBQ0EvQixXQUFBLElBQ0FtQyxlQUFBLElBQ0FDLG1CQUFBLElBQ0FDLHdCQUFBLEtBR0EsT0FBQVgsR0FPQSxRQUFBUSxNQWhDQTNNLFFBQ0FDLE9BQUEsVUFDQWtNLFVBQUEseUJBQUFPLE1DTEEsV0FDQSxZQU9BLFNBQUFLLEtBcUJBLFFBQUFmLEdBQUFDLEVBQUEzRCxFQUFBNEQsSUFoQkEsR0FBQUMsSUFDQUMsa0JBQUEsRUFDQTNMLFdBQUF1TSxFQUNBVixhQUFBLEtBQ0FOLEtBQUFBLEVBQ0FPLFNBQUEsSUFDQS9MLFlBQUEsNERBQ0F5TCxPQUNBTyxLQUFBLElBQ0EvQixXQUFBLElBQ0FtQyxlQUFBLElBQ0FFLHdCQUFBLEtBR0EsT0FBQVgsR0FPQSxRQUFBYSxNQS9CQWhOLFFBQ0FDLE9BQUEsVUFDQWtNLFVBQUEsMEJBQUFZLE1DTEEsV0FDQSxZQU9BLFNBQUFFLEtBa0JBLFFBQUFqQixHQUFBQyxFQUFBM0QsRUFBQTRELElBYkEsR0FBQUMsSUFDQUMsa0JBQUEsRUFDQTNMLFdBQUF5TSxFQUNBWixhQUFBLEtBQ0FOLEtBQUFBLEVBQ0FPLFNBQUEsSUFDQS9MLFlBQUEsb0RBQ0F5TCxPQUNBa0IsV0FBQSxLQUdBLE9BQUFoQixHQU9BLFFBQUFlLEdBQUFySyxJQTVCQTdDLFFBQ0FDLE9BQUEsVUFDQWtNLFVBQUEsa0JBQUFjLEdWaytCSUMsRUFBd0JsTSxTQUFXLGVXditCdkMsV0FDQSxZQU9BLFNBQUFvTSxHQUFBdkssRUFBQTNCLEVBQUEwQixFQUFBeEIsRUFBQXNCLEdBVUEsUUFBQTJLLEtBQ0F4SyxFQUFBLFdBQ0E3QyxRQUFBc0ksUUFBQSxvQkFDQWdGLFVBQ0FDLFdBQUEsSUFDQUMsWUFBQSxJQUNBQyxpQkFBQSxFQUNBQyxPQUFBLEVBQ0FDLE9BQUEsS0FDQUMsYUFBQSxLQUVBLEtBR0EsUUFBQW5KLEtBQ0EvQixFQUFBK0IsU0FDQTdCLEVBQUFpTCxTQUFBQyxTQXZCQSxHQUFBbkYsR0FBQWhFLElBQ0FnRSxHQUFBbEUsT0FBQUEsRUFFQTRJLElBWEFyTixRQUNBQyxPQUFBLFVBQ0FRLFdBQUEsbUJBQUEyTSxHWHlnQ0lBLEVBQWlCcE0sU0FBVyxXQUFZLGFBQWMsVUFBVyxTQUFVLGtCWTlnQy9FLFdBQ0EsWUFNQSxTQUFBK00sS0FDQSxNQUFBLFVBQUFDLEVBQUFDLEVBQUFDLEdBQ0EsR0FBQUMsS0FhQSxPQVhBbk8sU0FBQXNELFFBQUEwSyxFQUFBLFNBQUFJLEVBQUExSSxHQUNBMEksRUFBQTFJLElBQUFBLEVBQ0F5SSxFQUFBcEcsS0FBQXFHLEtBR0FELEVBQUFFLEtBQUEsU0FBQUMsRUFBQUMsR0FDQSxNQUFBRCxHQUFBTCxHQUFBTSxFQUFBTixHQUFBLEVBQUEsS0FHQUMsR0FBQUMsRUFBQUQsVUFFQUMsR0FuQkFuTyxRQUNBQyxPQUFBLFVBQ0F1TyxPQUFBLGdCQUFBVCxNQ0xBLFdBQ0EsWUFPQSxTQUFBVSxHQUFBdk4sRUFBQUUsRUFBQThHLEVBQUFyRixFQUFBNkwsRUFBQUMsRUFBQXhHLEdBVUEsUUFBQWtGLEtBQ0FsRixFQUFBcUMsZ0JBQUFqSSxLQUFBLFNBQUErQyxHQUNBcUQsRUFBQThCLFdBQUFuRixJQUlBekMsRUFBQSxXQUNBc0YsRUFBQXlHLGNBQUExTixFQUFBMk4sUUFBQXBMLFVBQUFsQixLQUFBLFNBQUErQyxHQUNBcUQsRUFBQW1HLFdBQUF4SixLQUVBLEtBR0EsUUFBQXlKLEtBRUFwRyxFQUFBcUcsZUFBQSxFQUVBTCxFQUFBTSxVQUFBLDZCQUNBTixFQUFBTyxPQUFBdkcsRUFBQXdHLE1BQUE1TSxLQUFBLFNBQUErQyxHQUNBNkMsRUFBQWlILGVBQUE5SixFQUFBLEdBQUEwRyxLQUFBOUssRUFBQTJOLFFBQUFwTCxVQUNBcUYsWUFBQUMsTUFBQSwyQkFBQSxLQUVBbEcsRUFBQSxXQUNBekIsRUFBQVUsR0FBQSxTQUNBLE9BL0JBLEdBQUE2RyxHQUFBaEUsSUFDQWdFLEdBQUFvRyxhQUFBQSxFQUVBMUIsSUFYQXJOLFFBQ0FDLE9BQUEsVUFDQVEsV0FBQSxtQkFBQWdPLEdib2xDSUEsRUFBaUJ6TixTQUFXLGFBQWMsU0FBVSxlQUFnQixXQUFZLFNBQVUsUUFBUyxxQmN6bEN2RyxXQUNBLFlBT0EsU0FBQXFPLEdBQUFwSCxFQUFBcEYsRUFBQXpCLEVBQUFSLEdBU0EsUUFBQTBPLEtBRUFySCxFQUFBc0gsYUFBQUMsUUFFQTVPLEVBQUE2TyxpQkFDQTFMLE1BQUFuRCxFQUFBbUIsV0FBQWlDLFNBQUFELE1BQ0EyTCxZQUFBL0csRUFBQWdILHFCQUNBQyxZQUFBakgsRUFBQWtILG1CQUNBdE4sS0FBQSxXQUVBdUcsWUFBQUMsTUFBQSw2QkFBQSxLQUNBbEcsRUFBQSxXQUNBekIsRUFBQVUsR0FBQSxTQUNBLE9BVEFsQixTQVdBLFNBQUFpQixHQUVBLHFCQUFBQSxFQUFBeUMsT0FDQXFFLEVBQUFtSCwyQkFBQSxLQXhCQSxHQUFBbkgsR0FBQWhFLElBRUFnRSxHQUFBMkcscUJBQUFBLEVBVkF0UCxRQUNBQyxPQUFBLFVBQ0FRLFdBQUEsMkJBQUE0TyxHZGtvQ0lBLEVBQXlCck8sU0FBVyxTQUFVLFdBQVksU0FBVSxrQmV2b0N4RSxXQUNBLFlBT0EsU0FBQStPLEdBQUE5SCxFQUFBcEYsSUFMQTdDLFFBQ0FDLE9BQUEsVUFDQVEsV0FBQSxpQkFBQXNQLEdmb3BDSUEsRUFBZS9PLFNBQVcsU0FBVSxlZ0J6cEN4QyxXQUNBLFlBT0EsU0FBQWdQLEdBQUFyTixFQUFBRSxFQUFBcUMsRUFBQWlELEVBQUE3RyxHQVNBLFFBQUErTCxLQUNBNEMsSUFBQTFOLEtBQUEsU0FBQStDLEdBQ0FxRCxFQUFBdUgsaUJBQUE1SyxJQUdBNkMsRUFBQXFDLGdCQUFBakksS0FBQSxTQUFBK0MsR0FDQXFELEVBQUE4QixXQUFBbkYsSUFJQSxRQUFBMkssS0FFQSxHQUFBak4sR0FBQUwsRUFBQU0sUUFDQWhCLEVBQUEsR0FBQUMsVUFBQVosRUFBQVAsT0FFQW1QLEVBQUFoTCxFQUNBakQsRUFDQUcsTUFBQSxVQU9BLE9BSkE4TixHQUFBMUssUUFBQSxXQUNBeEMsRUFBQXRDLFFBQUF3UCxLQUdBbE4sRUFBQVUsUUE5QkEsR0FBQWlGLEdBQUFoRSxJQUVBMEksS0FWQXJOLFFBQ0FDLE9BQUEsVUFDQVEsV0FBQSx3QkFBQXVQLEdoQm9zQ0lBLEVBQXNCaFAsU0FBVyxLQUFNLFdBQVksaUJBQWtCLGlCQUFrQixtQmlCenNDM0YsV0FDQSxZQU9BLFNBQUFtUCxHQUFBbEksRUFBQUMsRUFBQXZGLEVBQUFFLEVBQUF6QixFQUFBOEQsRUFBQXhDLEVBQUF5RixFQUFBbkQsR0FTQSxRQUFBcUksS0FFQWxGLEVBQUFpSSxZQUFBbEksRUFBQXlCLFVBQUFwSCxLQUFBLFNBQUErQyxHQUNBcUQsRUFBQXhHLFlBQUFtRCxFQUVBNkMsRUFBQWtJLHFCQUFBMUgsRUFBQXhHLGFBQUFJLEtBQUEsU0FBQStDLEdBQ0EsR0FBQWdMLEdBQUFoTCxDQUNBcUQsR0FBQTRILGVBQUFwSSxFQUFBcUksdUJBQUFGLEVBQUFwSSxFQUFBeUIsWUFHQW5ELEVBQUEsZ0JBQUE4RCxhQUNBQyxXQUFBLE1BSUFwQyxFQUFBcUMsZ0JBQUFqSSxLQUFBLFNBQUErQyxHQUNBcUQsRUFBQThCLFdBQUFuRixJQUdBNkMsRUFBQXlHLGNBQUExRyxFQUFBeUIsVUFBQXBILEtBQUEsU0FBQStDLEdBQ0FxRCxFQUFBbUcsV0FBQXhKLElBMUJBLEdBQUFxRCxHQUFBaEUsSUFFQTBJLEtBVkFyTixRQUNBQyxPQUFBLFVBQ0FRLFdBQUEsb0JBQUEwUCxHakJndkNJQSxFQUFrQm5QLFNBQVcsU0FBVSxlQUFnQixLQUFNLFdBQVksU0FBVSxpQkFBa0IsY0FBZSxpQkFBa0IsbUJrQnJ2QzFJLFdBQ0EsWUFPQSxTQUFBbUgsR0FBQWpILEVBQUF5QixFQUFBdUMsRUFBQTdELEVBQUEyRCxFQUFBMUQsR0FXQSxRQUFBa0osS0FFQSxHQUFBeEgsR0FBQUwsRUFBQU0sUUFDQWhCLEVBQUEsR0FBQUMsVUFBQVosRUFBQVAsT0FFQTBKLEVBQUFwSixFQUNBWSxFQUNBRyxNQUFBLFdBT0EsT0FKQXFJLEdBQUFqRixRQUFBLFdBQ0F4QyxFQUFBdEMsUUFBQStKLEtBR0F6SCxFQUFBVSxRQUlBLFFBQUFrTCxHQUFBNkIsR0FFQSxHQUFBek4sR0FBQUwsRUFBQU0sUUFDQWhCLEVBQUEsR0FBQUMsVUFBQVosRUFBQVAsT0FFQStOLEVBQUF6TixFQUNBWSxFQUNBRyxNQUFBLFVBQ0FBLE1BQUFxTyxHQU9BLE9BSkEzQixHQUFBdEosUUFBQSxXQUNBeEMsRUFBQXRDLFFBQUFvTyxLQUdBOUwsRUFBQVUsUUFJQSxRQUFBMk0sR0FBQUssR0FFQSxHQUFBMU4sR0FBQUwsRUFBQU0sUUFJQTBOLEdBSEEsR0FBQXpPLFVBQUFaLEVBQUFQLFVBSUEsS0FBQSxHQUFBMkUsS0FBQWdMLEdBQUFFLFVBQ0FELEVBQUE1SSxLQUFBckMsRUFLQSxPQUZBMUMsR0FBQXRDLFFBQUFpUSxHQUVBM04sRUFBQVUsUUFJQSxRQUFBOE0sR0FBQUssRUFBQUosR0FFQSxHQUFBeE8sR0FBQSxHQUFBQyxVQUFBWixFQUFBUCxPQUdBd1AsSUE4REEsT0E3REFNLEdBQUF2TixRQUFBLFNBQUE5QixHQUVBd0QsRUFBQWEsbUJBQUFyRSxHQUFBZSxLQUFBLFNBQUF1RCxHQUVBQSxFQUFBTixVQUFBakQsS0FBQSxXQUdBLEdBQUEsY0FBQXVELEVBQUF4RixNQUFBLENBRUEsR0FBQXdRLEdBQUF6UCxFQUNBWSxFQUNBRyxNQUFBLGFBQ0FBLE1BQUFaLEdBR0FzUCxHQUFBdEwsVUFBQWpELEtBQUEsV0FJQWdPLEVBQUF4SSxLQUZBK0ksRUFBQUwsSUFHQU0sS0FBQWpMLEVBQUFpTCxLQUNBQyxRQUFBbEwsRUFBQWtMLFNBQUEsRUFBQSxLQUNBaEksVUFBQXhILEVBQ0FsQixNQUFBLFlBQ0EyUSxNQUFBbkwsRUFBQW1MLE1BQ0F0TCxTQUFBbUwsRUFBQUwsS0FNQU0sS0FBQWpMLEVBQUFpTCxLQUNBQyxRQUFBbEwsRUFBQWtMLFNBQUEsRUFBQSxLQUNBaEksVUFBQXhILEVBQ0FsQixNQUFBLFlBQ0EyUSxNQUFBbkwsRUFBQW1MLE1BQ0F0TCxTQUFBLFlBT0EsZUFBQUcsRUFBQXhGLE9BQUEsYUFBQXdGLEVBQUF4RixRQUVBaVEsRUFBQXhJLE1BQ0FnSixLQUFBakwsRUFBQWlMLEtBQ0FDLFFBQUFsTCxFQUFBa0wsU0FBQSxFQUFBLEtBQ0FoSSxVQUFBeEgsRUFDQXlQLE1BQUFuTCxFQUFBbUwsTUFDQTNRLE1BQUF3RixFQUFBeEYsY0FXQWlRLEVBSUEsUUFBQUgsR0FBQUssR0FFQSxHQUFBek4sR0FBQUwsRUFBQU0sUUFDQWhCLEVBQUEsR0FBQUMsVUFBQVosRUFBQVAsT0FFQW1RLEVBQUFoTSxFQUNBakQsRUFDQUcsTUFBQSxTQWFBLE9BVkE4TyxHQUFBMUwsUUFBQSxXQUVBMEwsRUFBQTVOLFFBQUEsU0FBQUMsR0FDQUEsRUFBQUUsV0FBQWdOLEdBQ0F6TixFQUFBdEMsUUFBQTZDLE9BTUFQLEVBQUFVLFFBS0EsUUFBQTBMLEdBQUErQixFQUFBVixHQUVBLEdBQUF4TyxHQUFBLEdBQUFDLFVBQUFaLEVBQUFQLE9BRUEwSixFQUFBcEosRUFDQVksRUFDQUcsTUFBQSxXQUdBcUksR0FBQWpGLFFBQUEsV0FDQWlGLEVBQUFnRyxHQUFBVSxFQUNBMUcsRUFBQTdFLFVBMUtBakIsS0FBQTZGLGNBQUFBLEVBQ0E3RixLQUFBaUssY0FBQUEsRUFDQWpLLEtBQUEwTCxxQkFBQUEsRUFDQTFMLEtBQUE2TCx1QkFBQUEsRUFDQTdMLEtBQUF5TCxZQUFBQSxFQUNBekwsS0FBQXlLLGVBQUFBLEVBWkFwUCxRQUNBQyxPQUFBLFVBQ0E0RSxRQUFBLGlCQUFBc0QsR2xCNDZDSUEsRUFBZW5ILFNBQVcsYUFBYyxLQUFNLGlCQUFrQixrQkFBbUIsZUFBZ0IsbUJtQmo3Q3ZHLFdBQ0EsWUFPQSxTQUFBb1EsR0FBQW5KLEVBQUEvRyxFQUFBMkIsRUFBQUQsRUFBQXhCLEVBQUFDLEVBQUFxQixFQUFBOUIsR0FXQSxRQUFBNEQsS0FFQTlCLEVBQUE4QixlQUFBbUUsRUFBQTBJLFdBQUExSSxFQUFBMkksZUFBQS9PLEtBQUEsU0FBQStDLEdBS0EsR0FIQXFELEVBQUE0SSxzQkFBQSxFQUNBNUksRUFBQTZJLDBCQUFBLEVBRUEsa0JBQUFsTSxFQUVBbEUsRUFBQVUsR0FBQSxZQUVBLENBQUEsR0FBQSxpQkFBQXdELEVBRUEsWUFEQXFELEVBQUE0SSxzQkFBQSxFQUVBLHNCQUFBak0sSUFDQXFELEVBQUE2SSwwQkFBQSxNQU9BLFFBQUFDLEtBRUEsTUFBQTlJLEdBQUEwSSxlQUtBelEsR0FBQThRLGdCQUNBM04sTUFBQTRFLEVBQUEwSSxhQUNBOU8sS0FBQSxXQUNBb0csRUFBQWdKLCtCQUFBLEVBQ0E3SSxZQUFBQyxNQUFBLDJDQUFBSixFQUFBMEksV0FBQSxJQUFBLFlBUkExSSxFQUFBZ0osK0JBQUEsR0FhQSxRQUFBQyxLQUdBbFAsRUFBQUksa0JBQUE2RixFQUFBa0osYUFBQXRQLEtBQUEsU0FBQXVQLEdBS0EsTUFIQW5KLEdBQUFvSix3QkFBQSxFQUNBcEosRUFBQXFKLHFCQUFBLEVBRUFGLE9BRUFuSixFQUFBb0osd0JBQUEsT0FNQXJQLEdBQUFpQixjQUFBZ0YsRUFBQXNKLFNBQUF0SixFQUFBaUgsWUFBQWpILEVBQUFrSixhQUFBdFAsS0FBQSxTQUFBK0MsR0FFQSxNQUFBLGdCQUFBQSxPQUVBcUQsRUFBQXFKLHFCQUFBLFFBR0Esb0JBQUExTSxHQUVBbEUsRUFBQVUsR0FBQSxXQUFBNkgsU0FBQWhCLEVBQUFrSixtQkF2RUEsR0FBQWxKLEdBQUFoRSxJQUVBZ0UsR0FBQW5FLGVBQUFBLEVBQ0FtRSxFQUFBOEksY0FBQUEsRUFDQTlJLEVBQUFpSixpQkFBQUEsRUFaQTVSLFFBQ0FDLE9BQUEsVUFDQVEsV0FBQSxnQkFBQTJRLEduQjRnRElBLEVBQWNwUSxTQUFXLFNBQVUsYUFBYyxXQUFZLFVBQVcsU0FBVSxrQkFBbUIsY0FBZSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJywgW1xuICAgICAgICAgICAgLyogQW5ndWxhciBtb2R1bGVzICovXG4gICAgICAgICAgICAnbmdBbmltYXRlJyxcbiAgICAgICAgICAgIC8qIEFwcCBtb2R1bGVzICovXG4gICAgICAgICAgICAvKiBUaGlyZC1wYXJ0eSBtb2R1bGVzICovXG4gICAgICAgICAgICAndWkucm91dGVyJyxcbiAgICAgICAgICAgICdmaXJlYmFzZScsXG4gICAgICAgICAgICAndmFsaWRhdGlvbi5tYXRjaCcsXG4gICAgICAgICAgICAnb3JkaW5hbCcsXG4gICAgICAgICAgICAnbmdGaWxlVXBsb2FkJyxcbiAgICAgICAgICAgICduZ0ltZ3VyJ1xuICAgICAgICBdKTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ3ZnLmFwcCcpXG5cdFx0LmNvbnN0YW50KCdGSVJFQkFTRURBVEEnLCB7XG5cdFx0XHQnRkJVUkwnOiAnaHR0cHM6Ly93b2xmc2NvbnRlc3RzLmZpcmViYXNlaW8uY29tJ1xuXHRcdH0pXG5cdFx0LmNvbmZpZyhjb25maWcpO1xuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBjb25maWcoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xuXG5cdFx0Ly8gUmVkaXJlY3QgYW55IHVubWF0Y2hlZCBVUkwgdG8gLy5cblx0XHQkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvJyk7XG5cblx0XHQkc3RhdGVQcm92aWRlclxuXHRcdCAgICAuc3RhdGUoJ2hvbWUnLCB7XG5cdFx0ICAgIFx0dXJsOiAnLycsXG5cdFx0ICAgIFx0dGVtcGxhdGVVcmw6ICdhcHAvaG9tZS9ob21lLmh0bScsXG5cdFx0ICAgIFx0Y29udHJvbGxlcjogJ0hvbWVDb250cm9sbGVyIGFzIGhvbWUnXG5cdFx0ICAgIH0pXG5cblx0XHQgICAgLnN0YXRlKCdyZWdpc3Rlck9yTG9naW4nLCB7XG5cdFx0ICAgIFx0dXJsOiAnL3JlZ2lzdGVyT3JMb2dpbicsXG5cdFx0ICAgIFx0dGVtcGxhdGVVcmw6ICcvYXBwL2hvbWUvcmVnLmh0bScsXG5cdFx0ICAgIFx0Y29udHJvbGxlcjogJ1JlZ0NvbnRyb2xsZXIgYXMgcmVnJ1xuXHRcdCAgICB9KVxuXG5cdFx0ICAgIC5zdGF0ZSgncHJvZmlsZScsIHtcblx0XHQgICAgXHR1cmw6ICcvcHJvZmlsZS86dXNlcm5hbWUnLFxuXHRcdCAgICBcdHRlbXBsYXRlVXJsOiAnL2FwcC9ob21lL3Byb2ZpbGUuaHRtJyxcblx0XHQgICAgXHRjb250cm9sbGVyOiAnUHJvZmlsZUNvbnRyb2xsZXIgYXMgcHJvZmlsZSdcblx0XHQgICAgfSlcblxuXHRcdCAgICAuc3RhdGUoJ2xlYWRlcmJvYXJkJywge1xuXHRcdCAgICBcdHVybDogJy9sZWFkZXJib2FyZCcsXG5cdFx0ICAgIFx0dGVtcGxhdGVVcmw6ICcvYXBwL2hvbWUvbGVhZGVyYm9hcmQuaHRtJyxcblx0XHQgICAgXHRjb250cm9sbGVyOiAnTGVhZGVyYm9hcmRDb250cm9sbGVyIGFzIGxlYWRlcmJvYXJkJ1xuXHRcdCAgICB9KVxuXG5cdFx0ICAgIC5zdGF0ZSgnZXZlbnQnLCB7XG5cdFx0ICAgIFx0dXJsOiAnL2V2ZW50LzpldmVudE5hbWUvbWFpbicsXG5cdFx0ICAgIFx0dGVtcGxhdGVVcmw6ICcvYXBwL2V2ZW50L21haW4uaHRtJyxcblx0XHQgICAgXHRjb250cm9sbGVyOiAnRXZlbnRNYWluQ29udHJvbGxlciBhcyBldmVudCdcblx0XHQgICAgfSlcblxuXHRcdCAgICAuc3RhdGUoJ2N1c3RvbWl6ZUF2YXRhcicsIHtcblx0XHQgICAgXHR1cmw6ICcvY3VzdG9taXplQXZhdGFyJyxcblx0XHQgICAgXHR0ZW1wbGF0ZVVybDogJy9hcHAvaG9tZS9hdmF0YXIuaHRtJyxcblx0XHQgICAgXHRjb250cm9sbGVyOiAnQXZhdGFyQ29udHJvbGxlciBhcyBhdmF0YXInLFxuXG5cdFx0ICAgIFx0cmVzb2x2ZToge1xuXHRcdCAgICBcdFx0J2N1cnJlbnRBdXRoJzogWydBdXRoV3JhcHBlcicsIGZ1bmN0aW9uKEF1dGhXcmFwcGVyKSB7XG5cdFx0ICAgIFx0XHRcdHJldHVybiBBdXRoV3JhcHBlci4kcmVxdWlyZUF1dGgoKTtcblx0XHQgICAgXHRcdH1dXG5cdFx0ICAgIFx0fVxuXHRcdCAgICB9KVxuXG5cdFx0ICAgIC5zdGF0ZSgnY2hhbmdlUGFzc3dvcmQnLCB7XG5cdFx0ICAgIFx0dXJsOiAnL2NoYW5nZVBhc3N3b3JkJyxcblx0XHQgICAgXHR0ZW1wbGF0ZVVybDogJy9hcHAvaG9tZS9jaGFuZ2VQYXNzd29yZC5odG0nLFxuXHRcdCAgICBcdGNvbnRyb2xsZXI6ICdDaGFuZ2VQYXNzd29yZENvbnRyb2xsZXIgYXMgcHdjaGFuZ2UnLFxuXG5cdFx0ICAgIFx0cmVzb2x2ZToge1xuXHRcdCAgICBcdFx0J2N1cnJlbnRBdXRoJzogWydBdXRoV3JhcHBlcicsIGZ1bmN0aW9uKEF1dGhXcmFwcGVyKSB7XG5cdFx0ICAgIFx0XHRcdHJldHVybiBBdXRoV3JhcHBlci4kcmVxdWlyZUF1dGgoKTtcblx0XHQgICAgXHRcdH1dXG5cdFx0ICAgIFx0fVxuXHRcdCAgICB9KTtcblx0fVxufSkoKTsiLG51bGwsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5ydW4ocnVuKTtcblxuICAgIGZ1bmN0aW9uIHJ1bigkcm9vdFNjb3BlLCAkbG9jYXRpb24sICRzdGF0ZSwgJGZpcmViYXNlT2JqZWN0LCBBdXRoV3JhcHBlciwgRklSRUJBU0VEQVRBKSB7XG5cbiAgICAgICAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZUVycm9yJywgZnVuY3Rpb24oZXZlbnQsIHRvU3RhdGUsIHRvUGFyYW1zLCBmcm9tU3RhdGUsIGZyb21QYXJhbXMsIGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IgPT09ICdBVVRIX1JFUVVJUkVEJykge1xuICAgICAgICAgICAgICAgICRzdGF0ZS5nbygncmVnaXN0ZXJPckxvZ2luJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdWNjZXNzJywgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIC8vIElmIHVzZXIgaXMgbG9nZ2VkIGluLCBkb3dubG9hZCB0aGVpciBwcm9maWxlIGRhdGEgdG8gYW4gb2JqZWN0IGluICRyb290U2NvcGUuXG4gICAgICAgICAgICAvLyBGSVhNRTogV2Ugc2hvdWxkbid0IG5lZWQgdG8gZG8gdGhpcyBldmVyeSBzdWNjZXNzZnVsIHN0YXRlIGNoYW5nZS5cbiAgICAgICAgICAgIGlmIChBdXRoV3JhcHBlci4kZ2V0QXV0aCgpKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdmFyIGF1dGhEYXRhID0gQXV0aFdyYXBwZXIuJGdldEF1dGgoKTtcbiAgICAgICAgICAgICAgICB2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZJUkVCQVNFREFUQS5GQlVSTCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgcHJvZmlsZURhdGEgPSAkZmlyZWJhc2VPYmplY3QocmVmLmNoaWxkKCd1c2VycycpLmNoaWxkKGF1dGhEYXRhLnVpZCkpO1xuICAgICAgICAgICAgICAgIHByb2ZpbGVEYXRhLiRiaW5kVG8oJHJvb3RTY29wZSwgJ3Byb2ZpbGUnKS50aGVuKGZ1bmN0aW9uKHVuYmluZCkge1xuICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLnVuYmluZEZ1bmN0aW9uID0gdW5iaW5kO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJylcbiAgICAgICAgLnNlcnZpY2UoJ2F1dGhTZXJ2aWNlJywgYXV0aFNlcnZpY2UpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gYXV0aFNlcnZpY2UoJHEsICRyb290U2NvcGUsICRzdGF0ZSwgJHdpbmRvdywgJHRpbWVvdXQsICRmaXJlYmFzZU9iamVjdCwgQXV0aFdyYXBwZXIsIEZJUkVCQVNFREFUQSkge1xuICAgICAgICBcbiAgICAgICAgdGhpcy50ZXN0RGF0YSA9ICdoZWxsbyB3b3JsZCEnO1xuXG4gICAgXHR0aGlzLmNoZWNrSWZVc2VyRXhpc3RzID0gY2hlY2tJZlVzZXJFeGlzdHM7XG4gICAgXHR0aGlzLmNyZWF0ZU5ld1VzZXIgPSBjcmVhdGVOZXdVc2VyO1xuICAgICAgICB0aGlzLmxvZ2luVG9BY2NvdW50ID0gbG9naW5Ub0FjY291bnQ7XG4gICAgICAgIHRoaXMubG9nT3V0ID0gbG9nT3V0O1xuXG4gICAgXHQvLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICBcdGZ1bmN0aW9uIGNoZWNrSWZVc2VyRXhpc3RzKGlucHV0VXNlcm5hbWUpIHtcblxuICAgIFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgXHRcdHZhciBkb2VzVXNlckV4aXN0ID0gZmFsc2U7XG4gICAgXHRcdHZhciB1c2Vyc1JlZiA9IG5ldyAkd2luZG93LkZpcmViYXNlKEZJUkVCQVNFREFUQS5GQlVSTCArICcvdXNlcnMnKTtcblxuICAgIFx0XHR1c2Vyc1JlZi5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKGRhdGFTbmFwc2hvdCkge1xuXG4gICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFTbmFwc2hvdC5mb3JFYWNoKGZ1bmN0aW9uKHVzZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1c2VyLnZhbCgpLnVzZXJOYW1lID09PSBpbnB1dFVzZXJuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9lc1VzZXJFeGlzdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZG9lc1VzZXJFeGlzdCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICBcdFx0fSk7XG5cbiAgICBcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICBcdH1cblxuICAgIFx0ZnVuY3Rpb24gY3JlYXRlTmV3VXNlcihpbnB1dEVtYWlsLCBpbnB1dFBhc3N3b3JkLCBpbnB1dFVzZXJuYW1lKSB7XG5cbiAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICBcdFx0QXV0aFdyYXBwZXIuJGNyZWF0ZVVzZXIoe1xuICAgIFx0XHRcdGVtYWlsOiBpbnB1dEVtYWlsLFxuICAgIFx0XHRcdHBhc3N3b3JkOiBpbnB1dFBhc3N3b3JkXG4gICAgXHRcdH0pLnRoZW4oZnVuY3Rpb24odXNlckRhdGEpIHtcblxuICAgIFx0XHRcdC8vIENyZWF0ZSBhIGRhdGEgZW50cnkgZm9yIHRoZSBuZXcgdXNlcm5hbWUuXG4gICAgXHRcdFx0bmV3IEZpcmViYXNlKEZJUkVCQVNFREFUQS5GQlVSTCkuY2hpbGQoJ3VzZXJzLycgKyB1c2VyRGF0YS51aWQpLnNldCh7XG5cbiAgICBcdFx0XHRcdHVzZXJOYW1lOiBpbnB1dFVzZXJuYW1lLFxuICAgIFx0XHRcdFx0cm9sZTogJ1VzZXInXG5cbiAgICBcdFx0XHR9LCBmdW5jdGlvbihlcnJvckRhdGEpIHtcbiAgICBcdFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3JEYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yRGF0YS5jb2RlO1xuICAgIFx0XHRcdH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgZGF0YSBlbnRyeSBmb3IgdGhlIHVzZXIncyBhdmF0YXIuXG4gICAgICAgICAgICAgICAgbmV3IEZpcmViYXNlKEZJUkVCQVNFREFUQS5GQlVSTCkuY2hpbGQoJ2F2YXRhcnMnKS5jaGlsZChpbnB1dFVzZXJuYW1lKS5zZXQoJ2h0dHA6Ly9hcGkuYWRvcmFibGUuaW8vYXZhdGFycy80Mi8nICsgaW5wdXRVc2VybmFtZSk7XG5cbiAgICBcdFx0XHQvLyBMb2cgdGhlIHVzZXIgaW4uXG4gICAgXHRcdFx0QXV0aFdyYXBwZXIuJGF1dGhXaXRoUGFzc3dvcmQoe1xuICAgIFx0XHRcdFx0ZW1haWw6IGlucHV0RW1haWwsXG4gICAgXHRcdFx0XHRwYXNzd29yZDogaW5wdXRQYXNzd29yZFxuICAgIFx0XHRcdH0pLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoJ0FDQ09VTlRfQ1JFQVRFRCcpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgXHRcdH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yRGF0YSkge1xuXG4gICAgXHRcdFx0Y29uc29sZS5lcnJvcihlcnJvckRhdGEpO1xuXG4gICAgXHRcdFx0aWYgKGVycm9yRGF0YS5jb2RlID09PSAnRU1BSUxfVEFLRU4nKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZXJyb3JEYXRhLmNvZGUpO1xuICAgIFx0XHRcdH1cblxuICAgIFx0XHR9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICBcdH1cblxuICAgICAgICBmdW5jdGlvbiBsb2dpblRvQWNjb3VudChpbnB1dEVtYWlsLCBpbnB1dFBhc3N3b3JkKSB7XG5cbiAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICAgICAgIEF1dGhXcmFwcGVyLiRhdXRoV2l0aFBhc3N3b3JkKHtcbiAgICAgICAgICAgICAgICBlbWFpbDogaW5wdXRFbWFpbCxcbiAgICAgICAgICAgICAgICBwYXNzd29yZDogaW5wdXRQYXNzd29yZFxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbihhdXRoRGF0YSkge1xuXG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgnTE9HSU5fU1VDQ0VTUycpO1xuXG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnJvckRhdGEpIHtcblxuICAgICAgICAgICAgICAgIGlmIChlcnJvckRhdGEuY29kZSA9PT0gJ0lOVkFMSURfVVNFUicpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgnSU5WQUxJRF9VU0VSJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlcnJvckRhdGEuY29kZSA9PT0gJ0lOVkFMSURfUEFTU1dPUkQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoJ0lOVkFMSURfUEFTU1dPUkQnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbG9nT3V0KCkge1xuICAgICAgICAgICAgQXV0aFdyYXBwZXIuJHVuYXV0aCgpO1xuICAgICAgICAgICAgJHJvb3RTY29wZS51bmJpbmRGdW5jdGlvbigpO1xuICAgICAgICB9XG5cbiAgICB9XG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5mYWN0b3J5KCdBdXRoV3JhcHBlcicsIEF1dGhXcmFwcGVyKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIEF1dGhXcmFwcGVyKCRmaXJlYmFzZUF1dGgsIEZJUkVCQVNFREFUQSkge1xuXG4gICAgICAgIHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRklSRUJBU0VEQVRBLkZCVVJMKTtcbiAgICAgICAgcmV0dXJuICRmaXJlYmFzZUF1dGgocmVmKTtcblxuICAgIH1cbiAgICBcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJylcbiAgICAgICAgLnNlcnZpY2UoJ2V2ZW50U2VydmljZScsIGV2ZW50U2VydmljZSk7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBldmVudFNlcnZpY2UoJHEsICRmaWx0ZXIsICRmaXJlYmFzZU9iamVjdCwgJGZpcmViYXNlQXJyYXksIEZJUkVCQVNFREFUQSkge1xuXG4gICAgICAgIHRoaXMuY3JlYXRlTXVsdGlHYW1lRmluYWxTdGFuZGluZ3MgPSBjcmVhdGVNdWx0aUdhbWVGaW5hbFN0YW5kaW5ncztcbiAgICAgICAgdGhpcy5nZXRFdmVudFByb3BlcnRpZXMgPSBnZXRFdmVudFByb3BlcnRpZXM7XG4gICAgICAgIHRoaXMuZ2V0R2FtZURhdGEgPSBnZXRHYW1lRGF0YTtcbiAgICAgICAgdGhpcy5nZXRHYW1lc0xpc3QgPSBnZXRHYW1lc0xpc3Q7XG4gICAgICAgIHRoaXMuZ2V0TXVsdGlHYW1lTGVhZGVyYm9hcmQgPSBnZXRNdWx0aUdhbWVMZWFkZXJib2FyZDtcbiAgICAgICAgdGhpcy5nZXRTaW5nbGVHYW1lTGVhZGVyYm9hcmQgPSBnZXRTaW5nbGVHYW1lTGVhZGVyYm9hcmQ7XG4gICAgICAgIHRoaXMuZ2V0UGxheWVyU2NvcmVzID0gZ2V0UGxheWVyU2NvcmVzO1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVNdWx0aUdhbWVGaW5hbFN0YW5kaW5ncyhpbnB1dEV2ZW50KSB7XG5cbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgZmluYWwgc3RhbmRpbmdzIG9mIHRoZSBldmVudC5cbiAgICAgICAgICAgIGdldE11bHRpR2FtZUxlYWRlcmJvYXJkKGlucHV0RXZlbnQpLnRoZW4oZnVuY3Rpb24gdGhlbihtb2RlbCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuICAgICAgICAgICAgICAgIHZhciBpbnB1dEV2ZW50U3RhbmRpbmdzID0gJGZpcmViYXNlT2JqZWN0KFxuICAgICAgICAgICAgICAgICAgICByZWZcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZCgnc3RhbmRpbmdzJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZChpbnB1dEV2ZW50KVxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBpbnB1dEV2ZW50U3RhbmRpbmdzLiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsLmZvckVhY2goZnVuY3Rpb24oc3RhbmRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0RXZlbnRTdGFuZGluZ3Nbc3RhbmRpbmcua2V5XSA9IHN0YW5kaW5nLnBvc2l0aW9uO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBpbnB1dEV2ZW50U3RhbmRpbmdzLiRzYXZlKCk7XG5cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEV2ZW50UHJvcGVydGllcyhpbnB1dEV2ZW50KSB7XG5cbiAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICAgXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZJUkVCQVNFREFUQS5GQlVSTCk7XG4gICAgICAgIFx0dmFyIGV2ZW50UHJvcGVydGllcyA9ICRmaXJlYmFzZU9iamVjdChcbiAgICAgICAgXHRcdHJlZlxuICAgICAgICBcdFx0XHQuY2hpbGQoJ2NvbnRlc3RzJylcbiAgICAgICAgXHRcdFx0LmNoaWxkKGlucHV0RXZlbnQpXG4gICAgICAgIFx0XHRcdC5jaGlsZCgncHJvcGVydGllcycpXG4gICAgICAgIFx0KTtcblxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShldmVudFByb3BlcnRpZXMpO1xuXG4gICAgICAgIFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEdhbWVEYXRhKGlucHV0RXZlbnQsIGlucHV0R2FtZSkge1xuXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICAgICB2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZJUkVCQVNFREFUQS5GQlVSTCk7XG5cbiAgICAgICAgICAgIGdldEdhbWVzTGlzdChpbnB1dEV2ZW50KS50aGVuKGZ1bmN0aW9uKGdhbWVzTGlzdCkge1xuXG4gICAgICAgICAgICAgICAgZ2FtZXNMaXN0LmZvckVhY2goZnVuY3Rpb24oZ2FtZSkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChnYW1lLmNhbWVsTmFtZSA9PT0gaW5wdXRHYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGdhbWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRHYW1lc0xpc3QoaW5wdXRFdmVudCkge1xuXG4gICAgICAgIFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICBcdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRklSRUJBU0VEQVRBLkZCVVJMKTtcbiAgICAgICAgXHR2YXIgZ2FtZXNMaXN0ID0gJGZpcmViYXNlQXJyYXkoXG4gICAgICAgIFx0XHRyZWZcbiAgICAgICAgXHRcdFx0LmNoaWxkKCdjb250ZXN0cycpXG4gICAgICAgIFx0XHRcdC5jaGlsZChpbnB1dEV2ZW50KVxuICAgICAgICBcdFx0XHQuY2hpbGQoJ2FjdGl2ZUdhbWVzJylcbiAgICAgICAgXHQpO1xuXG4gICAgICAgIFx0Z2FtZXNMaXN0LiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICBcdFx0ZGVmZXJyZWQucmVzb2x2ZShnYW1lc0xpc3QpO1xuICAgICAgICBcdH0pO1xuXG4gICAgICAgIFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldE11bHRpR2FtZUxlYWRlcmJvYXJkKGlucHV0RXZlbnQpIHtcblxuICAgICAgICBcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICAgXHQvLyBXZSBuZWVkIHRvIGdldCB0aGUgdG9wIDEyIHBsYXllcnMgZm9yIGV2ZXJ5IGdhbWUuXG4gICAgICAgIFx0dmFyIHBsYXllclBvaW50cyA9IHt9O1xuXG4gICAgICAgIFx0Z2V0R2FtZXNMaXN0KGlucHV0RXZlbnQpLnRoZW4oZnVuY3Rpb24gdGhlbihtb2RlbCkge1xuXG4gICAgICAgIFx0XHR2YXIgZ2FtZXNMaXN0ID0gbW9kZWw7XG4gICAgICAgIFx0XHRnYW1lc0xpc3QuZm9yRWFjaChmdW5jdGlvbihnYW1lKSB7XG5cbiAgICAgICAgXHRcdFx0aWYgKGdhbWUuc2NvcmVzKSB7XG5cbiAgICAgICAgXHRcdFx0XHQvLyBDb252ZXJ0IHRoZSBnYW1lJ3Mgc2NvcmVzIHRvIGFuIGFycmF5LlxuICAgICAgICBcdFx0XHRcdHZhciBzY29yZXNBcnJheSA9ICQubWFwKGdhbWUuc2NvcmVzLCBmdW5jdGlvbihlbCkgeyByZXR1cm4gZWw7IH0pO1xuICAgICAgICBcdFx0XHRcdHNjb3Jlc0FycmF5ID0gJGZpbHRlcignb3JkZXJCeScpKHNjb3Jlc0FycmF5LCAnLXNjb3JlJyk7XG5cbiAgICAgICAgXHRcdFx0XHR2YXIgdG90YWxBd2FyZCA9IDEyO1xuXG4gICAgICAgIFx0XHRcdFx0Ly8gSXRlcmF0ZSB0aHJvdWdoIHRoZSB0b3Agc2NvcmVzIGF3YXJkaW5nIHBvaW50cy5cbiAgICAgICAgXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHNjb3Jlc0FycmF5Lmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgXHRcdFx0XHRcdGlmICghcGxheWVyUG9pbnRzW3Njb3Jlc0FycmF5W2ldLnVzZXJOYW1lXSkge1xuICAgICAgICBcdFx0XHRcdFx0XHRwbGF5ZXJQb2ludHNbc2NvcmVzQXJyYXlbaV0udXNlck5hbWVdID0ge1xuICAgICAgICBcdFx0XHRcdFx0XHRcdHBvaW50czogMFxuICAgICAgICBcdFx0XHRcdFx0XHR9O1xuICAgICAgICBcdFx0XHRcdFx0fVxuXG4gICAgICAgIFx0XHRcdFx0XHRwbGF5ZXJQb2ludHNbc2NvcmVzQXJyYXlbaV0udXNlck5hbWVdLnBvaW50cyArPSB0b3RhbEF3YXJkO1xuXG4gICAgICAgIFx0XHRcdFx0XHRpZiAodG90YWxBd2FyZCA+IDApIHtcbiAgICAgICAgXHRcdFx0XHRcdFx0dG90YWxBd2FyZCAtPSAxO1xuICAgICAgICBcdFx0XHRcdFx0fVxuXG4gICAgICAgIFx0XHRcdFx0fVxuXG4gICAgICAgIFx0XHRcdH1cblxuICAgICAgICBcdFx0fSk7XG5cbiAgICAgICAgXHRcdC8vIEZpbmQgYW5kIHJlc29sdmUgdGllcy5cbiAgICAgICAgXHRcdHBsYXllclBvaW50cyA9ICRmaWx0ZXIoJ29yZGVyT2JqZWN0QnknKShwbGF5ZXJQb2ludHMsICdwb2ludHMnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB2YXIgaGF2ZUJvdHRvbVNjb3JlcnNGbG9vciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHZhciBmbG9vclJhbmdlID0gMDtcbiAgICAgICAgXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgcGxheWVyUG9pbnRzLmxlbmd0aDsgaSArPSAxKSB7XG5cbiAgICAgICAgXHRcdFx0aWYgKHBsYXllclBvaW50c1tpLTFdICYmIHBsYXllclBvaW50c1tpXS5wb2ludHMgJiYgcGxheWVyUG9pbnRzW2ktMV0ucG9pbnRzKSB7XG5cbiAgICAgICAgXHRcdFx0XHRpZiAocGxheWVyUG9pbnRzW2ldLnBvaW50cyA9PT0gcGxheWVyUG9pbnRzW2ktMV0ucG9pbnRzKSB7XG4gICAgICAgIFx0XHRcdFx0XHRwbGF5ZXJQb2ludHNbaV0ucG9zaXRpb24gPSBwbGF5ZXJQb2ludHNbaS0xXS5wb3NpdGlvbjtcbiAgICAgICAgXHRcdFx0XHR9IGVsc2Uge1xuICAgICAgICBcdFx0XHRcdFx0cGxheWVyUG9pbnRzW2ldLnBvc2l0aW9uID0gKGkrMSk7XG4gICAgICAgIFx0XHRcdFx0fVxuXG4gICAgICAgIFx0XHRcdH0gZWxzZSB7XG5cbiAgICAgICAgXHRcdFx0XHRpZiAoaSA9PT0gMCkge1xuICAgICAgICBcdFx0XHRcdFx0cGxheWVyUG9pbnRzW2ldLnBvc2l0aW9uID0gMTtcbiAgICAgICAgXHRcdFx0XHR9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFoYXZlQm90dG9tU2NvcmVyc0Zsb29yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdldCBjb3VudCBvZiBwbGF5ZXJzIGluIG9uZSBwb3NpdGlvbiBoaWdoZXIuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnZXRTY29yZUNvdW50T2YgPSBwbGF5ZXJQb2ludHNbaS0xXS5wb2ludHM7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBwbGF5ZXJQb2ludHMubGVuZ3RoOyBqICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwbGF5ZXJQb2ludHNbal0ucG9pbnRzID09PSBnZXRTY29yZUNvdW50T2YpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbG9vclJhbmdlICs9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXZlQm90dG9tU2NvcmVyc0Zsb29yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgXHRcdFx0XHRcdHBsYXllclBvaW50c1tpXS5wb3NpdGlvbiA9IChwbGF5ZXJQb2ludHMubGVuZ3RoICsgMSkgLSBmbG9vclJhbmdlO1xuICAgICAgICBcdFx0XHRcdH1cblxuICAgICAgICBcdFx0XHR9XG5cbiAgICAgICAgXHRcdH1cblxuICAgICAgICBcdFx0ZGVmZXJyZWQucmVzb2x2ZShwbGF5ZXJQb2ludHMpO1xuXG4gICAgICAgIFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRTaW5nbGVHYW1lTGVhZGVyYm9hcmQoaW5wdXRFdmVudCkge1xuXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICAgICB2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZJUkVCQVNFREFUQS5GQlVSTCk7XG4gICAgICAgICAgICB2YXIgbGVhZGVyYm9hcmREYXRhID0gJGZpcmViYXNlQXJyYXkoXG4gICAgICAgICAgICAgICAgcmVmXG4gICAgICAgICAgICAgICAgICAgIC5jaGlsZCgnY29udGVzdHMnKVxuICAgICAgICAgICAgICAgICAgICAuY2hpbGQoaW5wdXRFdmVudClcbiAgICAgICAgICAgICAgICAgICAgLmNoaWxkKCdzY29yZXMnKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShsZWFkZXJib2FyZERhdGEpO1xuXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0UGxheWVyU2NvcmVzKGlucHV0RXZlbnQsIGlucHV0R2FtZXNMaXN0LCBpbnB1dFBsYXllcikge1xuXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICAgICB2YXIgZGlzcGxheVNjb3JlcyA9IFtdO1xuXG4gICAgICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggZXZlcnkgZ2FtZS5cbiAgICAgICAgICAgIGlucHV0R2FtZXNMaXN0LmZvckVhY2goZnVuY3Rpb24oZ2FtZSkge1xuXG4gICAgICAgICAgICAgICAgaWYgKGdhbWUuc2NvcmVzKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQ29udmVydCB0aGUgZ2FtZSdzIHNjb3JlcyB0byBhbiBhcnJheS5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjb3Jlc0FycmF5ID0gJC5tYXAoZ2FtZS5zY29yZXMsIGZ1bmN0aW9uKGVsKSB7IHJldHVybiBlbDsgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNjb3Jlc0FycmF5ID0gJGZpbHRlcignb3JkZXJCeScpKHNjb3Jlc0FycmF5LCAnLXNjb3JlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvdGFsQXdhcmQgPSAxMjtcblxuICAgICAgICAgICAgICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggdGhlIHNjb3JlcyBzdGFydGluZyBmcm9tIHRoZSB0b3AgYW5kIGZpbmQgb3VyIHVzZXIuXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2NvcmVzQXJyYXkubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm91bmQgb3VyIHBsYXllci5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzY29yZXNBcnJheVtpXS51c2VyTmFtZSA9PT0gaW5wdXRQbGF5ZXIpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdTY29yZU9iamVjdCA9IGdhbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2NvcmVPYmplY3QucG9zaXRpb24gPSBpKzE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2NvcmVPYmplY3Quc2NvcmUgPSBzY29yZXNBcnJheVtpXS5zY29yZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTY29yZU9iamVjdC5wb2ludHNFYXJuZWQgPSB0b3RhbEF3YXJkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Njb3JlT2JqZWN0LmlucFVybCA9IHNjb3Jlc0FycmF5W2ldLmlucFVybCA/IHNjb3Jlc0FycmF5W2ldLmlucFVybCA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2NvcmVPYmplY3QudHdpdGNoVXJsID0gc2NvcmVzQXJyYXlbaV0udHdpdGNoVXJsID8gc2NvcmVzQXJyYXlbaV0udHdpdGNoVXJsIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTY29yZU9iamVjdC5tYW1lVmVyc2lvbiA9IHNjb3Jlc0FycmF5W2ldLm1hbWVWZXJzaW9uID8gc2NvcmVzQXJyYXlbaV0ubWFtZVZlcnNpb24gOiBudWxsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheVNjb3Jlcy5wdXNoKG5ld1Njb3JlT2JqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbEF3YXJkID0gMTI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRvdGFsQXdhcmQgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsQXdhcmQgLT0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkaXNwbGF5U2NvcmVzKTtcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgfVxuXG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuY29udHJvbGxlcignRXZlbnRNYWluQ29udHJvbGxlcicsIEV2ZW50TWFpbkNvbnRyb2xsZXIpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gRXZlbnRNYWluQ29udHJvbGxlcigkc2NvcGUsICRmaWx0ZXIsICRzdGF0ZVBhcmFtcywgJHN0YXRlLCAkdGltZW91dCwgJGZpcmViYXNlQXJyYXksIGV2ZW50U2VydmljZSwgYXV0aFNlcnZpY2UsIHByb2ZpbGVTZXJ2aWNlLCB0ZWFtU2VydmljZSwgRklSRUJBU0VEQVRBKSB7XG5cbiAgICAgICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIHZtLmV2ZW50TmFtZSA9ICRzdGF0ZVBhcmFtcy5ldmVudE5hbWU7XG5cbiAgICAgICAgdm0uY2xvc2VHYW1lTW9kYWwgPSBjbG9zZUdhbWVNb2RhbDtcbiAgICAgICAgdm0uY2xvc2VNdWx0aUdhbWVMZWFkZXJib2FyZE1vZGFsID0gY2xvc2VNdWx0aUdhbWVMZWFkZXJib2FyZE1vZGFsO1xuICAgICAgICB2bS5jbG9zZVBsYXllck1vZGFsID0gY2xvc2VQbGF5ZXJNb2RhbDtcbiAgICAgICAgdm0uY3JlYXRlVGVhbSA9IGNyZWF0ZVRlYW07XG4gICAgICAgIHZtLmRldGVybWluZVBvaW50cyA9IGRldGVybWluZVBvaW50cztcbiAgICAgICAgdm0uZ2V0Rmlyc3RQbGFjZVNjb3JlcyA9IGdldEZpcnN0UGxhY2VTY29yZXM7XG4gICAgICAgIHZtLmdvVG9QbGF5ZXJQcm9maWxlID0gZ29Ub1BsYXllclByb2ZpbGU7XG4gICAgICAgIHZtLm9wZW5CYWRnZXNNb2RhbCA9IG9wZW5CYWRnZXNNb2RhbDtcbiAgICAgICAgdm0ub3BlbkdhbWVNb2RhbCA9IG9wZW5HYW1lTW9kYWw7XG4gICAgICAgIHZtLm9wZW5HYW1lTW9kYWxGcm9tUGxheWVyTW9kYWwgPSBvcGVuR2FtZU1vZGFsRnJvbVBsYXllck1vZGFsO1xuICAgICAgICB2bS5vcGVuTWFuYWdlbWVudE1vZGFsID0gb3Blbk1hbmFnZW1lbnRNb2RhbDtcbiAgICAgICAgdm0ub3Blbk11bHRpR2FtZUxlYWRlcmJvYXJkTW9kYWwgPSBvcGVuTXVsdGlHYW1lTGVhZGVyYm9hcmRNb2RhbDtcbiAgICAgICAgdm0ub3BlblBsYXllck1vZGFsID0gb3BlblBsYXllck1vZGFsO1xuICAgICAgICB2bS5vcGVuUGxheWVyTW9kYWxGcm9tR2FtZU1vZGFsID0gb3BlblBsYXllck1vZGFsRnJvbUdhbWVNb2RhbDtcbiAgICAgICAgdm0ub3BlblBsYXllck1vZGFsRnJvbUxlYWRlcmJvYXJkTW9kYWwgPSBvcGVuUGxheWVyTW9kYWxGcm9tTGVhZGVyYm9hcmRNb2RhbDtcbiAgICAgICAgdm0ub3BlblJ1bGVzTW9kYWwgPSBvcGVuUnVsZXNNb2RhbDtcblxuICAgICAgICBpbml0RXZlbnQoKTtcblxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICBmdW5jdGlvbiBjbG9zZUdhbWVNb2RhbCgpIHtcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2dhbWVNb2RhbCcpLmNsb3NlTW9kYWwoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNsb3NlTXVsdGlHYW1lTGVhZGVyYm9hcmRNb2RhbCgpIHtcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI211bHRpR2FtZUxlYWRlcmJvYXJkTW9kYWwnKS5jbG9zZU1vZGFsKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjbG9zZVBsYXllck1vZGFsKCkge1xuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjcGxheWVyTW9kYWwnKS5jbG9zZU1vZGFsKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVUZWFtKCkge1xuICAgICAgICAgICAgdGVhbVNlcnZpY2UuY3JlYXRlVGVhbSh2bS5ldmVudE5hbWUsIHZtLm5ld1RlYW0pLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgTWF0ZXJpYWxpemUudG9hc3QoJ1RlYW0gJyArIHZtLm5ld1RlYW0uc2hvcnROYW1lICsgJyBjcmVhdGVkLicsIDQwMDApO1xuICAgICAgICAgICAgICAgIHZtLm5ld1RlYW0gPSBudWxsO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkZXRlcm1pbmVQb2ludHMoaW5wdXRTY29yZURhdGEsIGlucHV0SW5kZXgpIHtcblxuICAgICAgICAgICAgdmFyIHVzZXJHYW1lUG9pbnRzO1xuXG4gICAgICAgICAgICAvLyBObyBwb3NpdGlvbiBncmVhdGVyIHRoYW4gMTIgZ2V0cyBwb2ludHMuXG4gICAgICAgICAgICBpZiAoaW5wdXRJbmRleCA+IDExKSB7XG4gICAgICAgICAgICAgICAgdXNlckdhbWVQb2ludHMgPSAwO1xuICAgICAgICAgICAgICAgIHJldHVybiB1c2VyR2FtZVBvaW50cztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdXNlckdhbWVQb2ludHMgPSAxMiAtIGlucHV0SW5kZXg7XG5cbiAgICAgICAgICAgIHZhciBzb3J0ZWRTY29yZXMgPSAkZmlsdGVyKCdvcmRlckJ5Jykodm0uZ2FtZVNjb3JlcywgJy1zY29yZScpO1xuXG4gICAgICAgICAgICAvLyBBbSBJIHRpZWQgd2l0aCB0aGUgcGVyc29uIGFib3ZlIG1lPyBJZiBzbywgbWF0Y2ggdGhlaXIgcG9pbnRzLlxuICAgICAgICAgICAgaWYgKHNvcnRlZFNjb3Jlc1tpbnB1dEluZGV4IC0gMV0pIHtcblxuICAgICAgICAgICAgICAgIGlmIChzb3J0ZWRTY29yZXNbaW5wdXRJbmRleCAtIDFdLnNjb3JlID09PSBpbnB1dFNjb3JlRGF0YS5zY29yZSkge1xuICAgICAgICAgICAgICAgICAgICB1c2VyR2FtZVBvaW50cyArPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHVzZXJHYW1lUG9pbnRzO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRGaXJzdFBsYWNlU2NvcmVzKCkge1xuXG4gICAgICAgICAgICB2bS5nYW1lTGlzdC5mb3JFYWNoKGZ1bmN0aW9uKGdhbWUpIHtcblxuICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSBzY29yZXMsIGdldCB0aGUgdG9wIG9uZS5cbiAgICAgICAgICAgICAgICBpZiAoZ2FtZS5zY29yZXMpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgc2NvcmVzQXJyYXkgPSAkLm1hcChnYW1lLnNjb3JlcywgZnVuY3Rpb24oZWwpIHsgcmV0dXJuIGVsOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgc2NvcmVzQXJyYXkgPSAkZmlsdGVyKCdvcmRlckJ5Jykoc2NvcmVzQXJyYXksICctc2NvcmUnKTtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZS5maXJzdFNjb3JlID0gc2NvcmVzQXJyYXlbMF07XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnb1RvUGxheWVyUHJvZmlsZShpbnB1dFBsYXllcikge1xuXG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNwbGF5ZXJNb2RhbCcpLmNsb3NlTW9kYWwoKTtcbiAgICAgICAgICAgICRzdGF0ZS5nbygncHJvZmlsZScsIHt1c2VybmFtZTogaW5wdXRQbGF5ZXJ9KTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaW5pdEV2ZW50KCkge1xuXG4gICAgICAgICAgICBldmVudFNlcnZpY2UuZ2V0RXZlbnRQcm9wZXJ0aWVzKHZtLmV2ZW50TmFtZSkudGhlbihmdW5jdGlvbiB0aGVuKG1vZGVsKSB7XG5cbiAgICAgICAgICAgICAgICB2bS5ldmVudFByb3BlcnRpZXMgPSBtb2RlbDtcblxuICAgICAgICAgICAgICAgIHZtLmV2ZW50UHJvcGVydGllcy4kbG9hZGVkKCkudGhlbihmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIGlzIGEgbXVsdGlnYW1lIGV2ZW50LCBnZXQgdGhlIGRhdGEgbmVlZGVkIGZvciBtdWx0aWdhbWUgY29tcG9uZW50cy5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHZtLmV2ZW50UHJvcGVydGllcy5mb3JtYXQubXVsdGlHYW1lKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50U2VydmljZS5nZXRHYW1lc0xpc3Qodm0uZXZlbnROYW1lKS50aGVuKGZ1bmN0aW9uIHRoZW4obW9kZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5nYW1lTGlzdCA9IG1vZGVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldEZpcnN0UGxhY2VTY29yZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudFNlcnZpY2UuZ2V0TXVsdGlHYW1lTGVhZGVyYm9hcmQodm0uZXZlbnROYW1lKS50aGVuKGZ1bmN0aW9uIHRoZW4obW9kZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGVhZGVyYm9hcmQgPSBtb2RlbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5sZWFkZXJib2FyZExlbmd0aCA9IGxlYWRlcmJvYXJkLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5zdW1tYXJpemVkTGVhZGVyYm9hcmQgPSBsZWFkZXJib2FyZC5zbGljZSgwLCA4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgaXMgYSBzaW5nbGUgZ2FtZSBldmVudCwgZ2V0IHRoZSBkYXRhIG5lZWRlZCBmb3Igc2luZ2xlIGdhbWUgY29tcG9uZW50cy5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRTZXJ2aWNlLmdldFNpbmdsZUdhbWVMZWFkZXJib2FyZCh2bS5ldmVudE5hbWUpLnRoZW4oZnVuY3Rpb24gdGhlbihtb2RlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsZWFkZXJib2FyZCA9IG1vZGVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLmxlYWRlcmJvYXJkTGVuZ3RoID0gbGVhZGVyYm9hcmQubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLnN1bW1hcml6ZWRMZWFkZXJib2FyZCA9IGxlYWRlcmJvYXJkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgaXMgYSB0ZWFtLWJhc2VkIGV2ZW50LCBnZXQgdGhlIGRhdGEgbmVlZGVkIGZvciB0ZWFtIGV2ZW50IGNvbXBvbmVudHMuXG4gICAgICAgICAgICAgICAgICAgIGlmICh2bS5ldmVudFByb3BlcnRpZXMuZm9ybWF0LnRlYW1CYXNlZCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZWFtU2VydmljZS5nZXRUZWFtTGlzdCh2bS5ldmVudE5hbWUpLnRoZW4oZnVuY3Rpb24gdGhlbihtb2RlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLnRlYW1MaXN0ID0gbW9kZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHZtLmV2ZW50UHJvcGVydGllcy5zdGF0ZSA9PT0gJ3VwY29taW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmNvbGxhcHNpYmxlJykuY29sbGFwc2libGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY29yZGlvbjogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcHJvZmlsZVNlcnZpY2UuZ2V0QXZhdGFyRGF0YSgpLnRoZW4oZnVuY3Rpb24gdGhlbihtb2RlbCkge1xuICAgICAgICAgICAgICAgIHZtLmF2YXRhckRhdGEgPSBtb2RlbDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvcGVuQmFkZ2VzTW9kYWwoKSB7XG5cbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2JhZGdlc01vZGFsJykub3Blbk1vZGFsKCk7XG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNiYWRnZXNNb2RhbENvbnRlbnQnKS5zY3JvbGxUb3AoMCk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9wZW5HYW1lTW9kYWwoaW5wdXRHYW1lTmFtZSkge1xuXG4gICAgICAgICAgICB2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZJUkVCQVNFREFUQS5GQlVSTCk7XG5cbiAgICAgICAgICAgIGV2ZW50U2VydmljZS5nZXRHYW1lRGF0YSh2bS5ldmVudE5hbWUsIGlucHV0R2FtZU5hbWUpLnRoZW4oZnVuY3Rpb24gdGhlbihtb2RlbCkge1xuICAgICAgICAgICAgICAgIHZtLmdhbWVEYXRhID0gbW9kZWw7XG5cbiAgICAgICAgICAgICAgICB2bS5nYW1lU2NvcmVzID0gJGZpcmViYXNlQXJyYXkoXG4gICAgICAgICAgICAgICAgICAgIHJlZlxuICAgICAgICAgICAgICAgICAgICAgICAgLmNoaWxkKCdjb250ZXN0cycpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGQodm0uZXZlbnROYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNoaWxkKCdhY3RpdmVHYW1lcycpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGQodm0uZ2FtZURhdGEuJGlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNoaWxkKCdzY29yZXMnKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjZ2FtZU1vZGFsJykub3Blbk1vZGFsKCk7XG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNnYW1lTW9kYWxDb250ZW50Jykuc2Nyb2xsVG9wKDApO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvcGVuTWFuYWdlbWVudE1vZGFsKCkge1xuXG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNtYW5hZ2VtZW50TW9kYWwnKS5vcGVuTW9kYWwoKTtcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI21hbmFnZW1lbnRNb2RhbENvbnRlbnQnKS5zY3JvbGxUb3AoMCk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9wZW5NdWx0aUdhbWVMZWFkZXJib2FyZE1vZGFsKCkge1xuXG4gICAgICAgICAgICBldmVudFNlcnZpY2UuZ2V0TXVsdGlHYW1lTGVhZGVyYm9hcmQodm0uZXZlbnROYW1lKS50aGVuKGZ1bmN0aW9uIHRoZW4obW9kZWwpIHtcbiAgICAgICAgICAgICAgICB2bS5jb21wbGV0ZUxlYWRlcmJvYXJkID0gbW9kZWw7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjbXVsdGlHYW1lTGVhZGVyYm9hcmRNb2RhbCcpLm9wZW5Nb2RhbCgpO1xuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjbXVsdGlHYW1lTGVhZGVyYm9hcmRNb2RhbENvbnRlbnQnKS5zY3JvbGxUb3AoMCk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9wZW5QbGF5ZXJNb2RhbChpbnB1dFBsYXllcikge1xuXG4gICAgICAgICAgICB2bS5mb2N1c1BsYXllciA9IGlucHV0UGxheWVyO1xuXG4gICAgICAgICAgICBldmVudFNlcnZpY2UuZ2V0UGxheWVyU2NvcmVzKHZtLmV2ZW50TmFtZSwgdm0uZ2FtZUxpc3QsIHZtLmZvY3VzUGxheWVyKS50aGVuKGZ1bmN0aW9uIHRoZW4obW9kZWwpIHtcbiAgICAgICAgICAgICAgICB2bS5wbGF5ZXJTY29yZXMgPSBtb2RlbDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNwbGF5ZXJNb2RhbCcpLm9wZW5Nb2RhbCgpO1xuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjcGxheWVyTW9kYWxDb250ZW50Jykuc2Nyb2xsVG9wKDApO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvcGVuR2FtZU1vZGFsRnJvbVBsYXllck1vZGFsKGlucHV0R2FtZSkge1xuXG4gICAgICAgICAgICBjbG9zZVBsYXllck1vZGFsKCk7XG5cbiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIG9wZW5HYW1lTW9kYWwoaW5wdXRHYW1lKTtcbiAgICAgICAgICAgIH0sIDQ1MCk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9wZW5QbGF5ZXJNb2RhbEZyb21HYW1lTW9kYWwoaW5wdXRQbGF5ZXIpIHtcblxuICAgICAgICAgICAgY2xvc2VHYW1lTW9kYWwoKTtcblxuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgb3BlblBsYXllck1vZGFsKGlucHV0UGxheWVyKTtcbiAgICAgICAgICAgIH0sIDQ1MCk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9wZW5QbGF5ZXJNb2RhbEZyb21MZWFkZXJib2FyZE1vZGFsKGlucHV0UGxheWVyKSB7XG5cbiAgICAgICAgICAgIGNsb3NlTXVsdGlHYW1lTGVhZGVyYm9hcmRNb2RhbCgpO1xuXG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBvcGVuUGxheWVyTW9kYWwoaW5wdXRQbGF5ZXIpO1xuICAgICAgICAgICAgfSwgNDUwKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gb3BlblJ1bGVzTW9kYWwoKSB7XG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNydWxlc01vZGFsJykub3Blbk1vZGFsKCk7XG4gICAgICAgIH1cblxuICAgIH1cblxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuc2VydmljZSgndGVhbVNlcnZpY2UnLCB0ZWFtU2VydmljZSk7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiB0ZWFtU2VydmljZSgkcSwgJGZpcmViYXNlQXJyYXksICRmaXJlYmFzZU9iamVjdCwgRklSRUJBU0VEQVRBKSB7XG5cbiAgICBcdHRoaXMuY3JlYXRlVGVhbSA9IGNyZWF0ZVRlYW07XG4gICAgICAgIHRoaXMuZ2V0VGVhbUxpc3QgPSBnZXRUZWFtTGlzdDtcblxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlVGVhbShpbnB1dEV2ZW50LCBpbnB1dE5ld1RlYW1Qcm9wZXJ0aWVzKSB7XG5cbiAgICAgICAgXHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgIFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuICAgICAgICBcdHZhciB0ZWFtUG9vbCA9ICRmaXJlYmFzZU9iamVjdChcbiAgICAgICAgXHRcdHJlZlxuICAgICAgICBcdFx0XHQuY2hpbGQoJ2NvbnRlc3RzJylcbiAgICAgICAgXHRcdFx0LmNoaWxkKGlucHV0RXZlbnQpXG4gICAgICAgIFx0XHRcdC5jaGlsZCgndGVhbVBvb2wnKVxuICAgICAgICBcdCk7XG5cbiAgICAgICAgXHR0ZWFtUG9vbC4kbG9hZGVkKCkudGhlbihmdW5jdGlvbigpIHtcblxuICAgICAgICBcdFx0dGVhbVBvb2xbaW5wdXROZXdUZWFtUHJvcGVydGllcy5zaG9ydE5hbWVdID0ge1xuICAgICAgICBcdFx0XHRmdWxsTmFtZTogaW5wdXROZXdUZWFtUHJvcGVydGllcy5mb3JtYWxOYW1lXG4gICAgICAgIFx0XHR9O1xuICAgICAgICBcdFx0dGVhbVBvb2wuJHNhdmUoKTtcbiAgICAgICAgXHRcdGRlZmVycmVkLnJlc29sdmUoKTtcblxuICAgICAgICBcdH0pO1xuXG4gICAgICAgIFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFRlYW1MaXN0KGlucHV0RXZlbnQpIHtcblxuICAgICAgICBcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICAgXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZJUkVCQVNFREFUQS5GQlVSTCk7XG4gICAgICAgIFx0dmFyIHRlYW1MaXN0ID0gJGZpcmViYXNlQXJyYXkoXG4gICAgICAgIFx0XHRyZWZcbiAgICAgICAgXHRcdFx0LmNoaWxkKCdjb250ZXN0cycpXG4gICAgICAgIFx0XHRcdC5jaGlsZChpbnB1dEV2ZW50KVxuICAgICAgICBcdFx0XHQuY2hpbGQoJ3RlYW1Qb29sJylcbiAgICAgICAgXHQpO1xuXG4gICAgICAgIFx0dGVhbUxpc3QuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIFx0XHRkZWZlcnJlZC5yZXNvbHZlKHRlYW1MaXN0KTtcbiAgICAgICAgXHR9KTtcblxuICAgICAgICBcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgICAgIH1cbiAgICB9XG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ3ZnR2FtZXNMaXN0JywgdmdHYW1lc0xpc3QpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gdmdHYW1lc0xpc3QgKCkge1xuICAgICAgICAvLyBVc2FnZTpcbiAgICAgICAgLy9cbiAgICAgICAgLy8gQ3JlYXRlczpcbiAgICAgICAgLy9cbiAgICAgICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBHYW1lc0xpc3RDb250cm9sbGVyLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgbGluazogbGluayxcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy4vYXBwL2V2ZW50Q29tcG9uZW50cy9nYW1lc0xpc3QuZGlyZWN0aXZlLmh0bScsXG4gICAgICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgXHRkYXRhOiAnPScsXG4gICAgICAgICAgICBcdG9wZW5HYW1lRnVuY3Rpb246ICc9J1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZGlyZWN0aXZlO1xuXG4gICAgICAgIGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBHYW1lc0xpc3RDb250cm9sbGVyKCkge1xuICAgICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXG4gICAgXHR2YXIgdm0gPSB0aGlzO1xuICAgIH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJylcbiAgICAgICAgLmRpcmVjdGl2ZSgndmdNdWx0aUdhbWVMZWFkZXJib2FyZCcsIHZnTXVsdGlHYW1lTGVhZGVyYm9hcmQpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gdmdNdWx0aUdhbWVMZWFkZXJib2FyZCAoKSB7XG4gICAgICAgIC8vIFVzYWdlOlxuICAgICAgICAvL1xuICAgICAgICAvLyBDcmVhdGVzOlxuICAgICAgICAvL1xuICAgICAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IE11bHRpR2FtZUxlYWRlcmJvYXJkQ29udHJvbGxlcixcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIGxpbms6IGxpbmssXG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcuL2FwcC9ldmVudENvbXBvbmVudHMvbXVsdGlHYW1lTGVhZGVyYm9hcmQuZGlyZWN0aXZlLmh0bScsXG4gICAgICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgXHRkYXRhOiAnPScsXG4gICAgICAgICAgICAgICAgYXZhdGFyRGF0YTogJz0nLFxuICAgICAgICAgICAgXHRjb21wbGV0ZUxlbmd0aDogJz0nLFxuICAgICAgICAgICAgXHRvcGVuUGxheWVyRnVuY3Rpb246ICc9JyxcbiAgICAgICAgICAgICAgICBvcGVuTGVhZGVyYm9hcmRGdW5jdGlvbjogJz0nXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbiAgICAgICAgZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIE11bHRpR2FtZUxlYWRlcmJvYXJkQ29udHJvbGxlcigpIHtcbiAgICAgICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuICAgIFx0dmFyIHZtID0gdGhpcztcbiAgICB9XG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ3ZnU2luZ2xlR2FtZUxlYWRlcmJvYXJkJywgdmdTaW5nbGVHYW1lTGVhZGVyYm9hcmQpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gdmdTaW5nbGVHYW1lTGVhZGVyYm9hcmQgKCkge1xuICAgICAgICAvLyBVc2FnZTpcbiAgICAgICAgLy9cbiAgICAgICAgLy8gQ3JlYXRlczpcbiAgICAgICAgLy9cbiAgICAgICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBTaW5nbGVHYW1lTGVhZGVyYm9hcmRDb250cm9sbGVyLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgbGluazogbGluayxcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy4vYXBwL2V2ZW50Q29tcG9uZW50cy9zaW5nbGVHYW1lTGVhZGVyYm9hcmQuZGlyZWN0aXZlLmh0bScsXG4gICAgICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgXHRkYXRhOiAnPScsXG4gICAgICAgICAgICAgICAgYXZhdGFyRGF0YTogJz0nLFxuICAgICAgICAgICAgXHRjb21wbGV0ZUxlbmd0aDogJz0nLFxuICAgICAgICAgICAgICAgIG9wZW5MZWFkZXJib2FyZEZ1bmN0aW9uOiAnPSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgICAgICBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gU2luZ2xlR2FtZUxlYWRlcmJvYXJkQ29udHJvbGxlcigpIHtcbiAgICAgICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuICAgIFx0dmFyIHZtID0gdGhpcztcbiAgICB9XG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ3ZnU3RpY2t5TWVzc2FnZScsIHZnU3RpY2t5TWVzc2FnZSk7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiB2Z1N0aWNreU1lc3NhZ2UgKCkge1xuICAgICAgICAvLyBVc2FnZTpcbiAgICAgICAgLy9cbiAgICAgICAgLy8gQ3JlYXRlczpcbiAgICAgICAgLy9cbiAgICAgICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBTdGlja3lNZXNzYWdlQ29udHJvbGxlcixcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIGxpbms6IGxpbmssXG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcuL2FwcC9ldmVudENvbXBvbmVudHMvc3RpY2t5TWVzc2FnZS5kaXJlY3RpdmUuaHRtJyxcbiAgICAgICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICBcdHByb3BlcnRpZXM6ICc9J1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZGlyZWN0aXZlO1xuXG4gICAgICAgIGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBTdGlja3lNZXNzYWdlQ29udHJvbGxlcigkdGltZW91dCkge1xuICAgICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXG4gICAgXHR2YXIgdm0gPSB0aGlzO1xuICAgIH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0hlYWRlckNvbnRyb2xsZXInLCBIZWFkZXJDb250cm9sbGVyKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIEhlYWRlckNvbnRyb2xsZXIoJHRpbWVvdXQsICRyb290U2NvcGUsICR3aW5kb3csICRzdGF0ZSwgYXV0aFNlcnZpY2UpIHtcblxuICAgICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICAgIHZtLmxvZ091dCA9IGxvZ091dDtcblxuICAgICAgICBhY3RpdmF0ZSgpO1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJy5kcm9wZG93bi1idXR0b24nKVxuICAgICAgICAgICAgICAgICAgICAuZHJvcGRvd24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5EdXJhdGlvbjogMzAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0RHVyYXRpb246IDIyNSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0cmFpbl93aWR0aDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBob3ZlcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBndXR0ZXI6IC0xMTQsXG4gICAgICAgICAgICAgICAgICAgICAgICBiZWxvd09yaWdpbjogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sIDQwMCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBsb2dPdXQoKSB7XG4gICAgICAgICAgICBhdXRoU2VydmljZS5sb2dPdXQoKTtcbiAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgIH1cblxuICAgIH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJylcbiAgICAgICAgLmZpbHRlcignb3JkZXJPYmplY3RCeScsIG9yZGVyT2JqZWN0QnkpO1xuXG4gICAgZnVuY3Rpb24gb3JkZXJPYmplY3RCeSgpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGl0ZW1zLCBmaWVsZCwgcmV2ZXJzZSkge1xuICAgICAgICAgICAgdmFyIGZpbHRlcmVkID0gW107XG5cbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChpdGVtcywgZnVuY3Rpb24oaXRlbSwga2V5KSB7XG4gICAgICAgICAgICAgICAgaXRlbS5rZXkgPSBrZXk7XG4gICAgICAgICAgICAgICAgZmlsdGVyZWQucHVzaChpdGVtKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBmaWx0ZXJlZC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChhW2ZpZWxkXSA+IGJbZmllbGRdID8gMSA6IC0xKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZihyZXZlcnNlKSBmaWx0ZXJlZC5yZXZlcnNlKCk7XG5cbiAgICAgICAgICAgIHJldHVybiBmaWx0ZXJlZDtcbiAgICAgICAgfTtcbiAgICB9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0F2YXRhckNvbnRyb2xsZXInLCBBdmF0YXJDb250cm9sbGVyKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIEF2YXRhckNvbnRyb2xsZXIoJHJvb3RTY29wZSwgJHN0YXRlLCAkc3RhdGVQYXJhbXMsICR0aW1lb3V0LCBVcGxvYWQsIGltZ3VyLCBwcm9maWxlU2VydmljZSkge1xuXG4gICAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cbiAgICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgICAgdm0udXBsb2FkQXZhdGFyID0gdXBsb2FkQXZhdGFyO1xuXG4gICAgICAgIGFjdGl2YXRlKCk7XG5cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgICBcdHByb2ZpbGVTZXJ2aWNlLmdldEF2YXRhckRhdGEoKS50aGVuKGZ1bmN0aW9uIHRoZW4obW9kZWwpIHtcbiAgICAgICAgICAgICAgICB2bS5hdmF0YXJEYXRhID0gbW9kZWw7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gRklYTUU6IFRoaXMgbmVlZHMgdG8gYmUgdHJpZ2dlcmVkIGJ5IGEgJHJvb3RTY29wZSBicm9hZGNhc3Qgb2Ygd2hlbiBpdCByZWNlaXZlcyBwcm9maWxlIGRhdGEuXG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBwcm9maWxlU2VydmljZS5nZXRCYWRnZXNEYXRhKCRyb290U2NvcGUucHJvZmlsZS51c2VyTmFtZSkudGhlbihmdW5jdGlvbiB0aGVuKG1vZGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLmJhZGdlc0RhdGEgPSBtb2RlbDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1cGxvYWRBdmF0YXIoKSB7XG5cbiAgICAgICAgXHR2bS5kaXNhYmxlQnV0dG9uID0gdHJ1ZTtcblxuICAgICAgICBcdGltZ3VyLnNldEFQSUtleSgnQ2xpZW50LUlEIGY1M2Q2ZDU4MzNiMDdiYycpO1xuICAgICAgICBcdGltZ3VyLnVwbG9hZCh2bS5maWxlKS50aGVuKGZ1bmN0aW9uIHRoZW4obW9kZWwpIHtcbiAgICAgICAgXHRcdHByb2ZpbGVTZXJ2aWNlLnNhdmVBdmF0YXJMaW5rKG1vZGVsWzBdLmxpbmssICRyb290U2NvcGUucHJvZmlsZS51c2VyTmFtZSk7XG4gICAgICAgIFx0XHRNYXRlcmlhbGl6ZS50b2FzdCgnWW91ciBhdmF0YXIgd2FzIHVwbG9hZGVkJywgNDAwMCk7XG5cbiAgICAgICAgXHRcdCR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBcdFx0XHQkc3RhdGUuZ28oJ2hvbWUnKTtcbiAgICAgICAgXHRcdH0sIDEwMDApO1xuICAgICAgICBcdH0pO1xuXG4gICAgICAgIH1cblxuICAgIH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0NoYW5nZVBhc3N3b3JkQ29udHJvbGxlcicsIENoYW5nZVBhc3N3b3JkQ29udHJvbGxlcik7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBDaGFuZ2VQYXNzd29yZENvbnRyb2xsZXIoJHNjb3BlLCAkdGltZW91dCwgJHN0YXRlLCBBdXRoV3JhcHBlcikge1xuXG4gICAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cbiAgICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgICAgXG4gICAgICAgIHZtLnN1Ym1pdENoYW5nZVBhc3N3b3JkID0gc3VibWl0Q2hhbmdlUGFzc3dvcmQ7XG5cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgZnVuY3Rpb24gc3VibWl0Q2hhbmdlUGFzc3dvcmQoKSB7XG5cbiAgICAgICAgICAgIGlmICgkc2NvcGUucHdDaGFuZ2VGb3JtLiR2YWxpZCkge1xuXG4gICAgICAgICAgICAgICAgQXV0aFdyYXBwZXIuJGNoYW5nZVBhc3N3b3JkKHtcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IEF1dGhXcmFwcGVyLiRnZXRBdXRoKCkucGFzc3dvcmQuZW1haWwsXG4gICAgICAgICAgICAgICAgICAgIG9sZFBhc3N3b3JkOiB2bS5pbnB1dEN1cnJlbnRQYXNzd29yZCxcbiAgICAgICAgICAgICAgICAgICAgbmV3UGFzc3dvcmQ6IHZtLmlucHV0TmV3UGFzc3dvcmRcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIE1hdGVyaWFsaXplLnRvYXN0KCdZb3VyIHBhc3N3b3JkIHdhcyBjaGFuZ2VkLicsIDQwMDApO1xuICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnaG9tZScpO1xuICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKTtcblxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IuY29kZSA9PT0gJ0lOVkFMSURfUEFTU1dPUkQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2bS5zaG93Q2hhbmdlUGFzc3dvcmRNZXNzYWdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG5cbiAgICB9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0hvbWVDb250cm9sbGVyJywgSG9tZUNvbnRyb2xsZXIpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gSG9tZUNvbnRyb2xsZXIoJHNjb3BlLCAkdGltZW91dCkge1xuXG4gICAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgIH1cblxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuY29udHJvbGxlcignTGVhZGVyYm9hcmRDb250cm9sbGVyJywgTGVhZGVyYm9hcmRDb250cm9sbGVyKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIExlYWRlcmJvYXJkQ29udHJvbGxlcigkcSwgJHRpbWVvdXQsICRmaXJlYmFzZUFycmF5LCBwcm9maWxlU2VydmljZSwgRklSRUJBU0VEQVRBKSB7XG5cbiAgICAgICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuICAgIFx0dmFyIHZtID0gdGhpcztcblxuICAgICAgICBhY3RpdmF0ZSgpO1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICAgICAgIGdldFByb2ZpbGVTY29yZXMoKS50aGVuKGZ1bmN0aW9uIHRoZW4obW9kZWwpIHtcbiAgICAgICAgICAgICAgICB2bS5wcm9maWxlU2NvcmVEYXRhID0gbW9kZWw7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcHJvZmlsZVNlcnZpY2UuZ2V0QXZhdGFyRGF0YSgpLnRoZW4oZnVuY3Rpb24gdGhlbihtb2RlbCkge1xuICAgICAgICAgICAgICAgIHZtLmF2YXRhckRhdGEgPSBtb2RlbDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0UHJvZmlsZVNjb3JlcygpIHtcblxuICAgICAgICBcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgIFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuXG4gICAgICAgIFx0dmFyIHByb2ZpbGVTY29yZURhdGEgPSAkZmlyZWJhc2VBcnJheShcbiAgICAgICAgXHRcdHJlZlxuICAgICAgICBcdFx0XHQuY2hpbGQoJ2JhZGdlcycpXG4gICAgICAgIFx0KTtcblxuICAgICAgICBcdHByb2ZpbGVTY29yZURhdGEuJGxvYWRlZChmdW5jdGlvbigpIHtcbiAgICAgICAgXHRcdGRlZmVycmVkLnJlc29sdmUocHJvZmlsZVNjb3JlRGF0YSk7XG4gICAgICAgIFx0fSk7XG5cbiAgICAgICAgXHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblxuICAgICAgICB9XG5cbiAgICB9XG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdQcm9maWxlQ29udHJvbGxlcicsIFByb2ZpbGVDb250cm9sbGVyKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIFByb2ZpbGVDb250cm9sbGVyKCRzY29wZSwgJHN0YXRlUGFyYW1zLCAkcSwgJHRpbWVvdXQsICRzdGF0ZSwgJGZpcmViYXNlQXJyYXksIGF1dGhTZXJ2aWNlLCBwcm9maWxlU2VydmljZSwgZXZlbnRTZXJ2aWNlKSB7XG5cbiAgICAgICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICBcbiAgICAgICAgYWN0aXZhdGUoKTtcblxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcblxuICAgICAgICAgICAgcHJvZmlsZVNlcnZpY2UuZ2V0VXNlckRhdGEoJHN0YXRlUGFyYW1zLnVzZXJuYW1lKS50aGVuKGZ1bmN0aW9uIHRoZW4obW9kZWwpIHtcbiAgICAgICAgICAgICAgICB2bS5wcm9maWxlRGF0YSA9IG1vZGVsO1xuXG4gICAgICAgICAgICAgICAgcHJvZmlsZVNlcnZpY2UuZ2V0VG91cm5hbWVudEhpc3Rvcnkodm0ucHJvZmlsZURhdGEpLnRoZW4oZnVuY3Rpb24gdGhlbihtb2RlbCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG91cm5hbWVudEhpc3RvcnlEYXRhID0gbW9kZWw7XG4gICAgICAgICAgICAgICAgICAgIHZtLmV2ZW50U3RhbmRpbmdzID0gcHJvZmlsZVNlcnZpY2UuZ2V0VG91cm5hbWVudFN0YW5kaW5ncyh0b3VybmFtZW50SGlzdG9yeURhdGEsICRzdGF0ZVBhcmFtcy51c2VybmFtZSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAkKCcuY29sbGFwc2libGUnKS5jb2xsYXBzaWJsZSh7XG4gICAgICAgICAgICAgICAgICAgIGFjY29yZGlvbjogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHByb2ZpbGVTZXJ2aWNlLmdldEF2YXRhckRhdGEoKS50aGVuKGZ1bmN0aW9uIHRoZW4obW9kZWwpIHtcbiAgICAgICAgICAgICAgICB2bS5hdmF0YXJEYXRhID0gbW9kZWw7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcHJvZmlsZVNlcnZpY2UuZ2V0QmFkZ2VzRGF0YSgkc3RhdGVQYXJhbXMudXNlcm5hbWUpLnRoZW4oZnVuY3Rpb24gdGhlbihtb2RlbCkge1xuICAgICAgICAgICAgICAgIHZtLmJhZGdlc0RhdGEgPSBtb2RlbDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cblxuICAgIH1cblxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuc2VydmljZSgncHJvZmlsZVNlcnZpY2UnLCBwcm9maWxlU2VydmljZSk7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBwcm9maWxlU2VydmljZSgkcm9vdFNjb3BlLCAkcSwgJGZpcmViYXNlQXJyYXksICRmaXJlYmFzZU9iamVjdCwgZXZlbnRTZXJ2aWNlLCBGSVJFQkFTRURBVEEpIHtcblxuICAgIFx0dGhpcy5nZXRBdmF0YXJEYXRhID0gZ2V0QXZhdGFyRGF0YTtcbiAgICAgICAgdGhpcy5nZXRCYWRnZXNEYXRhID0gZ2V0QmFkZ2VzRGF0YTtcbiAgICBcdHRoaXMuZ2V0VG91cm5hbWVudEhpc3RvcnkgPSBnZXRUb3VybmFtZW50SGlzdG9yeTtcbiAgICAgICAgdGhpcy5nZXRUb3VybmFtZW50U3RhbmRpbmdzID0gZ2V0VG91cm5hbWVudFN0YW5kaW5ncztcbiAgICAgICAgdGhpcy5nZXRVc2VyRGF0YSA9IGdldFVzZXJEYXRhO1xuICAgICAgICB0aGlzLnNhdmVBdmF0YXJMaW5rID0gc2F2ZUF2YXRhckxpbms7XG5cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgIGZ1bmN0aW9uIGdldEF2YXRhckRhdGEoKSB7XG5cbiAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICAgICB2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZJUkVCQVNFREFUQS5GQlVSTCk7XG5cbiAgICAgICAgICAgIHZhciBhdmF0YXJEYXRhID0gJGZpcmViYXNlT2JqZWN0KFxuICAgICAgICAgICAgICAgIHJlZlxuICAgICAgICAgICAgICAgICAgICAuY2hpbGQoJ2F2YXRhcnMnKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXZhdGFyRGF0YS4kbG9hZGVkKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoYXZhdGFyRGF0YSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEJhZGdlc0RhdGEoaW5wdXRVc2VyKSB7XG5cbiAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICAgICB2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZJUkVCQVNFREFUQS5GQlVSTCk7XG5cbiAgICAgICAgICAgIHZhciBiYWRnZXNEYXRhID0gJGZpcmViYXNlT2JqZWN0KFxuICAgICAgICAgICAgICAgIHJlZlxuICAgICAgICAgICAgICAgICAgICAuY2hpbGQoJ2JhZGdlcycpXG4gICAgICAgICAgICAgICAgICAgIC5jaGlsZChpbnB1dFVzZXIpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBiYWRnZXNEYXRhLiRsb2FkZWQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShiYWRnZXNEYXRhKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0VG91cm5hbWVudEhpc3RvcnkoaW5wdXRVc2VyRGF0YSkge1xuXG4gICAgICAgIFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZJUkVCQVNFREFUQS5GQlVSTCk7XG5cbiAgICAgICAgXHQvLyBMb29wIHRocm91Z2ggZWFjaCBldmVudCBpbiB0aGUgcGxlZGdlZFRvIG9iamVjdC5cbiAgICAgICAgXHR2YXIgZXZlbnRzQXJyYXkgPSBbXTtcbiAgICAgICAgXHRmb3IgKHZhciBrZXkgaW4gaW5wdXRVc2VyRGF0YS5wbGVkZ2VkVG8pIHtcbiAgICAgICAgXHRcdGV2ZW50c0FycmF5LnB1c2goa2V5KTtcbiAgICAgICAgXHR9XG5cbiAgICAgICAgXHRkZWZlcnJlZC5yZXNvbHZlKGV2ZW50c0FycmF5KTtcblxuICAgICAgICBcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRUb3VybmFtZW50U3RhbmRpbmdzKGlucHV0VG91cm5hbWVudEhpc3RvcnksIGlucHV0VXNlcikge1xuXG4gICAgICAgICAgICB2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZJUkVCQVNFREFUQS5GQlVSTCk7XG5cbiAgICAgICAgICAgIC8vIExvb3AgdGhyb3VnaCBlYWNoIGV2ZW50IGluIHRoZSB1c2VyJ3MgaGlzdG9yeS5cbiAgICAgICAgICAgIHZhciBldmVudFN0YW5kaW5ncyA9IFtdO1xuICAgICAgICAgICAgaW5wdXRUb3VybmFtZW50SGlzdG9yeS5mb3JFYWNoKGZ1bmN0aW9uKGV2ZW50KSB7XG5cbiAgICAgICAgICAgICAgICBldmVudFNlcnZpY2UuZ2V0RXZlbnRQcm9wZXJ0aWVzKGV2ZW50KS50aGVuKGZ1bmN0aW9uKGV2ZW50UHJvcGVydGllcykge1xuXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50UHJvcGVydGllcy4kbG9hZGVkKCkudGhlbihmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgY29uY2x1ZGVkLCBnZXQgdGhlIHVzZXIncyBzdGFuZGluZy5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudFByb3BlcnRpZXMuc3RhdGUgPT09ICdjb25jbHVkZWQnKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXZlbnRTdGFuZGluZ0RhdGEgPSAkZmlyZWJhc2VPYmplY3QoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNoaWxkKCdzdGFuZGluZ3MnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNoaWxkKGV2ZW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudFN0YW5kaW5nRGF0YS4kbG9hZGVkKCkudGhlbihmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnRTdGFuZGluZ0RhdGFbaW5wdXRVc2VyXSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudFN0YW5kaW5ncy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBldmVudFByb3BlcnRpZXMubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVtaWVyOiBldmVudFByb3BlcnRpZXMucHJlbWllciA/IHRydWUgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0TmFtZTogZXZlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6ICdjb25jbHVkZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBldmVudFByb3BlcnRpZXMuY29sb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGV2ZW50U3RhbmRpbmdEYXRhW2lucHV0VXNlcl1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50U3RhbmRpbmdzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGV2ZW50UHJvcGVydGllcy5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZW1pZXI6IGV2ZW50UHJvcGVydGllcy5wcmVtaWVyID8gdHJ1ZSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnROYW1lOiBldmVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTogJ2NvbmNsdWRlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IGV2ZW50UHJvcGVydGllcy5jb2xvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50UHJvcGVydGllcy5zdGF0ZSA9PT0gJ2lucHJvZ3Jlc3MnIHx8IGV2ZW50UHJvcGVydGllcy5zdGF0ZSA9PT0gJ3VwY29taW5nJykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRTdGFuZGluZ3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGV2ZW50UHJvcGVydGllcy5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVtaWVyOiBldmVudFByb3BlcnRpZXMucHJlbWllciA/IHRydWUgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG9ydE5hbWU6IGV2ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogZXZlbnRQcm9wZXJ0aWVzLmNvbG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTogZXZlbnRQcm9wZXJ0aWVzLnN0YXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGV2ZW50U3RhbmRpbmdzO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRVc2VyRGF0YShpbnB1dFVzZXIpIHtcblxuICAgICAgICBcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgIFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuXG4gICAgICAgIFx0dmFyIHVzZXJzRGF0YSA9ICRmaXJlYmFzZUFycmF5KFxuICAgICAgICBcdFx0cmVmXG4gICAgICAgIFx0XHRcdC5jaGlsZCgndXNlcnMnKVxuICAgICAgICBcdCk7XG5cbiAgICAgICAgXHR1c2Vyc0RhdGEuJGxvYWRlZChmdW5jdGlvbigpIHtcblxuICAgICAgICBcdFx0dXNlcnNEYXRhLmZvckVhY2goZnVuY3Rpb24odXNlcikge1xuICAgICAgICBcdFx0XHRpZiAodXNlci51c2VyTmFtZSA9PT0gaW5wdXRVc2VyKSB7XG4gICAgICAgIFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZSh1c2VyKTtcbiAgICAgICAgXHRcdFx0fVxuICAgICAgICBcdFx0fSk7XG5cbiAgICAgICAgXHR9KTtcblxuICAgICAgICBcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgICAgIH1cblxuICAgICAgICAvLyBGSVhNRTogTWFrZSB0aGlzIHNlcnZlci1zaWRlLlxuICAgICAgICBmdW5jdGlvbiBzYXZlQXZhdGFyTGluayhpbnB1dExpbmssIGlucHV0VXNlcikge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZJUkVCQVNFREFUQS5GQlVSTCk7XG5cbiAgICAgICAgICAgIHZhciBhdmF0YXJEYXRhID0gJGZpcmViYXNlT2JqZWN0KFxuICAgICAgICAgICAgICAgIHJlZlxuICAgICAgICAgICAgICAgICAgICAuY2hpbGQoJ2F2YXRhcnMnKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXZhdGFyRGF0YS4kbG9hZGVkKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGF2YXRhckRhdGFbaW5wdXRVc2VyXSA9IGlucHV0TGluaztcbiAgICAgICAgICAgICAgICBhdmF0YXJEYXRhLiRzYXZlKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG5cbiAgICB9XG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdSZWdDb250cm9sbGVyJywgUmVnQ29udHJvbGxlcik7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBSZWdDb250cm9sbGVyKCRzY29wZSwgJHJvb3RTY29wZSwgJHRpbWVvdXQsICR3aW5kb3csICRzdGF0ZSwgJGZpcmViYXNlT2JqZWN0LCBhdXRoU2VydmljZSwgQXV0aFdyYXBwZXIpIHtcblxuICAgICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgdm0ubG9naW5Ub0FjY291bnQgPSBsb2dpblRvQWNjb3VudDtcbiAgICAgICAgdm0ucGFzc3dvcmRSZXNldCA9IHBhc3N3b3JkUmVzZXQ7XG4gICAgICAgIHZtLnN1Ym1pdE5ld0FjY291bnQgPSBzdWJtaXROZXdBY2NvdW50O1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgIGZ1bmN0aW9uIGxvZ2luVG9BY2NvdW50KCkge1xuXG4gICAgICAgICAgICBhdXRoU2VydmljZS5sb2dpblRvQWNjb3VudCh2bS5sb2dpbkVtYWlsLCB2bS5sb2dpblBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uIHRoZW4obW9kZWwpIHtcblxuICAgICAgICAgICAgICAgIHZtLnNob3dJbnZhbGlkVXNlckVycm9yID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdm0uc2hvd0ludmFsaWRQYXNzd29yZEVycm9yID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBpZiAobW9kZWwgPT09ICdMT0dJTl9TVUNDRVNTJykge1xuXG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnaG9tZScpO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtb2RlbCA9PT0gJ0lOVkFMSURfVVNFUicpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0uc2hvd0ludmFsaWRVc2VyRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtb2RlbCA9PT0gJ0lOVkFMSURfUEFTU1dPUkQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLnNob3dJbnZhbGlkUGFzc3dvcmRFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcGFzc3dvcmRSZXNldCgpIHtcblxuICAgICAgICAgICAgaWYgKCF2bS5sb2dpbkVtYWlsKSB7XG4gICAgICAgICAgICAgICAgdm0uc2hvd1Bhc3N3b3JkUmVzZXRFbWFpbE1lc3NhZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgQXV0aFdyYXBwZXIuJHJlc2V0UGFzc3dvcmQoe1xuICAgICAgICAgICAgICAgIGVtYWlsOiB2bS5sb2dpbkVtYWlsXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZtLnNob3dQYXNzd29yZFJlc2V0RW1haWxNZXNzYWdlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgTWF0ZXJpYWxpemUudG9hc3QoJ0EgcGFzc3dvcmQgcmVzZXQgZW1haWwgaGFzIGJlZW4gc2VudCB0byAnICsgdm0ubG9naW5FbWFpbCArICcuJywgNDAwMCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc3VibWl0TmV3QWNjb3VudCgpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRG9lcyB0aGUgdXNlciBleGlzdD8gSWYgc28sIHNob3cgYW4gZXJyb3IgbWVzc2FnZS5cbiAgICAgICAgICAgIGF1dGhTZXJ2aWNlLmNoZWNrSWZVc2VyRXhpc3RzKHZtLm5ld1VzZXJuYW1lKS50aGVuKGZ1bmN0aW9uKHVzZXJFeGlzdHMpIHtcblxuICAgICAgICAgICAgICAgIHZtLnNob3dEdXBsaWNhdGVVc2VyRXJyb3IgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB2bS5zaG93RW1haWxUYWtlbkVycm9yID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBpZiAodXNlckV4aXN0cykge1xuXG4gICAgICAgICAgICAgICAgICAgIHZtLnNob3dEdXBsaWNhdGVVc2VyRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAvLyBUcnkgdG8gY3JlYXRlIHRoZSBuZXcgdXNlci5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIGF1dGhTZXJ2aWNlLmNyZWF0ZU5ld1VzZXIodm0ubmV3RW1haWwsIHZtLm5ld1Bhc3N3b3JkLCB2bS5uZXdVc2VybmFtZSkudGhlbihmdW5jdGlvbiB0aGVuKG1vZGVsKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2RlbCA9PT0gJ0VNQUlMX1RBS0VOJykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uc2hvd0VtYWlsVGFrZW5FcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1vZGVsID09PSAnQUNDT1VOVF9DUkVBVEVEJykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdwcm9maWxlJywge3VzZXJuYW1lOiB2bS5uZXdVc2VybmFtZX0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cblxuICAgIH1cblxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=