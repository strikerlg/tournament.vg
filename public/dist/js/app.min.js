!function(){"use strict";angular.module("vg.app",["ngAnimate","ui.router","firebase","validation.match","ordinal","ngFileUpload","ngImgur"])}(),function(){"use strict";function e(e,t){t.otherwise("/"),e.state("home",{url:"/",templateUrl:"app/home/home.htm",controller:"HomeController as home"}).state("registerOrLogin",{url:"/registerOrLogin",templateUrl:"/app/home/reg.htm",controller:"RegController as reg"}).state("profile",{url:"/profile/:username",templateUrl:"/app/home/profile.htm",controller:"ProfileController as profile"}).state("leaderboard",{url:"/leaderboard",templateUrl:"/app/home/leaderboard.htm",controller:"LeaderboardController as leaderboard"}).state("event",{url:"/event/:eventName/main",templateUrl:"/app/event/main.htm",controller:"EventMainController as event"}).state("customizeAvatar",{url:"/customizeAvatar",templateUrl:"/app/home/avatar.htm",controller:"AvatarController as avatar",resolve:{currentAuth:["AuthWrapper",function(e){return e.$requireAuth()}]}}).state("changePassword",{url:"/changePassword",templateUrl:"/app/home/changePassword.htm",controller:"ChangePasswordController as pwchange",resolve:{currentAuth:["AuthWrapper",function(e){return e.$requireAuth()}]}})}angular.module("vg.app").constant("FIREBASEDATA",{FBURL:"https://wolfscontests.firebaseio.com"}).config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e,t,r,n,o,a){e.$on("$stateChangeError",function(e,t,n,o,a,i){"AUTH_REQUIRED"===i&&r.go("registerOrLogin")}),e.$on("$stateChangeSuccess",function(){if(o.$getAuth()){var t=o.$getAuth(),r=new Firebase(a.FBURL),i=n(r.child("users").child(t.uid));i.$bindTo(e,"profile").then(function(t){e.unbindFunction=t})}})}angular.module("vg.app").run(e),e.$inject=["$rootScope","$location","$state","$firebaseObject","AuthWrapper","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,r,n,o,a,i,s){function l(t){var r=e.defer(),a=!1,i=new n.Firebase(s.FBURL+"/users");return i.once("value",function(e){o(function(){e.forEach(function(e){e.val().userName===t&&(a=!0)}),r.resolve(a)})}),r.promise}function c(t,r,n){var o=e.defer();return i.$createUser({email:t,password:r}).then(function(e){new Firebase(s.FBURL).child("users/"+e.uid).set({userName:n,role:"User"},function(e){return console.error(e),e.code}),new Firebase(s.FBURL).child("avatars").child(n).set("http://api.adorable.io/avatars/42/"+n),i.$authWithPassword({email:t,password:r}).then(function(){o.resolve("ACCOUNT_CREATED")})})["catch"](function(e){console.error(e),"EMAIL_TAKEN"===e.code&&o.resolve(e.code)}),o.promise}function u(t,r){var n=e.defer();return i.$authWithPassword({email:t,password:r}).then(function(e){n.resolve("LOGIN_SUCCESS")})["catch"](function(e){"INVALID_USER"===e.code?n.resolve("INVALID_USER"):"INVALID_PASSWORD"===e.code&&n.resolve("INVALID_PASSWORD")}),n.promise}function d(){i.$unauth(),t.unbindFunction()}this.testData="hello world!",this.checkIfUserExists=l,this.createNewUser=c,this.loginToAccount=u,this.logOut=d}angular.module("vg.app").service("authService",e),e.$inject=["$q","$rootScope","$state","$window","$timeout","$firebaseObject","AuthWrapper","FIREBASEDATA"]}(),function(){"use strict";function e(e,t){var r=new Firebase(t.FBURL);return e(r)}angular.module("vg.app").factory("AuthWrapper",e),e.$inject=["$firebaseAuth","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,r,n,o){function a(e){c(e).then(function(t){var n=new Firebase(o.FBURL),a=r(n.child("standings").child(e));a.$loaded().then(function(){t.forEach(function(e){a[e.key]=e.position}),a.$save()})})}function i(t){var n=e.defer(),a=new Firebase(o.FBURL),i=r(a.child("contests").child(t).child("properties"));return n.resolve(i),n.promise}function s(t,r){{var n=e.defer();new Firebase(o.FBURL)}return l(t).then(function(e){e.forEach(function(e){e.camelName===r&&n.resolve(e)})}),n.promise}function l(t){var r=e.defer(),a=new Firebase(o.FBURL),i=n(a.child("contests").child(t).child("activeGames"));return i.$loaded().then(function(){r.resolve(i)}),r.promise}function c(r){var n=e.defer(),o={};return l(r).then(function(e){var r=e;r.forEach(function(e){if(e.scores){var r=$.map(e.scores,function(e){return e});r=t("orderBy")(r,"-score");for(var n=12,a=0;a<r.length;a++)o[r[a].userName]||(o[r[a].userName]={points:0}),o[r[a].userName].points+=n,n>0&&(n-=1)}}),console.debug(o),o=t("orderObjectBy")(o,"points",!0);for(var a=!1,i=0,s=0;s<o.length;s+=1)if(o[s-1]&&o[s].points&&o[s-1].points)o[s].position=o[s].points===o[s-1].points?o[s-1].position:s+1;else if(0===s)o[s].position=1;else{if(!a){for(var l=o[s-1].points,c=0;c<o.length;c+=1)o[c].points===l&&(i+=1);a=!0}o[s].position=o.length+1-i}n.resolve(o)}),n.promise}function u(t){var r=e.defer(),a=new Firebase(o.FBURL),i=n(a.child("contests").child(t).child("scores"));return r.resolve(i),r.promise}function d(r,n,o){var a=e.defer(),i=[];return n.forEach(function(e){if(e.scores){var r=$.map(e.scores,function(e){return e});r=t("orderBy")(r,"-score");for(var n=12,a=0;a<r.length;a++){if(r[a].userName===o){var s=e;s.position=a+1,s.score=r[a].score,s.pointsEarned=n,s.inpUrl=r[a].inpUrl?r[a].inpUrl:null,s.twitchUrl=r[a].twitchUrl?r[a].twitchUrl:null,s.mameVersion=r[a].mameVersion?r[a].mameVersion:null,i.push(s),n=12;break}n>0&&(n-=1)}}}),a.resolve(i),a.promise}this.createMultiGameFinalStandings=a,this.getEventProperties=i,this.getGameData=s,this.getGamesList=l,this.getMultiGameLeaderboard=c,this.getSingleGameLeaderboard=u,this.getPlayerScores=d}angular.module("vg.app").service("eventService",e),e.$inject=["$q","$filter","$firebaseObject","$firebaseArray","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,r,n,o,a,i,s,l,c,u){function d(){angular.element("#gameModal").closeModal()}function m(){angular.element("#multiGameLeaderboardModal").closeModal()}function f(){angular.element("#playerModal").closeModal()}function p(){c.createTeam(D.eventName,D.newTeam).then(function(){Materialize.toast("Team "+D.newTeam.shortName+" created.",4e3),D.newTeam=null})}function h(e,r){var n;if(r>11)return n=0;n=12-r;var o=t("orderBy")(D.gameScores,"-score");return o[r-1]&&o[r-1].score===e.score&&(n+=1),n}function v(){D.gameList.forEach(function(e){if(e.scores){var r=$.map(e.scores,function(e){return e});r=t("orderBy")(r,"-score"),e.firstScore=r[0]}})}function g(e){angular.element("#playerModal").closeModal(),n.go("profile",{username:e})}function b(){i.getEventProperties(D.eventName).then(function(e){D.eventProperties=e,D.eventProperties.$loaded().then(function(){D.eventProperties.format.multiGame?(i.getGamesList(D.eventName).then(function(e){D.gameList=e,v()}),i.getMultiGameLeaderboard(D.eventName).then(function(e){var t=e;D.leaderboardLength=t.length,D.summarizedLeaderboard=t.slice(0,8)})):i.getSingleGameLeaderboard(D.eventName).then(function(e){var t=e;D.leaderboardLength=t.length,D.summarizedLeaderboard=t}),D.eventProperties.format.teamBased&&c.getTeamList(D.eventName).then(function(e){D.teamList=e}),"upcoming"===D.eventProperties.state&&$(".collapsible").collapsible({accordion:!0})})}),l.getAvatarData().then(function(e){D.avatarData=e})}function w(){angular.element("#badgesModal").openModal(),angular.element("#badgesModalContent").scrollTop(0)}function A(e){var t=new Firebase(u.FBURL);i.getGameData(D.eventName,e).then(function(e){D.gameData=e,D.gameScores=a(t.child("contests").child(D.eventName).child("activeGames").child(D.gameData.$id).child("scores"))}),angular.element("#gameModal").openModal(),angular.element("#gameModalContent").scrollTop(0)}function L(){angular.element("#managementModal").openModal(),angular.element("#managementModalContent").scrollTop(0)}function E(){i.getMultiGameLeaderboard(D.eventName).then(function(e){D.completeLeaderboard=e}),angular.element("#multiGameLeaderboardModal").openModal(),angular.element("#multiGameLeaderboardModalContent").scrollTop(0)}function S(e){D.focusPlayer=e,i.getPlayerScores(D.eventName,D.gameList,D.focusPlayer).then(function(e){D.playerScores=e}),angular.element("#playerModal").openModal(),angular.element("#playerModalContent").scrollTop(0)}function U(e){f(),o(function(){A(e)},450)}function F(e){d(),o(function(){S(e)},450)}function M(e){m(),o(function(){S(e)},450)}function P(){angular.element("#rulesModal").openModal()}var D=this;D.eventName=r.eventName,D.closeGameModal=d,D.closeMultiGameLeaderboardModal=m,D.closePlayerModal=f,D.createTeam=p,D.determinePoints=h,D.getFirstPlaceScores=v,D.goToPlayerProfile=g,D.openBadgesModal=w,D.openGameModal=A,D.openGameModalFromPlayerModal=U,D.openManagementModal=L,D.openMultiGameLeaderboardModal=E,D.openPlayerModal=S,D.openPlayerModalFromGameModal=F,D.openPlayerModalFromLeaderboardModal=M,D.openRulesModal=P,b()}angular.module("vg.app").controller("EventMainController",e),e.$inject=["$scope","$filter","$stateParams","$state","$timeout","$firebaseArray","eventService","authService","profileService","teamService","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,r,n){function o(t,o){var a=e.defer(),i=new Firebase(n.FBURL),s=r(i.child("contests").child(t).child("teamPool"));return s.$loaded().then(function(){s[o.shortName]={fullName:o.formalName},s.$save(),a.resolve()}),a.promise}function a(r){var o=e.defer(),a=new Firebase(n.FBURL),i=t(a.child("contests").child(r).child("teamPool"));return i.$loaded().then(function(){o.resolve(i)}),o.promise}this.createTeam=o,this.getTeamList=a}angular.module("vg.app").service("teamService",e),e.$inject=["$q","$firebaseArray","$firebaseObject","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,r,n,o){function a(){e(function(){angular.element(".dropdown-button").dropdown({inDuration:300,outDuration:225,constrain_width:!1,hover:!1,gutter:-114,belowOrigin:!0})},400)}function i(){o.logOut(),r.location.reload()}var s=this;s.logOut=i,a()}angular.module("vg.app").controller("HeaderController",e),e.$inject=["$timeout","$rootScope","$window","$state","authService"]}(),function(){"use strict";function e(){function e(e,t,r){}var r={bindToController:!0,controller:t,controllerAs:"vm",link:e,restrict:"E",templateUrl:"./app/eventComponents/gamesList.directive.htm",scope:{data:"=",openGameFunction:"="}};return r}function t(){}angular.module("vg.app").directive("vgGamesList",e)}(),function(){"use strict";function e(){function e(e,t,r){}var r={bindToController:!0,controller:t,controllerAs:"vm",link:e,restrict:"E",templateUrl:"./app/eventComponents/multiGameLeaderboard.directive.htm",scope:{data:"=",avatarData:"=",completeLength:"=",openPlayerFunction:"=",openLeaderboardFunction:"="}};return r}function t(){}angular.module("vg.app").directive("vgMultiGameLeaderboard",e)}(),function(){"use strict";function e(){function e(e,t,r){}var r={bindToController:!0,controller:t,controllerAs:"vm",link:e,restrict:"E",templateUrl:"./app/eventComponents/singleGameLeaderboard.directive.htm",scope:{data:"=",avatarData:"=",completeLength:"=",openLeaderboardFunction:"="}};return r}function t(){}angular.module("vg.app").directive("vgSingleGameLeaderboard",e)}(),function(){"use strict";function e(){function e(e,t,r){}var r={bindToController:!0,controller:t,controllerAs:"vm",link:e,restrict:"E",templateUrl:"./app/eventComponents/stickyMessage.directive.htm",scope:{properties:"="}};return r}function t(e){}angular.module("vg.app").directive("vgStickyMessage",e),t.$inject=["$timeout"]}(),function(){"use strict";function e(){return function(e,t,r){var n=[];return angular.forEach(e,function(e,t){e.key=t,n.push(e)}),n.sort(function(e,r){return e[t]>r[t]?1:-1}),r&&n.reverse(),n}}angular.module("vg.app").filter("orderObjectBy",e)}(),function(){"use strict";function e(e,t,r,n,o,a,i){function s(){i.getAvatarData().then(function(e){c.avatarData=e}),n(function(){i.getBadgesData(e.profile.userName).then(function(e){c.badgesData=e})},500)}function l(){c.disableButton=!0,a.setAPIKey("Client-ID f53d6d5833b07bc"),a.upload(c.file).then(function(r){i.saveAvatarLink(r[0].link,e.profile.userName),Materialize.toast("Your avatar was uploaded",4e3),n(function(){t.go("home")},1e3)})}var c=this;c.uploadAvatar=l,s()}angular.module("vg.app").controller("AvatarController",e),e.$inject=["$rootScope","$state","$stateParams","$timeout","Upload","imgur","profileService"]}(),function(){"use strict";function e(e,t,r,n){function o(){e.pwChangeForm.$valid&&n.$changePassword({email:n.$getAuth().password.email,oldPassword:a.inputCurrentPassword,newPassword:a.inputNewPassword}).then(function(){Materialize.toast("Your password was changed.",4e3),t(function(){r.go("home")},1e3)})["catch"](function(e){"INVALID_PASSWORD"===e.code&&(a.showChangePasswordMessage=!0)})}var a=this;a.submitChangePassword=o}angular.module("vg.app").controller("ChangePasswordController",e),e.$inject=["$scope","$timeout","$state","AuthWrapper"]}(),function(){"use strict";function e(e,t){}angular.module("vg.app").controller("HomeController",e),e.$inject=["$scope","$timeout"]}(),function(){"use strict";function e(e,t,r,n,o){function a(){i().then(function(e){s.profileScoreData=e}),n.getAvatarData().then(function(e){s.avatarData=e})}function i(){var t=e.defer(),n=new Firebase(o.FBURL),a=r(n.child("badges"));return a.$loaded(function(){t.resolve(a)}),t.promise}var s=this;a()}angular.module("vg.app").controller("LeaderboardController",e),e.$inject=["$q","$timeout","$firebaseArray","profileService","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,r,n,o,a,i,s,l){function c(){s.getUserData(t.username).then(function(e){u.profileData=e,s.getTournamentHistory(u.profileData).then(function(e){var r=e;u.eventStandings=s.getTournamentStandings(r,t.username)}),$(".collapsible").collapsible({accordion:!0})}),s.getAvatarData().then(function(e){u.avatarData=e}),s.getBadgesData(t.username).then(function(e){u.badgesData=e})}var u=this;c()}angular.module("vg.app").controller("ProfileController",e),e.$inject=["$scope","$stateParams","$q","$timeout","$state","$firebaseArray","authService","profileService","eventService"]}(),function(){"use strict";function e(e,t,r,n,o,a){function i(){var e=t.defer(),r=new Firebase(a.FBURL),o=n(r.child("avatars"));return o.$loaded(function(){e.resolve(o)}),e.promise}function s(e){var r=t.defer(),o=new Firebase(a.FBURL),i=n(o.child("badges").child(e));return i.$loaded(function(){r.resolve(i)}),r.promise}function l(e){var r=t.defer(),n=(new Firebase(a.FBURL),[]);for(var o in e.pledgedTo)n.push(o);return r.resolve(n),r.promise}function c(e,t){var r=new Firebase(a.FBURL),i=[];return e.forEach(function(e){o.getEventProperties(e).then(function(o){o.$loaded().then(function(){if("concluded"===o.state){var a=n(r.child("standings").child(e));a.$loaded().then(function(){i.push(a[t]?{name:o.name,premier:o.premier?!0:null,shortName:e,state:"concluded",color:o.color,position:a[t]}:{name:o.name,premier:o.premier?!0:null,shortName:e,state:"concluded",color:o.color,position:-1})})}else("inprogress"===o.state||"upcoming"===o.state)&&i.push({name:o.name,premier:o.premier?!0:null,shortName:e,color:o.color,state:o.state})})})}),i}function u(e){var n=t.defer(),o=new Firebase(a.FBURL),i=r(o.child("users"));return i.$loaded(function(){i.forEach(function(t){t.userName===e&&n.resolve(t)})}),n.promise}function d(e,t){var r=new Firebase(a.FBURL),o=n(r.child("avatars"));o.$loaded(function(){o[t]=e,o.$save()})}this.getAvatarData=i,this.getBadgesData=s,this.getTournamentHistory=l,this.getTournamentStandings=c,this.getUserData=u,this.saveAvatarLink=d}angular.module("vg.app").service("profileService",e),e.$inject=["$rootScope","$q","$firebaseArray","$firebaseObject","eventService","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,r,n,o,a,i,s){function l(){i.loginToAccount(d.loginEmail,d.loginPassword).then(function(e){if(d.showInvalidUserError=!1,d.showInvalidPasswordError=!1,"LOGIN_SUCCESS"===e)o.go("home");else{if("INVALID_USER"===e)return void(d.showInvalidUserError=!0);"INVALID_PASSWORD"===e&&(d.showInvalidPasswordError=!0)}})}function c(){return d.loginEmail?void s.$resetPassword({email:d.loginEmail}).then(function(){d.showPasswordResetEmailMessage=!1,Materialize.toast("A password reset email has been sent to "+d.loginEmail+".",4e3)}):void(d.showPasswordResetEmailMessage=!0)}function u(){i.checkIfUserExists(d.newUsername).then(function(e){return d.showDuplicateUserError=!1,d.showEmailTakenError=!1,e?void(d.showDuplicateUserError=!0):void i.createNewUser(d.newEmail,d.newPassword,d.newUsername).then(function(e){return"EMAIL_TAKEN"===e?void(d.showEmailTakenError=!0):void("ACCOUNT_CREATED"===e&&o.go("profile",{username:d.newUsername}))})})}var d=this;d.loginToAccount=l,d.passwordReset=c,d.submitNewAccount=u}angular.module("vg.app").controller("RegController",e),e.$inject=["$scope","$rootScope","$timeout","$window","$state","$firebaseObject","authService","AuthWrapper"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJhcHAuY29uZmlnLmpzIiwiYXBwLm1pbi5qcyIsImFwcC5ydW4uanMiLCJhdXRoL2F1dGguc2VydmljZS5qcyIsImF1dGgvYXV0aHdyYXBwZXIuZmFjdG9yeS5qcyIsImV2ZW50L2V2ZW50LnNlcnZpY2UuanMiLCJldmVudC9tYWluLmNvbnRyb2xsZXIuanMiLCJldmVudC90ZWFtLnNlcnZpY2UuanMiLCJoZWFkZXIvaGVhZGVyLmNvbnRyb2xsZXIuanMiLCJldmVudENvbXBvbmVudHMvZ2FtZXNMaXN0LmRpcmVjdGl2ZS5qcyIsImV2ZW50Q29tcG9uZW50cy9tdWx0aUdhbWVMZWFkZXJib2FyZC5kaXJlY3RpdmUuanMiLCJldmVudENvbXBvbmVudHMvc2luZ2xlR2FtZUxlYWRlcmJvYXJkLmRpcmVjdGl2ZS5qcyIsImV2ZW50Q29tcG9uZW50cy9zdGlja3lNZXNzYWdlLmRpcmVjdGl2ZS5qcyIsImhlbHBlcnMvb3JkZXJPYmplY3RCeS5maWx0ZXIuanMiLCJob21lL2F2YXRhci5jb250cm9sbGVyLmpzIiwiaG9tZS9jaGFuZ2VQYXNzd29yZC5jb250cm9sbGVyLmpzIiwiaG9tZS9ob21lLmNvbnRyb2xsZXIuanMiLCJob21lL2xlYWRlcmJvYXJkLmNvbnRyb2xsZXIuanMiLCJob21lL3Byb2ZpbGUuY29udHJvbGxlci5qcyIsImhvbWUvcHJvZmlsZS5zZXJ2aWNlLmpzIiwiaG9tZS9yZWcuY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJvdGhlcndpc2UiLCJzdGF0ZSIsInVybCIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsInJlc29sdmUiLCJjdXJyZW50QXV0aCIsIkF1dGhXcmFwcGVyIiwiJHJlcXVpcmVBdXRoIiwiY29uc3RhbnQiLCJGQlVSTCIsIiRpbmplY3QiLCJydW4iLCIkcm9vdFNjb3BlIiwiJGxvY2F0aW9uIiwiJHN0YXRlIiwiJGZpcmViYXNlT2JqZWN0IiwiRklSRUJBU0VEQVRBIiwiJG9uIiwiZXZlbnQiLCJ0b1N0YXRlIiwidG9QYXJhbXMiLCJmcm9tU3RhdGUiLCJmcm9tUGFyYW1zIiwiZXJyb3IiLCJnbyIsIiRnZXRBdXRoIiwiYXV0aERhdGEiLCJyZWYiLCJGaXJlYmFzZSIsInByb2ZpbGVEYXRhIiwiY2hpbGQiLCJ1aWQiLCIkYmluZFRvIiwidGhlbiIsInVuYmluZCIsInVuYmluZEZ1bmN0aW9uIiwiYXV0aFNlcnZpY2UiLCIkcSIsIiR3aW5kb3ciLCIkdGltZW91dCIsImNoZWNrSWZVc2VyRXhpc3RzIiwiaW5wdXRVc2VybmFtZSIsImRlZmVycmVkIiwiZGVmZXIiLCJkb2VzVXNlckV4aXN0IiwidXNlcnNSZWYiLCJvbmNlIiwiZGF0YVNuYXBzaG90IiwiZm9yRWFjaCIsInVzZXIiLCJ2YWwiLCJ1c2VyTmFtZSIsInByb21pc2UiLCJjcmVhdGVOZXdVc2VyIiwiaW5wdXRFbWFpbCIsImlucHV0UGFzc3dvcmQiLCIkY3JlYXRlVXNlciIsImVtYWlsIiwicGFzc3dvcmQiLCJ1c2VyRGF0YSIsInNldCIsInJvbGUiLCJlcnJvckRhdGEiLCJjb25zb2xlIiwiY29kZSIsIiRhdXRoV2l0aFBhc3N3b3JkIiwibG9naW5Ub0FjY291bnQiLCJsb2dPdXQiLCIkdW5hdXRoIiwidGhpcyIsInRlc3REYXRhIiwic2VydmljZSIsIiRmaXJlYmFzZUF1dGgiLCJmYWN0b3J5IiwiZXZlbnRTZXJ2aWNlIiwiJGZpbHRlciIsIiRmaXJlYmFzZUFycmF5IiwiY3JlYXRlTXVsdGlHYW1lRmluYWxTdGFuZGluZ3MiLCJpbnB1dEV2ZW50IiwiZ2V0TXVsdGlHYW1lTGVhZGVyYm9hcmQiLCJtb2RlbCIsImlucHV0RXZlbnRTdGFuZGluZ3MiLCIkbG9hZGVkIiwic3RhbmRpbmciLCJrZXkiLCJwb3NpdGlvbiIsIiRzYXZlIiwiZ2V0RXZlbnRQcm9wZXJ0aWVzIiwiZXZlbnRQcm9wZXJ0aWVzIiwiZ2V0R2FtZURhdGEiLCJpbnB1dEdhbWUiLCJnZXRHYW1lc0xpc3QiLCJnYW1lc0xpc3QiLCJnYW1lIiwiY2FtZWxOYW1lIiwicGxheWVyUG9pbnRzIiwic2NvcmVzIiwic2NvcmVzQXJyYXkiLCIkIiwibWFwIiwiZWwiLCJ0b3RhbEF3YXJkIiwiaSIsImxlbmd0aCIsInBvaW50cyIsImRlYnVnIiwiaGF2ZUJvdHRvbVNjb3JlcnNGbG9vciIsImZsb29yUmFuZ2UiLCJnZXRTY29yZUNvdW50T2YiLCJqIiwiZ2V0U2luZ2xlR2FtZUxlYWRlcmJvYXJkIiwibGVhZGVyYm9hcmREYXRhIiwiZ2V0UGxheWVyU2NvcmVzIiwiaW5wdXRHYW1lc0xpc3QiLCJpbnB1dFBsYXllciIsImRpc3BsYXlTY29yZXMiLCJuZXdTY29yZU9iamVjdCIsInNjb3JlIiwicG9pbnRzRWFybmVkIiwiaW5wVXJsIiwidHdpdGNoVXJsIiwibWFtZVZlcnNpb24iLCJwdXNoIiwiRXZlbnRNYWluQ29udHJvbGxlciIsIiRzY29wZSIsIiRzdGF0ZVBhcmFtcyIsInByb2ZpbGVTZXJ2aWNlIiwidGVhbVNlcnZpY2UiLCJjbG9zZUdhbWVNb2RhbCIsImVsZW1lbnQiLCJjbG9zZU1vZGFsIiwiY2xvc2VNdWx0aUdhbWVMZWFkZXJib2FyZE1vZGFsIiwiY2xvc2VQbGF5ZXJNb2RhbCIsImNyZWF0ZVRlYW0iLCJ2bSIsImV2ZW50TmFtZSIsIm5ld1RlYW0iLCJNYXRlcmlhbGl6ZSIsInRvYXN0Iiwic2hvcnROYW1lIiwiZGV0ZXJtaW5lUG9pbnRzIiwiaW5wdXRTY29yZURhdGEiLCJpbnB1dEluZGV4IiwidXNlckdhbWVQb2ludHMiLCJzb3J0ZWRTY29yZXMiLCJnYW1lU2NvcmVzIiwiZ2V0Rmlyc3RQbGFjZVNjb3JlcyIsImdhbWVMaXN0IiwiZmlyc3RTY29yZSIsImdvVG9QbGF5ZXJQcm9maWxlIiwidXNlcm5hbWUiLCJpbml0RXZlbnQiLCJmb3JtYXQiLCJtdWx0aUdhbWUiLCJsZWFkZXJib2FyZCIsImxlYWRlcmJvYXJkTGVuZ3RoIiwic3VtbWFyaXplZExlYWRlcmJvYXJkIiwic2xpY2UiLCJ0ZWFtQmFzZWQiLCJnZXRUZWFtTGlzdCIsInRlYW1MaXN0IiwiY29sbGFwc2libGUiLCJhY2NvcmRpb24iLCJnZXRBdmF0YXJEYXRhIiwiYXZhdGFyRGF0YSIsIm9wZW5CYWRnZXNNb2RhbCIsIm9wZW5Nb2RhbCIsInNjcm9sbFRvcCIsIm9wZW5HYW1lTW9kYWwiLCJpbnB1dEdhbWVOYW1lIiwiZ2FtZURhdGEiLCIkaWQiLCJvcGVuTWFuYWdlbWVudE1vZGFsIiwib3Blbk11bHRpR2FtZUxlYWRlcmJvYXJkTW9kYWwiLCJjb21wbGV0ZUxlYWRlcmJvYXJkIiwib3BlblBsYXllck1vZGFsIiwiZm9jdXNQbGF5ZXIiLCJwbGF5ZXJTY29yZXMiLCJvcGVuR2FtZU1vZGFsRnJvbVBsYXllck1vZGFsIiwib3BlblBsYXllck1vZGFsRnJvbUdhbWVNb2RhbCIsIm9wZW5QbGF5ZXJNb2RhbEZyb21MZWFkZXJib2FyZE1vZGFsIiwib3BlblJ1bGVzTW9kYWwiLCJpbnB1dE5ld1RlYW1Qcm9wZXJ0aWVzIiwidGVhbVBvb2wiLCJmdWxsTmFtZSIsImZvcm1hbE5hbWUiLCJIZWFkZXJDb250cm9sbGVyIiwiYWN0aXZhdGUiLCJkcm9wZG93biIsImluRHVyYXRpb24iLCJvdXREdXJhdGlvbiIsImNvbnN0cmFpbl93aWR0aCIsImhvdmVyIiwiZ3V0dGVyIiwiYmVsb3dPcmlnaW4iLCJsb2NhdGlvbiIsInJlbG9hZCIsInZnR2FtZXNMaXN0IiwibGluayIsInNjb3BlIiwiYXR0cnMiLCJkaXJlY3RpdmUiLCJiaW5kVG9Db250cm9sbGVyIiwiR2FtZXNMaXN0Q29udHJvbGxlciIsImNvbnRyb2xsZXJBcyIsInJlc3RyaWN0IiwiZGF0YSIsIm9wZW5HYW1lRnVuY3Rpb24iLCJ2Z011bHRpR2FtZUxlYWRlcmJvYXJkIiwiTXVsdGlHYW1lTGVhZGVyYm9hcmRDb250cm9sbGVyIiwiY29tcGxldGVMZW5ndGgiLCJvcGVuUGxheWVyRnVuY3Rpb24iLCJvcGVuTGVhZGVyYm9hcmRGdW5jdGlvbiIsInZnU2luZ2xlR2FtZUxlYWRlcmJvYXJkIiwiU2luZ2xlR2FtZUxlYWRlcmJvYXJkQ29udHJvbGxlciIsInZnU3RpY2t5TWVzc2FnZSIsIlN0aWNreU1lc3NhZ2VDb250cm9sbGVyIiwicHJvcGVydGllcyIsIm9yZGVyT2JqZWN0QnkiLCJpdGVtcyIsImZpZWxkIiwicmV2ZXJzZSIsImZpbHRlcmVkIiwiaXRlbSIsInNvcnQiLCJhIiwiYiIsImZpbHRlciIsIkF2YXRhckNvbnRyb2xsZXIiLCJVcGxvYWQiLCJpbWd1ciIsImdldEJhZGdlc0RhdGEiLCJwcm9maWxlIiwiYmFkZ2VzRGF0YSIsInVwbG9hZEF2YXRhciIsImRpc2FibGVCdXR0b24iLCJzZXRBUElLZXkiLCJ1cGxvYWQiLCJmaWxlIiwic2F2ZUF2YXRhckxpbmsiLCJDaGFuZ2VQYXNzd29yZENvbnRyb2xsZXIiLCJzdWJtaXRDaGFuZ2VQYXNzd29yZCIsInB3Q2hhbmdlRm9ybSIsIiR2YWxpZCIsIiRjaGFuZ2VQYXNzd29yZCIsIm9sZFBhc3N3b3JkIiwiaW5wdXRDdXJyZW50UGFzc3dvcmQiLCJuZXdQYXNzd29yZCIsImlucHV0TmV3UGFzc3dvcmQiLCJzaG93Q2hhbmdlUGFzc3dvcmRNZXNzYWdlIiwiSG9tZUNvbnRyb2xsZXIiLCJMZWFkZXJib2FyZENvbnRyb2xsZXIiLCJnZXRQcm9maWxlU2NvcmVzIiwicHJvZmlsZVNjb3JlRGF0YSIsIlByb2ZpbGVDb250cm9sbGVyIiwiZ2V0VXNlckRhdGEiLCJnZXRUb3VybmFtZW50SGlzdG9yeSIsInRvdXJuYW1lbnRIaXN0b3J5RGF0YSIsImV2ZW50U3RhbmRpbmdzIiwiZ2V0VG91cm5hbWVudFN0YW5kaW5ncyIsImlucHV0VXNlciIsImlucHV0VXNlckRhdGEiLCJldmVudHNBcnJheSIsInBsZWRnZWRUbyIsImlucHV0VG91cm5hbWVudEhpc3RvcnkiLCJldmVudFN0YW5kaW5nRGF0YSIsIm5hbWUiLCJwcmVtaWVyIiwiY29sb3IiLCJ1c2Vyc0RhdGEiLCJpbnB1dExpbmsiLCJSZWdDb250cm9sbGVyIiwibG9naW5FbWFpbCIsImxvZ2luUGFzc3dvcmQiLCJzaG93SW52YWxpZFVzZXJFcnJvciIsInNob3dJbnZhbGlkUGFzc3dvcmRFcnJvciIsInBhc3N3b3JkUmVzZXQiLCIkcmVzZXRQYXNzd29yZCIsInNob3dQYXNzd29yZFJlc2V0RW1haWxNZXNzYWdlIiwic3VibWl0TmV3QWNjb3VudCIsIm5ld1VzZXJuYW1lIiwidXNlckV4aXN0cyIsInNob3dEdXBsaWNhdGVVc2VyRXJyb3IiLCJzaG93RW1haWxUYWtlbkVycm9yIiwibmV3RW1haWwiXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0EsWUFFQUEsU0FDQUMsT0FBQSxVQUVBLFlBR0EsWUFDQSxXQUNBLG1CQUNBLFVBQ0EsZUFDQSxlQ2RBLFdBQ0EsWUFVQSxTQUFBQyxHQUFBQyxFQUFBQyxHQUdBQSxFQUFBQyxVQUFBLEtBRUFGLEVBQ0FHLE1BQUEsUUFDQUMsSUFBQSxJQUNBQyxZQUFBLG9CQUNBQyxXQUFBLDJCQUdBSCxNQUFBLG1CQUNBQyxJQUFBLG1CQUNBQyxZQUFBLG9CQUNBQyxXQUFBLHlCQUdBSCxNQUFBLFdBQ0FDLElBQUEscUJBQ0FDLFlBQUEsd0JBQ0FDLFdBQUEsaUNBR0FILE1BQUEsZUFDQUMsSUFBQSxlQUNBQyxZQUFBLDRCQUNBQyxXQUFBLHlDQUdBSCxNQUFBLFNBQ0FDLElBQUEseUJBQ0FDLFlBQUEsc0JBQ0FDLFdBQUEsaUNBR0FILE1BQUEsbUJBQ0FDLElBQUEsbUJBQ0FDLFlBQUEsdUJBQ0FDLFdBQUEsNkJBRUFDLFNBQ0FDLGFBQUEsY0FBQSxTQUFBQyxHQUNBLE1BQUFBLEdBQUFDLG9CQUtBUCxNQUFBLGtCQUNBQyxJQUFBLGtCQUNBQyxZQUFBLCtCQUNBQyxXQUFBLHVDQUVBQyxTQUNBQyxhQUFBLGNBQUEsU0FBQUMsR0FDQSxNQUFBQSxHQUFBQyxvQkEvREFiLFFBQ0FDLE9BQUEsVUFDQWEsU0FBQSxnQkFDQUMsTUFBQSx5Q0FFQWIsT0FBQUEsR0MrRUNBLEVBQU9jLFNBQVcsaUJBQWtCLHlC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LEdBRUEsTUFBQSxnQkFBQUEsT0FFQXNELEVBQUFxSixxQkFBQSxRQUdBLG9CQUFBM00sR0FFQWxFLEVBQUFVLEdBQUEsV0FBQThILFNBQUFoQixFQUFBa0osbUJBdkVBLEdBQUFsSixHQUFBakUsSUFFQWlFLEdBQUFwRSxlQUFBQSxFQUNBb0UsRUFBQThJLGNBQUFBLEVBQ0E5SSxFQUFBaUosaUJBQUFBLEVBWkE3UixRQUNBQyxPQUFBLFVBQ0FRLFdBQUEsZ0JBQUE0USxHbkI2Z0RJQSxFQUFjclEsU0FBVyxTQUFVLGFBQWMsV0FBWSxVQUFXLFNBQVUsa0JBQW1CLGNBQWUiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcsIFtcbiAgICAgICAgICAgIC8qIEFuZ3VsYXIgbW9kdWxlcyAqL1xuICAgICAgICAgICAgJ25nQW5pbWF0ZScsXG4gICAgICAgICAgICAvKiBBcHAgbW9kdWxlcyAqL1xuICAgICAgICAgICAgLyogVGhpcmQtcGFydHkgbW9kdWxlcyAqL1xuICAgICAgICAgICAgJ3VpLnJvdXRlcicsXG4gICAgICAgICAgICAnZmlyZWJhc2UnLFxuICAgICAgICAgICAgJ3ZhbGlkYXRpb24ubWF0Y2gnLFxuICAgICAgICAgICAgJ29yZGluYWwnLFxuICAgICAgICAgICAgJ25nRmlsZVVwbG9hZCcsXG4gICAgICAgICAgICAnbmdJbWd1cidcbiAgICAgICAgXSk7XG59KSgpOyIsIihmdW5jdGlvbigpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCd2Zy5hcHAnKVxuXHRcdC5jb25zdGFudCgnRklSRUJBU0VEQVRBJywge1xuXHRcdFx0J0ZCVVJMJzogJ2h0dHBzOi8vd29sZnNjb250ZXN0cy5maXJlYmFzZWlvLmNvbSdcblx0XHR9KVxuXHRcdC5jb25maWcoY29uZmlnKTtcblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gY29uZmlnKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcblxuXHRcdC8vIFJlZGlyZWN0IGFueSB1bm1hdGNoZWQgVVJMIHRvIC8uXG5cdFx0JHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpO1xuXG5cdFx0JHN0YXRlUHJvdmlkZXJcblx0XHQgICAgLnN0YXRlKCdob21lJywge1xuXHRcdCAgICBcdHVybDogJy8nLFxuXHRcdCAgICBcdHRlbXBsYXRlVXJsOiAnYXBwL2hvbWUvaG9tZS5odG0nLFxuXHRcdCAgICBcdGNvbnRyb2xsZXI6ICdIb21lQ29udHJvbGxlciBhcyBob21lJ1xuXHRcdCAgICB9KVxuXG5cdFx0ICAgIC5zdGF0ZSgncmVnaXN0ZXJPckxvZ2luJywge1xuXHRcdCAgICBcdHVybDogJy9yZWdpc3Rlck9yTG9naW4nLFxuXHRcdCAgICBcdHRlbXBsYXRlVXJsOiAnL2FwcC9ob21lL3JlZy5odG0nLFxuXHRcdCAgICBcdGNvbnRyb2xsZXI6ICdSZWdDb250cm9sbGVyIGFzIHJlZydcblx0XHQgICAgfSlcblxuXHRcdCAgICAuc3RhdGUoJ3Byb2ZpbGUnLCB7XG5cdFx0ICAgIFx0dXJsOiAnL3Byb2ZpbGUvOnVzZXJuYW1lJyxcblx0XHQgICAgXHR0ZW1wbGF0ZVVybDogJy9hcHAvaG9tZS9wcm9maWxlLmh0bScsXG5cdFx0ICAgIFx0Y29udHJvbGxlcjogJ1Byb2ZpbGVDb250cm9sbGVyIGFzIHByb2ZpbGUnXG5cdFx0ICAgIH0pXG5cblx0XHQgICAgLnN0YXRlKCdsZWFkZXJib2FyZCcsIHtcblx0XHQgICAgXHR1cmw6ICcvbGVhZGVyYm9hcmQnLFxuXHRcdCAgICBcdHRlbXBsYXRlVXJsOiAnL2FwcC9ob21lL2xlYWRlcmJvYXJkLmh0bScsXG5cdFx0ICAgIFx0Y29udHJvbGxlcjogJ0xlYWRlcmJvYXJkQ29udHJvbGxlciBhcyBsZWFkZXJib2FyZCdcblx0XHQgICAgfSlcblxuXHRcdCAgICAuc3RhdGUoJ2V2ZW50Jywge1xuXHRcdCAgICBcdHVybDogJy9ldmVudC86ZXZlbnROYW1lL21haW4nLFxuXHRcdCAgICBcdHRlbXBsYXRlVXJsOiAnL2FwcC9ldmVudC9tYWluLmh0bScsXG5cdFx0ICAgIFx0Y29udHJvbGxlcjogJ0V2ZW50TWFpbkNvbnRyb2xsZXIgYXMgZXZlbnQnXG5cdFx0ICAgIH0pXG5cblx0XHQgICAgLnN0YXRlKCdjdXN0b21pemVBdmF0YXInLCB7XG5cdFx0ICAgIFx0dXJsOiAnL2N1c3RvbWl6ZUF2YXRhcicsXG5cdFx0ICAgIFx0dGVtcGxhdGVVcmw6ICcvYXBwL2hvbWUvYXZhdGFyLmh0bScsXG5cdFx0ICAgIFx0Y29udHJvbGxlcjogJ0F2YXRhckNvbnRyb2xsZXIgYXMgYXZhdGFyJyxcblxuXHRcdCAgICBcdHJlc29sdmU6IHtcblx0XHQgICAgXHRcdCdjdXJyZW50QXV0aCc6IFsnQXV0aFdyYXBwZXInLCBmdW5jdGlvbihBdXRoV3JhcHBlcikge1xuXHRcdCAgICBcdFx0XHRyZXR1cm4gQXV0aFdyYXBwZXIuJHJlcXVpcmVBdXRoKCk7XG5cdFx0ICAgIFx0XHR9XVxuXHRcdCAgICBcdH1cblx0XHQgICAgfSlcblxuXHRcdCAgICAuc3RhdGUoJ2NoYW5nZVBhc3N3b3JkJywge1xuXHRcdCAgICBcdHVybDogJy9jaGFuZ2VQYXNzd29yZCcsXG5cdFx0ICAgIFx0dGVtcGxhdGVVcmw6ICcvYXBwL2hvbWUvY2hhbmdlUGFzc3dvcmQuaHRtJyxcblx0XHQgICAgXHRjb250cm9sbGVyOiAnQ2hhbmdlUGFzc3dvcmRDb250cm9sbGVyIGFzIHB3Y2hhbmdlJyxcblxuXHRcdCAgICBcdHJlc29sdmU6IHtcblx0XHQgICAgXHRcdCdjdXJyZW50QXV0aCc6IFsnQXV0aFdyYXBwZXInLCBmdW5jdGlvbihBdXRoV3JhcHBlcikge1xuXHRcdCAgICBcdFx0XHRyZXR1cm4gQXV0aFdyYXBwZXIuJHJlcXVpcmVBdXRoKCk7XG5cdFx0ICAgIFx0XHR9XVxuXHRcdCAgICBcdH1cblx0XHQgICAgfSk7XG5cdH1cbn0pKCk7IixudWxsLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAucnVuKHJ1bik7XG5cbiAgICBmdW5jdGlvbiBydW4oJHJvb3RTY29wZSwgJGxvY2F0aW9uLCAkc3RhdGUsICRmaXJlYmFzZU9iamVjdCwgQXV0aFdyYXBwZXIsIEZJUkVCQVNFREFUQSkge1xuXG4gICAgICAgICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VFcnJvcicsIGZ1bmN0aW9uKGV2ZW50LCB0b1N0YXRlLCB0b1BhcmFtcywgZnJvbVN0YXRlLCBmcm9tUGFyYW1zLCBlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yID09PSAnQVVUSF9SRVFVSVJFRCcpIHtcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ3JlZ2lzdGVyT3JMb2dpbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAvLyBJZiB1c2VyIGlzIGxvZ2dlZCBpbiwgZG93bmxvYWQgdGhlaXIgcHJvZmlsZSBkYXRhIHRvIGFuIG9iamVjdCBpbiAkcm9vdFNjb3BlLlxuICAgICAgICAgICAgLy8gRklYTUU6IFdlIHNob3VsZG4ndCBuZWVkIHRvIGRvIHRoaXMgZXZlcnkgc3VjY2Vzc2Z1bCBzdGF0ZSBjaGFuZ2UuXG4gICAgICAgICAgICBpZiAoQXV0aFdyYXBwZXIuJGdldEF1dGgoKSkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHZhciBhdXRoRGF0YSA9IEF1dGhXcmFwcGVyLiRnZXRBdXRoKCk7XG4gICAgICAgICAgICAgICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuXG4gICAgICAgICAgICAgICAgdmFyIHByb2ZpbGVEYXRhID0gJGZpcmViYXNlT2JqZWN0KHJlZi5jaGlsZCgndXNlcnMnKS5jaGlsZChhdXRoRGF0YS51aWQpKTtcbiAgICAgICAgICAgICAgICBwcm9maWxlRGF0YS4kYmluZFRvKCRyb290U2NvcGUsICdwcm9maWxlJykudGhlbihmdW5jdGlvbih1bmJpbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS51bmJpbmRGdW5jdGlvbiA9IHVuYmluZDtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5zZXJ2aWNlKCdhdXRoU2VydmljZScsIGF1dGhTZXJ2aWNlKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIGF1dGhTZXJ2aWNlKCRxLCAkcm9vdFNjb3BlLCAkc3RhdGUsICR3aW5kb3csICR0aW1lb3V0LCAkZmlyZWJhc2VPYmplY3QsIEF1dGhXcmFwcGVyLCBGSVJFQkFTRURBVEEpIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMudGVzdERhdGEgPSAnaGVsbG8gd29ybGQhJztcblxuICAgIFx0dGhpcy5jaGVja0lmVXNlckV4aXN0cyA9IGNoZWNrSWZVc2VyRXhpc3RzO1xuICAgIFx0dGhpcy5jcmVhdGVOZXdVc2VyID0gY3JlYXRlTmV3VXNlcjtcbiAgICAgICAgdGhpcy5sb2dpblRvQWNjb3VudCA9IGxvZ2luVG9BY2NvdW50O1xuICAgICAgICB0aGlzLmxvZ091dCA9IGxvZ091dDtcblxuICAgIFx0Ly8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgXHRmdW5jdGlvbiBjaGVja0lmVXNlckV4aXN0cyhpbnB1dFVzZXJuYW1lKSB7XG5cbiAgICBcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgIFx0XHR2YXIgZG9lc1VzZXJFeGlzdCA9IGZhbHNlO1xuICAgIFx0XHR2YXIgdXNlcnNSZWYgPSBuZXcgJHdpbmRvdy5GaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwgKyAnL3VzZXJzJyk7XG5cbiAgICBcdFx0dXNlcnNSZWYub25jZSgndmFsdWUnLCBmdW5jdGlvbihkYXRhU25hcHNob3QpIHtcblxuICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBkYXRhU25hcHNob3QuZm9yRWFjaChmdW5jdGlvbih1c2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodXNlci52YWwoKS51c2VyTmFtZSA9PT0gaW5wdXRVc2VybmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvZXNVc2VyRXhpc3QgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGRvZXNVc2VyRXhpc3QpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgXHRcdH0pO1xuXG4gICAgXHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgXHR9XG5cbiAgICBcdGZ1bmN0aW9uIGNyZWF0ZU5ld1VzZXIoaW5wdXRFbWFpbCwgaW5wdXRQYXNzd29yZCwgaW5wdXRVc2VybmFtZSkge1xuXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgXHRcdEF1dGhXcmFwcGVyLiRjcmVhdGVVc2VyKHtcbiAgICBcdFx0XHRlbWFpbDogaW5wdXRFbWFpbCxcbiAgICBcdFx0XHRwYXNzd29yZDogaW5wdXRQYXNzd29yZFxuICAgIFx0XHR9KS50aGVuKGZ1bmN0aW9uKHVzZXJEYXRhKSB7XG5cbiAgICBcdFx0XHQvLyBDcmVhdGUgYSBkYXRhIGVudHJ5IGZvciB0aGUgbmV3IHVzZXJuYW1lLlxuICAgIFx0XHRcdG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpLmNoaWxkKCd1c2Vycy8nICsgdXNlckRhdGEudWlkKS5zZXQoe1xuXG4gICAgXHRcdFx0XHR1c2VyTmFtZTogaW5wdXRVc2VybmFtZSxcbiAgICBcdFx0XHRcdHJvbGU6ICdVc2VyJ1xuXG4gICAgXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3JEYXRhKSB7XG4gICAgXHRcdFx0XHRjb25zb2xlLmVycm9yKGVycm9yRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvckRhdGEuY29kZTtcbiAgICBcdFx0XHR9KTtcblxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhIGRhdGEgZW50cnkgZm9yIHRoZSB1c2VyJ3MgYXZhdGFyLlxuICAgICAgICAgICAgICAgIG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpLmNoaWxkKCdhdmF0YXJzJykuY2hpbGQoaW5wdXRVc2VybmFtZSkuc2V0KCdodHRwOi8vYXBpLmFkb3JhYmxlLmlvL2F2YXRhcnMvNDIvJyArIGlucHV0VXNlcm5hbWUpO1xuXG4gICAgXHRcdFx0Ly8gTG9nIHRoZSB1c2VyIGluLlxuICAgIFx0XHRcdEF1dGhXcmFwcGVyLiRhdXRoV2l0aFBhc3N3b3JkKHtcbiAgICBcdFx0XHRcdGVtYWlsOiBpbnB1dEVtYWlsLFxuICAgIFx0XHRcdFx0cGFzc3dvcmQ6IGlucHV0UGFzc3dvcmRcbiAgICBcdFx0XHR9KS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCdBQ0NPVU5UX0NSRUFURUQnKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgIFx0XHR9KS5jYXRjaChmdW5jdGlvbihlcnJvckRhdGEpIHtcblxuICAgIFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3JEYXRhKTtcblxuICAgIFx0XHRcdGlmIChlcnJvckRhdGEuY29kZSA9PT0gJ0VNQUlMX1RBS0VOJykge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGVycm9yRGF0YS5jb2RlKTtcbiAgICBcdFx0XHR9XG5cbiAgICBcdFx0fSk7XG5cbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgXHR9XG5cbiAgICAgICAgZnVuY3Rpb24gbG9naW5Ub0FjY291bnQoaW5wdXRFbWFpbCwgaW5wdXRQYXNzd29yZCkge1xuXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICAgICBBdXRoV3JhcHBlci4kYXV0aFdpdGhQYXNzd29yZCh7XG4gICAgICAgICAgICAgICAgZW1haWw6IGlucHV0RW1haWwsXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6IGlucHV0UGFzc3dvcmRcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oYXV0aERhdGEpIHtcblxuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoJ0xPR0lOX1NVQ0NFU1MnKTtcblxuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyb3JEYXRhKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoZXJyb3JEYXRhLmNvZGUgPT09ICdJTlZBTElEX1VTRVInKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoJ0lOVkFMSURfVVNFUicpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3JEYXRhLmNvZGUgPT09ICdJTlZBTElEX1BBU1NXT1JEJykge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCdJTlZBTElEX1BBU1NXT1JEJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGxvZ091dCgpIHtcbiAgICAgICAgICAgIEF1dGhXcmFwcGVyLiR1bmF1dGgoKTtcbiAgICAgICAgICAgICRyb290U2NvcGUudW5iaW5kRnVuY3Rpb24oKTtcbiAgICAgICAgfVxuXG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuZmFjdG9yeSgnQXV0aFdyYXBwZXInLCBBdXRoV3JhcHBlcik7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBBdXRoV3JhcHBlcigkZmlyZWJhc2VBdXRoLCBGSVJFQkFTRURBVEEpIHtcblxuICAgICAgICB2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZJUkVCQVNFREFUQS5GQlVSTCk7XG4gICAgICAgIHJldHVybiAkZmlyZWJhc2VBdXRoKHJlZik7XG5cbiAgICB9XG4gICAgXG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5zZXJ2aWNlKCdldmVudFNlcnZpY2UnLCBldmVudFNlcnZpY2UpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gZXZlbnRTZXJ2aWNlKCRxLCAkZmlsdGVyLCAkZmlyZWJhc2VPYmplY3QsICRmaXJlYmFzZUFycmF5LCBGSVJFQkFTRURBVEEpIHtcblxuICAgICAgICB0aGlzLmNyZWF0ZU11bHRpR2FtZUZpbmFsU3RhbmRpbmdzID0gY3JlYXRlTXVsdGlHYW1lRmluYWxTdGFuZGluZ3M7XG4gICAgICAgIHRoaXMuZ2V0RXZlbnRQcm9wZXJ0aWVzID0gZ2V0RXZlbnRQcm9wZXJ0aWVzO1xuICAgICAgICB0aGlzLmdldEdhbWVEYXRhID0gZ2V0R2FtZURhdGE7XG4gICAgICAgIHRoaXMuZ2V0R2FtZXNMaXN0ID0gZ2V0R2FtZXNMaXN0O1xuICAgICAgICB0aGlzLmdldE11bHRpR2FtZUxlYWRlcmJvYXJkID0gZ2V0TXVsdGlHYW1lTGVhZGVyYm9hcmQ7XG4gICAgICAgIHRoaXMuZ2V0U2luZ2xlR2FtZUxlYWRlcmJvYXJkID0gZ2V0U2luZ2xlR2FtZUxlYWRlcmJvYXJkO1xuICAgICAgICB0aGlzLmdldFBsYXllclNjb3JlcyA9IGdldFBsYXllclNjb3JlcztcblxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlTXVsdGlHYW1lRmluYWxTdGFuZGluZ3MoaW5wdXRFdmVudCkge1xuXG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIGZpbmFsIHN0YW5kaW5ncyBvZiB0aGUgZXZlbnQuXG4gICAgICAgICAgICBnZXRNdWx0aUdhbWVMZWFkZXJib2FyZChpbnB1dEV2ZW50KS50aGVuKGZ1bmN0aW9uIHRoZW4obW9kZWwpIHtcblxuICAgICAgICAgICAgICAgIHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRklSRUJBU0VEQVRBLkZCVVJMKTtcbiAgICAgICAgICAgICAgICB2YXIgaW5wdXRFdmVudFN0YW5kaW5ncyA9ICRmaXJlYmFzZU9iamVjdChcbiAgICAgICAgICAgICAgICAgICAgcmVmXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGQoJ3N0YW5kaW5ncycpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGQoaW5wdXRFdmVudClcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgaW5wdXRFdmVudFN0YW5kaW5ncy4kbG9hZGVkKCkudGhlbihmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICBtb2RlbC5mb3JFYWNoKGZ1bmN0aW9uKHN0YW5kaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dEV2ZW50U3RhbmRpbmdzW3N0YW5kaW5nLmtleV0gPSBzdGFuZGluZy5wb3NpdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaW5wdXRFdmVudFN0YW5kaW5ncy4kc2F2ZSgpO1xuXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRFdmVudFByb3BlcnRpZXMoaW5wdXRFdmVudCkge1xuXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgIFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuICAgICAgICBcdHZhciBldmVudFByb3BlcnRpZXMgPSAkZmlyZWJhc2VPYmplY3QoXG4gICAgICAgIFx0XHRyZWZcbiAgICAgICAgXHRcdFx0LmNoaWxkKCdjb250ZXN0cycpXG4gICAgICAgIFx0XHRcdC5jaGlsZChpbnB1dEV2ZW50KVxuICAgICAgICBcdFx0XHQuY2hpbGQoJ3Byb3BlcnRpZXMnKVxuICAgICAgICBcdCk7XG5cbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZXZlbnRQcm9wZXJ0aWVzKTtcblxuICAgICAgICBcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRHYW1lRGF0YShpbnB1dEV2ZW50LCBpbnB1dEdhbWUpIHtcblxuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICAgICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuXG4gICAgICAgICAgICBnZXRHYW1lc0xpc3QoaW5wdXRFdmVudCkudGhlbihmdW5jdGlvbihnYW1lc0xpc3QpIHtcblxuICAgICAgICAgICAgICAgIGdhbWVzTGlzdC5mb3JFYWNoKGZ1bmN0aW9uKGdhbWUpIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZS5jYW1lbE5hbWUgPT09IGlucHV0R2FtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShnYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0R2FtZXNMaXN0KGlucHV0RXZlbnQpIHtcblxuICAgICAgICBcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICAgXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZJUkVCQVNFREFUQS5GQlVSTCk7XG4gICAgICAgIFx0dmFyIGdhbWVzTGlzdCA9ICRmaXJlYmFzZUFycmF5KFxuICAgICAgICBcdFx0cmVmXG4gICAgICAgIFx0XHRcdC5jaGlsZCgnY29udGVzdHMnKVxuICAgICAgICBcdFx0XHQuY2hpbGQoaW5wdXRFdmVudClcbiAgICAgICAgXHRcdFx0LmNoaWxkKCdhY3RpdmVHYW1lcycpXG4gICAgICAgIFx0KTtcblxuICAgICAgICBcdGdhbWVzTGlzdC4kbG9hZGVkKCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgXHRcdGRlZmVycmVkLnJlc29sdmUoZ2FtZXNMaXN0KTtcbiAgICAgICAgXHR9KTtcblxuICAgICAgICBcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRNdWx0aUdhbWVMZWFkZXJib2FyZChpbnB1dEV2ZW50KSB7XG5cbiAgICAgICAgXHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgIFx0Ly8gV2UgbmVlZCB0byBnZXQgdGhlIHRvcCAxMiBwbGF5ZXJzIGZvciBldmVyeSBnYW1lLlxuICAgICAgICBcdHZhciBwbGF5ZXJQb2ludHMgPSB7fTtcblxuICAgICAgICBcdGdldEdhbWVzTGlzdChpbnB1dEV2ZW50KS50aGVuKGZ1bmN0aW9uIHRoZW4obW9kZWwpIHtcblxuICAgICAgICBcdFx0dmFyIGdhbWVzTGlzdCA9IG1vZGVsO1xuICAgICAgICBcdFx0Z2FtZXNMaXN0LmZvckVhY2goZnVuY3Rpb24oZ2FtZSkge1xuXG4gICAgICAgIFx0XHRcdGlmIChnYW1lLnNjb3Jlcykge1xuXG4gICAgICAgIFx0XHRcdFx0Ly8gQ29udmVydCB0aGUgZ2FtZSdzIHNjb3JlcyB0byBhbiBhcnJheS5cbiAgICAgICAgXHRcdFx0XHR2YXIgc2NvcmVzQXJyYXkgPSAkLm1hcChnYW1lLnNjb3JlcywgZnVuY3Rpb24oZWwpIHsgcmV0dXJuIGVsOyB9KTtcbiAgICAgICAgXHRcdFx0XHRzY29yZXNBcnJheSA9ICRmaWx0ZXIoJ29yZGVyQnknKShzY29yZXNBcnJheSwgJy1zY29yZScpO1xuXG4gICAgICAgIFx0XHRcdFx0dmFyIHRvdGFsQXdhcmQgPSAxMjtcblxuICAgICAgICBcdFx0XHRcdC8vIEl0ZXJhdGUgdGhyb3VnaCB0aGUgdG9wIHNjb3JlcyBhd2FyZGluZyBwb2ludHMuXG4gICAgICAgIFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzY29yZXNBcnJheS5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgIFx0XHRcdFx0XHRpZiAoIXBsYXllclBvaW50c1tzY29yZXNBcnJheVtpXS51c2VyTmFtZV0pIHtcbiAgICAgICAgXHRcdFx0XHRcdFx0cGxheWVyUG9pbnRzW3Njb3Jlc0FycmF5W2ldLnVzZXJOYW1lXSA9IHtcbiAgICAgICAgXHRcdFx0XHRcdFx0XHRwb2ludHM6IDBcbiAgICAgICAgXHRcdFx0XHRcdFx0fTtcbiAgICAgICAgXHRcdFx0XHRcdH1cblxuICAgICAgICBcdFx0XHRcdFx0cGxheWVyUG9pbnRzW3Njb3Jlc0FycmF5W2ldLnVzZXJOYW1lXS5wb2ludHMgKz0gdG90YWxBd2FyZDtcblxuICAgICAgICBcdFx0XHRcdFx0aWYgKHRvdGFsQXdhcmQgPiAwKSB7XG4gICAgICAgIFx0XHRcdFx0XHRcdHRvdGFsQXdhcmQgLT0gMTtcbiAgICAgICAgXHRcdFx0XHRcdH1cblxuICAgICAgICBcdFx0XHRcdH1cblxuICAgICAgICBcdFx0XHR9XG5cbiAgICAgICAgXHRcdH0pO1xuXG4gICAgICAgIFx0XHQvLyBGaW5kIGFuZCByZXNvbHZlIHRpZXMuXG4gICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZyhwbGF5ZXJQb2ludHMpO1xuICAgICAgICBcdFx0cGxheWVyUG9pbnRzID0gJGZpbHRlcignb3JkZXJPYmplY3RCeScpKHBsYXllclBvaW50cywgJ3BvaW50cycsIHRydWUpO1xuICAgICAgICAgICAgICAgIHZhciBoYXZlQm90dG9tU2NvcmVyc0Zsb29yID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdmFyIGZsb29yUmFuZ2UgPSAwO1xuICAgICAgICBcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBwbGF5ZXJQb2ludHMubGVuZ3RoOyBpICs9IDEpIHtcblxuICAgICAgICBcdFx0XHRpZiAocGxheWVyUG9pbnRzW2ktMV0gJiYgcGxheWVyUG9pbnRzW2ldLnBvaW50cyAmJiBwbGF5ZXJQb2ludHNbaS0xXS5wb2ludHMpIHtcblxuICAgICAgICBcdFx0XHRcdGlmIChwbGF5ZXJQb2ludHNbaV0ucG9pbnRzID09PSBwbGF5ZXJQb2ludHNbaS0xXS5wb2ludHMpIHtcbiAgICAgICAgXHRcdFx0XHRcdHBsYXllclBvaW50c1tpXS5wb3NpdGlvbiA9IHBsYXllclBvaW50c1tpLTFdLnBvc2l0aW9uO1xuICAgICAgICBcdFx0XHRcdH0gZWxzZSB7XG4gICAgICAgIFx0XHRcdFx0XHRwbGF5ZXJQb2ludHNbaV0ucG9zaXRpb24gPSAoaSsxKTtcbiAgICAgICAgXHRcdFx0XHR9XG5cbiAgICAgICAgXHRcdFx0fSBlbHNlIHtcblxuICAgICAgICBcdFx0XHRcdGlmIChpID09PSAwKSB7XG4gICAgICAgIFx0XHRcdFx0XHRwbGF5ZXJQb2ludHNbaV0ucG9zaXRpb24gPSAxO1xuICAgICAgICBcdFx0XHRcdH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhhdmVCb3R0b21TY29yZXJzRmxvb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR2V0IGNvdW50IG9mIHBsYXllcnMgaW4gb25lIHBvc2l0aW9uIGhpZ2hlci5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdldFNjb3JlQ291bnRPZiA9IHBsYXllclBvaW50c1tpLTFdLnBvaW50cztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHBsYXllclBvaW50cy5sZW5ndGg7IGogKz0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBsYXllclBvaW50c1tqXS5wb2ludHMgPT09IGdldFNjb3JlQ291bnRPZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsb29yUmFuZ2UgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhdmVCb3R0b21TY29yZXJzRmxvb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICBcdFx0XHRcdFx0cGxheWVyUG9pbnRzW2ldLnBvc2l0aW9uID0gKHBsYXllclBvaW50cy5sZW5ndGggKyAxKSAtIGZsb29yUmFuZ2U7XG4gICAgICAgIFx0XHRcdFx0fVxuXG4gICAgICAgIFx0XHRcdH1cblxuICAgICAgICBcdFx0fVxuXG4gICAgICAgIFx0XHRkZWZlcnJlZC5yZXNvbHZlKHBsYXllclBvaW50cyk7XG5cbiAgICAgICAgXHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFNpbmdsZUdhbWVMZWFkZXJib2FyZChpbnB1dEV2ZW50KSB7XG5cbiAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICAgICAgIHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRklSRUJBU0VEQVRBLkZCVVJMKTtcbiAgICAgICAgICAgIHZhciBsZWFkZXJib2FyZERhdGEgPSAkZmlyZWJhc2VBcnJheShcbiAgICAgICAgICAgICAgICByZWZcbiAgICAgICAgICAgICAgICAgICAgLmNoaWxkKCdjb250ZXN0cycpXG4gICAgICAgICAgICAgICAgICAgIC5jaGlsZChpbnB1dEV2ZW50KVxuICAgICAgICAgICAgICAgICAgICAuY2hpbGQoJ3Njb3JlcycpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGxlYWRlcmJvYXJkRGF0YSk7XG5cbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRQbGF5ZXJTY29yZXMoaW5wdXRFdmVudCwgaW5wdXRHYW1lc0xpc3QsIGlucHV0UGxheWVyKSB7XG5cbiAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICAgICAgIHZhciBkaXNwbGF5U2NvcmVzID0gW107XG5cbiAgICAgICAgICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCBldmVyeSBnYW1lLlxuICAgICAgICAgICAgaW5wdXRHYW1lc0xpc3QuZm9yRWFjaChmdW5jdGlvbihnYW1lKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoZ2FtZS5zY29yZXMpIHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IHRoZSBnYW1lJ3Mgc2NvcmVzIHRvIGFuIGFycmF5LlxuICAgICAgICAgICAgICAgICAgICB2YXIgc2NvcmVzQXJyYXkgPSAkLm1hcChnYW1lLnNjb3JlcywgZnVuY3Rpb24oZWwpIHsgcmV0dXJuIGVsOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgc2NvcmVzQXJyYXkgPSAkZmlsdGVyKCdvcmRlckJ5Jykoc2NvcmVzQXJyYXksICctc2NvcmUnKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgdG90YWxBd2FyZCA9IDEyO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCB0aGUgc2NvcmVzIHN0YXJ0aW5nIGZyb20gdGhlIHRvcCBhbmQgZmluZCBvdXIgdXNlci5cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzY29yZXNBcnJheS5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3VuZCBvdXIgcGxheWVyLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNjb3Jlc0FycmF5W2ldLnVzZXJOYW1lID09PSBpbnB1dFBsYXllcikge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1Njb3JlT2JqZWN0ID0gZ2FtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTY29yZU9iamVjdC5wb3NpdGlvbiA9IGkrMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTY29yZU9iamVjdC5zY29yZSA9IHNjb3Jlc0FycmF5W2ldLnNjb3JlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Njb3JlT2JqZWN0LnBvaW50c0Vhcm5lZCA9IHRvdGFsQXdhcmQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2NvcmVPYmplY3QuaW5wVXJsID0gc2NvcmVzQXJyYXlbaV0uaW5wVXJsID8gc2NvcmVzQXJyYXlbaV0uaW5wVXJsIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTY29yZU9iamVjdC50d2l0Y2hVcmwgPSBzY29yZXNBcnJheVtpXS50d2l0Y2hVcmwgPyBzY29yZXNBcnJheVtpXS50d2l0Y2hVcmwgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Njb3JlT2JqZWN0Lm1hbWVWZXJzaW9uID0gc2NvcmVzQXJyYXlbaV0ubWFtZVZlcnNpb24gPyBzY29yZXNBcnJheVtpXS5tYW1lVmVyc2lvbiA6IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5U2NvcmVzLnB1c2gobmV3U2NvcmVPYmplY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsQXdhcmQgPSAxMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodG90YWxBd2FyZCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxBd2FyZCAtPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGRpc3BsYXlTY29yZXMpO1xuXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblxuICAgICAgICB9XG5cbiAgICB9XG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdFdmVudE1haW5Db250cm9sbGVyJywgRXZlbnRNYWluQ29udHJvbGxlcik7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBFdmVudE1haW5Db250cm9sbGVyKCRzY29wZSwgJGZpbHRlciwgJHN0YXRlUGFyYW1zLCAkc3RhdGUsICR0aW1lb3V0LCAkZmlyZWJhc2VBcnJheSwgZXZlbnRTZXJ2aWNlLCBhdXRoU2VydmljZSwgcHJvZmlsZVNlcnZpY2UsIHRlYW1TZXJ2aWNlLCBGSVJFQkFTRURBVEEpIHtcblxuICAgICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgdm0uZXZlbnROYW1lID0gJHN0YXRlUGFyYW1zLmV2ZW50TmFtZTtcblxuICAgICAgICB2bS5jbG9zZUdhbWVNb2RhbCA9IGNsb3NlR2FtZU1vZGFsO1xuICAgICAgICB2bS5jbG9zZU11bHRpR2FtZUxlYWRlcmJvYXJkTW9kYWwgPSBjbG9zZU11bHRpR2FtZUxlYWRlcmJvYXJkTW9kYWw7XG4gICAgICAgIHZtLmNsb3NlUGxheWVyTW9kYWwgPSBjbG9zZVBsYXllck1vZGFsO1xuICAgICAgICB2bS5jcmVhdGVUZWFtID0gY3JlYXRlVGVhbTtcbiAgICAgICAgdm0uZGV0ZXJtaW5lUG9pbnRzID0gZGV0ZXJtaW5lUG9pbnRzO1xuICAgICAgICB2bS5nZXRGaXJzdFBsYWNlU2NvcmVzID0gZ2V0Rmlyc3RQbGFjZVNjb3JlcztcbiAgICAgICAgdm0uZ29Ub1BsYXllclByb2ZpbGUgPSBnb1RvUGxheWVyUHJvZmlsZTtcbiAgICAgICAgdm0ub3BlbkJhZGdlc01vZGFsID0gb3BlbkJhZGdlc01vZGFsO1xuICAgICAgICB2bS5vcGVuR2FtZU1vZGFsID0gb3BlbkdhbWVNb2RhbDtcbiAgICAgICAgdm0ub3BlbkdhbWVNb2RhbEZyb21QbGF5ZXJNb2RhbCA9IG9wZW5HYW1lTW9kYWxGcm9tUGxheWVyTW9kYWw7XG4gICAgICAgIHZtLm9wZW5NYW5hZ2VtZW50TW9kYWwgPSBvcGVuTWFuYWdlbWVudE1vZGFsO1xuICAgICAgICB2bS5vcGVuTXVsdGlHYW1lTGVhZGVyYm9hcmRNb2RhbCA9IG9wZW5NdWx0aUdhbWVMZWFkZXJib2FyZE1vZGFsO1xuICAgICAgICB2bS5vcGVuUGxheWVyTW9kYWwgPSBvcGVuUGxheWVyTW9kYWw7XG4gICAgICAgIHZtLm9wZW5QbGF5ZXJNb2RhbEZyb21HYW1lTW9kYWwgPSBvcGVuUGxheWVyTW9kYWxGcm9tR2FtZU1vZGFsO1xuICAgICAgICB2bS5vcGVuUGxheWVyTW9kYWxGcm9tTGVhZGVyYm9hcmRNb2RhbCA9IG9wZW5QbGF5ZXJNb2RhbEZyb21MZWFkZXJib2FyZE1vZGFsO1xuICAgICAgICB2bS5vcGVuUnVsZXNNb2RhbCA9IG9wZW5SdWxlc01vZGFsO1xuXG4gICAgICAgIGluaXRFdmVudCgpO1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgIGZ1bmN0aW9uIGNsb3NlR2FtZU1vZGFsKCkge1xuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjZ2FtZU1vZGFsJykuY2xvc2VNb2RhbCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY2xvc2VNdWx0aUdhbWVMZWFkZXJib2FyZE1vZGFsKCkge1xuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjbXVsdGlHYW1lTGVhZGVyYm9hcmRNb2RhbCcpLmNsb3NlTW9kYWwoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNsb3NlUGxheWVyTW9kYWwoKSB7XG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNwbGF5ZXJNb2RhbCcpLmNsb3NlTW9kYWwoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVRlYW0oKSB7XG4gICAgICAgICAgICB0ZWFtU2VydmljZS5jcmVhdGVUZWFtKHZtLmV2ZW50TmFtZSwgdm0ubmV3VGVhbSkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBNYXRlcmlhbGl6ZS50b2FzdCgnVGVhbSAnICsgdm0ubmV3VGVhbS5zaG9ydE5hbWUgKyAnIGNyZWF0ZWQuJywgNDAwMCk7XG4gICAgICAgICAgICAgICAgdm0ubmV3VGVhbSA9IG51bGw7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRldGVybWluZVBvaW50cyhpbnB1dFNjb3JlRGF0YSwgaW5wdXRJbmRleCkge1xuXG4gICAgICAgICAgICB2YXIgdXNlckdhbWVQb2ludHM7XG5cbiAgICAgICAgICAgIC8vIE5vIHBvc2l0aW9uIGdyZWF0ZXIgdGhhbiAxMiBnZXRzIHBvaW50cy5cbiAgICAgICAgICAgIGlmIChpbnB1dEluZGV4ID4gMTEpIHtcbiAgICAgICAgICAgICAgICB1c2VyR2FtZVBvaW50cyA9IDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJHYW1lUG9pbnRzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB1c2VyR2FtZVBvaW50cyA9IDEyIC0gaW5wdXRJbmRleDtcblxuICAgICAgICAgICAgdmFyIHNvcnRlZFNjb3JlcyA9ICRmaWx0ZXIoJ29yZGVyQnknKSh2bS5nYW1lU2NvcmVzLCAnLXNjb3JlJyk7XG5cbiAgICAgICAgICAgIC8vIEFtIEkgdGllZCB3aXRoIHRoZSBwZXJzb24gYWJvdmUgbWU/IElmIHNvLCBtYXRjaCB0aGVpciBwb2ludHMuXG4gICAgICAgICAgICBpZiAoc29ydGVkU2NvcmVzW2lucHV0SW5kZXggLSAxXSkge1xuXG4gICAgICAgICAgICAgICAgaWYgKHNvcnRlZFNjb3Jlc1tpbnB1dEluZGV4IC0gMV0uc2NvcmUgPT09IGlucHV0U2NvcmVEYXRhLnNjb3JlKSB7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJHYW1lUG9pbnRzICs9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdXNlckdhbWVQb2ludHM7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEZpcnN0UGxhY2VTY29yZXMoKSB7XG5cbiAgICAgICAgICAgIHZtLmdhbWVMaXN0LmZvckVhY2goZnVuY3Rpb24oZ2FtZSkge1xuXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUgYXJlIHNjb3JlcywgZ2V0IHRoZSB0b3Agb25lLlxuICAgICAgICAgICAgICAgIGlmIChnYW1lLnNjb3Jlcykge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBzY29yZXNBcnJheSA9ICQubWFwKGdhbWUuc2NvcmVzLCBmdW5jdGlvbihlbCkgeyByZXR1cm4gZWw7IH0pO1xuICAgICAgICAgICAgICAgICAgICBzY29yZXNBcnJheSA9ICRmaWx0ZXIoJ29yZGVyQnknKShzY29yZXNBcnJheSwgJy1zY29yZScpO1xuICAgICAgICAgICAgICAgICAgICBnYW1lLmZpcnN0U2NvcmUgPSBzY29yZXNBcnJheVswXTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdvVG9QbGF5ZXJQcm9maWxlKGlucHV0UGxheWVyKSB7XG5cbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI3BsYXllck1vZGFsJykuY2xvc2VNb2RhbCgpO1xuICAgICAgICAgICAgJHN0YXRlLmdvKCdwcm9maWxlJywge3VzZXJuYW1lOiBpbnB1dFBsYXllcn0pO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBpbml0RXZlbnQoKSB7XG5cbiAgICAgICAgICAgIGV2ZW50U2VydmljZS5nZXRFdmVudFByb3BlcnRpZXModm0uZXZlbnROYW1lKS50aGVuKGZ1bmN0aW9uIHRoZW4obW9kZWwpIHtcblxuICAgICAgICAgICAgICAgIHZtLmV2ZW50UHJvcGVydGllcyA9IG1vZGVsO1xuXG4gICAgICAgICAgICAgICAgdm0uZXZlbnRQcm9wZXJ0aWVzLiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgaXMgYSBtdWx0aWdhbWUgZXZlbnQsIGdldCB0aGUgZGF0YSBuZWVkZWQgZm9yIG11bHRpZ2FtZSBjb21wb25lbnRzLlxuICAgICAgICAgICAgICAgICAgICBpZiAodm0uZXZlbnRQcm9wZXJ0aWVzLmZvcm1hdC5tdWx0aUdhbWUpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRTZXJ2aWNlLmdldEdhbWVzTGlzdCh2bS5ldmVudE5hbWUpLnRoZW4oZnVuY3Rpb24gdGhlbihtb2RlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLmdhbWVMaXN0ID0gbW9kZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0Rmlyc3RQbGFjZVNjb3JlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50U2VydmljZS5nZXRNdWx0aUdhbWVMZWFkZXJib2FyZCh2bS5ldmVudE5hbWUpLnRoZW4oZnVuY3Rpb24gdGhlbihtb2RlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsZWFkZXJib2FyZCA9IG1vZGVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLmxlYWRlcmJvYXJkTGVuZ3RoID0gbGVhZGVyYm9hcmQubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLnN1bW1hcml6ZWRMZWFkZXJib2FyZCA9IGxlYWRlcmJvYXJkLnNsaWNlKDAsIDgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhpcyBpcyBhIHNpbmdsZSBnYW1lIGV2ZW50LCBnZXQgdGhlIGRhdGEgbmVlZGVkIGZvciBzaW5nbGUgZ2FtZSBjb21wb25lbnRzLlxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudFNlcnZpY2UuZ2V0U2luZ2xlR2FtZUxlYWRlcmJvYXJkKHZtLmV2ZW50TmFtZSkudGhlbihmdW5jdGlvbiB0aGVuKG1vZGVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxlYWRlcmJvYXJkID0gbW9kZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0ubGVhZGVyYm9hcmRMZW5ndGggPSBsZWFkZXJib2FyZC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uc3VtbWFyaXplZExlYWRlcmJvYXJkID0gbGVhZGVyYm9hcmQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhpcyBpcyBhIHRlYW0tYmFzZWQgZXZlbnQsIGdldCB0aGUgZGF0YSBuZWVkZWQgZm9yIHRlYW0gZXZlbnQgY29tcG9uZW50cy5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHZtLmV2ZW50UHJvcGVydGllcy5mb3JtYXQudGVhbUJhc2VkKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRlYW1TZXJ2aWNlLmdldFRlYW1MaXN0KHZtLmV2ZW50TmFtZSkudGhlbihmdW5jdGlvbiB0aGVuKG1vZGVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0udGVhbUxpc3QgPSBtb2RlbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAodm0uZXZlbnRQcm9wZXJ0aWVzLnN0YXRlID09PSAndXBjb21pbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuY29sbGFwc2libGUnKS5jb2xsYXBzaWJsZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3JkaW9uOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBwcm9maWxlU2VydmljZS5nZXRBdmF0YXJEYXRhKCkudGhlbihmdW5jdGlvbiB0aGVuKG1vZGVsKSB7XG4gICAgICAgICAgICAgICAgdm0uYXZhdGFyRGF0YSA9IG1vZGVsO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9wZW5CYWRnZXNNb2RhbCgpIHtcblxuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjYmFkZ2VzTW9kYWwnKS5vcGVuTW9kYWwoKTtcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2JhZGdlc01vZGFsQ29udGVudCcpLnNjcm9sbFRvcCgwKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gb3BlbkdhbWVNb2RhbChpbnB1dEdhbWVOYW1lKSB7XG5cbiAgICAgICAgICAgIHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRklSRUJBU0VEQVRBLkZCVVJMKTtcblxuICAgICAgICAgICAgZXZlbnRTZXJ2aWNlLmdldEdhbWVEYXRhKHZtLmV2ZW50TmFtZSwgaW5wdXRHYW1lTmFtZSkudGhlbihmdW5jdGlvbiB0aGVuKG1vZGVsKSB7XG4gICAgICAgICAgICAgICAgdm0uZ2FtZURhdGEgPSBtb2RlbDtcblxuICAgICAgICAgICAgICAgIHZtLmdhbWVTY29yZXMgPSAkZmlyZWJhc2VBcnJheShcbiAgICAgICAgICAgICAgICAgICAgcmVmXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGQoJ2NvbnRlc3RzJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZCh2bS5ldmVudE5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGQoJ2FjdGl2ZUdhbWVzJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZCh2bS5nYW1lRGF0YS4kaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGQoJ3Njb3JlcycpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNnYW1lTW9kYWwnKS5vcGVuTW9kYWwoKTtcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2dhbWVNb2RhbENvbnRlbnQnKS5zY3JvbGxUb3AoMCk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9wZW5NYW5hZ2VtZW50TW9kYWwoKSB7XG5cbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI21hbmFnZW1lbnRNb2RhbCcpLm9wZW5Nb2RhbCgpO1xuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjbWFuYWdlbWVudE1vZGFsQ29udGVudCcpLnNjcm9sbFRvcCgwKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gb3Blbk11bHRpR2FtZUxlYWRlcmJvYXJkTW9kYWwoKSB7XG5cbiAgICAgICAgICAgIGV2ZW50U2VydmljZS5nZXRNdWx0aUdhbWVMZWFkZXJib2FyZCh2bS5ldmVudE5hbWUpLnRoZW4oZnVuY3Rpb24gdGhlbihtb2RlbCkge1xuICAgICAgICAgICAgICAgIHZtLmNvbXBsZXRlTGVhZGVyYm9hcmQgPSBtb2RlbDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNtdWx0aUdhbWVMZWFkZXJib2FyZE1vZGFsJykub3Blbk1vZGFsKCk7XG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNtdWx0aUdhbWVMZWFkZXJib2FyZE1vZGFsQ29udGVudCcpLnNjcm9sbFRvcCgwKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gb3BlblBsYXllck1vZGFsKGlucHV0UGxheWVyKSB7XG5cbiAgICAgICAgICAgIHZtLmZvY3VzUGxheWVyID0gaW5wdXRQbGF5ZXI7XG5cbiAgICAgICAgICAgIGV2ZW50U2VydmljZS5nZXRQbGF5ZXJTY29yZXModm0uZXZlbnROYW1lLCB2bS5nYW1lTGlzdCwgdm0uZm9jdXNQbGF5ZXIpLnRoZW4oZnVuY3Rpb24gdGhlbihtb2RlbCkge1xuICAgICAgICAgICAgICAgIHZtLnBsYXllclNjb3JlcyA9IG1vZGVsO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI3BsYXllck1vZGFsJykub3Blbk1vZGFsKCk7XG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNwbGF5ZXJNb2RhbENvbnRlbnQnKS5zY3JvbGxUb3AoMCk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9wZW5HYW1lTW9kYWxGcm9tUGxheWVyTW9kYWwoaW5wdXRHYW1lKSB7XG5cbiAgICAgICAgICAgIGNsb3NlUGxheWVyTW9kYWwoKTtcblxuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgb3BlbkdhbWVNb2RhbChpbnB1dEdhbWUpO1xuICAgICAgICAgICAgfSwgNDUwKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gb3BlblBsYXllck1vZGFsRnJvbUdhbWVNb2RhbChpbnB1dFBsYXllcikge1xuXG4gICAgICAgICAgICBjbG9zZUdhbWVNb2RhbCgpO1xuXG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBvcGVuUGxheWVyTW9kYWwoaW5wdXRQbGF5ZXIpO1xuICAgICAgICAgICAgfSwgNDUwKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gb3BlblBsYXllck1vZGFsRnJvbUxlYWRlcmJvYXJkTW9kYWwoaW5wdXRQbGF5ZXIpIHtcblxuICAgICAgICAgICAgY2xvc2VNdWx0aUdhbWVMZWFkZXJib2FyZE1vZGFsKCk7XG5cbiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIG9wZW5QbGF5ZXJNb2RhbChpbnB1dFBsYXllcik7XG4gICAgICAgICAgICB9LCA0NTApO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvcGVuUnVsZXNNb2RhbCgpIHtcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI3J1bGVzTW9kYWwnKS5vcGVuTW9kYWwoKTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5zZXJ2aWNlKCd0ZWFtU2VydmljZScsIHRlYW1TZXJ2aWNlKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIHRlYW1TZXJ2aWNlKCRxLCAkZmlyZWJhc2VBcnJheSwgJGZpcmViYXNlT2JqZWN0LCBGSVJFQkFTRURBVEEpIHtcblxuICAgIFx0dGhpcy5jcmVhdGVUZWFtID0gY3JlYXRlVGVhbTtcbiAgICAgICAgdGhpcy5nZXRUZWFtTGlzdCA9IGdldFRlYW1MaXN0O1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVUZWFtKGlucHV0RXZlbnQsIGlucHV0TmV3VGVhbVByb3BlcnRpZXMpIHtcblxuICAgICAgICBcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICAgXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZJUkVCQVNFREFUQS5GQlVSTCk7XG4gICAgICAgIFx0dmFyIHRlYW1Qb29sID0gJGZpcmViYXNlT2JqZWN0KFxuICAgICAgICBcdFx0cmVmXG4gICAgICAgIFx0XHRcdC5jaGlsZCgnY29udGVzdHMnKVxuICAgICAgICBcdFx0XHQuY2hpbGQoaW5wdXRFdmVudClcbiAgICAgICAgXHRcdFx0LmNoaWxkKCd0ZWFtUG9vbCcpXG4gICAgICAgIFx0KTtcblxuICAgICAgICBcdHRlYW1Qb29sLiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIFx0XHR0ZWFtUG9vbFtpbnB1dE5ld1RlYW1Qcm9wZXJ0aWVzLnNob3J0TmFtZV0gPSB7XG4gICAgICAgIFx0XHRcdGZ1bGxOYW1lOiBpbnB1dE5ld1RlYW1Qcm9wZXJ0aWVzLmZvcm1hbE5hbWVcbiAgICAgICAgXHRcdH07XG4gICAgICAgIFx0XHR0ZWFtUG9vbC4kc2F2ZSgpO1xuICAgICAgICBcdFx0ZGVmZXJyZWQucmVzb2x2ZSgpO1xuXG4gICAgICAgIFx0fSk7XG5cbiAgICAgICAgXHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0VGVhbUxpc3QoaW5wdXRFdmVudCkge1xuXG4gICAgICAgIFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICBcdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRklSRUJBU0VEQVRBLkZCVVJMKTtcbiAgICAgICAgXHR2YXIgdGVhbUxpc3QgPSAkZmlyZWJhc2VBcnJheShcbiAgICAgICAgXHRcdHJlZlxuICAgICAgICBcdFx0XHQuY2hpbGQoJ2NvbnRlc3RzJylcbiAgICAgICAgXHRcdFx0LmNoaWxkKGlucHV0RXZlbnQpXG4gICAgICAgIFx0XHRcdC5jaGlsZCgndGVhbVBvb2wnKVxuICAgICAgICBcdCk7XG5cbiAgICAgICAgXHR0ZWFtTGlzdC4kbG9hZGVkKCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgXHRcdGRlZmVycmVkLnJlc29sdmUodGVhbUxpc3QpO1xuICAgICAgICBcdH0pO1xuXG4gICAgICAgIFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgfVxuICAgIH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0hlYWRlckNvbnRyb2xsZXInLCBIZWFkZXJDb250cm9sbGVyKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIEhlYWRlckNvbnRyb2xsZXIoJHRpbWVvdXQsICRyb290U2NvcGUsICR3aW5kb3csICRzdGF0ZSwgYXV0aFNlcnZpY2UpIHtcblxuICAgICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICAgIHZtLmxvZ091dCA9IGxvZ091dDtcblxuICAgICAgICBhY3RpdmF0ZSgpO1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJy5kcm9wZG93bi1idXR0b24nKVxuICAgICAgICAgICAgICAgICAgICAuZHJvcGRvd24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5EdXJhdGlvbjogMzAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0RHVyYXRpb246IDIyNSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0cmFpbl93aWR0aDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBob3ZlcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBndXR0ZXI6IC0xMTQsXG4gICAgICAgICAgICAgICAgICAgICAgICBiZWxvd09yaWdpbjogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sIDQwMCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBsb2dPdXQoKSB7XG4gICAgICAgICAgICBhdXRoU2VydmljZS5sb2dPdXQoKTtcbiAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgIH1cblxuICAgIH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJylcbiAgICAgICAgLmRpcmVjdGl2ZSgndmdHYW1lc0xpc3QnLCB2Z0dhbWVzTGlzdCk7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiB2Z0dhbWVzTGlzdCAoKSB7XG4gICAgICAgIC8vIFVzYWdlOlxuICAgICAgICAvL1xuICAgICAgICAvLyBDcmVhdGVzOlxuICAgICAgICAvL1xuICAgICAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IEdhbWVzTGlzdENvbnRyb2xsZXIsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICBsaW5rOiBsaW5rLFxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnLi9hcHAvZXZlbnRDb21wb25lbnRzL2dhbWVzTGlzdC5kaXJlY3RpdmUuaHRtJyxcbiAgICAgICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICBcdGRhdGE6ICc9JyxcbiAgICAgICAgICAgIFx0b3BlbkdhbWVGdW5jdGlvbjogJz0nXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbiAgICAgICAgZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIEdhbWVzTGlzdENvbnRyb2xsZXIoKSB7XG4gICAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cbiAgICBcdHZhciB2bSA9IHRoaXM7XG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuZGlyZWN0aXZlKCd2Z011bHRpR2FtZUxlYWRlcmJvYXJkJywgdmdNdWx0aUdhbWVMZWFkZXJib2FyZCk7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiB2Z011bHRpR2FtZUxlYWRlcmJvYXJkICgpIHtcbiAgICAgICAgLy8gVXNhZ2U6XG4gICAgICAgIC8vXG4gICAgICAgIC8vIENyZWF0ZXM6XG4gICAgICAgIC8vXG4gICAgICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICAgICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgICAgICAgY29udHJvbGxlcjogTXVsdGlHYW1lTGVhZGVyYm9hcmRDb250cm9sbGVyLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgbGluazogbGluayxcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy4vYXBwL2V2ZW50Q29tcG9uZW50cy9tdWx0aUdhbWVMZWFkZXJib2FyZC5kaXJlY3RpdmUuaHRtJyxcbiAgICAgICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICBcdGRhdGE6ICc9JyxcbiAgICAgICAgICAgICAgICBhdmF0YXJEYXRhOiAnPScsXG4gICAgICAgICAgICBcdGNvbXBsZXRlTGVuZ3RoOiAnPScsXG4gICAgICAgICAgICBcdG9wZW5QbGF5ZXJGdW5jdGlvbjogJz0nLFxuICAgICAgICAgICAgICAgIG9wZW5MZWFkZXJib2FyZEZ1bmN0aW9uOiAnPSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgICAgICBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gTXVsdGlHYW1lTGVhZGVyYm9hcmRDb250cm9sbGVyKCkge1xuICAgICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXG4gICAgXHR2YXIgdm0gPSB0aGlzO1xuICAgIH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJylcbiAgICAgICAgLmRpcmVjdGl2ZSgndmdTaW5nbGVHYW1lTGVhZGVyYm9hcmQnLCB2Z1NpbmdsZUdhbWVMZWFkZXJib2FyZCk7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiB2Z1NpbmdsZUdhbWVMZWFkZXJib2FyZCAoKSB7XG4gICAgICAgIC8vIFVzYWdlOlxuICAgICAgICAvL1xuICAgICAgICAvLyBDcmVhdGVzOlxuICAgICAgICAvL1xuICAgICAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IFNpbmdsZUdhbWVMZWFkZXJib2FyZENvbnRyb2xsZXIsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICBsaW5rOiBsaW5rLFxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnLi9hcHAvZXZlbnRDb21wb25lbnRzL3NpbmdsZUdhbWVMZWFkZXJib2FyZC5kaXJlY3RpdmUuaHRtJyxcbiAgICAgICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICBcdGRhdGE6ICc9JyxcbiAgICAgICAgICAgICAgICBhdmF0YXJEYXRhOiAnPScsXG4gICAgICAgICAgICBcdGNvbXBsZXRlTGVuZ3RoOiAnPScsXG4gICAgICAgICAgICAgICAgb3BlbkxlYWRlcmJvYXJkRnVuY3Rpb246ICc9J1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZGlyZWN0aXZlO1xuXG4gICAgICAgIGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBTaW5nbGVHYW1lTGVhZGVyYm9hcmRDb250cm9sbGVyKCkge1xuICAgICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXG4gICAgXHR2YXIgdm0gPSB0aGlzO1xuICAgIH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJylcbiAgICAgICAgLmRpcmVjdGl2ZSgndmdTdGlja3lNZXNzYWdlJywgdmdTdGlja3lNZXNzYWdlKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIHZnU3RpY2t5TWVzc2FnZSAoKSB7XG4gICAgICAgIC8vIFVzYWdlOlxuICAgICAgICAvL1xuICAgICAgICAvLyBDcmVhdGVzOlxuICAgICAgICAvL1xuICAgICAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IFN0aWNreU1lc3NhZ2VDb250cm9sbGVyLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgbGluazogbGluayxcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy4vYXBwL2V2ZW50Q29tcG9uZW50cy9zdGlja3lNZXNzYWdlLmRpcmVjdGl2ZS5odG0nLFxuICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIFx0cHJvcGVydGllczogJz0nXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbiAgICAgICAgZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIFN0aWNreU1lc3NhZ2VDb250cm9sbGVyKCR0aW1lb3V0KSB7XG4gICAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cbiAgICBcdHZhciB2bSA9IHRoaXM7XG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuZmlsdGVyKCdvcmRlck9iamVjdEJ5Jywgb3JkZXJPYmplY3RCeSk7XG5cbiAgICBmdW5jdGlvbiBvcmRlck9iamVjdEJ5KCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oaXRlbXMsIGZpZWxkLCByZXZlcnNlKSB7XG4gICAgICAgICAgICB2YXIgZmlsdGVyZWQgPSBbXTtcblxuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGl0ZW1zLCBmdW5jdGlvbihpdGVtLCBrZXkpIHtcbiAgICAgICAgICAgICAgICBpdGVtLmtleSA9IGtleTtcbiAgICAgICAgICAgICAgICBmaWx0ZXJlZC5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZpbHRlcmVkLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKGFbZmllbGRdID4gYltmaWVsZF0gPyAxIDogLTEpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmKHJldmVyc2UpIGZpbHRlcmVkLnJldmVyc2UoKTtcblxuICAgICAgICAgICAgcmV0dXJuIGZpbHRlcmVkO1xuICAgICAgICB9O1xuICAgIH1cblxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuY29udHJvbGxlcignQXZhdGFyQ29udHJvbGxlcicsIEF2YXRhckNvbnRyb2xsZXIpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gQXZhdGFyQ29udHJvbGxlcigkcm9vdFNjb3BlLCAkc3RhdGUsICRzdGF0ZVBhcmFtcywgJHRpbWVvdXQsIFVwbG9hZCwgaW1ndXIsIHByb2ZpbGVTZXJ2aWNlKSB7XG5cbiAgICAgICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICB2bS51cGxvYWRBdmF0YXIgPSB1cGxvYWRBdmF0YXI7XG5cbiAgICAgICAgYWN0aXZhdGUoKTtcblxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAgIFx0cHJvZmlsZVNlcnZpY2UuZ2V0QXZhdGFyRGF0YSgpLnRoZW4oZnVuY3Rpb24gdGhlbihtb2RlbCkge1xuICAgICAgICAgICAgICAgIHZtLmF2YXRhckRhdGEgPSBtb2RlbDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBGSVhNRTogVGhpcyBuZWVkcyB0byBiZSB0cmlnZ2VyZWQgYnkgYSAkcm9vdFNjb3BlIGJyb2FkY2FzdCBvZiB3aGVuIGl0IHJlY2VpdmVzIHByb2ZpbGUgZGF0YS5cbiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHByb2ZpbGVTZXJ2aWNlLmdldEJhZGdlc0RhdGEoJHJvb3RTY29wZS5wcm9maWxlLnVzZXJOYW1lKS50aGVuKGZ1bmN0aW9uIHRoZW4obW9kZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0uYmFkZ2VzRGF0YSA9IG1vZGVsO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwbG9hZEF2YXRhcigpIHtcblxuICAgICAgICBcdHZtLmRpc2FibGVCdXR0b24gPSB0cnVlO1xuXG4gICAgICAgIFx0aW1ndXIuc2V0QVBJS2V5KCdDbGllbnQtSUQgZjUzZDZkNTgzM2IwN2JjJyk7XG4gICAgICAgIFx0aW1ndXIudXBsb2FkKHZtLmZpbGUpLnRoZW4oZnVuY3Rpb24gdGhlbihtb2RlbCkge1xuICAgICAgICBcdFx0cHJvZmlsZVNlcnZpY2Uuc2F2ZUF2YXRhckxpbmsobW9kZWxbMF0ubGluaywgJHJvb3RTY29wZS5wcm9maWxlLnVzZXJOYW1lKTtcbiAgICAgICAgXHRcdE1hdGVyaWFsaXplLnRvYXN0KCdZb3VyIGF2YXRhciB3YXMgdXBsb2FkZWQnLCA0MDAwKTtcblxuICAgICAgICBcdFx0JHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIFx0XHRcdCRzdGF0ZS5nbygnaG9tZScpO1xuICAgICAgICBcdFx0fSwgMTAwMCk7XG4gICAgICAgIFx0fSk7XG5cbiAgICAgICAgfVxuXG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuY29udHJvbGxlcignQ2hhbmdlUGFzc3dvcmRDb250cm9sbGVyJywgQ2hhbmdlUGFzc3dvcmRDb250cm9sbGVyKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIENoYW5nZVBhc3N3b3JkQ29udHJvbGxlcigkc2NvcGUsICR0aW1lb3V0LCAkc3RhdGUsIEF1dGhXcmFwcGVyKSB7XG5cbiAgICAgICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICBcbiAgICAgICAgdm0uc3VibWl0Q2hhbmdlUGFzc3dvcmQgPSBzdWJtaXRDaGFuZ2VQYXNzd29yZDtcblxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICBmdW5jdGlvbiBzdWJtaXRDaGFuZ2VQYXNzd29yZCgpIHtcblxuICAgICAgICAgICAgaWYgKCRzY29wZS5wd0NoYW5nZUZvcm0uJHZhbGlkKSB7XG5cbiAgICAgICAgICAgICAgICBBdXRoV3JhcHBlci4kY2hhbmdlUGFzc3dvcmQoe1xuICAgICAgICAgICAgICAgICAgICBlbWFpbDogQXV0aFdyYXBwZXIuJGdldEF1dGgoKS5wYXNzd29yZC5lbWFpbCxcbiAgICAgICAgICAgICAgICAgICAgb2xkUGFzc3dvcmQ6IHZtLmlucHV0Q3VycmVudFBhc3N3b3JkLFxuICAgICAgICAgICAgICAgICAgICBuZXdQYXNzd29yZDogdm0uaW5wdXROZXdQYXNzd29yZFxuICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgTWF0ZXJpYWxpemUudG9hc3QoJ1lvdXIgcGFzc3dvcmQgd2FzIGNoYW5nZWQuJywgNDAwMCk7XG4gICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdob21lJyk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDEwMDApO1xuXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5jb2RlID09PSAnSU5WQUxJRF9QQVNTV09SRCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZtLnNob3dDaGFuZ2VQYXNzd29yZE1lc3NhZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cblxuICAgIH1cblxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuY29udHJvbGxlcignSG9tZUNvbnRyb2xsZXInLCBIb21lQ29udHJvbGxlcik7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBIb21lQ29udHJvbGxlcigkc2NvcGUsICR0aW1lb3V0KSB7XG5cbiAgICAgICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgfVxuXG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdMZWFkZXJib2FyZENvbnRyb2xsZXInLCBMZWFkZXJib2FyZENvbnRyb2xsZXIpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gTGVhZGVyYm9hcmRDb250cm9sbGVyKCRxLCAkdGltZW91dCwgJGZpcmViYXNlQXJyYXksIHByb2ZpbGVTZXJ2aWNlLCBGSVJFQkFTRURBVEEpIHtcblxuICAgICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXG4gICAgXHR2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIGFjdGl2YXRlKCk7XG5cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgICAgICAgZ2V0UHJvZmlsZVNjb3JlcygpLnRoZW4oZnVuY3Rpb24gdGhlbihtb2RlbCkge1xuICAgICAgICAgICAgICAgIHZtLnByb2ZpbGVTY29yZURhdGEgPSBtb2RlbDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBwcm9maWxlU2VydmljZS5nZXRBdmF0YXJEYXRhKCkudGhlbihmdW5jdGlvbiB0aGVuKG1vZGVsKSB7XG4gICAgICAgICAgICAgICAgdm0uYXZhdGFyRGF0YSA9IG1vZGVsO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRQcm9maWxlU2NvcmVzKCkge1xuXG4gICAgICAgIFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZJUkVCQVNFREFUQS5GQlVSTCk7XG5cbiAgICAgICAgXHR2YXIgcHJvZmlsZVNjb3JlRGF0YSA9ICRmaXJlYmFzZUFycmF5KFxuICAgICAgICBcdFx0cmVmXG4gICAgICAgIFx0XHRcdC5jaGlsZCgnYmFkZ2VzJylcbiAgICAgICAgXHQpO1xuXG4gICAgICAgIFx0cHJvZmlsZVNjb3JlRGF0YS4kbG9hZGVkKGZ1bmN0aW9uKCkge1xuICAgICAgICBcdFx0ZGVmZXJyZWQucmVzb2x2ZShwcm9maWxlU2NvcmVEYXRhKTtcbiAgICAgICAgXHR9KTtcblxuICAgICAgICBcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgICAgIH1cblxuICAgIH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ1Byb2ZpbGVDb250cm9sbGVyJywgUHJvZmlsZUNvbnRyb2xsZXIpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gUHJvZmlsZUNvbnRyb2xsZXIoJHNjb3BlLCAkc3RhdGVQYXJhbXMsICRxLCAkdGltZW91dCwgJHN0YXRlLCAkZmlyZWJhc2VBcnJheSwgYXV0aFNlcnZpY2UsIHByb2ZpbGVTZXJ2aWNlLCBldmVudFNlcnZpY2UpIHtcblxuICAgICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICAgIFxuICAgICAgICBhY3RpdmF0ZSgpO1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuXG4gICAgICAgICAgICBwcm9maWxlU2VydmljZS5nZXRVc2VyRGF0YSgkc3RhdGVQYXJhbXMudXNlcm5hbWUpLnRoZW4oZnVuY3Rpb24gdGhlbihtb2RlbCkge1xuICAgICAgICAgICAgICAgIHZtLnByb2ZpbGVEYXRhID0gbW9kZWw7XG5cbiAgICAgICAgICAgICAgICBwcm9maWxlU2VydmljZS5nZXRUb3VybmFtZW50SGlzdG9yeSh2bS5wcm9maWxlRGF0YSkudGhlbihmdW5jdGlvbiB0aGVuKG1vZGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0b3VybmFtZW50SGlzdG9yeURhdGEgPSBtb2RlbDtcbiAgICAgICAgICAgICAgICAgICAgdm0uZXZlbnRTdGFuZGluZ3MgPSBwcm9maWxlU2VydmljZS5nZXRUb3VybmFtZW50U3RhbmRpbmdzKHRvdXJuYW1lbnRIaXN0b3J5RGF0YSwgJHN0YXRlUGFyYW1zLnVzZXJuYW1lKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICQoJy5jb2xsYXBzaWJsZScpLmNvbGxhcHNpYmxlKHtcbiAgICAgICAgICAgICAgICAgICAgYWNjb3JkaW9uOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcHJvZmlsZVNlcnZpY2UuZ2V0QXZhdGFyRGF0YSgpLnRoZW4oZnVuY3Rpb24gdGhlbihtb2RlbCkge1xuICAgICAgICAgICAgICAgIHZtLmF2YXRhckRhdGEgPSBtb2RlbDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBwcm9maWxlU2VydmljZS5nZXRCYWRnZXNEYXRhKCRzdGF0ZVBhcmFtcy51c2VybmFtZSkudGhlbihmdW5jdGlvbiB0aGVuKG1vZGVsKSB7XG4gICAgICAgICAgICAgICAgdm0uYmFkZ2VzRGF0YSA9IG1vZGVsO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgfVxuXG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5zZXJ2aWNlKCdwcm9maWxlU2VydmljZScsIHByb2ZpbGVTZXJ2aWNlKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIHByb2ZpbGVTZXJ2aWNlKCRyb290U2NvcGUsICRxLCAkZmlyZWJhc2VBcnJheSwgJGZpcmViYXNlT2JqZWN0LCBldmVudFNlcnZpY2UsIEZJUkVCQVNFREFUQSkge1xuXG4gICAgXHR0aGlzLmdldEF2YXRhckRhdGEgPSBnZXRBdmF0YXJEYXRhO1xuICAgICAgICB0aGlzLmdldEJhZGdlc0RhdGEgPSBnZXRCYWRnZXNEYXRhO1xuICAgIFx0dGhpcy5nZXRUb3VybmFtZW50SGlzdG9yeSA9IGdldFRvdXJuYW1lbnRIaXN0b3J5O1xuICAgICAgICB0aGlzLmdldFRvdXJuYW1lbnRTdGFuZGluZ3MgPSBnZXRUb3VybmFtZW50U3RhbmRpbmdzO1xuICAgICAgICB0aGlzLmdldFVzZXJEYXRhID0gZ2V0VXNlckRhdGE7XG4gICAgICAgIHRoaXMuc2F2ZUF2YXRhckxpbmsgPSBzYXZlQXZhdGFyTGluaztcblxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0QXZhdGFyRGF0YSgpIHtcblxuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgICAgIHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRklSRUJBU0VEQVRBLkZCVVJMKTtcblxuICAgICAgICAgICAgdmFyIGF2YXRhckRhdGEgPSAkZmlyZWJhc2VPYmplY3QoXG4gICAgICAgICAgICAgICAgcmVmXG4gICAgICAgICAgICAgICAgICAgIC5jaGlsZCgnYXZhdGFycycpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhdmF0YXJEYXRhLiRsb2FkZWQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShhdmF0YXJEYXRhKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0QmFkZ2VzRGF0YShpbnB1dFVzZXIpIHtcblxuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgICAgIHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRklSRUJBU0VEQVRBLkZCVVJMKTtcblxuICAgICAgICAgICAgdmFyIGJhZGdlc0RhdGEgPSAkZmlyZWJhc2VPYmplY3QoXG4gICAgICAgICAgICAgICAgcmVmXG4gICAgICAgICAgICAgICAgICAgIC5jaGlsZCgnYmFkZ2VzJylcbiAgICAgICAgICAgICAgICAgICAgLmNoaWxkKGlucHV0VXNlcilcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGJhZGdlc0RhdGEuJGxvYWRlZChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGJhZGdlc0RhdGEpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRUb3VybmFtZW50SGlzdG9yeShpbnB1dFVzZXJEYXRhKSB7XG5cbiAgICAgICAgXHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICBcdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRklSRUJBU0VEQVRBLkZCVVJMKTtcblxuICAgICAgICBcdC8vIExvb3AgdGhyb3VnaCBlYWNoIGV2ZW50IGluIHRoZSBwbGVkZ2VkVG8gb2JqZWN0LlxuICAgICAgICBcdHZhciBldmVudHNBcnJheSA9IFtdO1xuICAgICAgICBcdGZvciAodmFyIGtleSBpbiBpbnB1dFVzZXJEYXRhLnBsZWRnZWRUbykge1xuICAgICAgICBcdFx0ZXZlbnRzQXJyYXkucHVzaChrZXkpO1xuICAgICAgICBcdH1cblxuICAgICAgICBcdGRlZmVycmVkLnJlc29sdmUoZXZlbnRzQXJyYXkpO1xuXG4gICAgICAgIFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFRvdXJuYW1lbnRTdGFuZGluZ3MoaW5wdXRUb3VybmFtZW50SGlzdG9yeSwgaW5wdXRVc2VyKSB7XG5cbiAgICAgICAgICAgIHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRklSRUJBU0VEQVRBLkZCVVJMKTtcblxuICAgICAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGVhY2ggZXZlbnQgaW4gdGhlIHVzZXIncyBoaXN0b3J5LlxuICAgICAgICAgICAgdmFyIGV2ZW50U3RhbmRpbmdzID0gW107XG4gICAgICAgICAgICBpbnB1dFRvdXJuYW1lbnRIaXN0b3J5LmZvckVhY2goZnVuY3Rpb24oZXZlbnQpIHtcblxuICAgICAgICAgICAgICAgIGV2ZW50U2VydmljZS5nZXRFdmVudFByb3BlcnRpZXMoZXZlbnQpLnRoZW4oZnVuY3Rpb24oZXZlbnRQcm9wZXJ0aWVzKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgZXZlbnRQcm9wZXJ0aWVzLiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBjb25jbHVkZWQsIGdldCB0aGUgdXNlcidzIHN0YW5kaW5nLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50UHJvcGVydGllcy5zdGF0ZSA9PT0gJ2NvbmNsdWRlZCcpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBldmVudFN0YW5kaW5nRGF0YSA9ICRmaXJlYmFzZU9iamVjdChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGQoJ3N0YW5kaW5ncycpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGQoZXZlbnQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50U3RhbmRpbmdEYXRhLiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudFN0YW5kaW5nRGF0YVtpbnB1dFVzZXJdKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50U3RhbmRpbmdzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGV2ZW50UHJvcGVydGllcy5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZW1pZXI6IGV2ZW50UHJvcGVydGllcy5wcmVtaWVyID8gdHJ1ZSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnROYW1lOiBldmVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTogJ2NvbmNsdWRlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IGV2ZW50UHJvcGVydGllcy5jb2xvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogZXZlbnRTdGFuZGluZ0RhdGFbaW5wdXRVc2VyXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRTdGFuZGluZ3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZXZlbnRQcm9wZXJ0aWVzLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlbWllcjogZXZlbnRQcm9wZXJ0aWVzLnByZW1pZXIgPyB0cnVlIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG9ydE5hbWU6IGV2ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiAnY29uY2x1ZGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogZXZlbnRQcm9wZXJ0aWVzLmNvbG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnRQcm9wZXJ0aWVzLnN0YXRlID09PSAnaW5wcm9ncmVzcycgfHwgZXZlbnRQcm9wZXJ0aWVzLnN0YXRlID09PSAndXBjb21pbmcnKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudFN0YW5kaW5ncy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZXZlbnRQcm9wZXJ0aWVzLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZW1pZXI6IGV2ZW50UHJvcGVydGllcy5wcmVtaWVyID8gdHJ1ZSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0TmFtZTogZXZlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBldmVudFByb3BlcnRpZXMuY29sb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiBldmVudFByb3BlcnRpZXMuc3RhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gZXZlbnRTdGFuZGluZ3M7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFVzZXJEYXRhKGlucHV0VXNlcikge1xuXG4gICAgICAgIFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZJUkVCQVNFREFUQS5GQlVSTCk7XG5cbiAgICAgICAgXHR2YXIgdXNlcnNEYXRhID0gJGZpcmViYXNlQXJyYXkoXG4gICAgICAgIFx0XHRyZWZcbiAgICAgICAgXHRcdFx0LmNoaWxkKCd1c2VycycpXG4gICAgICAgIFx0KTtcblxuICAgICAgICBcdHVzZXJzRGF0YS4kbG9hZGVkKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIFx0XHR1c2Vyc0RhdGEuZm9yRWFjaChmdW5jdGlvbih1c2VyKSB7XG4gICAgICAgIFx0XHRcdGlmICh1c2VyLnVzZXJOYW1lID09PSBpbnB1dFVzZXIpIHtcbiAgICAgICAgXHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHVzZXIpO1xuICAgICAgICBcdFx0XHR9XG4gICAgICAgIFx0XHR9KTtcblxuICAgICAgICBcdH0pO1xuXG4gICAgICAgIFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZJWE1FOiBNYWtlIHRoaXMgc2VydmVyLXNpZGUuXG4gICAgICAgIGZ1bmN0aW9uIHNhdmVBdmF0YXJMaW5rKGlucHV0TGluaywgaW5wdXRVc2VyKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRklSRUJBU0VEQVRBLkZCVVJMKTtcblxuICAgICAgICAgICAgdmFyIGF2YXRhckRhdGEgPSAkZmlyZWJhc2VPYmplY3QoXG4gICAgICAgICAgICAgICAgcmVmXG4gICAgICAgICAgICAgICAgICAgIC5jaGlsZCgnYXZhdGFycycpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhdmF0YXJEYXRhLiRsb2FkZWQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgYXZhdGFyRGF0YVtpbnB1dFVzZXJdID0gaW5wdXRMaW5rO1xuICAgICAgICAgICAgICAgIGF2YXRhckRhdGEuJHNhdmUoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cblxuICAgIH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ1JlZ0NvbnRyb2xsZXInLCBSZWdDb250cm9sbGVyKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIFJlZ0NvbnRyb2xsZXIoJHNjb3BlLCAkcm9vdFNjb3BlLCAkdGltZW91dCwgJHdpbmRvdywgJHN0YXRlLCAkZmlyZWJhc2VPYmplY3QsIGF1dGhTZXJ2aWNlLCBBdXRoV3JhcHBlcikge1xuXG4gICAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICB2bS5sb2dpblRvQWNjb3VudCA9IGxvZ2luVG9BY2NvdW50O1xuICAgICAgICB2bS5wYXNzd29yZFJlc2V0ID0gcGFzc3dvcmRSZXNldDtcbiAgICAgICAgdm0uc3VibWl0TmV3QWNjb3VudCA9IHN1Ym1pdE5ld0FjY291bnQ7XG5cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgZnVuY3Rpb24gbG9naW5Ub0FjY291bnQoKSB7XG5cbiAgICAgICAgICAgIGF1dGhTZXJ2aWNlLmxvZ2luVG9BY2NvdW50KHZtLmxvZ2luRW1haWwsIHZtLmxvZ2luUGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24gdGhlbihtb2RlbCkge1xuXG4gICAgICAgICAgICAgICAgdm0uc2hvd0ludmFsaWRVc2VyRXJyb3IgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB2bS5zaG93SW52YWxpZFBhc3N3b3JkRXJyb3IgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIGlmIChtb2RlbCA9PT0gJ0xPR0lOX1NVQ0NFU1MnKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdob21lJyk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1vZGVsID09PSAnSU5WQUxJRF9VU0VSJykge1xuICAgICAgICAgICAgICAgICAgICB2bS5zaG93SW52YWxpZFVzZXJFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1vZGVsID09PSAnSU5WQUxJRF9QQVNTV09SRCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0uc2hvd0ludmFsaWRQYXNzd29yZEVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBwYXNzd29yZFJlc2V0KCkge1xuXG4gICAgICAgICAgICBpZiAoIXZtLmxvZ2luRW1haWwpIHtcbiAgICAgICAgICAgICAgICB2bS5zaG93UGFzc3dvcmRSZXNldEVtYWlsTWVzc2FnZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBBdXRoV3JhcHBlci4kcmVzZXRQYXNzd29yZCh7XG4gICAgICAgICAgICAgICAgZW1haWw6IHZtLmxvZ2luRW1haWxcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdm0uc2hvd1Bhc3N3b3JkUmVzZXRFbWFpbE1lc3NhZ2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBNYXRlcmlhbGl6ZS50b2FzdCgnQSBwYXNzd29yZCByZXNldCBlbWFpbCBoYXMgYmVlbiBzZW50IHRvICcgKyB2bS5sb2dpbkVtYWlsICsgJy4nLCA0MDAwKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzdWJtaXROZXdBY2NvdW50KCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBEb2VzIHRoZSB1c2VyIGV4aXN0PyBJZiBzbywgc2hvdyBhbiBlcnJvciBtZXNzYWdlLlxuICAgICAgICAgICAgYXV0aFNlcnZpY2UuY2hlY2tJZlVzZXJFeGlzdHModm0ubmV3VXNlcm5hbWUpLnRoZW4oZnVuY3Rpb24odXNlckV4aXN0cykge1xuXG4gICAgICAgICAgICAgICAgdm0uc2hvd0R1cGxpY2F0ZVVzZXJFcnJvciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHZtLnNob3dFbWFpbFRha2VuRXJyb3IgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIGlmICh1c2VyRXhpc3RzKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdm0uc2hvd0R1cGxpY2F0ZVVzZXJFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgIC8vIFRyeSB0byBjcmVhdGUgdGhlIG5ldyB1c2VyLlxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgYXV0aFNlcnZpY2UuY3JlYXRlTmV3VXNlcih2bS5uZXdFbWFpbCwgdm0ubmV3UGFzc3dvcmQsIHZtLm5ld1VzZXJuYW1lKS50aGVuKGZ1bmN0aW9uIHRoZW4obW9kZWwpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGVsID09PSAnRU1BSUxfVEFLRU4nKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5zaG93RW1haWxUYWtlbkVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobW9kZWwgPT09ICdBQ0NPVU5UX0NSRUFURUQnKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ3Byb2ZpbGUnLCB7dXNlcm5hbWU6IHZtLm5ld1VzZXJuYW1lfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgfVxuXG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==