!function(){"use strict";angular.module("vg.app",["ngAnimate","ui.router","firebase","validation.match","ordinal","ngFileUpload","ngImgur"])}(),function(){"use strict";function e(e,t){t.otherwise("/"),e.state("index",{url:"/",views:{header:{templateUrl:"app/header/homeHeader.htm",controller:"HeaderController as header",data:{headerType:"tall"}},content:{templateUrl:"app/home/home.htm",controller:"HomeController as home"}}}).state("registerOrLogin",{url:"/registerOrLogin",views:{header:{templateUrl:"/app/header/homeHeader.htm",controller:"HeaderController as header",data:{headerType:"tall"}},content:{templateUrl:"/app/home/reg.htm",controller:"RegController as reg"}}}).state("profile",{url:"/profile/:username",views:{header:{templateUrl:"/app/header/homeHeader.htm",controller:"HeaderController as header",data:{headerType:"tall"}},content:{templateUrl:"/app/home/profile.htm",controller:"ProfileController as profile"}}}).state("leaderboard",{url:"/leaderboard",views:{header:{templateUrl:"/app/header/homeHeader.htm",controller:"HeaderController as header",data:{headerType:"tall"}},content:{templateUrl:"/app/home/leaderboard.htm",controller:"LeaderboardController as leaderboard"}}}).state("eventMain",{url:"/event/:eventName/main",views:{header:{templateUrl:"/app/header/homeHeader.htm",controller:"HeaderController as header",data:{headerType:"tall"}},content:{templateUrl:"/app/event/main.htm",controller:"EventMainController as event"}}}).state("customizeAvatar",{url:"/customizeAvatar",views:{header:{templateUrl:"/app/header/homeHeader.htm",controller:"HeaderController as header",data:{headerType:"tall"}},content:{templateUrl:"/app/home/avatar.htm",controller:"AvatarController as avatar"}},resolve:{currentAuth:["AuthWrapper",function(e){return e.$requireAuth()}]}}).state("passwordChange",{url:"/passwordChange",views:{header:{templateUrl:"/app/header/homeHeader.htm",controller:"HeaderController as header",data:{headerType:"tall"}},content:{templateUrl:"/app/home/passwordChange.htm",controller:"PasswordChangeController as pwchange"}},resolve:{currentAuth:["AuthWrapper",function(e){return e.$requireAuth()}]}}).state("eventGame",{url:"/event/:eventName/game/:gameName",views:{header:{templateUrl:"/app/header/homeHeader.htm",controller:"HeaderController as header",data:{headerType:"tall"}},content:{templateUrl:"/app/event/game.htm",controller:"EventGameController as game"}}})}angular.module("vg.app").constant("FIREBASEDATA",{FBURL:"https://wolfscontests.firebaseio.com"}).config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e,t,r,a,n,o){e.$on("$stateChangeError",function(e,t,a,n,o,i){"AUTH_REQUIRED"===i&&r.go("registerOrLogin")}),e.$on("$stateChangeSuccess",function(){if(n.$getAuth()){var t=n.$getAuth(),r=new Firebase(o.FBURL),i=a(r.child("users").child(t.uid));i.$bindTo(e,"profile").then(function(t){e.unbindFunction=t})}})}angular.module("vg.app").run(e),e.$inject=["$rootScope","$location","$state","$firebaseObject","AuthWrapper","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,r,a,n,o){function i(t){var r=e.defer(),a=!1,n=new Firebase(o.FBURL+"/users");return n.once("value",function(e){e.forEach(function(e){e.val().userName===t&&(a=!0)}),r.resolve(a)}),r.promise}function l(t,r,a){var i=e.defer();return n.$createUser({email:t,password:r}).then(function(e){new Firebase(o.FBURL).child("users/"+e.uid).set({userName:a,role:"User"},function(e){return console.error(e),e.code}),new Firebase(o.FBURL).child("avatars").child(a).set("http://api.adorable.io/avatars/42/"+a),n.$authWithPassword({email:t,password:r}).then(function(){i.resolve("ACCOUNT_CREATED")})})["catch"](function(e){console.error(e),"EMAIL_TAKEN"===e.code&&i.resolve(e.code)}),i.promise}function s(t,r){var a=e.defer();return n.$authWithPassword({email:t,password:r}).then(function(e){a.resolve("LOGIN_SUCCESS")})["catch"](function(e){"INVALID_USER"===e.code?a.resolve("INVALID_USER"):"INVALID_PASSWORD"===e.code&&a.resolve("INVALID_PASSWORD")}),a.promise}function c(){n.$unauth(),t.unbindFunction(),r.go("index")}this.checkIfUserExists=i,this.createNewUser=l,this.loginToAccount=s,this.logOut=c}angular.module("vg.app").service("authService",e),e.$inject=["$q","$rootScope","$state","$firebaseObject","AuthWrapper","FIREBASEDATA"]}(),function(){"use strict";function e(e,t){var r=new Firebase(t.FBURL);return e(r)}angular.module("vg.app").factory("AuthWrapper",e),e.$inject=["$firebaseAuth","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,r,a,n){function o(e){c(e).then(function(t){var a=new Firebase(n.FBURL),o=r(a.child("standings").child(e));o.$loaded().then(function(){t.forEach(function(e){o[e.key]=e.position}),o.$save()})})}function i(t){var a=e.defer(),o=new Firebase(n.FBURL),i=r(o.child("contests").child(t).child("properties"));return a.resolve(i),a.promise}function l(t,r){{var a=e.defer();new Firebase(n.FBURL)}return s(t).then(function(e){e.forEach(function(e){e.camelName===r&&a.resolve(e)})}),a.promise}function s(t){var r=e.defer(),o=new Firebase(n.FBURL),i=a(o.child("contests").child(t).child("activeGames"));return i.$loaded().then(function(){r.resolve(i)}),r.promise}function c(r){var a=e.defer(),n={};return s(r).then(function(e){var r=e;r.forEach(function(e){if(e.scores){var r=$.map(e.scores,function(e){return e});r=t("orderBy")(r,"-score");for(var a=12,o=0;o<r.length;o++)n[r[o].userName]||(n[r[o].userName]={points:0}),n[r[o].userName].points+=a,a>0&&(a-=1)}}),n=t("orderObjectBy")(n,"points",!0);for(var o=!1,i=0,l=0;l<n.length;l++)if(n[l-1]&&n[l].points&&n[l-1].points)n[l].position=n[l].points===n[l-1].points?n[l-1].position:l+1;else if(0===l)n[l].position=1;else{if(!o){var s=n[l-1].points;n.forEach(function(e){e.points===s&&(i+=1)}),o=!0}n[l].position=n.length+1-i}a.resolve(n)}),a.promise}function u(t){var r=e.defer(),o=new Firebase(n.FBURL),i=a(o.child("contests").child(t).child("scores"));return r.resolve(i),r.promise}function d(r,a,n){var o=e.defer(),i=[];return a.forEach(function(e){if(e.scores){var r=$.map(e.scores,function(e){return e});r=t("orderBy")(r,"-score");for(var a=12,o=0;o<r.length;o++){if(r[o].userName===n){var l=e;l.position=o+1,l.score=r[o].score,l.pointsEarned=a,l.inpUrl=r[o].inpUrl?r[o].inpUrl:null,l.twitchUrl=r[o].twitchUrl?r[o].twitchUrl:null,l.mameVersion=r[o].mameVersion?r[o].mameVersion:null,i.push(l),a=12;break}a>0&&(a-=1)}}}),o.resolve(i),o.promise}this.createMultiGameFinalStandings=o,this.getEventProperties=i,this.getGameData=l,this.getGamesList=s,this.getMultiGameLeaderboard=c,this.getSingleGameLeaderboard=u,this.getPlayerScores=d}angular.module("vg.app").service("eventService",e),e.$inject=["$q","$filter","$firebaseObject","$firebaseArray","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,r,a,n,o,i,l){function s(){var e=new Firebase(l.FBURL);c.eventProperties=o.getEventProperties(c.eventName),o.getGameData(c.eventName,c.gameName).then(function(t){c.gameData=t,c.gameScores=n(e.child("contests").child(c.eventName).child("activeGames").child(c.gameData.$id).child("scores"))})}a(function(){angular.element("#contentView").css("opacity","1").css("position","inherit")},410);var c=this;c.eventName=r.eventName,c.gameName=r.gameName,c.initGamePage=s}angular.module("vg.app").controller("EventGameController",e),e.$inject=["$scope","$filter","$stateParams","$timeout","$firebaseArray","eventService","authService","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,r,a,n,o,i,l,s,c,u){function d(){angular.element("#gameModal").closeModal()}function m(){angular.element("#multiGameLeaderboardModal").closeModal()}function p(){angular.element("#playerModal").closeModal()}function h(){c.createTeam(P.eventName,P.newTeam).then(function(){Materialize.toast("Team "+P.newTeam.shortName+" created.",4e3),P.newTeam=null})}function f(e,r){var a;if(r>11)return a=0;a=12-r;var n=t("orderBy")(P.gameScores,"-score");return n[r-1]&&n[r-1].score===e.score&&(a+=1),a}function v(){P.gameList.forEach(function(e){if(e.scores){var r=$.map(e.scores,function(e){return e});r=t("orderBy")(r,"-score"),e.firstScore=r[0]}})}function g(e){angular.element("#playerModal").closeModal(),a.go("profile",{username:e})}function b(){i.getEventProperties(P.eventName).then(function(e){P.eventProperties=e,P.eventProperties.$loaded().then(function(){P.eventProperties.format.multiGame?(i.getGamesList(P.eventName).then(function(e){P.gameList=e,v()}),i.getMultiGameLeaderboard(P.eventName).then(function(e){var t=e;P.leaderboardLength=t.length,P.summarizedLeaderboard=t.slice(0,8)})):i.getSingleGameLeaderboard(P.eventName).then(function(e){var t=e;P.leaderboardLength=t.length,P.summarizedLeaderboard=t}),P.eventProperties.format.teamBased&&c.getTeamList(P.eventName).then(function(e){P.teamList=e})})}),s.getAvatarData().then(function(e){P.avatarData=e})}function w(){angular.element("#badgesModal").openModal(),angular.element("#badgesModalContent").scrollTop(0)}function A(e){var t=new Firebase(u.FBURL);i.getGameData(P.eventName,e).then(function(e){P.gameData=e,P.gameScores=o(t.child("contests").child(P.eventName).child("activeGames").child(P.gameData.$id).child("scores"))}),angular.element("#gameModal").openModal(),angular.element("#gameModalContent").scrollTop(0)}function E(){angular.element("#managementModal").openModal(),angular.element("#managementModalContent").scrollTop(0)}function L(){i.getMultiGameLeaderboard(P.eventName).then(function(e){P.completeLeaderboard=e}),angular.element("#multiGameLeaderboardModal").openModal(),angular.element("#multiGameLeaderboardModalContent").scrollTop(0)}function U(e){P.focusPlayer=e,i.getPlayerScores(P.eventName,P.gameList,P.focusPlayer).then(function(e){P.playerScores=e}),angular.element("#playerModal").openModal(),angular.element("#playerModalContent").scrollTop(0)}function S(e){p(),n(function(){A(e)},450)}function F(e){d(),n(function(){U(e)},450)}function M(e){m(),n(function(){U(e)},450)}function C(){angular.element("#rulesModal").openModal()}n(function(){$(".collapsible").collapsible({accordion:!0}),$("ul.tabs").tabs()},1e3),n(function(){$(".collapsible").collapsible({accordion:!0}),$("ul.tabs").tabs()},3e3);var P=this;P.eventName=r.eventName,P.closeGameModal=d,P.closeMultiGameLeaderboardModal=m,P.closePlayerModal=p,P.createTeam=h,P.determinePoints=f,P.getFirstPlaceScores=v,P.goToPlayerProfile=g,P.initEvent=b,P.openBadgesModal=w,P.openGameModal=A,P.openGameModalFromPlayerModal=S,P.openManagementModal=E,P.openMultiGameLeaderboardModal=L,P.openPlayerModal=U,P.openPlayerModalFromGameModal=F,P.openPlayerModalFromLeaderboardModal=M,P.openRulesModal=C}angular.module("vg.app").controller("EventMainController",e),e.$inject=["$scope","$filter","$stateParams","$state","$timeout","$firebaseArray","eventService","authService","profileService","teamService","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,r,a){function n(t,n){var o=e.defer(),i=new Firebase(a.FBURL),l=r(i.child("contests").child(t).child("teamPool"));return l.$loaded().then(function(){l[n.shortName]={fullName:n.formalName},l.$save(),o.resolve()}),o.promise}function o(r){var n=e.defer(),o=new Firebase(a.FBURL),i=t(o.child("contests").child(r).child("teamPool"));return i.$loaded().then(function(){n.resolve(i)}),n.promise}this.createTeam=n,this.getTeamList=o}angular.module("vg.app").service("teamService",e),e.$inject=["$q","$firebaseArray","$firebaseObject","FIREBASEDATA"]}(),function(){"use strict";function e(){function e(e,t,r){}var r={bindToController:!0,controller:t,controllerAs:"vm",link:e,restrict:"E",templateUrl:"./app/eventComponents/gamesList.directive.htm",scope:{data:"=",openGameFunction:"="}};return r}function t(){}angular.module("vg.app").directive("vgGamesList",e)}(),function(){"use strict";function e(){function e(e,t,r){}var r={bindToController:!0,controller:t,controllerAs:"vm",link:e,restrict:"E",templateUrl:"./app/eventComponents/multiGameLeaderboard.directive.htm",scope:{data:"=",avatarData:"=",completeLength:"=",openPlayerFunction:"=",openLeaderboardFunction:"="}};return r}function t(){}angular.module("vg.app").directive("vgMultiGameLeaderboard",e)}(),function(){"use strict";function e(){function e(e,t,r){}var r={bindToController:!0,controller:t,controllerAs:"vm",link:e,restrict:"E",templateUrl:"./app/eventComponents/singleGameLeaderboard.directive.htm",scope:{data:"=",avatarData:"=",completeLength:"=",openLeaderboardFunction:"="}};return r}function t(){}angular.module("vg.app").directive("vgSingleGameLeaderboard",e)}(),function(){"use strict";function e(){function e(e,t,r){}var r={bindToController:!0,controller:t,controllerAs:"vm",link:e,restrict:"E",templateUrl:"./app/eventComponents/stickyMessage.directive.htm",scope:{properties:"="}};return r}function t(e){}angular.module("vg.app").directive("vgStickyMessage",e),t.$inject=["$timeout"]}(),function(){"use strict";function e(e,t,r,a,n){function o(){n.logOut(),r.location.reload()}e(function(){angular.element(".dropdown-button").dropdown({inDuration:300,outDuration:225,constrain_width:!1,hover:!1,gutter:-114,belowOrigin:!0})},400);var i=this;i.headerType=a.current.views.header.data.headerType,i.logOut=o}angular.module("vg.app").controller("HeaderController",e),e.$inject=["$timeout","$rootScope","$window","$state","authService"]}(),function(){"use strict";function e(){return function(e,t,r){var a=[];return angular.forEach(e,function(e,t){e.key=t,a.push(e)}),a.sort(function(e,r){return e[t]>r[t]?1:-1}),r&&a.reverse(),a}}angular.module("vg.app").filter("orderObjectBy",e)}(),function(){"use strict";function e(e,t,r,a,n,o,i){function l(){i.getAvatarData().then(function(e){c.avatarData=e}),a(function(){i.getBadgesData(e.profile.userName).then(function(e){c.badgesData=e})},500)}function s(){c.disableButton=!0,o.setAPIKey("Client-ID f53d6d5833b07bc"),o.upload(c.file).then(function(r){i.saveAvatarLink(r[0].link,e.profile.userName),Materialize.toast("Your avatar was uploaded",4e3),a(function(){t.go("index")},1e3)})}var c=this;c.initAvatar=l,c.uploadAvatar=s}angular.module("vg.app").controller("AvatarController",e),e.$inject=["$rootScope","$state","$stateParams","$timeout","Upload","imgur","profileService"]}(),function(){"use strict";function e(e,t){t(function(){angular.element("#contentView").css("opacity","1").css("position","inherit")},310)}angular.module("vg.app").controller("HomeController",e),e.$inject=["$scope","$timeout"]}(),function(){"use strict";function e(e,t,r,a,n){function o(){var t=e.defer(),a=new Firebase(n.FBURL),o=r(a.child("badges"));return o.$loaded(function(){t.resolve(o)}),t.promise}var i=this;t(function(){angular.element("#contentView").css("opacity","1").css("position","inherit")},310),o().then(function(e){i.profileScoreData=e}),a.getAvatarData().then(function(e){i.avatarData=e})}angular.module("vg.app").controller("LeaderboardController",e),e.$inject=["$q","$timeout","$firebaseArray","profileService","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,r,a){function n(){e.pwChangeForm.$valid&&a.$changePassword({email:a.$getAuth().password.email,oldPassword:o.inputCurrentPassword,newPassword:o.inputNewPassword}).then(function(){Materialize.toast("Your password was changed.",4e3),t(function(){r.go("index")},1e3)})["catch"](function(e){"INVALID_PASSWORD"===e.code&&(o.showChangePasswordMessage=!0)})}var o=this;t(function(){angular.element("#contentView").css("opacity","1").css("position","inherit")},310),o.submitChangePassword=n}angular.module("vg.app").controller("PasswordChangeController",e),e.$inject=["$scope","$timeout","$state","AuthWrapper"]}(),function(){"use strict";function e(e,t,r,a,n,o,i,l,s){function c(){l.getUserData(t.username).then(function(e){u.profileData=e,l.getTournamentHistory(u.profileData).then(function(e){var r=e;u.eventStandings=l.getTournamentStandings(r,t.username)})}),l.getAvatarData().then(function(e){u.avatarData=e}),l.getBadgesData(t.username).then(function(e){u.badgesData=e})}a(function(){angular.element("#contentView").css("opacity","1").css("position","inherit"),$(".collapsible").collapsible({accordion:!0})},410);var u=this;u.initProfile=c}angular.module("vg.app").controller("ProfileController",e),e.$inject=["$scope","$stateParams","$q","$timeout","$state","$firebaseArray","authService","profileService","eventService"]}(),function(){"use strict";function e(e,t,r,a,n,o){function i(){var e=t.defer(),r=new Firebase(o.FBURL),n=a(r.child("avatars"));return n.$loaded(function(){e.resolve(n)}),e.promise}function l(e){var r=t.defer(),n=new Firebase(o.FBURL),i=a(n.child("badges").child(e));return i.$loaded(function(){r.resolve(i)}),r.promise}function s(e){var r=t.defer(),a=(new Firebase(o.FBURL),[]);for(var n in e.pledgedTo)a.push(n);return r.resolve(a),r.promise}function c(e,t){var r=new Firebase(o.FBURL),i=[];return e.forEach(function(e){n.getEventProperties(e).then(function(n){n.$loaded().then(function(){if("concluded"===n.state){var o=a(r.child("standings").child(e));o.$loaded().then(function(){i.push(o[t]?{name:n.name,premier:n.premier?!0:null,shortName:e,state:"concluded",color:n.color,position:o[t]}:{name:n.name,premier:n.premier?!0:null,shortName:e,state:"concluded",color:n.color,position:-1})})}else("inprogress"===n.state||"upcoming"===n.state)&&i.push({name:n.name,premier:n.premier?!0:null,shortName:e,color:n.color,state:n.state})})})}),i}function u(e){var a=t.defer(),n=new Firebase(o.FBURL),i=r(n.child("users"));return i.$loaded(function(){i.forEach(function(t){t.userName===e&&a.resolve(t)})}),a.promise}function d(e,t){var r=new Firebase(o.FBURL),n=a(r.child("avatars"));n.$loaded(function(){n[t]=e,n.$save()})}this.getAvatarData=i,this.getBadgesData=l,this.getTournamentHistory=s,this.getTournamentStandings=c,this.getUserData=u,this.saveAvatarLink=d}angular.module("vg.app").service("profileService",e),e.$inject=["$rootScope","$q","$firebaseArray","$firebaseObject","eventService","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,r,a,n,o,i,l){function s(){i.loginToAccount(d.loginEmail,d.loginPassword).then(function(e){if(d.showInvalidUserError=!1,d.showInvalidPasswordError=!1,"LOGIN_SUCCESS"===e)n.go("index");else{if("INVALID_USER"===e)return void(d.showInvalidUserError=!0);"INVALID_PASSWORD"===e&&(d.showInvalidPasswordError=!0)}})}function c(){return d.loginEmail?void l.$resetPassword({email:d.loginEmail}).then(function(){d.showPasswordResetEmailMessage=!1,Materialize.toast("A password reset email has been sent to "+d.loginEmail+".",4e3)}):void(d.showPasswordResetEmailMessage=!0)}function u(){i.checkIfUserExists(d.newUsername).then(function(e){return d.showDuplicateUserError=!1,d.showEmailTakenError=!1,e?void(d.showDuplicateUserError=!0):void i.createNewUser(d.newEmail,d.newPassword,d.newUsername).then(function(e){return"EMAIL_TAKEN"===e?void(d.showEmailTakenError=!0):void("ACCOUNT_CREATED"===e&&n.go("profile",{username:d.newUsername}))})})}r(function(){angular.element("#contentView").css("opacity","1").css("position","inherit")},410);var d=this;d.loginToAccount=s,d.passwordReset=c,d.submitNewAccount=u}angular.module("vg.app").controller("RegController",e),e.$inject=["$scope","$rootScope","$timeout","$window","$state","$firebaseObject","authService","AuthWrapper"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJhcHAuY29uZmlnLmpzIiwiYXBwLm1pbi5qcyIsImFwcC5ydW4uanMiLCJhdXRoL2F1dGguc2VydmljZS5qcyIsImF1dGgvYXV0aHdyYXBwZXIuZmFjdG9yeS5qcyIsImV2ZW50L2V2ZW50LnNlcnZpY2UuanMiLCJldmVudC9nYW1lLmNvbnRyb2xsZXIuanMiLCJldmVudC9tYWluLmNvbnRyb2xsZXIuanMiLCJldmVudC90ZWFtLnNlcnZpY2UuanMiLCJldmVudENvbXBvbmVudHMvZ2FtZXNMaXN0LmRpcmVjdGl2ZS5qcyIsImV2ZW50Q29tcG9uZW50cy9tdWx0aUdhbWVMZWFkZXJib2FyZC5kaXJlY3RpdmUuanMiLCJldmVudENvbXBvbmVudHMvc2luZ2xlR2FtZUxlYWRlcmJvYXJkLmRpcmVjdGl2ZS5qcyIsImV2ZW50Q29tcG9uZW50cy9zdGlja3lNZXNzYWdlLmRpcmVjdGl2ZS5qcyIsImhlYWRlci9oZWFkZXIuY29udHJvbGxlci5qcyIsImhlbHBlcnMvb3JkZXJPYmplY3RCeS5maWx0ZXIuanMiLCJob21lL2F2YXRhci5jb250cm9sbGVyLmpzIiwiaG9tZS9ob21lLmNvbnRyb2xsZXIuanMiLCJob21lL2xlYWRlcmJvYXJkLmNvbnRyb2xsZXIuanMiLCJob21lL3Bhc3N3b3JkQ2hhbmdlLmNvbnRyb2xsZXIuanMiLCJob21lL3Byb2ZpbGUuY29udHJvbGxlci5qcyIsImhvbWUvcHJvZmlsZS5zZXJ2aWNlLmpzIiwiaG9tZS9yZWcuY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJvdGhlcndpc2UiLCJzdGF0ZSIsInVybCIsInZpZXdzIiwiaGVhZGVyIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiZGF0YSIsImhlYWRlclR5cGUiLCJjb250ZW50IiwicmVzb2x2ZSIsImN1cnJlbnRBdXRoIiwiQXV0aFdyYXBwZXIiLCIkcmVxdWlyZUF1dGgiLCJjb25zdGFudCIsIkZCVVJMIiwiJGluamVjdCIsInJ1biIsIiRyb290U2NvcGUiLCIkbG9jYXRpb24iLCIkc3RhdGUiLCIkZmlyZWJhc2VPYmplY3QiLCJGSVJFQkFTRURBVEEiLCIkb24iLCJldmVudCIsInRvU3RhdGUiLCJ0b1BhcmFtcyIsImZyb21TdGF0ZSIsImZyb21QYXJhbXMiLCJlcnJvciIsImdvIiwiJGdldEF1dGgiLCJhdXRoRGF0YSIsInJlZiIsIkZpcmViYXNlIiwicHJvZmlsZURhdGEiLCJjaGlsZCIsInVpZCIsIiRiaW5kVG8iLCJ0aGVuIiwidW5iaW5kIiwidW5iaW5kRnVuY3Rpb24iLCJhdXRoU2VydmljZSIsIiRxIiwiY2hlY2tJZlVzZXJFeGlzdHMiLCJpbnB1dFVzZXJuYW1lIiwiZGVmZXJyZWQiLCJkZWZlciIsImRvZXNVc2VyRXhpc3QiLCJ1c2Vyc1JlZiIsIm9uY2UiLCJkYXRhU25hcHNob3QiLCJmb3JFYWNoIiwidXNlciIsInZhbCIsInVzZXJOYW1lIiwicHJvbWlzZSIsImNyZWF0ZU5ld1VzZXIiLCJpbnB1dEVtYWlsIiwiaW5wdXRQYXNzd29yZCIsIiRjcmVhdGVVc2VyIiwiZW1haWwiLCJwYXNzd29yZCIsInVzZXJEYXRhIiwic2V0Iiwicm9sZSIsImVycm9yRGF0YSIsImNvbnNvbGUiLCJjb2RlIiwiJGF1dGhXaXRoUGFzc3dvcmQiLCJsb2dpblRvQWNjb3VudCIsImxvZ091dCIsIiR1bmF1dGgiLCJ0aGlzIiwic2VydmljZSIsIiRmaXJlYmFzZUF1dGgiLCJmYWN0b3J5IiwiZXZlbnRTZXJ2aWNlIiwiJGZpbHRlciIsIiRmaXJlYmFzZUFycmF5IiwiY3JlYXRlTXVsdGlHYW1lRmluYWxTdGFuZGluZ3MiLCJpbnB1dEV2ZW50IiwiZ2V0TXVsdGlHYW1lTGVhZGVyYm9hcmQiLCJwcm9taXNlUmVzb2x1dGlvbiIsImlucHV0RXZlbnRTdGFuZGluZ3MiLCIkbG9hZGVkIiwic3RhbmRpbmciLCJrZXkiLCJwb3NpdGlvbiIsIiRzYXZlIiwiZ2V0RXZlbnRQcm9wZXJ0aWVzIiwiZXZlbnRQcm9wZXJ0aWVzIiwiZ2V0R2FtZURhdGEiLCJpbnB1dEdhbWUiLCJnZXRHYW1lc0xpc3QiLCJnYW1lc0xpc3QiLCJnYW1lIiwiY2FtZWxOYW1lIiwicGxheWVyUG9pbnRzIiwic2NvcmVzIiwic2NvcmVzQXJyYXkiLCIkIiwibWFwIiwiZWwiLCJ0b3RhbEF3YXJkIiwiaSIsImxlbmd0aCIsInBvaW50cyIsImhhdmVCb3R0b21TY29yZXJzRmxvb3IiLCJmbG9vclJhbmdlIiwiZ2V0U2NvcmVDb3VudE9mIiwicG9pbnRzRGF0YSIsImdldFNpbmdsZUdhbWVMZWFkZXJib2FyZCIsImxlYWRlcmJvYXJkRGF0YSIsImdldFBsYXllclNjb3JlcyIsImlucHV0R2FtZXNMaXN0IiwiaW5wdXRQbGF5ZXIiLCJkaXNwbGF5U2NvcmVzIiwibmV3U2NvcmVPYmplY3QiLCJzY29yZSIsInBvaW50c0Vhcm5lZCIsImlucFVybCIsInR3aXRjaFVybCIsIm1hbWVWZXJzaW9uIiwicHVzaCIsIkV2ZW50R2FtZUNvbnRyb2xsZXIiLCIkc2NvcGUiLCIkc3RhdGVQYXJhbXMiLCIkdGltZW91dCIsImluaXRHYW1lUGFnZSIsInZtIiwiZXZlbnROYW1lIiwiZ2FtZU5hbWUiLCJnYW1lRGF0YSIsImdhbWVTY29yZXMiLCIkaWQiLCJlbGVtZW50IiwiY3NzIiwiRXZlbnRNYWluQ29udHJvbGxlciIsInByb2ZpbGVTZXJ2aWNlIiwidGVhbVNlcnZpY2UiLCJjbG9zZUdhbWVNb2RhbCIsImNsb3NlTW9kYWwiLCJjbG9zZU11bHRpR2FtZUxlYWRlcmJvYXJkTW9kYWwiLCJjbG9zZVBsYXllck1vZGFsIiwiY3JlYXRlVGVhbSIsIm5ld1RlYW0iLCJNYXRlcmlhbGl6ZSIsInRvYXN0Iiwic2hvcnROYW1lIiwiZGV0ZXJtaW5lUG9pbnRzIiwiaW5wdXRTY29yZURhdGEiLCJpbnB1dEluZGV4IiwidXNlckdhbWVQb2ludHMiLCJzb3J0ZWRTY29yZXMiLCJnZXRGaXJzdFBsYWNlU2NvcmVzIiwiZ2FtZUxpc3QiLCJmaXJzdFNjb3JlIiwiZ29Ub1BsYXllclByb2ZpbGUiLCJ1c2VybmFtZSIsImluaXRFdmVudCIsImZvcm1hdCIsIm11bHRpR2FtZSIsImxlYWRlcmJvYXJkIiwibGVhZGVyYm9hcmRMZW5ndGgiLCJzdW1tYXJpemVkTGVhZGVyYm9hcmQiLCJzbGljZSIsInRlYW1CYXNlZCIsImdldFRlYW1MaXN0IiwibW9kZWwiLCJ0ZWFtTGlzdCIsImdldEF2YXRhckRhdGEiLCJhdmF0YXJEYXRhIiwib3BlbkJhZGdlc01vZGFsIiwib3Blbk1vZGFsIiwic2Nyb2xsVG9wIiwib3BlbkdhbWVNb2RhbCIsImlucHV0R2FtZU5hbWUiLCJvcGVuTWFuYWdlbWVudE1vZGFsIiwib3Blbk11bHRpR2FtZUxlYWRlcmJvYXJkTW9kYWwiLCJjb21wbGV0ZUxlYWRlcmJvYXJkIiwib3BlblBsYXllck1vZGFsIiwiZm9jdXNQbGF5ZXIiLCJwbGF5ZXJTY29yZXMiLCJvcGVuR2FtZU1vZGFsRnJvbVBsYXllck1vZGFsIiwib3BlblBsYXllck1vZGFsRnJvbUdhbWVNb2RhbCIsIm9wZW5QbGF5ZXJNb2RhbEZyb21MZWFkZXJib2FyZE1vZGFsIiwib3BlblJ1bGVzTW9kYWwiLCJjb2xsYXBzaWJsZSIsImFjY29yZGlvbiIsInRhYnMiLCJpbnB1dE5ld1RlYW1Qcm9wZXJ0aWVzIiwidGVhbVBvb2wiLCJmdWxsTmFtZSIsImZvcm1hbE5hbWUiLCJ2Z0dhbWVzTGlzdCIsImxpbmsiLCJzY29wZSIsImF0dHJzIiwiZGlyZWN0aXZlIiwiYmluZFRvQ29udHJvbGxlciIsIkdhbWVzTGlzdENvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJyZXN0cmljdCIsIm9wZW5HYW1lRnVuY3Rpb24iLCJ2Z011bHRpR2FtZUxlYWRlcmJvYXJkIiwiTXVsdGlHYW1lTGVhZGVyYm9hcmRDb250cm9sbGVyIiwiY29tcGxldGVMZW5ndGgiLCJvcGVuUGxheWVyRnVuY3Rpb24iLCJvcGVuTGVhZGVyYm9hcmRGdW5jdGlvbiIsInZnU2luZ2xlR2FtZUxlYWRlcmJvYXJkIiwiU2luZ2xlR2FtZUxlYWRlcmJvYXJkQ29udHJvbGxlciIsInZnU3RpY2t5TWVzc2FnZSIsIlN0aWNreU1lc3NhZ2VDb250cm9sbGVyIiwicHJvcGVydGllcyIsIkhlYWRlckNvbnRyb2xsZXIiLCIkd2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiLCJkcm9wZG93biIsImluRHVyYXRpb24iLCJvdXREdXJhdGlvbiIsImNvbnN0cmFpbl93aWR0aCIsImhvdmVyIiwiZ3V0dGVyIiwiYmVsb3dPcmlnaW4iLCJjdXJyZW50Iiwib3JkZXJPYmplY3RCeSIsIml0ZW1zIiwiZmllbGQiLCJyZXZlcnNlIiwiZmlsdGVyZWQiLCJpdGVtIiwic29ydCIsImEiLCJiIiwiZmlsdGVyIiwiQXZhdGFyQ29udHJvbGxlciIsIlVwbG9hZCIsImltZ3VyIiwiaW5pdEF2YXRhciIsImdldEJhZGdlc0RhdGEiLCJwcm9maWxlIiwiYmFkZ2VzRGF0YSIsInVwbG9hZEF2YXRhciIsImRpc2FibGVCdXR0b24iLCJzZXRBUElLZXkiLCJ1cGxvYWQiLCJmaWxlIiwic2F2ZUF2YXRhckxpbmsiLCJIb21lQ29udHJvbGxlciIsIkxlYWRlcmJvYXJkQ29udHJvbGxlciIsImdldFByb2ZpbGVTY29yZXMiLCJwcm9maWxlU2NvcmVEYXRhIiwiUGFzc3dvcmRDaGFuZ2VDb250cm9sbGVyIiwic3VibWl0Q2hhbmdlUGFzc3dvcmQiLCJwd0NoYW5nZUZvcm0iLCIkdmFsaWQiLCIkY2hhbmdlUGFzc3dvcmQiLCJvbGRQYXNzd29yZCIsImlucHV0Q3VycmVudFBhc3N3b3JkIiwibmV3UGFzc3dvcmQiLCJpbnB1dE5ld1Bhc3N3b3JkIiwic2hvd0NoYW5nZVBhc3N3b3JkTWVzc2FnZSIsIlByb2ZpbGVDb250cm9sbGVyIiwiaW5pdFByb2ZpbGUiLCJnZXRVc2VyRGF0YSIsImdldFRvdXJuYW1lbnRIaXN0b3J5IiwidG91cm5hbWVudEhpc3RvcnlEYXRhIiwiZXZlbnRTdGFuZGluZ3MiLCJnZXRUb3VybmFtZW50U3RhbmRpbmdzIiwiaW5wdXRVc2VyIiwiaW5wdXRVc2VyRGF0YSIsImV2ZW50c0FycmF5IiwicGxlZGdlZFRvIiwiaW5wdXRUb3VybmFtZW50SGlzdG9yeSIsImV2ZW50U3RhbmRpbmdEYXRhIiwibmFtZSIsInByZW1pZXIiLCJjb2xvciIsInVzZXJzRGF0YSIsImlucHV0TGluayIsIlJlZ0NvbnRyb2xsZXIiLCJsb2dpbkVtYWlsIiwibG9naW5QYXNzd29yZCIsInNob3dJbnZhbGlkVXNlckVycm9yIiwic2hvd0ludmFsaWRQYXNzd29yZEVycm9yIiwicGFzc3dvcmRSZXNldCIsIiRyZXNldFBhc3N3b3JkIiwic2hvd1Bhc3N3b3JkUmVzZXRFbWFpbE1lc3NhZ2UiLCJzdWJtaXROZXdBY2NvdW50IiwibmV3VXNlcm5hbWUiLCJ1c2VyRXhpc3RzIiwic2hvd0R1cGxpY2F0ZVVzZXJFcnJvciIsInNob3dFbWFpbFRha2VuRXJyb3IiLCJuZXdFbWFpbCJdLCJtYXBwaW5ncyI6IkNBQUEsV0FDQSxZQUVBQSxTQUNBQyxPQUFBLFVBRUEsWUFHQSxZQUNBLFdBQ0EsbUJBQ0EsVUFDQSxlQUNBLGVDZEEsV0FDQSxZQVVBLFNBQUFDLEdBQUFDLEVBQUFDLEdBR0FBLEVBQUFDLFVBQUEsS0FFQUYsRUFDQUcsTUFBQSxTQUNBQyxJQUFBLElBRUFDLE9BQ0FDLFFBQ0FDLFlBQUEsNEJBQ0FDLFdBQUEsNkJBQ0FDLE1BQ0FDLFdBQUEsU0FHQUMsU0FDQUosWUFBQSxvQkFDQUMsV0FBQSw2QkFLQUwsTUFBQSxtQkFDQUMsSUFBQSxtQkFFQUMsT0FDQUMsUUFDQUMsWUFBQSw2QkFDQUMsV0FBQSw2QkFDQUMsTUFDQUMsV0FBQSxTQUdBQyxTQUNBSixZQUFBLG9CQUNBQyxXQUFBLDJCQUtBTCxNQUFBLFdBQ0FDLElBQUEscUJBRUFDLE9BQ0FDLFFBQ0FDLFlBQUEsNkJBQ0FDLFdBQUEsNkJBQ0FDLE1BQ0FDLFdBQUEsU0FHQUMsU0FDQUosWUFBQSx3QkFDQUMsV0FBQSxtQ0FLQUwsTUFBQSxlQUNBQyxJQUFB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QTVELGVBQUFBLEVBQ0E0RCxFQUFBNkosY0FBQUEsRUFDQTdKLEVBQUFnSyxpQkFBQUEsRUFqQkF2UyxRQUNBQyxPQUFBLFVBQ0FVLFdBQUEsZ0JBQUFvUixHcEJpckRJQSxFQUFjMVEsU0FBVyxTQUFVLGFBQWMsV0FBWSxVQUFXLFNBQVUsa0JBQW1CLGNBQWUiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcsIFtcbiAgICAgICAgICAgIC8qIEFuZ3VsYXIgbW9kdWxlcyAqL1xuICAgICAgICAgICAgJ25nQW5pbWF0ZScsXG4gICAgICAgICAgICAvKiBBcHAgbW9kdWxlcyAqL1xuICAgICAgICAgICAgLyogVGhpcmQtcGFydHkgbW9kdWxlcyAqL1xuICAgICAgICAgICAgJ3VpLnJvdXRlcicsXG4gICAgICAgICAgICAnZmlyZWJhc2UnLFxuICAgICAgICAgICAgJ3ZhbGlkYXRpb24ubWF0Y2gnLFxuICAgICAgICAgICAgJ29yZGluYWwnLFxuICAgICAgICAgICAgJ25nRmlsZVVwbG9hZCcsXG4gICAgICAgICAgICAnbmdJbWd1cidcbiAgICAgICAgXSk7XG59KSgpOyIsIihmdW5jdGlvbigpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCd2Zy5hcHAnKVxuXHRcdC5jb25zdGFudCgnRklSRUJBU0VEQVRBJywge1xuXHRcdFx0J0ZCVVJMJzogJ2h0dHBzOi8vd29sZnNjb250ZXN0cy5maXJlYmFzZWlvLmNvbSdcblx0XHR9KVxuXHRcdC5jb25maWcoY29uZmlnKTtcblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gY29uZmlnKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcblxuXHRcdC8vIFJlZGlyZWN0IGFueSB1bm1hdGNoZWQgVVJMIHRvIC8uXG5cdFx0JHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpO1xuXG5cdFx0JHN0YXRlUHJvdmlkZXJcblx0XHQgICAgLnN0YXRlKCdpbmRleCcsIHtcblx0XHQgICAgXHR1cmw6ICcvJyxcblxuXHRcdCAgICBcdHZpZXdzOiB7XG5cdFx0ICAgIFx0XHQnaGVhZGVyJzoge1xuXHRcdCAgICBcdFx0XHR0ZW1wbGF0ZVVybDogJ2FwcC9oZWFkZXIvaG9tZUhlYWRlci5odG0nLFxuXHRcdCAgICBcdFx0XHRjb250cm9sbGVyOiAnSGVhZGVyQ29udHJvbGxlciBhcyBoZWFkZXInLFxuXHRcdCAgICBcdFx0XHRkYXRhOiB7XG5cdFx0ICAgIFx0XHRcdFx0aGVhZGVyVHlwZTogJ3RhbGwnXG5cdFx0ICAgIFx0XHRcdH1cblx0XHQgICAgXHRcdH0sXG5cdFx0ICAgIFx0XHQnY29udGVudCc6IHtcblx0XHQgICAgXHRcdFx0dGVtcGxhdGVVcmw6ICdhcHAvaG9tZS9ob21lLmh0bScsXG5cdFx0ICAgIFx0XHRcdGNvbnRyb2xsZXI6ICdIb21lQ29udHJvbGxlciBhcyBob21lJ1xuXHRcdCAgICBcdFx0fVxuXHRcdCAgICBcdH1cblx0XHQgICAgfSlcblxuXHRcdCAgICAuc3RhdGUoJ3JlZ2lzdGVyT3JMb2dpbicsIHtcblx0XHQgICAgXHR1cmw6ICcvcmVnaXN0ZXJPckxvZ2luJyxcblxuXHRcdCAgICBcdHZpZXdzOiB7XG5cdFx0ICAgIFx0XHQnaGVhZGVyJzoge1xuXHRcdCAgICBcdFx0XHR0ZW1wbGF0ZVVybDogJy9hcHAvaGVhZGVyL2hvbWVIZWFkZXIuaHRtJyxcblx0XHQgICAgXHRcdFx0Y29udHJvbGxlcjogJ0hlYWRlckNvbnRyb2xsZXIgYXMgaGVhZGVyJyxcblx0XHQgICAgXHRcdFx0ZGF0YToge1xuXHRcdCAgICBcdFx0XHRcdGhlYWRlclR5cGU6ICd0YWxsJ1xuXHRcdCAgICBcdFx0XHR9XG5cdFx0ICAgIFx0XHR9LFxuXHRcdCAgICBcdFx0J2NvbnRlbnQnOiB7XG5cdFx0ICAgIFx0XHRcdHRlbXBsYXRlVXJsOiAnL2FwcC9ob21lL3JlZy5odG0nLFxuXHRcdCAgICBcdFx0XHRjb250cm9sbGVyOiAnUmVnQ29udHJvbGxlciBhcyByZWcnXG5cdFx0ICAgIFx0XHR9XG5cdFx0ICAgIFx0fVxuXHRcdCAgICB9KVxuXG5cdFx0ICAgIC5zdGF0ZSgncHJvZmlsZScsIHtcblx0XHQgICAgXHR1cmw6ICcvcHJvZmlsZS86dXNlcm5hbWUnLFxuXG5cdFx0ICAgIFx0dmlld3M6IHtcblx0XHQgICAgXHRcdCdoZWFkZXInOiB7XG5cdFx0ICAgIFx0XHRcdHRlbXBsYXRlVXJsOiAnL2FwcC9oZWFkZXIvaG9tZUhlYWRlci5odG0nLFxuXHRcdCAgICBcdFx0XHRjb250cm9sbGVyOiAnSGVhZGVyQ29udHJvbGxlciBhcyBoZWFkZXInLFxuXHRcdCAgICBcdFx0XHRkYXRhOiB7XG5cdFx0ICAgIFx0XHRcdFx0aGVhZGVyVHlwZTogJ3RhbGwnXG5cdFx0ICAgIFx0XHRcdH1cblx0XHQgICAgXHRcdH0sXG5cdFx0ICAgIFx0XHQnY29udGVudCc6IHtcblx0XHQgICAgXHRcdFx0dGVtcGxhdGVVcmw6ICcvYXBwL2hvbWUvcHJvZmlsZS5odG0nLFxuXHRcdCAgICBcdFx0XHRjb250cm9sbGVyOiAnUHJvZmlsZUNvbnRyb2xsZXIgYXMgcHJvZmlsZSdcblx0XHQgICAgXHRcdH1cblx0XHQgICAgXHR9XG5cdFx0ICAgIH0pXG5cblx0XHQgICAgLnN0YXRlKCdsZWFkZXJib2FyZCcsIHtcblx0XHQgICAgXHR1cmw6ICcvbGVhZGVyYm9hcmQnLFxuXG5cdFx0ICAgIFx0dmlld3M6IHtcblx0XHQgICAgXHRcdCdoZWFkZXInOiB7XG5cdFx0ICAgIFx0XHRcdHRlbXBsYXRlVXJsOiAnL2FwcC9oZWFkZXIvaG9tZUhlYWRlci5odG0nLFxuXHRcdCAgICBcdFx0XHRjb250cm9sbGVyOiAnSGVhZGVyQ29udHJvbGxlciBhcyBoZWFkZXInLFxuXHRcdCAgICBcdFx0XHRkYXRhOiB7XG5cdFx0ICAgIFx0XHRcdFx0aGVhZGVyVHlwZTogJ3RhbGwnXG5cdFx0ICAgIFx0XHRcdH1cblx0XHQgICAgXHRcdH0sXG5cdFx0ICAgIFx0XHQnY29udGVudCc6IHtcblx0XHQgICAgXHRcdFx0dGVtcGxhdGVVcmw6ICcvYXBwL2hvbWUvbGVhZGVyYm9hcmQuaHRtJyxcblx0XHQgICAgXHRcdFx0Y29udHJvbGxlcjogJ0xlYWRlcmJvYXJkQ29udHJvbGxlciBhcyBsZWFkZXJib2FyZCdcblx0XHQgICAgXHRcdH1cblx0XHQgICAgXHR9XG5cdFx0ICAgIH0pXG5cblx0XHQgICAgLnN0YXRlKCdldmVudE1haW4nLCB7XG5cdFx0ICAgIFx0dXJsOiAnL2V2ZW50LzpldmVudE5hbWUvbWFpbicsXG5cblx0XHQgICAgXHR2aWV3czoge1xuXHRcdCAgICBcdFx0J2hlYWRlcic6IHtcblx0XHQgICAgXHRcdFx0dGVtcGxhdGVVcmw6ICcvYXBwL2hlYWRlci9ob21lSGVhZGVyLmh0bScsXG5cdFx0ICAgIFx0XHRcdGNvbnRyb2xsZXI6ICdIZWFkZXJDb250cm9sbGVyIGFzIGhlYWRlcicsXG5cdFx0ICAgIFx0XHRcdGRhdGE6IHtcblx0XHQgICAgXHRcdFx0XHRoZWFkZXJUeXBlOiAndGFsbCdcblx0XHQgICAgXHRcdFx0fVxuXHRcdCAgICBcdFx0fSxcblx0XHQgICAgXHRcdCdjb250ZW50Jzoge1xuXHRcdCAgICBcdFx0XHR0ZW1wbGF0ZVVybDogJy9hcHAvZXZlbnQvbWFpbi5odG0nLFxuXHRcdCAgICBcdFx0XHRjb250cm9sbGVyOiAnRXZlbnRNYWluQ29udHJvbGxlciBhcyBldmVudCdcblx0XHQgICAgXHRcdH1cblx0XHQgICAgXHR9XG5cdFx0ICAgIH0pXG5cblx0XHQgICAgLnN0YXRlKCdjdXN0b21pemVBdmF0YXInLCB7XG5cdFx0ICAgIFx0dXJsOiAnL2N1c3RvbWl6ZUF2YXRhcicsXG5cblx0XHQgICAgXHR2aWV3czoge1xuXHRcdCAgICBcdFx0J2hlYWRlcic6IHtcblx0XHQgICAgXHRcdFx0dGVtcGxhdGVVcmw6ICcvYXBwL2hlYWRlci9ob21lSGVhZGVyLmh0bScsXG5cdFx0ICAgIFx0XHRcdGNvbnRyb2xsZXI6ICdIZWFkZXJDb250cm9sbGVyIGFzIGhlYWRlcicsXG5cdFx0ICAgIFx0XHRcdGRhdGE6IHtcblx0XHQgICAgXHRcdFx0XHRoZWFkZXJUeXBlOiAndGFsbCdcblx0XHQgICAgXHRcdFx0fVxuXHRcdCAgICBcdFx0fSxcblx0XHQgICAgXHRcdCdjb250ZW50Jzoge1xuXHRcdCAgICBcdFx0XHR0ZW1wbGF0ZVVybDogJy9hcHAvaG9tZS9hdmF0YXIuaHRtJyxcblx0XHQgICAgXHRcdFx0Y29udHJvbGxlcjogJ0F2YXRhckNvbnRyb2xsZXIgYXMgYXZhdGFyJ1xuXHRcdCAgICBcdFx0fVxuXHRcdCAgICBcdH0sXG5cblx0XHQgICAgXHRyZXNvbHZlOiB7XG5cdFx0ICAgIFx0XHQnY3VycmVudEF1dGgnOiBbJ0F1dGhXcmFwcGVyJywgZnVuY3Rpb24oQXV0aFdyYXBwZXIpIHtcblx0XHQgICAgXHRcdFx0cmV0dXJuIEF1dGhXcmFwcGVyLiRyZXF1aXJlQXV0aCgpO1xuXHRcdCAgICBcdFx0fV1cblx0XHQgICAgXHR9XG5cdFx0ICAgIH0pXG5cblx0XHQgICAgLnN0YXRlKCdwYXNzd29yZENoYW5nZScsIHtcblx0XHQgICAgXHR1cmw6ICcvcGFzc3dvcmRDaGFuZ2UnLFxuXG5cdFx0ICAgIFx0dmlld3M6IHtcblx0XHQgICAgXHRcdCdoZWFkZXInOiB7XG5cdFx0ICAgIFx0XHRcdHRlbXBsYXRlVXJsOiAnL2FwcC9oZWFkZXIvaG9tZUhlYWRlci5odG0nLFxuXHRcdCAgICBcdFx0XHRjb250cm9sbGVyOiAnSGVhZGVyQ29udHJvbGxlciBhcyBoZWFkZXInLFxuXHRcdCAgICBcdFx0XHRkYXRhOiB7XG5cdFx0ICAgIFx0XHRcdFx0aGVhZGVyVHlwZTogJ3RhbGwnXG5cdFx0ICAgIFx0XHRcdH1cblx0XHQgICAgXHRcdH0sXG5cdFx0ICAgIFx0XHQnY29udGVudCc6IHtcblx0XHQgICAgXHRcdFx0dGVtcGxhdGVVcmw6ICcvYXBwL2hvbWUvcGFzc3dvcmRDaGFuZ2UuaHRtJyxcblx0XHQgICAgXHRcdFx0Y29udHJvbGxlcjogJ1Bhc3N3b3JkQ2hhbmdlQ29udHJvbGxlciBhcyBwd2NoYW5nZSdcblx0XHQgICAgXHRcdH1cblx0XHQgICAgXHR9LFxuXG5cdFx0ICAgIFx0cmVzb2x2ZToge1xuXHRcdCAgICBcdFx0J2N1cnJlbnRBdXRoJzogWydBdXRoV3JhcHBlcicsIGZ1bmN0aW9uKEF1dGhXcmFwcGVyKSB7XG5cdFx0ICAgIFx0XHRcdHJldHVybiBBdXRoV3JhcHBlci4kcmVxdWlyZUF1dGgoKTtcblx0XHQgICAgXHRcdH1dXG5cdFx0ICAgIFx0fVxuXHRcdCAgICB9KVxuXG5cdFx0ICAgIC5zdGF0ZSgnZXZlbnRHYW1lJywge1xuXHRcdCAgICBcdHVybDogJy9ldmVudC86ZXZlbnROYW1lL2dhbWUvOmdhbWVOYW1lJyxcblxuXHRcdCAgICBcdHZpZXdzOiB7XG5cdFx0ICAgIFx0XHQnaGVhZGVyJzoge1xuXHRcdCAgICBcdFx0XHR0ZW1wbGF0ZVVybDogJy9hcHAvaGVhZGVyL2hvbWVIZWFkZXIuaHRtJyxcblx0XHQgICAgXHRcdFx0Y29udHJvbGxlcjogJ0hlYWRlckNvbnRyb2xsZXIgYXMgaGVhZGVyJyxcblx0XHQgICAgXHRcdFx0ZGF0YToge1xuXHRcdCAgICBcdFx0XHRcdGhlYWRlclR5cGU6ICd0YWxsJ1xuXHRcdCAgICBcdFx0XHR9XG5cdFx0ICAgIFx0XHR9LFxuXHRcdCAgICBcdFx0J2NvbnRlbnQnOiB7XG5cdFx0ICAgIFx0XHRcdHRlbXBsYXRlVXJsOiAnL2FwcC9ldmVudC9nYW1lLmh0bScsXG5cdFx0ICAgIFx0XHRcdGNvbnRyb2xsZXI6ICdFdmVudEdhbWVDb250cm9sbGVyIGFzIGdhbWUnXG5cdFx0ICAgIFx0XHR9XG5cdFx0ICAgIFx0fVxuXHRcdCAgICB9KTtcblx0fVxufSkoKTsiLG51bGwsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5ydW4ocnVuKTtcblxuICAgIGZ1bmN0aW9uIHJ1bigkcm9vdFNjb3BlLCAkbG9jYXRpb24sICRzdGF0ZSwgJGZpcmViYXNlT2JqZWN0LCBBdXRoV3JhcHBlciwgRklSRUJBU0VEQVRBKSB7XG5cbiAgICAgICAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZUVycm9yJywgZnVuY3Rpb24oZXZlbnQsIHRvU3RhdGUsIHRvUGFyYW1zLCBmcm9tU3RhdGUsIGZyb21QYXJhbXMsIGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IgPT09ICdBVVRIX1JFUVVJUkVEJykge1xuICAgICAgICAgICAgICAgICRzdGF0ZS5nbygncmVnaXN0ZXJPckxvZ2luJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdWNjZXNzJywgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIC8vIElmIHVzZXIgaXMgbG9nZ2VkIGluLCBkb3dubG9hZCB0aGVpciBwcm9maWxlIGRhdGEgdG8gYW4gb2JqZWN0IGluICRyb290U2NvcGUuXG4gICAgICAgICAgICBpZiAoQXV0aFdyYXBwZXIuJGdldEF1dGgoKSkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHZhciBhdXRoRGF0YSA9IEF1dGhXcmFwcGVyLiRnZXRBdXRoKCk7XG4gICAgICAgICAgICAgICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuXG4gICAgICAgICAgICAgICAgdmFyIHByb2ZpbGVEYXRhID0gJGZpcmViYXNlT2JqZWN0KHJlZi5jaGlsZCgndXNlcnMnKS5jaGlsZChhdXRoRGF0YS51aWQpKTtcbiAgICAgICAgICAgICAgICBwcm9maWxlRGF0YS4kYmluZFRvKCRyb290U2NvcGUsICdwcm9maWxlJykudGhlbihmdW5jdGlvbih1bmJpbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS51bmJpbmRGdW5jdGlvbiA9IHVuYmluZDtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5zZXJ2aWNlKCdhdXRoU2VydmljZScsIGF1dGhTZXJ2aWNlKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIGF1dGhTZXJ2aWNlKCRxLCAkcm9vdFNjb3BlLCAkc3RhdGUsICRmaXJlYmFzZU9iamVjdCwgQXV0aFdyYXBwZXIsIEZJUkVCQVNFREFUQSkge1xuICAgICAgICBcbiAgICBcdHRoaXMuY2hlY2tJZlVzZXJFeGlzdHMgPSBjaGVja0lmVXNlckV4aXN0cztcbiAgICBcdHRoaXMuY3JlYXRlTmV3VXNlciA9IGNyZWF0ZU5ld1VzZXI7XG4gICAgICAgIHRoaXMubG9naW5Ub0FjY291bnQgPSBsb2dpblRvQWNjb3VudDtcbiAgICAgICAgdGhpcy5sb2dPdXQgPSBsb2dPdXQ7XG5cbiAgICBcdC8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgIFx0ZnVuY3Rpb24gY2hlY2tJZlVzZXJFeGlzdHMoaW5wdXRVc2VybmFtZSkge1xuXG4gICAgXHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICBcdFx0dmFyIGRvZXNVc2VyRXhpc3QgPSBmYWxzZTtcbiAgICBcdFx0dmFyIHVzZXJzUmVmID0gbmV3IEZpcmViYXNlKEZJUkVCQVNFREFUQS5GQlVSTCArICcvdXNlcnMnKTtcblxuICAgIFx0XHR1c2Vyc1JlZi5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKGRhdGFTbmFwc2hvdCkge1xuXG4gICAgXHRcdFx0ZGF0YVNuYXBzaG90LmZvckVhY2goZnVuY3Rpb24odXNlcikge1xuICAgIFx0XHRcdFx0aWYgKHVzZXIudmFsKCkudXNlck5hbWUgPT09IGlucHV0VXNlcm5hbWUpIHtcbiAgICBcdFx0XHRcdFx0ZG9lc1VzZXJFeGlzdCA9IHRydWU7XG4gICAgXHRcdFx0XHR9XG4gICAgXHRcdFx0fSk7XG5cbiAgICBcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKGRvZXNVc2VyRXhpc3QpO1xuXG4gICAgXHRcdH0pO1xuXG4gICAgXHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgXHR9XG5cbiAgICBcdGZ1bmN0aW9uIGNyZWF0ZU5ld1VzZXIoaW5wdXRFbWFpbCwgaW5wdXRQYXNzd29yZCwgaW5wdXRVc2VybmFtZSkge1xuXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgXHRcdEF1dGhXcmFwcGVyLiRjcmVhdGVVc2VyKHtcbiAgICBcdFx0XHRlbWFpbDogaW5wdXRFbWFpbCxcbiAgICBcdFx0XHRwYXNzd29yZDogaW5wdXRQYXNzd29yZFxuICAgIFx0XHR9KS50aGVuKGZ1bmN0aW9uKHVzZXJEYXRhKSB7XG5cbiAgICBcdFx0XHQvLyBDcmVhdGUgYSBkYXRhIGVudHJ5IGZvciB0aGUgbmV3IHVzZXJuYW1lLlxuICAgIFx0XHRcdG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpLmNoaWxkKCd1c2Vycy8nICsgdXNlckRhdGEudWlkKS5zZXQoe1xuXG4gICAgXHRcdFx0XHR1c2VyTmFtZTogaW5wdXRVc2VybmFtZSxcbiAgICBcdFx0XHRcdHJvbGU6ICdVc2VyJ1xuXG4gICAgXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3JEYXRhKSB7XG4gICAgXHRcdFx0XHRjb25zb2xlLmVycm9yKGVycm9yRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvckRhdGEuY29kZTtcbiAgICBcdFx0XHR9KTtcblxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhIGRhdGEgZW50cnkgZm9yIHRoZSB1c2VyJ3MgYXZhdGFyLlxuICAgICAgICAgICAgICAgIG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpLmNoaWxkKCdhdmF0YXJzJykuY2hpbGQoaW5wdXRVc2VybmFtZSkuc2V0KCdodHRwOi8vYXBpLmFkb3JhYmxlLmlvL2F2YXRhcnMvNDIvJyArIGlucHV0VXNlcm5hbWUpO1xuXG4gICAgXHRcdFx0Ly8gTG9nIHRoZSB1c2VyIGluLlxuICAgIFx0XHRcdEF1dGhXcmFwcGVyLiRhdXRoV2l0aFBhc3N3b3JkKHtcbiAgICBcdFx0XHRcdGVtYWlsOiBpbnB1dEVtYWlsLFxuICAgIFx0XHRcdFx0cGFzc3dvcmQ6IGlucHV0UGFzc3dvcmRcbiAgICBcdFx0XHR9KS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCdBQ0NPVU5UX0NSRUFURUQnKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgIFx0XHR9KS5jYXRjaChmdW5jdGlvbihlcnJvckRhdGEpIHtcblxuICAgIFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3JEYXRhKTtcblxuICAgIFx0XHRcdGlmIChlcnJvckRhdGEuY29kZSA9PT0gJ0VNQUlMX1RBS0VOJykge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGVycm9yRGF0YS5jb2RlKTtcbiAgICBcdFx0XHR9XG5cbiAgICBcdFx0fSk7XG5cbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgXHR9XG5cbiAgICAgICAgZnVuY3Rpb24gbG9naW5Ub0FjY291bnQoaW5wdXRFbWFpbCwgaW5wdXRQYXNzd29yZCkge1xuXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICAgICBBdXRoV3JhcHBlci4kYXV0aFdpdGhQYXNzd29yZCh7XG4gICAgICAgICAgICAgICAgZW1haWw6IGlucHV0RW1haWwsXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6IGlucHV0UGFzc3dvcmRcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oYXV0aERhdGEpIHtcblxuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoJ0xPR0lOX1NVQ0NFU1MnKTtcblxuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyb3JEYXRhKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoZXJyb3JEYXRhLmNvZGUgPT09ICdJTlZBTElEX1VTRVInKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoJ0lOVkFMSURfVVNFUicpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3JEYXRhLmNvZGUgPT09ICdJTlZBTElEX1BBU1NXT1JEJykge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCdJTlZBTElEX1BBU1NXT1JEJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGxvZ091dCgpIHtcbiAgICAgICAgICAgIEF1dGhXcmFwcGVyLiR1bmF1dGgoKTtcbiAgICAgICAgICAgICRyb290U2NvcGUudW5iaW5kRnVuY3Rpb24oKTtcblxuICAgICAgICAgICAgJHN0YXRlLmdvKCdpbmRleCcpO1xuICAgICAgICB9XG5cbiAgICB9XG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5mYWN0b3J5KCdBdXRoV3JhcHBlcicsIEF1dGhXcmFwcGVyKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIEF1dGhXcmFwcGVyKCRmaXJlYmFzZUF1dGgsIEZJUkVCQVNFREFUQSkge1xuXG4gICAgICAgIHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRklSRUJBU0VEQVRBLkZCVVJMKTtcbiAgICAgICAgcmV0dXJuICRmaXJlYmFzZUF1dGgocmVmKTtcblxuICAgIH1cbiAgICBcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJylcbiAgICAgICAgLnNlcnZpY2UoJ2V2ZW50U2VydmljZScsIGV2ZW50U2VydmljZSk7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBldmVudFNlcnZpY2UoJHEsICRmaWx0ZXIsICRmaXJlYmFzZU9iamVjdCwgJGZpcmViYXNlQXJyYXksIEZJUkVCQVNFREFUQSkge1xuXG4gICAgICAgIHRoaXMuY3JlYXRlTXVsdGlHYW1lRmluYWxTdGFuZGluZ3MgPSBjcmVhdGVNdWx0aUdhbWVGaW5hbFN0YW5kaW5ncztcbiAgICAgICAgdGhpcy5nZXRFdmVudFByb3BlcnRpZXMgPSBnZXRFdmVudFByb3BlcnRpZXM7XG4gICAgICAgIHRoaXMuZ2V0R2FtZURhdGEgPSBnZXRHYW1lRGF0YTtcbiAgICAgICAgdGhpcy5nZXRHYW1lc0xpc3QgPSBnZXRHYW1lc0xpc3Q7XG4gICAgICAgIHRoaXMuZ2V0TXVsdGlHYW1lTGVhZGVyYm9hcmQgPSBnZXRNdWx0aUdhbWVMZWFkZXJib2FyZDtcbiAgICAgICAgdGhpcy5nZXRTaW5nbGVHYW1lTGVhZGVyYm9hcmQgPSBnZXRTaW5nbGVHYW1lTGVhZGVyYm9hcmQ7XG4gICAgICAgIHRoaXMuZ2V0UGxheWVyU2NvcmVzID0gZ2V0UGxheWVyU2NvcmVzO1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVNdWx0aUdhbWVGaW5hbFN0YW5kaW5ncyhpbnB1dEV2ZW50KSB7XG5cbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgZmluYWwgc3RhbmRpbmdzIG9mIHRoZSBldmVudC5cbiAgICAgICAgICAgIGdldE11bHRpR2FtZUxlYWRlcmJvYXJkKGlucHV0RXZlbnQpLnRoZW4oZnVuY3Rpb24ocHJvbWlzZVJlc29sdXRpb24pIHtcblxuICAgICAgICAgICAgICAgIHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRklSRUJBU0VEQVRBLkZCVVJMKTtcbiAgICAgICAgICAgICAgICB2YXIgaW5wdXRFdmVudFN0YW5kaW5ncyA9ICRmaXJlYmFzZU9iamVjdChcbiAgICAgICAgICAgICAgICAgICAgcmVmXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGQoJ3N0YW5kaW5ncycpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGQoaW5wdXRFdmVudClcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgaW5wdXRFdmVudFN0YW5kaW5ncy4kbG9hZGVkKCkudGhlbihmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlUmVzb2x1dGlvbi5mb3JFYWNoKGZ1bmN0aW9uKHN0YW5kaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dEV2ZW50U3RhbmRpbmdzW3N0YW5kaW5nLmtleV0gPSBzdGFuZGluZy5wb3NpdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaW5wdXRFdmVudFN0YW5kaW5ncy4kc2F2ZSgpO1xuXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRFdmVudFByb3BlcnRpZXMoaW5wdXRFdmVudCkge1xuXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgIFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuICAgICAgICBcdHZhciBldmVudFByb3BlcnRpZXMgPSAkZmlyZWJhc2VPYmplY3QoXG4gICAgICAgIFx0XHRyZWZcbiAgICAgICAgXHRcdFx0LmNoaWxkKCdjb250ZXN0cycpXG4gICAgICAgIFx0XHRcdC5jaGlsZChpbnB1dEV2ZW50KVxuICAgICAgICBcdFx0XHQuY2hpbGQoJ3Byb3BlcnRpZXMnKVxuICAgICAgICBcdCk7XG5cbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZXZlbnRQcm9wZXJ0aWVzKTtcblxuICAgICAgICBcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRHYW1lRGF0YShpbnB1dEV2ZW50LCBpbnB1dEdhbWUpIHtcblxuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICAgICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuXG4gICAgICAgICAgICBnZXRHYW1lc0xpc3QoaW5wdXRFdmVudCkudGhlbihmdW5jdGlvbihnYW1lc0xpc3QpIHtcblxuICAgICAgICAgICAgICAgIGdhbWVzTGlzdC5mb3JFYWNoKGZ1bmN0aW9uKGdhbWUpIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZS5jYW1lbE5hbWUgPT09IGlucHV0R2FtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShnYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRHYW1lc0xpc3QoaW5wdXRFdmVudCkge1xuXG4gICAgICAgIFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICBcdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRklSRUJBU0VEQVRBLkZCVVJMKTtcbiAgICAgICAgXHR2YXIgZ2FtZXNMaXN0ID0gJGZpcmViYXNlQXJyYXkoXG4gICAgICAgIFx0XHRyZWZcbiAgICAgICAgXHRcdFx0LmNoaWxkKCdjb250ZXN0cycpXG4gICAgICAgIFx0XHRcdC5jaGlsZChpbnB1dEV2ZW50KVxuICAgICAgICBcdFx0XHQuY2hpbGQoJ2FjdGl2ZUdhbWVzJylcbiAgICAgICAgXHQpO1xuXG4gICAgICAgIFx0Z2FtZXNMaXN0LiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICBcdFx0ZGVmZXJyZWQucmVzb2x2ZShnYW1lc0xpc3QpO1xuICAgICAgICBcdH0pO1xuXG4gICAgICAgIFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldE11bHRpR2FtZUxlYWRlcmJvYXJkKGlucHV0RXZlbnQpIHtcblxuICAgICAgICBcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICAgXHQvLyBXZSBuZWVkIHRvIGdldCB0aGUgdG9wIDEyIHBsYXllcnMgZm9yIGV2ZXJ5IGdhbWUuXG4gICAgICAgIFx0dmFyIHBsYXllclBvaW50cyA9IHt9O1xuXG4gICAgICAgIFx0Z2V0R2FtZXNMaXN0KGlucHV0RXZlbnQpLnRoZW4oZnVuY3Rpb24ocHJvbWlzZVJlc29sdXRpb24pIHtcblxuICAgICAgICBcdFx0dmFyIGdhbWVzTGlzdCA9IHByb21pc2VSZXNvbHV0aW9uO1xuICAgICAgICBcdFx0Z2FtZXNMaXN0LmZvckVhY2goZnVuY3Rpb24oZ2FtZSkge1xuXG4gICAgICAgIFx0XHRcdGlmIChnYW1lLnNjb3Jlcykge1xuXG4gICAgICAgIFx0XHRcdFx0Ly8gQ29udmVydCB0aGUgZ2FtZSdzIHNjb3JlcyB0byBhbiBhcnJheS5cbiAgICAgICAgXHRcdFx0XHR2YXIgc2NvcmVzQXJyYXkgPSAkLm1hcChnYW1lLnNjb3JlcywgZnVuY3Rpb24oZWwpIHsgcmV0dXJuIGVsOyB9KTtcbiAgICAgICAgXHRcdFx0XHRzY29yZXNBcnJheSA9ICRmaWx0ZXIoJ29yZGVyQnknKShzY29yZXNBcnJheSwgJy1zY29yZScpO1xuXG4gICAgICAgIFx0XHRcdFx0dmFyIHRvdGFsQXdhcmQgPSAxMjtcblxuICAgICAgICBcdFx0XHRcdC8vIEl0ZXJhdGUgdGhyb3VnaCB0aGUgdG9wIHNjb3JlcyBhd2FyZGluZyBwb2ludHMuXG4gICAgICAgIFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzY29yZXNBcnJheS5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgIFx0XHRcdFx0XHRpZiAoIXBsYXllclBvaW50c1tzY29yZXNBcnJheVtpXS51c2VyTmFtZV0pIHtcbiAgICAgICAgXHRcdFx0XHRcdFx0cGxheWVyUG9pbnRzW3Njb3Jlc0FycmF5W2ldLnVzZXJOYW1lXSA9IHtcbiAgICAgICAgXHRcdFx0XHRcdFx0XHRwb2ludHM6IDBcbiAgICAgICAgXHRcdFx0XHRcdFx0fTtcbiAgICAgICAgXHRcdFx0XHRcdH1cblxuICAgICAgICBcdFx0XHRcdFx0cGxheWVyUG9pbnRzW3Njb3Jlc0FycmF5W2ldLnVzZXJOYW1lXS5wb2ludHMgKz0gdG90YWxBd2FyZDtcblxuICAgICAgICBcdFx0XHRcdFx0aWYgKHRvdGFsQXdhcmQgPiAwKSB7XG4gICAgICAgIFx0XHRcdFx0XHRcdHRvdGFsQXdhcmQgLT0gMTtcbiAgICAgICAgXHRcdFx0XHRcdH1cblxuICAgICAgICBcdFx0XHRcdH1cblxuICAgICAgICBcdFx0XHR9XG5cbiAgICAgICAgXHRcdH0pO1xuXG4gICAgICAgIFx0XHQvLyBGaW5kIGFuZCByZXNvbHZlIHRpZXMuXG4gICAgICAgIFx0XHRwbGF5ZXJQb2ludHMgPSAkZmlsdGVyKCdvcmRlck9iamVjdEJ5JykocGxheWVyUG9pbnRzLCAncG9pbnRzJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdmFyIGhhdmVCb3R0b21TY29yZXJzRmxvb3IgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB2YXIgZmxvb3JSYW5nZSA9IDA7XG4gICAgICAgIFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHBsYXllclBvaW50cy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgIFx0XHRcdGlmIChwbGF5ZXJQb2ludHNbaS0xXSAmJiBwbGF5ZXJQb2ludHNbaV0ucG9pbnRzICYmIHBsYXllclBvaW50c1tpLTFdLnBvaW50cykge1xuXG4gICAgICAgIFx0XHRcdFx0aWYgKHBsYXllclBvaW50c1tpXS5wb2ludHMgPT09IHBsYXllclBvaW50c1tpLTFdLnBvaW50cykge1xuICAgICAgICBcdFx0XHRcdFx0cGxheWVyUG9pbnRzW2ldLnBvc2l0aW9uID0gcGxheWVyUG9pbnRzW2ktMV0ucG9zaXRpb247XG4gICAgICAgIFx0XHRcdFx0fSBlbHNlIHtcbiAgICAgICAgXHRcdFx0XHRcdHBsYXllclBvaW50c1tpXS5wb3NpdGlvbiA9IChpKzEpO1xuICAgICAgICBcdFx0XHRcdH1cblxuICAgICAgICBcdFx0XHR9IGVsc2Uge1xuXG4gICAgICAgIFx0XHRcdFx0aWYgKGkgPT09IDApIHtcbiAgICAgICAgXHRcdFx0XHRcdHBsYXllclBvaW50c1tpXS5wb3NpdGlvbiA9IDE7XG4gICAgICAgIFx0XHRcdFx0fSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaGF2ZUJvdHRvbVNjb3JlcnNGbG9vcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHZXQgY291bnQgb2YgcGxheWVycyBpbiBvbmUgcG9zaXRpb24gaGlnaGVyLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2V0U2NvcmVDb3VudE9mID0gcGxheWVyUG9pbnRzW2ktMV0ucG9pbnRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJQb2ludHMuZm9yRWFjaChmdW5jdGlvbihwb2ludHNEYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocG9pbnRzRGF0YS5wb2ludHMgPT09IGdldFNjb3JlQ291bnRPZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsb29yUmFuZ2UgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGF2ZUJvdHRvbVNjb3JlcnNGbG9vciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgIFx0XHRcdFx0XHRwbGF5ZXJQb2ludHNbaV0ucG9zaXRpb24gPSAocGxheWVyUG9pbnRzLmxlbmd0aCArIDEpIC0gZmxvb3JSYW5nZTtcbiAgICAgICAgXHRcdFx0XHR9XG5cbiAgICAgICAgXHRcdFx0fVxuXG4gICAgICAgIFx0XHR9XG5cbiAgICAgICAgXHRcdGRlZmVycmVkLnJlc29sdmUocGxheWVyUG9pbnRzKTtcblxuICAgICAgICBcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0U2luZ2xlR2FtZUxlYWRlcmJvYXJkKGlucHV0RXZlbnQpIHtcblxuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICAgICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuICAgICAgICAgICAgdmFyIGxlYWRlcmJvYXJkRGF0YSA9ICRmaXJlYmFzZUFycmF5KFxuICAgICAgICAgICAgICAgIHJlZlxuICAgICAgICAgICAgICAgICAgICAuY2hpbGQoJ2NvbnRlc3RzJylcbiAgICAgICAgICAgICAgICAgICAgLmNoaWxkKGlucHV0RXZlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5jaGlsZCgnc2NvcmVzJylcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUobGVhZGVyYm9hcmREYXRhKTtcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFBsYXllclNjb3JlcyhpbnB1dEV2ZW50LCBpbnB1dEdhbWVzTGlzdCwgaW5wdXRQbGF5ZXIpIHtcblxuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICAgICAgdmFyIGRpc3BsYXlTY29yZXMgPSBbXTtcblxuICAgICAgICAgICAgLy8gSXRlcmF0ZSB0aHJvdWdoIGV2ZXJ5IGdhbWUuXG4gICAgICAgICAgICBpbnB1dEdhbWVzTGlzdC5mb3JFYWNoKGZ1bmN0aW9uKGdhbWUpIHtcblxuICAgICAgICAgICAgICAgIGlmIChnYW1lLnNjb3Jlcykge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgdGhlIGdhbWUncyBzY29yZXMgdG8gYW4gYXJyYXkuXG4gICAgICAgICAgICAgICAgICAgIHZhciBzY29yZXNBcnJheSA9ICQubWFwKGdhbWUuc2NvcmVzLCBmdW5jdGlvbihlbCkgeyByZXR1cm4gZWw7IH0pO1xuICAgICAgICAgICAgICAgICAgICBzY29yZXNBcnJheSA9ICRmaWx0ZXIoJ29yZGVyQnknKShzY29yZXNBcnJheSwgJy1zY29yZScpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciB0b3RhbEF3YXJkID0gMTI7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gSXRlcmF0ZSB0aHJvdWdoIHRoZSBzY29yZXMgc3RhcnRpbmcgZnJvbSB0aGUgdG9wIGFuZCBmaW5kIG91ciB1c2VyLlxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNjb3Jlc0FycmF5Lmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIG91ciBwbGF5ZXIuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2NvcmVzQXJyYXlbaV0udXNlck5hbWUgPT09IGlucHV0UGxheWVyKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3U2NvcmVPYmplY3QgPSBnYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Njb3JlT2JqZWN0LnBvc2l0aW9uID0gaSsxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Njb3JlT2JqZWN0LnNjb3JlID0gc2NvcmVzQXJyYXlbaV0uc2NvcmU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2NvcmVPYmplY3QucG9pbnRzRWFybmVkID0gdG90YWxBd2FyZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTY29yZU9iamVjdC5pbnBVcmwgPSBzY29yZXNBcnJheVtpXS5pbnBVcmwgPyBzY29yZXNBcnJheVtpXS5pbnBVcmwgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Njb3JlT2JqZWN0LnR3aXRjaFVybCA9IHNjb3Jlc0FycmF5W2ldLnR3aXRjaFVybCA/IHNjb3Jlc0FycmF5W2ldLnR3aXRjaFVybCA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2NvcmVPYmplY3QubWFtZVZlcnNpb24gPSBzY29yZXNBcnJheVtpXS5tYW1lVmVyc2lvbiA/IHNjb3Jlc0FycmF5W2ldLm1hbWVWZXJzaW9uIDogbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlTY29yZXMucHVzaChuZXdTY29yZU9iamVjdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxBd2FyZCA9IDEyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b3RhbEF3YXJkID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbEF3YXJkIC09IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZGlzcGxheVNjb3Jlcyk7XG5cbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgICAgIH1cblxuICAgIH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0V2ZW50R2FtZUNvbnRyb2xsZXInLCBFdmVudEdhbWVDb250cm9sbGVyKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIEV2ZW50R2FtZUNvbnRyb2xsZXIoJHNjb3BlLCAkZmlsdGVyLCAkc3RhdGVQYXJhbXMsICR0aW1lb3V0LCAkZmlyZWJhc2VBcnJheSwgZXZlbnRTZXJ2aWNlLCBhdXRoU2VydmljZSwgRklSRUJBU0VEQVRBKSB7XG5cbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIFx0YW5ndWxhci5lbGVtZW50KCcjY29udGVudFZpZXcnKVxuICAgICAgICBcdCAgICAuY3NzKCdvcGFjaXR5JywgJzEnKVxuICAgICAgICBcdCAgICAuY3NzKCdwb3NpdGlvbicsICdpbmhlcml0Jyk7XG4gICAgICAgIH0sIDQxMCk7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICB2bS5ldmVudE5hbWUgPSAkc3RhdGVQYXJhbXMuZXZlbnROYW1lO1xuICAgICAgICB2bS5nYW1lTmFtZSA9ICRzdGF0ZVBhcmFtcy5nYW1lTmFtZTtcblxuICAgICAgICB2bS5pbml0R2FtZVBhZ2UgPSBpbml0R2FtZVBhZ2U7XG5cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgIGZ1bmN0aW9uIGluaXRHYW1lUGFnZSgpIHtcblxuICAgICAgICAgICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuXG4gICAgICAgICAgICB2bS5ldmVudFByb3BlcnRpZXMgPSBldmVudFNlcnZpY2UuZ2V0RXZlbnRQcm9wZXJ0aWVzKHZtLmV2ZW50TmFtZSk7XG5cbiAgICAgICAgICAgIGV2ZW50U2VydmljZS5nZXRHYW1lRGF0YSh2bS5ldmVudE5hbWUsIHZtLmdhbWVOYW1lKS50aGVuKGZ1bmN0aW9uKHByb21pc2VSZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICAgICAgdm0uZ2FtZURhdGEgPSBwcm9taXNlUmVzb2x1dGlvbjtcblxuICAgICAgICAgICAgICAgIHZtLmdhbWVTY29yZXMgPSAkZmlyZWJhc2VBcnJheShcbiAgICAgICAgICAgICAgICAgICAgcmVmXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGQoJ2NvbnRlc3RzJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZCh2bS5ldmVudE5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGQoJ2FjdGl2ZUdhbWVzJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZCh2bS5nYW1lRGF0YS4kaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGQoJ3Njb3JlcycpXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgfVxuXG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdFdmVudE1haW5Db250cm9sbGVyJywgRXZlbnRNYWluQ29udHJvbGxlcik7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBFdmVudE1haW5Db250cm9sbGVyKCRzY29wZSwgJGZpbHRlciwgJHN0YXRlUGFyYW1zLCAkc3RhdGUsICR0aW1lb3V0LCAkZmlyZWJhc2VBcnJheSwgZXZlbnRTZXJ2aWNlLCBhdXRoU2VydmljZSwgcHJvZmlsZVNlcnZpY2UsIHRlYW1TZXJ2aWNlLCBGSVJFQkFTRURBVEEpIHtcblxuICAgICAgICAvLyBFbmFibGUgTWF0ZXJpYWxpemUuY3NzIGNvbGxhcHNpYmxlcy5cbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCcuY29sbGFwc2libGUnKS5jb2xsYXBzaWJsZSh7XG4gICAgICAgICAgICAgICAgYWNjb3JkaW9uOiB0cnVlXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJCgndWwudGFicycpLnRhYnMoKTtcbiAgICAgICAgfSwgMTAwMCk7XG5cbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCcuY29sbGFwc2libGUnKS5jb2xsYXBzaWJsZSh7XG4gICAgICAgICAgICAgICAgYWNjb3JkaW9uOiB0cnVlXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJCgndWwudGFicycpLnRhYnMoKTtcbiAgICAgICAgfSwgMzAwMCk7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICB2bS5ldmVudE5hbWUgPSAkc3RhdGVQYXJhbXMuZXZlbnROYW1lO1xuXG4gICAgICAgIHZtLmNsb3NlR2FtZU1vZGFsID0gY2xvc2VHYW1lTW9kYWw7XG4gICAgICAgIHZtLmNsb3NlTXVsdGlHYW1lTGVhZGVyYm9hcmRNb2RhbCA9IGNsb3NlTXVsdGlHYW1lTGVhZGVyYm9hcmRNb2RhbDtcbiAgICAgICAgdm0uY2xvc2VQbGF5ZXJNb2RhbCA9IGNsb3NlUGxheWVyTW9kYWw7XG4gICAgICAgIHZtLmNyZWF0ZVRlYW0gPSBjcmVhdGVUZWFtO1xuICAgICAgICB2bS5kZXRlcm1pbmVQb2ludHMgPSBkZXRlcm1pbmVQb2ludHM7XG4gICAgICAgIHZtLmdldEZpcnN0UGxhY2VTY29yZXMgPSBnZXRGaXJzdFBsYWNlU2NvcmVzO1xuICAgICAgICB2bS5nb1RvUGxheWVyUHJvZmlsZSA9IGdvVG9QbGF5ZXJQcm9maWxlO1xuICAgICAgICB2bS5pbml0RXZlbnQgPSBpbml0RXZlbnQ7XG4gICAgICAgIHZtLm9wZW5CYWRnZXNNb2RhbCA9IG9wZW5CYWRnZXNNb2RhbDtcbiAgICAgICAgdm0ub3BlbkdhbWVNb2RhbCA9IG9wZW5HYW1lTW9kYWw7XG4gICAgICAgIHZtLm9wZW5HYW1lTW9kYWxGcm9tUGxheWVyTW9kYWwgPSBvcGVuR2FtZU1vZGFsRnJvbVBsYXllck1vZGFsO1xuICAgICAgICB2bS5vcGVuTWFuYWdlbWVudE1vZGFsID0gb3Blbk1hbmFnZW1lbnRNb2RhbDtcbiAgICAgICAgdm0ub3Blbk11bHRpR2FtZUxlYWRlcmJvYXJkTW9kYWwgPSBvcGVuTXVsdGlHYW1lTGVhZGVyYm9hcmRNb2RhbDtcbiAgICAgICAgdm0ub3BlblBsYXllck1vZGFsID0gb3BlblBsYXllck1vZGFsO1xuICAgICAgICB2bS5vcGVuUGxheWVyTW9kYWxGcm9tR2FtZU1vZGFsID0gb3BlblBsYXllck1vZGFsRnJvbUdhbWVNb2RhbDtcbiAgICAgICAgdm0ub3BlblBsYXllck1vZGFsRnJvbUxlYWRlcmJvYXJkTW9kYWwgPSBvcGVuUGxheWVyTW9kYWxGcm9tTGVhZGVyYm9hcmRNb2RhbDtcbiAgICAgICAgdm0ub3BlblJ1bGVzTW9kYWwgPSBvcGVuUnVsZXNNb2RhbDtcblxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICBmdW5jdGlvbiBjbG9zZUdhbWVNb2RhbCgpIHtcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2dhbWVNb2RhbCcpLmNsb3NlTW9kYWwoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNsb3NlTXVsdGlHYW1lTGVhZGVyYm9hcmRNb2RhbCgpIHtcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI211bHRpR2FtZUxlYWRlcmJvYXJkTW9kYWwnKS5jbG9zZU1vZGFsKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjbG9zZVBsYXllck1vZGFsKCkge1xuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjcGxheWVyTW9kYWwnKS5jbG9zZU1vZGFsKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVUZWFtKCkge1xuICAgICAgICAgICAgdGVhbVNlcnZpY2UuY3JlYXRlVGVhbSh2bS5ldmVudE5hbWUsIHZtLm5ld1RlYW0pLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgTWF0ZXJpYWxpemUudG9hc3QoJ1RlYW0gJyArIHZtLm5ld1RlYW0uc2hvcnROYW1lICsgJyBjcmVhdGVkLicsIDQwMDApO1xuICAgICAgICAgICAgICAgIHZtLm5ld1RlYW0gPSBudWxsO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkZXRlcm1pbmVQb2ludHMoaW5wdXRTY29yZURhdGEsIGlucHV0SW5kZXgpIHtcblxuICAgICAgICAgICAgdmFyIHVzZXJHYW1lUG9pbnRzO1xuXG4gICAgICAgICAgICAvLyBObyBwb3NpdGlvbiBncmVhdGVyIHRoYW4gMTIgZ2V0cyBwb2ludHMuXG4gICAgICAgICAgICBpZiAoaW5wdXRJbmRleCA+IDExKSB7XG4gICAgICAgICAgICAgICAgdXNlckdhbWVQb2ludHMgPSAwO1xuICAgICAgICAgICAgICAgIHJldHVybiB1c2VyR2FtZVBvaW50cztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdXNlckdhbWVQb2ludHMgPSAxMiAtIGlucHV0SW5kZXg7XG5cbiAgICAgICAgICAgIHZhciBzb3J0ZWRTY29yZXMgPSAkZmlsdGVyKCdvcmRlckJ5Jykodm0uZ2FtZVNjb3JlcywgJy1zY29yZScpO1xuXG4gICAgICAgICAgICAvLyBBbSBJIHRpZWQgd2l0aCB0aGUgcGVyc29uIGFib3ZlIG1lPyBJZiBzbywgbWF0Y2ggdGhlaXIgcG9pbnRzLlxuICAgICAgICAgICAgaWYgKHNvcnRlZFNjb3Jlc1tpbnB1dEluZGV4IC0gMV0pIHtcblxuICAgICAgICAgICAgICAgIGlmIChzb3J0ZWRTY29yZXNbaW5wdXRJbmRleCAtIDFdLnNjb3JlID09PSBpbnB1dFNjb3JlRGF0YS5zY29yZSkge1xuICAgICAgICAgICAgICAgICAgICB1c2VyR2FtZVBvaW50cyArPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHVzZXJHYW1lUG9pbnRzO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0Rmlyc3RQbGFjZVNjb3JlcygpIHtcblxuICAgICAgICAgICAgdm0uZ2FtZUxpc3QuZm9yRWFjaChmdW5jdGlvbihnYW1lKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSBhcmUgc2NvcmVzLCBnZXQgdGhlIHRvcCBvbmUuXG4gICAgICAgICAgICAgICAgaWYgKGdhbWUuc2NvcmVzKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjb3Jlc0FycmF5ID0gJC5tYXAoZ2FtZS5zY29yZXMsIGZ1bmN0aW9uKGVsKSB7IHJldHVybiBlbDsgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNjb3Jlc0FycmF5ID0gJGZpbHRlcignb3JkZXJCeScpKHNjb3Jlc0FycmF5LCAnLXNjb3JlJyk7XG4gICAgICAgICAgICAgICAgICAgIGdhbWUuZmlyc3RTY29yZSA9IHNjb3Jlc0FycmF5WzBdO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ29Ub1BsYXllclByb2ZpbGUoaW5wdXRQbGF5ZXIpIHtcblxuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjcGxheWVyTW9kYWwnKS5jbG9zZU1vZGFsKCk7XG4gICAgICAgICAgICAkc3RhdGUuZ28oJ3Byb2ZpbGUnLCB7dXNlcm5hbWU6IGlucHV0UGxheWVyfSk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGluaXRFdmVudCgpIHtcblxuICAgICAgICAgICAgZXZlbnRTZXJ2aWNlLmdldEV2ZW50UHJvcGVydGllcyh2bS5ldmVudE5hbWUpLnRoZW4oZnVuY3Rpb24ocHJvbWlzZVJlc29sdXRpb24pIHtcblxuICAgICAgICAgICAgICAgIHZtLmV2ZW50UHJvcGVydGllcyA9IHByb21pc2VSZXNvbHV0aW9uO1xuXG4gICAgICAgICAgICAgICAgdm0uZXZlbnRQcm9wZXJ0aWVzLiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgaXMgYSBtdWx0aWdhbWUgZXZlbnQsIGdldCB0aGUgZGF0YSBuZWVkZWQgZm9yIG11bHRpZ2FtZSBjb21wb25lbnRzLlxuICAgICAgICAgICAgICAgICAgICBpZiAodm0uZXZlbnRQcm9wZXJ0aWVzLmZvcm1hdC5tdWx0aUdhbWUpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRTZXJ2aWNlLmdldEdhbWVzTGlzdCh2bS5ldmVudE5hbWUpLnRoZW4oZnVuY3Rpb24ocHJvbWlzZVJlc29sdXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5nYW1lTGlzdCA9IHByb21pc2VSZXNvbHV0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldEZpcnN0UGxhY2VTY29yZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudFNlcnZpY2UuZ2V0TXVsdGlHYW1lTGVhZGVyYm9hcmQodm0uZXZlbnROYW1lKS50aGVuKGZ1bmN0aW9uKHByb21pc2VSZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxlYWRlcmJvYXJkID0gcHJvbWlzZVJlc29sdXRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0ubGVhZGVyYm9hcmRMZW5ndGggPSBsZWFkZXJib2FyZC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uc3VtbWFyaXplZExlYWRlcmJvYXJkID0gbGVhZGVyYm9hcmQuc2xpY2UoMCwgOCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIGlzIGEgc2luZ2xlIGdhbWUgZXZlbnQsIGdldCB0aGUgZGF0YSBuZWVkZWQgZm9yIHNpbmdsZSBnYW1lIGNvbXBvbmVudHMuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50U2VydmljZS5nZXRTaW5nbGVHYW1lTGVhZGVyYm9hcmQodm0uZXZlbnROYW1lKS50aGVuKGZ1bmN0aW9uKHByb21pc2VSZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxlYWRlcmJvYXJkID0gcHJvbWlzZVJlc29sdXRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0ubGVhZGVyYm9hcmRMZW5ndGggPSBsZWFkZXJib2FyZC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uc3VtbWFyaXplZExlYWRlcmJvYXJkID0gbGVhZGVyYm9hcmQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhpcyBpcyBhIHRlYW0tYmFzZWQgZXZlbnQsIGdldCB0aGUgZGF0YSBuZWVkZWQgZm9yIHRlYW0gZXZlbnQgY29tcG9uZW50cy5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHZtLmV2ZW50UHJvcGVydGllcy5mb3JtYXQudGVhbUJhc2VkKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRlYW1TZXJ2aWNlLmdldFRlYW1MaXN0KHZtLmV2ZW50TmFtZSkudGhlbihmdW5jdGlvbiB0aGVuKG1vZGVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0udGVhbUxpc3QgPSBtb2RlbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcHJvZmlsZVNlcnZpY2UuZ2V0QXZhdGFyRGF0YSgpLnRoZW4oZnVuY3Rpb24ocHJvbWlzZVJlc29sdXRpb24pIHtcbiAgICAgICAgICAgICAgICB2bS5hdmF0YXJEYXRhID0gcHJvbWlzZVJlc29sdXRpb247XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gb3BlbkJhZGdlc01vZGFsKCkge1xuXG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNiYWRnZXNNb2RhbCcpLm9wZW5Nb2RhbCgpO1xuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjYmFkZ2VzTW9kYWxDb250ZW50Jykuc2Nyb2xsVG9wKDApO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvcGVuR2FtZU1vZGFsKGlucHV0R2FtZU5hbWUpIHtcblxuICAgICAgICAgICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuXG4gICAgICAgICAgICBldmVudFNlcnZpY2UuZ2V0R2FtZURhdGEodm0uZXZlbnROYW1lLCBpbnB1dEdhbWVOYW1lKS50aGVuKGZ1bmN0aW9uKHByb21pc2VSZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICAgICAgdm0uZ2FtZURhdGEgPSBwcm9taXNlUmVzb2x1dGlvbjtcblxuICAgICAgICAgICAgICAgIHZtLmdhbWVTY29yZXMgPSAkZmlyZWJhc2VBcnJheShcbiAgICAgICAgICAgICAgICAgICAgcmVmXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGQoJ2NvbnRlc3RzJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZCh2bS5ldmVudE5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGQoJ2FjdGl2ZUdhbWVzJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZCh2bS5nYW1lRGF0YS4kaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGQoJ3Njb3JlcycpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNnYW1lTW9kYWwnKS5vcGVuTW9kYWwoKTtcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2dhbWVNb2RhbENvbnRlbnQnKS5zY3JvbGxUb3AoMCk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9wZW5NYW5hZ2VtZW50TW9kYWwoKSB7XG5cbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI21hbmFnZW1lbnRNb2RhbCcpLm9wZW5Nb2RhbCgpO1xuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjbWFuYWdlbWVudE1vZGFsQ29udGVudCcpLnNjcm9sbFRvcCgwKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gb3Blbk11bHRpR2FtZUxlYWRlcmJvYXJkTW9kYWwoKSB7XG5cbiAgICAgICAgICAgIGV2ZW50U2VydmljZS5nZXRNdWx0aUdhbWVMZWFkZXJib2FyZCh2bS5ldmVudE5hbWUpLnRoZW4oZnVuY3Rpb24ocHJvbWlzZVJlc29sdXRpb24pIHtcbiAgICAgICAgICAgICAgICB2bS5jb21wbGV0ZUxlYWRlcmJvYXJkID0gcHJvbWlzZVJlc29sdXRpb247XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjbXVsdGlHYW1lTGVhZGVyYm9hcmRNb2RhbCcpLm9wZW5Nb2RhbCgpO1xuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjbXVsdGlHYW1lTGVhZGVyYm9hcmRNb2RhbENvbnRlbnQnKS5zY3JvbGxUb3AoMCk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9wZW5QbGF5ZXJNb2RhbChpbnB1dFBsYXllcikge1xuXG4gICAgICAgICAgICB2bS5mb2N1c1BsYXllciA9IGlucHV0UGxheWVyO1xuXG4gICAgICAgICAgICBldmVudFNlcnZpY2UuZ2V0UGxheWVyU2NvcmVzKHZtLmV2ZW50TmFtZSwgdm0uZ2FtZUxpc3QsIHZtLmZvY3VzUGxheWVyKS50aGVuKGZ1bmN0aW9uKHByb21pc2VSZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICAgICAgdm0ucGxheWVyU2NvcmVzID0gcHJvbWlzZVJlc29sdXRpb247XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjcGxheWVyTW9kYWwnKS5vcGVuTW9kYWwoKTtcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI3BsYXllck1vZGFsQ29udGVudCcpLnNjcm9sbFRvcCgwKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gb3BlbkdhbWVNb2RhbEZyb21QbGF5ZXJNb2RhbChpbnB1dEdhbWUpIHtcblxuICAgICAgICAgICAgY2xvc2VQbGF5ZXJNb2RhbCgpO1xuXG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBvcGVuR2FtZU1vZGFsKGlucHV0R2FtZSk7XG4gICAgICAgICAgICB9LCA0NTApO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvcGVuUGxheWVyTW9kYWxGcm9tR2FtZU1vZGFsKGlucHV0UGxheWVyKSB7XG5cbiAgICAgICAgICAgIGNsb3NlR2FtZU1vZGFsKCk7XG5cbiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIG9wZW5QbGF5ZXJNb2RhbChpbnB1dFBsYXllcik7XG4gICAgICAgICAgICB9LCA0NTApO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvcGVuUGxheWVyTW9kYWxGcm9tTGVhZGVyYm9hcmRNb2RhbChpbnB1dFBsYXllcikge1xuXG4gICAgICAgICAgICBjbG9zZU11bHRpR2FtZUxlYWRlcmJvYXJkTW9kYWwoKTtcblxuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgb3BlblBsYXllck1vZGFsKGlucHV0UGxheWVyKTtcbiAgICAgICAgICAgIH0sIDQ1MCk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9wZW5SdWxlc01vZGFsKCkge1xuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjcnVsZXNNb2RhbCcpLm9wZW5Nb2RhbCgpO1xuICAgICAgICB9XG5cbiAgICB9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJylcbiAgICAgICAgLnNlcnZpY2UoJ3RlYW1TZXJ2aWNlJywgdGVhbVNlcnZpY2UpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gdGVhbVNlcnZpY2UoJHEsICRmaXJlYmFzZUFycmF5LCAkZmlyZWJhc2VPYmplY3QsIEZJUkVCQVNFREFUQSkge1xuXG4gICAgXHR0aGlzLmNyZWF0ZVRlYW0gPSBjcmVhdGVUZWFtO1xuICAgICAgICB0aGlzLmdldFRlYW1MaXN0ID0gZ2V0VGVhbUxpc3Q7XG5cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVRlYW0oaW5wdXRFdmVudCwgaW5wdXROZXdUZWFtUHJvcGVydGllcykge1xuXG4gICAgICAgIFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICBcdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRklSRUJBU0VEQVRBLkZCVVJMKTtcbiAgICAgICAgXHR2YXIgdGVhbVBvb2wgPSAkZmlyZWJhc2VPYmplY3QoXG4gICAgICAgIFx0XHRyZWZcbiAgICAgICAgXHRcdFx0LmNoaWxkKCdjb250ZXN0cycpXG4gICAgICAgIFx0XHRcdC5jaGlsZChpbnB1dEV2ZW50KVxuICAgICAgICBcdFx0XHQuY2hpbGQoJ3RlYW1Qb29sJylcbiAgICAgICAgXHQpO1xuXG4gICAgICAgIFx0dGVhbVBvb2wuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgXHRcdHRlYW1Qb29sW2lucHV0TmV3VGVhbVByb3BlcnRpZXMuc2hvcnROYW1lXSA9IHtcbiAgICAgICAgXHRcdFx0ZnVsbE5hbWU6IGlucHV0TmV3VGVhbVByb3BlcnRpZXMuZm9ybWFsTmFtZVxuICAgICAgICBcdFx0fTtcbiAgICAgICAgXHRcdHRlYW1Qb29sLiRzYXZlKCk7XG4gICAgICAgIFx0XHRkZWZlcnJlZC5yZXNvbHZlKCk7XG5cbiAgICAgICAgXHR9KTtcblxuICAgICAgICBcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRUZWFtTGlzdChpbnB1dEV2ZW50KSB7XG5cbiAgICAgICAgXHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgIFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuICAgICAgICBcdHZhciB0ZWFtTGlzdCA9ICRmaXJlYmFzZUFycmF5KFxuICAgICAgICBcdFx0cmVmXG4gICAgICAgIFx0XHRcdC5jaGlsZCgnY29udGVzdHMnKVxuICAgICAgICBcdFx0XHQuY2hpbGQoaW5wdXRFdmVudClcbiAgICAgICAgXHRcdFx0LmNoaWxkKCd0ZWFtUG9vbCcpXG4gICAgICAgIFx0KTtcblxuICAgICAgICBcdHRlYW1MaXN0LiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICBcdFx0ZGVmZXJyZWQucmVzb2x2ZSh0ZWFtTGlzdCk7XG4gICAgICAgIFx0fSk7XG5cbiAgICAgICAgXHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblxuICAgICAgICB9XG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuZGlyZWN0aXZlKCd2Z0dhbWVzTGlzdCcsIHZnR2FtZXNMaXN0KTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIHZnR2FtZXNMaXN0ICgpIHtcbiAgICAgICAgLy8gVXNhZ2U6XG4gICAgICAgIC8vXG4gICAgICAgIC8vIENyZWF0ZXM6XG4gICAgICAgIC8vXG4gICAgICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICAgICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgICAgICAgY29udHJvbGxlcjogR2FtZXNMaXN0Q29udHJvbGxlcixcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIGxpbms6IGxpbmssXG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcuL2FwcC9ldmVudENvbXBvbmVudHMvZ2FtZXNMaXN0LmRpcmVjdGl2ZS5odG0nLFxuICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIFx0ZGF0YTogJz0nLFxuICAgICAgICAgICAgXHRvcGVuR2FtZUZ1bmN0aW9uOiAnPSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgICAgICBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gR2FtZXNMaXN0Q29udHJvbGxlcigpIHtcbiAgICBcdHZhciB2bSA9IHRoaXM7XG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuZGlyZWN0aXZlKCd2Z011bHRpR2FtZUxlYWRlcmJvYXJkJywgdmdNdWx0aUdhbWVMZWFkZXJib2FyZCk7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiB2Z011bHRpR2FtZUxlYWRlcmJvYXJkICgpIHtcbiAgICAgICAgLy8gVXNhZ2U6XG4gICAgICAgIC8vXG4gICAgICAgIC8vIENyZWF0ZXM6XG4gICAgICAgIC8vXG4gICAgICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICAgICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgICAgICAgY29udHJvbGxlcjogTXVsdGlHYW1lTGVhZGVyYm9hcmRDb250cm9sbGVyLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgbGluazogbGluayxcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy4vYXBwL2V2ZW50Q29tcG9uZW50cy9tdWx0aUdhbWVMZWFkZXJib2FyZC5kaXJlY3RpdmUuaHRtJyxcbiAgICAgICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICBcdGRhdGE6ICc9JyxcbiAgICAgICAgICAgICAgICBhdmF0YXJEYXRhOiAnPScsXG4gICAgICAgICAgICBcdGNvbXBsZXRlTGVuZ3RoOiAnPScsXG4gICAgICAgICAgICBcdG9wZW5QbGF5ZXJGdW5jdGlvbjogJz0nLFxuICAgICAgICAgICAgICAgIG9wZW5MZWFkZXJib2FyZEZ1bmN0aW9uOiAnPSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgICAgICBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gTXVsdGlHYW1lTGVhZGVyYm9hcmRDb250cm9sbGVyKCkge1xuICAgIFx0dmFyIHZtID0gdGhpcztcbiAgICB9XG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ3ZnU2luZ2xlR2FtZUxlYWRlcmJvYXJkJywgdmdTaW5nbGVHYW1lTGVhZGVyYm9hcmQpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gdmdTaW5nbGVHYW1lTGVhZGVyYm9hcmQgKCkge1xuICAgICAgICAvLyBVc2FnZTpcbiAgICAgICAgLy9cbiAgICAgICAgLy8gQ3JlYXRlczpcbiAgICAgICAgLy9cbiAgICAgICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBTaW5nbGVHYW1lTGVhZGVyYm9hcmRDb250cm9sbGVyLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgbGluazogbGluayxcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy4vYXBwL2V2ZW50Q29tcG9uZW50cy9zaW5nbGVHYW1lTGVhZGVyYm9hcmQuZGlyZWN0aXZlLmh0bScsXG4gICAgICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgXHRkYXRhOiAnPScsXG4gICAgICAgICAgICAgICAgYXZhdGFyRGF0YTogJz0nLFxuICAgICAgICAgICAgXHRjb21wbGV0ZUxlbmd0aDogJz0nLFxuICAgICAgICAgICAgICAgIG9wZW5MZWFkZXJib2FyZEZ1bmN0aW9uOiAnPSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgICAgICBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gU2luZ2xlR2FtZUxlYWRlcmJvYXJkQ29udHJvbGxlcigpIHtcbiAgICBcdHZhciB2bSA9IHRoaXM7XG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuZGlyZWN0aXZlKCd2Z1N0aWNreU1lc3NhZ2UnLCB2Z1N0aWNreU1lc3NhZ2UpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gdmdTdGlja3lNZXNzYWdlICgpIHtcbiAgICAgICAgLy8gVXNhZ2U6XG4gICAgICAgIC8vXG4gICAgICAgIC8vIENyZWF0ZXM6XG4gICAgICAgIC8vXG4gICAgICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICAgICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgICAgICAgY29udHJvbGxlcjogU3RpY2t5TWVzc2FnZUNvbnRyb2xsZXIsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICBsaW5rOiBsaW5rLFxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnLi9hcHAvZXZlbnRDb21wb25lbnRzL3N0aWNreU1lc3NhZ2UuZGlyZWN0aXZlLmh0bScsXG4gICAgICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgXHRwcm9wZXJ0aWVzOiAnPSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgICAgICBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gU3RpY2t5TWVzc2FnZUNvbnRyb2xsZXIoJHRpbWVvdXQpIHtcbiAgICBcdHZhciB2bSA9IHRoaXM7XG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuY29udHJvbGxlcignSGVhZGVyQ29udHJvbGxlcicsIEhlYWRlckNvbnRyb2xsZXIpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gSGVhZGVyQ29udHJvbGxlcigkdGltZW91dCwgJHJvb3RTY29wZSwgJHdpbmRvdywgJHN0YXRlLCBhdXRoU2VydmljZSkge1xuXG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcuZHJvcGRvd24tYnV0dG9uJylcbiAgICAgICAgICAgICAgICAuZHJvcGRvd24oe1xuICAgICAgICAgICAgICAgICAgICBpbkR1cmF0aW9uOiAzMDAsXG4gICAgICAgICAgICAgICAgICAgIG91dER1cmF0aW9uOiAyMjUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0cmFpbl93aWR0aDogZmFsc2UsIC8vIERvZXMgbm90IGNoYW5nZSB3aWR0aCBvZiBkcm9wZG93biB0byB0aGF0IG9mIHRoZSBhY3RpdmF0b3JcbiAgICAgICAgICAgICAgICAgICAgaG92ZXI6IGZhbHNlLCAvLyBBY3RpdmF0ZSBvbiBob3ZlclxuICAgICAgICAgICAgICAgICAgICBndXR0ZXI6IC0xMTQsIC8vIFNwYWNpbmcgZnJvbSBlZGdlXG4gICAgICAgICAgICAgICAgICAgIGJlbG93T3JpZ2luOiB0cnVlIC8vIERpc3BsYXlzIGRyb3Bkb3duIGJlbG93IHRoZSBidXR0b25cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgNDAwKTtcblxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICB2bS5oZWFkZXJUeXBlID0gJHN0YXRlLmN1cnJlbnQudmlld3MuaGVhZGVyLmRhdGEuaGVhZGVyVHlwZTtcblxuICAgICAgICB2bS5sb2dPdXQgPSBsb2dPdXQ7XG5cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICBmdW5jdGlvbiBsb2dPdXQoKSB7XG4gICAgICAgICAgICBhdXRoU2VydmljZS5sb2dPdXQoKTtcbiAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgIH1cblxuICAgIH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJylcbiAgICAgICAgLmZpbHRlcignb3JkZXJPYmplY3RCeScsIG9yZGVyT2JqZWN0QnkpO1xuXG4gICAgZnVuY3Rpb24gb3JkZXJPYmplY3RCeSgpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGl0ZW1zLCBmaWVsZCwgcmV2ZXJzZSkge1xuICAgICAgICAgICAgdmFyIGZpbHRlcmVkID0gW107XG5cbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChpdGVtcywgZnVuY3Rpb24oaXRlbSwga2V5KSB7XG4gICAgICAgICAgICAgICAgaXRlbS5rZXkgPSBrZXk7XG4gICAgICAgICAgICAgICAgZmlsdGVyZWQucHVzaChpdGVtKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBmaWx0ZXJlZC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChhW2ZpZWxkXSA+IGJbZmllbGRdID8gMSA6IC0xKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZihyZXZlcnNlKSBmaWx0ZXJlZC5yZXZlcnNlKCk7XG5cbiAgICAgICAgICAgIHJldHVybiBmaWx0ZXJlZDtcbiAgICAgICAgfTtcbiAgICB9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0F2YXRhckNvbnRyb2xsZXInLCBBdmF0YXJDb250cm9sbGVyKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIEF2YXRhckNvbnRyb2xsZXIoJHJvb3RTY29wZSwgJHN0YXRlLCAkc3RhdGVQYXJhbXMsICR0aW1lb3V0LCBVcGxvYWQsIGltZ3VyLCBwcm9maWxlU2VydmljZSkge1xuXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgdm0uaW5pdEF2YXRhciA9IGluaXRBdmF0YXI7XG4gICAgICAgIHZtLnVwbG9hZEF2YXRhciA9IHVwbG9hZEF2YXRhcjtcblxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgZnVuY3Rpb24gaW5pdEF2YXRhcigpIHtcbiAgICAgICAgXHRwcm9maWxlU2VydmljZS5nZXRBdmF0YXJEYXRhKCkudGhlbihmdW5jdGlvbiB0aGVuKG1vZGVsKSB7XG4gICAgICAgICAgICAgICAgdm0uYXZhdGFyRGF0YSA9IG1vZGVsO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHByb2ZpbGVTZXJ2aWNlLmdldEJhZGdlc0RhdGEoJHJvb3RTY29wZS5wcm9maWxlLnVzZXJOYW1lKS50aGVuKGZ1bmN0aW9uIHRoZW4obW9kZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0uYmFkZ2VzRGF0YSA9IG1vZGVsO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwbG9hZEF2YXRhcigpIHtcblxuICAgICAgICBcdHZtLmRpc2FibGVCdXR0b24gPSB0cnVlO1xuXG4gICAgICAgIFx0aW1ndXIuc2V0QVBJS2V5KCdDbGllbnQtSUQgZjUzZDZkNTgzM2IwN2JjJyk7XG4gICAgICAgIFx0aW1ndXIudXBsb2FkKHZtLmZpbGUpLnRoZW4oZnVuY3Rpb24gdGhlbihtb2RlbCkge1xuICAgICAgICBcdFx0cHJvZmlsZVNlcnZpY2Uuc2F2ZUF2YXRhckxpbmsobW9kZWxbMF0ubGluaywgJHJvb3RTY29wZS5wcm9maWxlLnVzZXJOYW1lKTtcbiAgICAgICAgXHRcdE1hdGVyaWFsaXplLnRvYXN0KCdZb3VyIGF2YXRhciB3YXMgdXBsb2FkZWQnLCA0MDAwKTtcblxuICAgICAgICBcdFx0JHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIFx0XHRcdCRzdGF0ZS5nbygnaW5kZXgnKTtcbiAgICAgICAgXHRcdH0sIDEwMDApO1xuICAgICAgICBcdH0pO1xuXG4gICAgICAgIH1cblxuICAgIH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0hvbWVDb250cm9sbGVyJywgSG9tZUNvbnRyb2xsZXIpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gSG9tZUNvbnRyb2xsZXIoJHNjb3BlLCAkdGltZW91dCkge1xuXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIFx0YW5ndWxhci5lbGVtZW50KCcjY29udGVudFZpZXcnKVxuICAgICAgICAgICAgICAgIC5jc3MoJ29wYWNpdHknLCAnMScpXG4gICAgICAgICAgICAgICAgLmNzcygncG9zaXRpb24nLCAnaW5oZXJpdCcpO1xuICAgICAgICB9LCAzMTApO1xuXG4gICAgfVxuXG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdMZWFkZXJib2FyZENvbnRyb2xsZXInLCBMZWFkZXJib2FyZENvbnRyb2xsZXIpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gTGVhZGVyYm9hcmRDb250cm9sbGVyKCRxLCAkdGltZW91dCwgJGZpcmViYXNlQXJyYXksIHByb2ZpbGVTZXJ2aWNlLCBGSVJFQkFTRURBVEEpIHtcblxuICAgIFx0dmFyIHZtID0gdGhpcztcblxuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgXHRhbmd1bGFyLmVsZW1lbnQoJyNjb250ZW50VmlldycpXG4gICAgICAgICAgICAgICAgLmNzcygnb3BhY2l0eScsICcxJylcbiAgICAgICAgICAgICAgICAuY3NzKCdwb3NpdGlvbicsICdpbmhlcml0Jyk7XG4gICAgICAgIH0sIDMxMCk7XG5cbiAgICAgICAgZ2V0UHJvZmlsZVNjb3JlcygpLnRoZW4oZnVuY3Rpb24gdGhlbihtb2RlbCkge1xuICAgICAgICBcdHZtLnByb2ZpbGVTY29yZURhdGEgPSBtb2RlbDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcHJvZmlsZVNlcnZpY2UuZ2V0QXZhdGFyRGF0YSgpLnRoZW4oZnVuY3Rpb24gdGhlbihtb2RlbCkge1xuICAgICAgICBcdHZtLmF2YXRhckRhdGEgPSBtb2RlbDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgIGZ1bmN0aW9uIGdldFByb2ZpbGVTY29yZXMoKSB7XG5cbiAgICAgICAgXHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICBcdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRklSRUJBU0VEQVRBLkZCVVJMKTtcblxuICAgICAgICBcdHZhciBwcm9maWxlU2NvcmVEYXRhID0gJGZpcmViYXNlQXJyYXkoXG4gICAgICAgIFx0XHRyZWZcbiAgICAgICAgXHRcdFx0LmNoaWxkKCdiYWRnZXMnKVxuICAgICAgICBcdCk7XG5cbiAgICAgICAgXHRwcm9maWxlU2NvcmVEYXRhLiRsb2FkZWQoZnVuY3Rpb24oKSB7XG4gICAgICAgIFx0XHRkZWZlcnJlZC5yZXNvbHZlKHByb2ZpbGVTY29yZURhdGEpO1xuICAgICAgICBcdH0pO1xuXG4gICAgICAgIFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgfVxuXG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuY29udHJvbGxlcignUGFzc3dvcmRDaGFuZ2VDb250cm9sbGVyJywgUGFzc3dvcmRDaGFuZ2VDb250cm9sbGVyKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIFBhc3N3b3JkQ2hhbmdlQ29udHJvbGxlcigkc2NvcGUsICR0aW1lb3V0LCAkc3RhdGUsIEF1dGhXcmFwcGVyKSB7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgXHRhbmd1bGFyLmVsZW1lbnQoJyNjb250ZW50VmlldycpXG4gICAgICAgICAgICAgICAgLmNzcygnb3BhY2l0eScsICcxJylcbiAgICAgICAgICAgICAgICAuY3NzKCdwb3NpdGlvbicsICdpbmhlcml0Jyk7XG4gICAgICAgIH0sIDMxMCk7XG5cbiAgICAgICAgdm0uc3VibWl0Q2hhbmdlUGFzc3dvcmQgPSBzdWJtaXRDaGFuZ2VQYXNzd29yZDtcblxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICBmdW5jdGlvbiBzdWJtaXRDaGFuZ2VQYXNzd29yZCgpIHtcblxuICAgICAgICAgICAgaWYgKCRzY29wZS5wd0NoYW5nZUZvcm0uJHZhbGlkKSB7XG5cbiAgICAgICAgICAgICAgICBBdXRoV3JhcHBlci4kY2hhbmdlUGFzc3dvcmQoe1xuICAgICAgICAgICAgICAgICAgICBlbWFpbDogQXV0aFdyYXBwZXIuJGdldEF1dGgoKS5wYXNzd29yZC5lbWFpbCxcbiAgICAgICAgICAgICAgICAgICAgb2xkUGFzc3dvcmQ6IHZtLmlucHV0Q3VycmVudFBhc3N3b3JkLFxuICAgICAgICAgICAgICAgICAgICBuZXdQYXNzd29yZDogdm0uaW5wdXROZXdQYXNzd29yZFxuICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgTWF0ZXJpYWxpemUudG9hc3QoJ1lvdXIgcGFzc3dvcmQgd2FzIGNoYW5nZWQuJywgNDAwMCk7XG4gICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdpbmRleCcpO1xuICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKTtcblxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IuY29kZSA9PT0gJ0lOVkFMSURfUEFTU1dPUkQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2bS5zaG93Q2hhbmdlUGFzc3dvcmRNZXNzYWdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9O1xuXG4gICAgfVxuXG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdQcm9maWxlQ29udHJvbGxlcicsIFByb2ZpbGVDb250cm9sbGVyKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIFByb2ZpbGVDb250cm9sbGVyKCRzY29wZSwgJHN0YXRlUGFyYW1zLCAkcSwgJHRpbWVvdXQsICRzdGF0ZSwgJGZpcmViYXNlQXJyYXksIGF1dGhTZXJ2aWNlLCBwcm9maWxlU2VydmljZSwgZXZlbnRTZXJ2aWNlKSB7XG5cbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIFx0YW5ndWxhci5lbGVtZW50KCcjY29udGVudFZpZXcnKVxuICAgICAgICBcdCAgICAuY3NzKCdvcGFjaXR5JywgJzEnKVxuICAgICAgICBcdCAgICAuY3NzKCdwb3NpdGlvbicsICdpbmhlcml0Jyk7XG5cbiAgICAgICAgICAgICQoJy5jb2xsYXBzaWJsZScpLmNvbGxhcHNpYmxlKHtcbiAgICAgICAgICAgICAgICBhY2NvcmRpb246IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCA0MTApO1xuXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgdm0uaW5pdFByb2ZpbGUgPSBpbml0UHJvZmlsZTtcblxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICBmdW5jdGlvbiBpbml0UHJvZmlsZSgpIHtcbiAgICAgICAgICAgIHByb2ZpbGVTZXJ2aWNlLmdldFVzZXJEYXRhKCRzdGF0ZVBhcmFtcy51c2VybmFtZSkudGhlbihmdW5jdGlvbihwcm9taXNlUmVzb2x1dGlvbikge1xuICAgICAgICAgICAgICAgIHZtLnByb2ZpbGVEYXRhID0gcHJvbWlzZVJlc29sdXRpb247XG5cbiAgICAgICAgICAgICAgICBwcm9maWxlU2VydmljZS5nZXRUb3VybmFtZW50SGlzdG9yeSh2bS5wcm9maWxlRGF0YSkudGhlbihmdW5jdGlvbihwcm9taXNlUmVzb2x1dGlvbikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG91cm5hbWVudEhpc3RvcnlEYXRhID0gcHJvbWlzZVJlc29sdXRpb247XG4gICAgICAgICAgICAgICAgICAgIHZtLmV2ZW50U3RhbmRpbmdzID0gcHJvZmlsZVNlcnZpY2UuZ2V0VG91cm5hbWVudFN0YW5kaW5ncyh0b3VybmFtZW50SGlzdG9yeURhdGEsICRzdGF0ZVBhcmFtcy51c2VybmFtZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcHJvZmlsZVNlcnZpY2UuZ2V0QXZhdGFyRGF0YSgpLnRoZW4oZnVuY3Rpb24ocHJvbWlzZVJlc29sdXRpb24pIHtcbiAgICAgICAgICAgICAgICB2bS5hdmF0YXJEYXRhID0gcHJvbWlzZVJlc29sdXRpb247XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcHJvZmlsZVNlcnZpY2UuZ2V0QmFkZ2VzRGF0YSgkc3RhdGVQYXJhbXMudXNlcm5hbWUpLnRoZW4oZnVuY3Rpb24gdGhlbihtb2RlbCkge1xuICAgICAgICAgICAgICAgIHZtLmJhZGdlc0RhdGEgPSBtb2RlbDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICB9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJylcbiAgICAgICAgLnNlcnZpY2UoJ3Byb2ZpbGVTZXJ2aWNlJywgcHJvZmlsZVNlcnZpY2UpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gcHJvZmlsZVNlcnZpY2UoJHJvb3RTY29wZSwgJHEsICRmaXJlYmFzZUFycmF5LCAkZmlyZWJhc2VPYmplY3QsIGV2ZW50U2VydmljZSwgRklSRUJBU0VEQVRBKSB7XG5cbiAgICBcdHRoaXMuZ2V0QXZhdGFyRGF0YSA9IGdldEF2YXRhckRhdGE7XG4gICAgICAgIHRoaXMuZ2V0QmFkZ2VzRGF0YSA9IGdldEJhZGdlc0RhdGE7XG4gICAgXHR0aGlzLmdldFRvdXJuYW1lbnRIaXN0b3J5ID0gZ2V0VG91cm5hbWVudEhpc3Rvcnk7XG4gICAgICAgIHRoaXMuZ2V0VG91cm5hbWVudFN0YW5kaW5ncyA9IGdldFRvdXJuYW1lbnRTdGFuZGluZ3M7XG4gICAgICAgIHRoaXMuZ2V0VXNlckRhdGEgPSBnZXRVc2VyRGF0YTtcbiAgICAgICAgdGhpcy5zYXZlQXZhdGFyTGluayA9IHNhdmVBdmF0YXJMaW5rO1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICBmdW5jdGlvbiBnZXRBdmF0YXJEYXRhKCkge1xuXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuXG4gICAgICAgICAgICB2YXIgYXZhdGFyRGF0YSA9ICRmaXJlYmFzZU9iamVjdChcbiAgICAgICAgICAgICAgICByZWZcbiAgICAgICAgICAgICAgICAgICAgLmNoaWxkKCdhdmF0YXJzJylcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF2YXRhckRhdGEuJGxvYWRlZChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGF2YXRhckRhdGEpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRCYWRnZXNEYXRhKGlucHV0VXNlcikge1xuXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuXG4gICAgICAgICAgICB2YXIgYmFkZ2VzRGF0YSA9ICRmaXJlYmFzZU9iamVjdChcbiAgICAgICAgICAgICAgICByZWZcbiAgICAgICAgICAgICAgICAgICAgLmNoaWxkKCdiYWRnZXMnKVxuICAgICAgICAgICAgICAgICAgICAuY2hpbGQoaW5wdXRVc2VyKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYmFkZ2VzRGF0YS4kbG9hZGVkKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoYmFkZ2VzRGF0YSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFRvdXJuYW1lbnRIaXN0b3J5KGlucHV0VXNlckRhdGEpIHtcblxuICAgICAgICBcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgIFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuXG4gICAgICAgIFx0Ly8gTG9vcCB0aHJvdWdoIGVhY2ggZXZlbnQgaW4gdGhlIHBsZWRnZWRUbyBvYmplY3QuXG4gICAgICAgIFx0dmFyIGV2ZW50c0FycmF5ID0gW107XG4gICAgICAgIFx0Zm9yICh2YXIga2V5IGluIGlucHV0VXNlckRhdGEucGxlZGdlZFRvKSB7XG4gICAgICAgIFx0XHRldmVudHNBcnJheS5wdXNoKGtleSk7XG4gICAgICAgIFx0fVxuXG4gICAgICAgIFx0ZGVmZXJyZWQucmVzb2x2ZShldmVudHNBcnJheSk7XG5cbiAgICAgICAgXHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0VG91cm5hbWVudFN0YW5kaW5ncyhpbnB1dFRvdXJuYW1lbnRIaXN0b3J5LCBpbnB1dFVzZXIpIHtcblxuICAgICAgICAgICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuXG4gICAgICAgICAgICAvLyBMb29wIHRocm91Z2ggZWFjaCBldmVudCBpbiB0aGUgdXNlcidzIGhpc3RvcnkuXG4gICAgICAgICAgICB2YXIgZXZlbnRTdGFuZGluZ3MgPSBbXTtcbiAgICAgICAgICAgIGlucHV0VG91cm5hbWVudEhpc3RvcnkuZm9yRWFjaChmdW5jdGlvbihldmVudCkge1xuXG4gICAgICAgICAgICAgICAgZXZlbnRTZXJ2aWNlLmdldEV2ZW50UHJvcGVydGllcyhldmVudCkudGhlbihmdW5jdGlvbihldmVudFByb3BlcnRpZXMpIHtcblxuICAgICAgICAgICAgICAgICAgICBldmVudFByb3BlcnRpZXMuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGNvbmNsdWRlZCwgZ2V0IHRoZSB1c2VyJ3Mgc3RhbmRpbmcuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnRQcm9wZXJ0aWVzLnN0YXRlID09PSAnY29uY2x1ZGVkJykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV2ZW50U3RhbmRpbmdEYXRhID0gJGZpcmViYXNlT2JqZWN0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZCgnc3RhbmRpbmdzJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZChldmVudClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRTdGFuZGluZ0RhdGEuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50U3RhbmRpbmdEYXRhW2lucHV0VXNlcl0pIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRTdGFuZGluZ3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZXZlbnRQcm9wZXJ0aWVzLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlbWllcjogZXZlbnRQcm9wZXJ0aWVzLnByZW1pZXIgPyB0cnVlIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG9ydE5hbWU6IGV2ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiAnY29uY2x1ZGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogZXZlbnRQcm9wZXJ0aWVzLmNvbG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBldmVudFN0YW5kaW5nRGF0YVtpbnB1dFVzZXJdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudFN0YW5kaW5ncy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBldmVudFByb3BlcnRpZXMubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVtaWVyOiBldmVudFByb3BlcnRpZXMucHJlbWllciA/IHRydWUgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0TmFtZTogZXZlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6ICdjb25jbHVkZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBldmVudFByb3BlcnRpZXMuY29sb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudFByb3BlcnRpZXMuc3RhdGUgPT09ICdpbnByb2dyZXNzJyB8fCBldmVudFByb3BlcnRpZXMuc3RhdGUgPT09ICd1cGNvbWluZycpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50U3RhbmRpbmdzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBldmVudFByb3BlcnRpZXMubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlbWllcjogZXZlbnRQcm9wZXJ0aWVzLnByZW1pZXIgPyB0cnVlIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnROYW1lOiBldmVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IGV2ZW50UHJvcGVydGllcy5jb2xvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6IGV2ZW50UHJvcGVydGllcy5zdGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBldmVudFN0YW5kaW5ncztcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0VXNlckRhdGEoaW5wdXRVc2VyKSB7XG5cbiAgICAgICAgXHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICBcdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRklSRUJBU0VEQVRBLkZCVVJMKTtcblxuICAgICAgICBcdHZhciB1c2Vyc0RhdGEgPSAkZmlyZWJhc2VBcnJheShcbiAgICAgICAgXHRcdHJlZlxuICAgICAgICBcdFx0XHQuY2hpbGQoJ3VzZXJzJylcbiAgICAgICAgXHQpO1xuXG4gICAgICAgIFx0dXNlcnNEYXRhLiRsb2FkZWQoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgXHRcdHVzZXJzRGF0YS5mb3JFYWNoKGZ1bmN0aW9uKHVzZXIpIHtcbiAgICAgICAgXHRcdFx0aWYgKHVzZXIudXNlck5hbWUgPT09IGlucHV0VXNlcikge1xuICAgICAgICBcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUodXNlcik7XG4gICAgICAgIFx0XHRcdH1cbiAgICAgICAgXHRcdH0pO1xuXG4gICAgICAgIFx0fSk7XG5cbiAgICAgICAgXHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblxuICAgICAgICB9XG5cbiAgICAgICAgLy8gRklYTUU6IE1ha2UgdGhpcyBzZXJ2ZXItc2lkZS5cbiAgICAgICAgZnVuY3Rpb24gc2F2ZUF2YXRhckxpbmsoaW5wdXRMaW5rLCBpbnB1dFVzZXIpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuXG4gICAgICAgICAgICB2YXIgYXZhdGFyRGF0YSA9ICRmaXJlYmFzZU9iamVjdChcbiAgICAgICAgICAgICAgICByZWZcbiAgICAgICAgICAgICAgICAgICAgLmNoaWxkKCdhdmF0YXJzJylcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF2YXRhckRhdGEuJGxvYWRlZChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBhdmF0YXJEYXRhW2lucHV0VXNlcl0gPSBpbnB1dExpbms7XG4gICAgICAgICAgICAgICAgYXZhdGFyRGF0YS4kc2F2ZSgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuY29udHJvbGxlcignUmVnQ29udHJvbGxlcicsIFJlZ0NvbnRyb2xsZXIpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gUmVnQ29udHJvbGxlcigkc2NvcGUsICRyb290U2NvcGUsICR0aW1lb3V0LCAkd2luZG93LCAkc3RhdGUsICRmaXJlYmFzZU9iamVjdCwgYXV0aFNlcnZpY2UsIEF1dGhXcmFwcGVyKSB7XG5cbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIFx0YW5ndWxhci5lbGVtZW50KCcjY29udGVudFZpZXcnKVxuICAgICAgICBcdCAgICAuY3NzKCdvcGFjaXR5JywgJzEnKVxuICAgICAgICBcdCAgICAuY3NzKCdwb3NpdGlvbicsICdpbmhlcml0Jyk7XG4gICAgICAgIH0sIDQxMCk7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICB2bS5sb2dpblRvQWNjb3VudCA9IGxvZ2luVG9BY2NvdW50O1xuICAgICAgICB2bS5wYXNzd29yZFJlc2V0ID0gcGFzc3dvcmRSZXNldDtcbiAgICAgICAgdm0uc3VibWl0TmV3QWNjb3VudCA9IHN1Ym1pdE5ld0FjY291bnQ7XG5cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgZnVuY3Rpb24gbG9naW5Ub0FjY291bnQoKSB7XG5cbiAgICAgICAgICAgIGF1dGhTZXJ2aWNlLmxvZ2luVG9BY2NvdW50KHZtLmxvZ2luRW1haWwsIHZtLmxvZ2luUGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24ocHJvbWlzZVJlc29sdXRpb24pIHtcblxuICAgICAgICAgICAgICAgIHZtLnNob3dJbnZhbGlkVXNlckVycm9yID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdm0uc2hvd0ludmFsaWRQYXNzd29yZEVycm9yID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBpZiAocHJvbWlzZVJlc29sdXRpb24gPT09ICdMT0dJTl9TVUNDRVNTJykge1xuXG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnaW5kZXgnKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvbWlzZVJlc29sdXRpb24gPT09ICdJTlZBTElEX1VTRVInKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLnNob3dJbnZhbGlkVXNlckVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvbWlzZVJlc29sdXRpb24gPT09ICdJTlZBTElEX1BBU1NXT1JEJykge1xuICAgICAgICAgICAgICAgICAgICB2bS5zaG93SW52YWxpZFBhc3N3b3JkRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHBhc3N3b3JkUmVzZXQoKSB7XG5cbiAgICAgICAgICAgIGlmICghdm0ubG9naW5FbWFpbCkge1xuICAgICAgICAgICAgICAgIHZtLnNob3dQYXNzd29yZFJlc2V0RW1haWxNZXNzYWdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIEF1dGhXcmFwcGVyLiRyZXNldFBhc3N3b3JkKHtcbiAgICAgICAgICAgICAgICBlbWFpbDogdm0ubG9naW5FbWFpbFxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2bS5zaG93UGFzc3dvcmRSZXNldEVtYWlsTWVzc2FnZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIE1hdGVyaWFsaXplLnRvYXN0KCdBIHBhc3N3b3JkIHJlc2V0IGVtYWlsIGhhcyBiZWVuIHNlbnQgdG8gJyArIHZtLmxvZ2luRW1haWwgKyAnLicsIDQwMDApO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHN1Ym1pdE5ld0FjY291bnQoKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIERvZXMgdGhlIHVzZXIgZXhpc3Q/IElmIHNvLCBzaG93IGFuIGVycm9yIG1lc3NhZ2UuXG4gICAgICAgICAgICBhdXRoU2VydmljZS5jaGVja0lmVXNlckV4aXN0cyh2bS5uZXdVc2VybmFtZSkudGhlbihmdW5jdGlvbih1c2VyRXhpc3RzKSB7XG5cbiAgICAgICAgICAgICAgICB2bS5zaG93RHVwbGljYXRlVXNlckVycm9yID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdm0uc2hvd0VtYWlsVGFrZW5FcnJvciA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgaWYgKHVzZXJFeGlzdHMpIHtcblxuICAgICAgICAgICAgICAgICAgICB2bS5zaG93RHVwbGljYXRlVXNlckVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgLy8gVHJ5IHRvIGNyZWF0ZSB0aGUgbmV3IHVzZXIuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBhdXRoU2VydmljZS5jcmVhdGVOZXdVc2VyKHZtLm5ld0VtYWlsLCB2bS5uZXdQYXNzd29yZCwgdm0ubmV3VXNlcm5hbWUpLnRoZW4oZnVuY3Rpb24ocHJvbWlzZVJlc29sdXRpb24pIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb21pc2VSZXNvbHV0aW9uID09PSAnRU1BSUxfVEFLRU4nKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5zaG93RW1haWxUYWtlbkVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvbWlzZVJlc29sdXRpb24gPT09ICdBQ0NPVU5UX0NSRUFURUQnKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ3Byb2ZpbGUnLCB7dXNlcm5hbWU6IHZtLm5ld1VzZXJuYW1lfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgfVxuXG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==