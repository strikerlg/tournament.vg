!function(){"use strict";angular.module("vg.app",["ngAnimate","ui.router","firebase","validation.match","ordinal","ngFileUpload","ngImgur"])}(),function(){"use strict";function e(e,t){t.otherwise("/"),e.state("home",{url:"/",templateUrl:"app/home/home.htm",controller:"HomeController as home"}).state("registerOrLogin",{url:"/registerOrLogin",templateUrl:"/app/home/reg.htm",controller:"RegController as reg"}).state("profile",{url:"/profile/:username",templateUrl:"/app/home/profile.htm",controller:"ProfileController as profile"}).state("leaderboard",{url:"/leaderboard",templateUrl:"/app/home/leaderboard.htm",controller:"LeaderboardController as leaderboard"}).state("event",{url:"/event/:eventName/main",templateUrl:"/app/event/main.htm",controller:"EventMainController as event"}).state("customizeAvatar",{url:"/customizeAvatar",templateUrl:"/app/home/avatar.htm",controller:"AvatarController as avatar",resolve:{currentAuth:["AuthWrapper",function(e){return e.$requireAuth()}]}}).state("changePassword",{url:"/changePassword",templateUrl:"/app/home/changePassword.htm",controller:"ChangePasswordController as pwchange",resolve:{currentAuth:["AuthWrapper",function(e){return e.$requireAuth()}]}})}angular.module("vg.app").constant("FIREBASEDATA",{FBURL:"https://wolfscontests.firebaseio.com"}).config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e,t,n,r,o,a){e.$on("$stateChangeError",function(e,t,r,o,a,i){"AUTH_REQUIRED"===i&&n.go("registerOrLogin")}),e.$on("$stateChangeSuccess",function(){if(o.$getAuth()){var t=o.$getAuth(),n=new Firebase(a.FBURL),i=r(n.child("users").child(t.uid));i.$bindTo(e,"profile").then(function(t){e.unbindFunction=t})}})}angular.module("vg.app").run(e),e.$inject=["$rootScope","$location","$state","$firebaseObject","AuthWrapper","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,n,r,o,a){function i(t){var n=e.defer(),r=!1,o=new Firebase(a.FBURL+"/users");return o.once("value",function(e){e.forEach(function(e){e.val().userName===t&&(r=!0)}),n.resolve(r)}),n.promise}function s(t,n,r){var i=e.defer();return o.$createUser({email:t,password:n}).then(function(e){new Firebase(a.FBURL).child("users/"+e.uid).set({userName:r,role:"User"},function(e){return console.error(e),e.code}),new Firebase(a.FBURL).child("avatars").child(r).set("http://api.adorable.io/avatars/42/"+r),o.$authWithPassword({email:t,password:n}).then(function(){i.resolve("ACCOUNT_CREATED")})})["catch"](function(e){console.error(e),"EMAIL_TAKEN"===e.code&&i.resolve(e.code)}),i.promise}function l(t,n){var r=e.defer();return o.$authWithPassword({email:t,password:n}).then(function(e){r.resolve("LOGIN_SUCCESS")})["catch"](function(e){"INVALID_USER"===e.code?r.resolve("INVALID_USER"):"INVALID_PASSWORD"===e.code&&r.resolve("INVALID_PASSWORD")}),r.promise}function c(){o.$unauth(),t.unbindFunction()}this.checkIfUserExists=i,this.createNewUser=s,this.loginToAccount=l,this.logOut=c}angular.module("vg.app").service("authService",e),e.$inject=["$q","$rootScope","$state","$firebaseObject","AuthWrapper","FIREBASEDATA"]}(),function(){"use strict";function e(e,t){var n=new Firebase(t.FBURL);return e(n)}angular.module("vg.app").factory("AuthWrapper",e),e.$inject=["$firebaseAuth","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,n,r,o){function a(e){c(e).then(function(t){var r=new Firebase(o.FBURL),a=n(r.child("standings").child(e));a.$loaded().then(function(){t.forEach(function(e){a[e.key]=e.position}),a.$save()})})}function i(t){var r=e.defer(),a=new Firebase(o.FBURL),i=n(a.child("contests").child(t).child("properties"));return r.resolve(i),r.promise}function s(t,n){{var r=e.defer();new Firebase(o.FBURL)}return l(t).then(function(e){e.forEach(function(e){e.camelName===n&&r.resolve(e)})}),r.promise}function l(t){var n=e.defer(),a=new Firebase(o.FBURL),i=r(a.child("contests").child(t).child("activeGames"));return i.$loaded().then(function(){n.resolve(i)}),n.promise}function c(n){var r=e.defer(),o={};return l(n).then(function(e){var n=e;n.forEach(function(e){if(e.scores){var n=$.map(e.scores,function(e){return e});n=t("orderBy")(n,"-score");for(var r=12,a=0;a<n.length;a++)o[n[a].userName]||(o[n[a].userName]={points:0}),o[n[a].userName].points+=r,r>0&&(r-=1)}}),o=t("orderObjectBy")(o,"points",!0);for(var a=!1,i=0,s=0;s<o.length;s++)if(o[s-1]&&o[s].points&&o[s-1].points)o[s].position=o[s].points===o[s-1].points?o[s-1].position:s+1;else if(0===s)o[s].position=1;else{if(!a){var l=o[s-1].points;o.forEach(function(e){e.points===l&&(i+=1)}),a=!0}o[s].position=o.length+1-i}r.resolve(o)}),r.promise}function u(t){var n=e.defer(),a=new Firebase(o.FBURL),i=r(a.child("contests").child(t).child("scores"));return n.resolve(i),n.promise}function d(n,r,o){var a=e.defer(),i=[];return r.forEach(function(e){if(e.scores){var n=$.map(e.scores,function(e){return e});n=t("orderBy")(n,"-score");for(var r=12,a=0;a<n.length;a++){if(n[a].userName===o){var s=e;s.position=a+1,s.score=n[a].score,s.pointsEarned=r,s.inpUrl=n[a].inpUrl?n[a].inpUrl:null,s.twitchUrl=n[a].twitchUrl?n[a].twitchUrl:null,s.mameVersion=n[a].mameVersion?n[a].mameVersion:null,i.push(s),r=12;break}r>0&&(r-=1)}}}),a.resolve(i),a.promise}this.createMultiGameFinalStandings=a,this.getEventProperties=i,this.getGameData=s,this.getGamesList=l,this.getMultiGameLeaderboard=c,this.getSingleGameLeaderboard=u,this.getPlayerScores=d}angular.module("vg.app").service("eventService",e),e.$inject=["$q","$filter","$firebaseObject","$firebaseArray","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,n,r,o,a,i,s){function l(){var e=new Firebase(s.FBURL);c.eventProperties=a.getEventProperties(c.eventName),a.getGameData(c.eventName,c.gameName).then(function(t){c.gameData=t,c.gameScores=o(e.child("contests").child(c.eventName).child("activeGames").child(c.gameData.$id).child("scores"))})}r(function(){angular.element("#contentView").css("opacity","1").css("position","inherit")},410);var c=this;c.eventName=n.eventName,c.gameName=n.gameName,c.initGamePage=l}angular.module("vg.app").controller("EventGameController",e),e.$inject=["$scope","$filter","$stateParams","$timeout","$firebaseArray","eventService","authService","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,n,r,o,a,i,s,l,c,u){function d(){angular.element("#gameModal").closeModal()}function m(){angular.element("#multiGameLeaderboardModal").closeModal()}function f(){angular.element("#playerModal").closeModal()}function p(){c.createTeam(D.eventName,D.newTeam).then(function(){Materialize.toast("Team "+D.newTeam.shortName+" created.",4e3),D.newTeam=null})}function h(e,n){var r;if(n>11)return r=0;r=12-n;var o=t("orderBy")(D.gameScores,"-score");return o[n-1]&&o[n-1].score===e.score&&(r+=1),r}function v(){D.gameList.forEach(function(e){if(e.scores){var n=$.map(e.scores,function(e){return e});n=t("orderBy")(n,"-score"),e.firstScore=n[0]}})}function g(e){angular.element("#playerModal").closeModal(),r.go("profile",{username:e})}function b(){i.getEventProperties(D.eventName).then(function(e){D.eventProperties=e,D.eventProperties.$loaded().then(function(){D.eventProperties.format.multiGame?(i.getGamesList(D.eventName).then(function(e){D.gameList=e,v()}),i.getMultiGameLeaderboard(D.eventName).then(function(e){var t=e;D.leaderboardLength=t.length,D.summarizedLeaderboard=t.slice(0,8)})):i.getSingleGameLeaderboard(D.eventName).then(function(e){var t=e;D.leaderboardLength=t.length,D.summarizedLeaderboard=t}),D.eventProperties.format.teamBased&&c.getTeamList(D.eventName).then(function(e){D.teamList=e})})}),l.getAvatarData().then(function(e){D.avatarData=e})}function w(){angular.element("#badgesModal").openModal(),angular.element("#badgesModalContent").scrollTop(0)}function A(e){var t=new Firebase(u.FBURL);i.getGameData(D.eventName,e).then(function(e){D.gameData=e,D.gameScores=a(t.child("contests").child(D.eventName).child("activeGames").child(D.gameData.$id).child("scores"))}),angular.element("#gameModal").openModal(),angular.element("#gameModalContent").scrollTop(0)}function E(){angular.element("#managementModal").openModal(),angular.element("#managementModalContent").scrollTop(0)}function L(){i.getMultiGameLeaderboard(D.eventName).then(function(e){D.completeLeaderboard=e}),angular.element("#multiGameLeaderboardModal").openModal(),angular.element("#multiGameLeaderboardModalContent").scrollTop(0)}function S(e){D.focusPlayer=e,i.getPlayerScores(D.eventName,D.gameList,D.focusPlayer).then(function(e){D.playerScores=e}),angular.element("#playerModal").openModal(),angular.element("#playerModalContent").scrollTop(0)}function F(e){f(),o(function(){A(e)},450)}function U(e){d(),o(function(){S(e)},450)}function M(e){m(),o(function(){S(e)},450)}function P(){angular.element("#rulesModal").openModal()}o(function(){$(".collapsible").collapsible({accordion:!0}),$("ul.tabs").tabs()},1e3),o(function(){$(".collapsible").collapsible({accordion:!0}),$("ul.tabs").tabs()},3e3);var D=this;D.eventName=n.eventName,D.closeGameModal=d,D.closeMultiGameLeaderboardModal=m,D.closePlayerModal=f,D.createTeam=p,D.determinePoints=h,D.getFirstPlaceScores=v,D.goToPlayerProfile=g,D.initEvent=b,D.openBadgesModal=w,D.openGameModal=A,D.openGameModalFromPlayerModal=F,D.openManagementModal=E,D.openMultiGameLeaderboardModal=L,D.openPlayerModal=S,D.openPlayerModalFromGameModal=U,D.openPlayerModalFromLeaderboardModal=M,D.openRulesModal=P}angular.module("vg.app").controller("EventMainController",e),e.$inject=["$scope","$filter","$stateParams","$state","$timeout","$firebaseArray","eventService","authService","profileService","teamService","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,n,r){function o(t,o){var a=e.defer(),i=new Firebase(r.FBURL),s=n(i.child("contests").child(t).child("teamPool"));return s.$loaded().then(function(){s[o.shortName]={fullName:o.formalName},s.$save(),a.resolve()}),a.promise}function a(n){var o=e.defer(),a=new Firebase(r.FBURL),i=t(a.child("contests").child(n).child("teamPool"));return i.$loaded().then(function(){o.resolve(i)}),o.promise}this.createTeam=o,this.getTeamList=a}angular.module("vg.app").service("teamService",e),e.$inject=["$q","$firebaseArray","$firebaseObject","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,n,r,o){function a(){o.logOut(),n.location.reload()}e(function(){angular.element(".dropdown-button").dropdown({inDuration:300,outDuration:225,constrain_width:!1,hover:!1,gutter:-114,belowOrigin:!0})},400);var i=this;i.logOut=a}angular.module("vg.app").controller("HeaderController",e),e.$inject=["$timeout","$rootScope","$window","$state","authService"]}(),function(){"use strict";function e(){function e(e,t,n){}var n={bindToController:!0,controller:t,controllerAs:"vm",link:e,restrict:"E",templateUrl:"./app/eventComponents/gamesList.directive.htm",scope:{data:"=",openGameFunction:"="}};return n}function t(){}angular.module("vg.app").directive("vgGamesList",e)}(),function(){"use strict";function e(){function e(e,t,n){}var n={bindToController:!0,controller:t,controllerAs:"vm",link:e,restrict:"E",templateUrl:"./app/eventComponents/multiGameLeaderboard.directive.htm",scope:{data:"=",avatarData:"=",completeLength:"=",openPlayerFunction:"=",openLeaderboardFunction:"="}};return n}function t(){}angular.module("vg.app").directive("vgMultiGameLeaderboard",e)}(),function(){"use strict";function e(){function e(e,t,n){}var n={bindToController:!0,controller:t,controllerAs:"vm",link:e,restrict:"E",templateUrl:"./app/eventComponents/singleGameLeaderboard.directive.htm",scope:{data:"=",avatarData:"=",completeLength:"=",openLeaderboardFunction:"="}};return n}function t(){}angular.module("vg.app").directive("vgSingleGameLeaderboard",e)}(),function(){"use strict";function e(){function e(e,t,n){}var n={bindToController:!0,controller:t,controllerAs:"vm",link:e,restrict:"E",templateUrl:"./app/eventComponents/stickyMessage.directive.htm",scope:{properties:"="}};return n}function t(e){}angular.module("vg.app").directive("vgStickyMessage",e),t.$inject=["$timeout"]}(),function(){"use strict";function e(){return function(e,t,n){var r=[];return angular.forEach(e,function(e,t){e.key=t,r.push(e)}),r.sort(function(e,n){return e[t]>n[t]?1:-1}),n&&r.reverse(),r}}angular.module("vg.app").filter("orderObjectBy",e)}(),function(){"use strict";function e(e,t,n,r,o,a,i){function s(){i.getAvatarData().then(function(e){c.avatarData=e}),r(function(){i.getBadgesData(e.profile.userName).then(function(e){c.badgesData=e})},500)}function l(){c.disableButton=!0,a.setAPIKey("Client-ID f53d6d5833b07bc"),a.upload(c.file).then(function(n){i.saveAvatarLink(n[0].link,e.profile.userName),Materialize.toast("Your avatar was uploaded",4e3),r(function(){t.go("home")},1e3)})}var c=this;c.initAvatar=s,c.uploadAvatar=l}angular.module("vg.app").controller("AvatarController",e),e.$inject=["$rootScope","$state","$stateParams","$timeout","Upload","imgur","profileService"]}(),function(){"use strict";function e(e,t,n,r){function o(){e.pwChangeForm.$valid&&r.$changePassword({email:r.$getAuth().password.email,oldPassword:a.inputCurrentPassword,newPassword:a.inputNewPassword}).then(function(){Materialize.toast("Your password was changed.",4e3),t(function(){n.go("home")},1e3)})["catch"](function(e){"INVALID_PASSWORD"===e.code&&(a.showChangePasswordMessage=!0)})}var a=this;t(function(){angular.element("#contentView").css("opacity","1").css("position","inherit")},310),a.submitChangePassword=o}angular.module("vg.app").controller("ChangePasswordController",e),e.$inject=["$scope","$timeout","$state","AuthWrapper"]}(),function(){"use strict";function e(e,t){t(function(){angular.element("#contentView").css("opacity","1").css("position","inherit")},310)}angular.module("vg.app").controller("HomeController",e),e.$inject=["$scope","$timeout"]}(),function(){"use strict";function e(e,t,n,r,o){function a(){var t=e.defer(),r=new Firebase(o.FBURL),a=n(r.child("badges"));return a.$loaded(function(){t.resolve(a)}),t.promise}var i=this;t(function(){angular.element("#contentView").css("opacity","1").css("position","inherit")},310),a().then(function(e){i.profileScoreData=e}),r.getAvatarData().then(function(e){i.avatarData=e})}angular.module("vg.app").controller("LeaderboardController",e),e.$inject=["$q","$timeout","$firebaseArray","profileService","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,n,r,o,a,i,s,l){function c(){s.getUserData(t.username).then(function(e){u.profileData=e,s.getTournamentHistory(u.profileData).then(function(e){var n=e;u.eventStandings=s.getTournamentStandings(n,t.username)})}),s.getAvatarData().then(function(e){u.avatarData=e}),s.getBadgesData(t.username).then(function(e){u.badgesData=e})}r(function(){angular.element("#contentView").css("opacity","1").css("position","inherit"),$(".collapsible").collapsible({accordion:!0})},410);var u=this;u.initProfile=c}angular.module("vg.app").controller("ProfileController",e),e.$inject=["$scope","$stateParams","$q","$timeout","$state","$firebaseArray","authService","profileService","eventService"]}(),function(){"use strict";function e(e,t,n,r,o,a){function i(){var e=t.defer(),n=new Firebase(a.FBURL),o=r(n.child("avatars"));return o.$loaded(function(){e.resolve(o)}),e.promise}function s(e){var n=t.defer(),o=new Firebase(a.FBURL),i=r(o.child("badges").child(e));return i.$loaded(function(){n.resolve(i)}),n.promise}function l(e){var n=t.defer(),r=(new Firebase(a.FBURL),[]);for(var o in e.pledgedTo)r.push(o);return n.resolve(r),n.promise}function c(e,t){var n=new Firebase(a.FBURL),i=[];return e.forEach(function(e){o.getEventProperties(e).then(function(o){o.$loaded().then(function(){if("concluded"===o.state){var a=r(n.child("standings").child(e));a.$loaded().then(function(){i.push(a[t]?{name:o.name,premier:o.premier?!0:null,shortName:e,state:"concluded",color:o.color,position:a[t]}:{name:o.name,premier:o.premier?!0:null,shortName:e,state:"concluded",color:o.color,position:-1})})}else("inprogress"===o.state||"upcoming"===o.state)&&i.push({name:o.name,premier:o.premier?!0:null,shortName:e,color:o.color,state:o.state})})})}),i}function u(e){var r=t.defer(),o=new Firebase(a.FBURL),i=n(o.child("users"));return i.$loaded(function(){i.forEach(function(t){t.userName===e&&r.resolve(t)})}),r.promise}function d(e,t){var n=new Firebase(a.FBURL),o=r(n.child("avatars"));o.$loaded(function(){o[t]=e,o.$save()})}this.getAvatarData=i,this.getBadgesData=s,this.getTournamentHistory=l,this.getTournamentStandings=c,this.getUserData=u,this.saveAvatarLink=d}angular.module("vg.app").service("profileService",e),e.$inject=["$rootScope","$q","$firebaseArray","$firebaseObject","eventService","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,n,r,o,a,i,s){function l(){i.loginToAccount(d.loginEmail,d.loginPassword).then(function(e){if(d.showInvalidUserError=!1,d.showInvalidPasswordError=!1,"LOGIN_SUCCESS"===e)o.go("home");else{if("INVALID_USER"===e)return void(d.showInvalidUserError=!0);"INVALID_PASSWORD"===e&&(d.showInvalidPasswordError=!0)}})}function c(){return d.loginEmail?void s.$resetPassword({email:d.loginEmail}).then(function(){d.showPasswordResetEmailMessage=!1,Materialize.toast("A password reset email has been sent to "+d.loginEmail+".",4e3)}):void(d.showPasswordResetEmailMessage=!0)}function u(){i.checkIfUserExists(d.newUsername).then(function(e){return d.showDuplicateUserError=!1,d.showEmailTakenError=!1,e?void(d.showDuplicateUserError=!0):void i.createNewUser(d.newEmail,d.newPassword,d.newUsername).then(function(e){return"EMAIL_TAKEN"===e?void(d.showEmailTakenError=!0):void("ACCOUNT_CREATED"===e&&o.go("profile",{username:d.newUsername}))})})}n(function(){angular.element("#contentView").css("opacity","1").css("position","inherit")},410);var d=this;d.loginToAccount=l,d.passwordReset=c,d.submitNewAccount=u}angular.module("vg.app").controller("RegController",e),e.$inject=["$scope","$rootScope","$timeout","$window","$state","$firebaseObject","authService","AuthWrapper"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJhcHAuY29uZmlnLmpzIiwiYXBwLm1pbi5qcyIsImFwcC5ydW4uanMiLCJhdXRoL2F1dGguc2VydmljZS5qcyIsImF1dGgvYXV0aHdyYXBwZXIuZmFjdG9yeS5qcyIsImV2ZW50L2V2ZW50LnNlcnZpY2UuanMiLCJldmVudC9nYW1lLmNvbnRyb2xsZXIuanMiLCJldmVudC9tYWluLmNvbnRyb2xsZXIuanMiLCJldmVudC90ZWFtLnNlcnZpY2UuanMiLCJoZWFkZXIvaGVhZGVyLmNvbnRyb2xsZXIuanMiLCJldmVudENvbXBvbmVudHMvZ2FtZXNMaXN0LmRpcmVjdGl2ZS5qcyIsImV2ZW50Q29tcG9uZW50cy9tdWx0aUdhbWVMZWFkZXJib2FyZC5kaXJlY3RpdmUuanMiLCJldmVudENvbXBvbmVudHMvc2luZ2xlR2FtZUxlYWRlcmJvYXJkLmRpcmVjdGl2ZS5qcyIsImV2ZW50Q29tcG9uZW50cy9zdGlja3lNZXNzYWdlLmRpcmVjdGl2ZS5qcyIsImhlbHBlcnMvb3JkZXJPYmplY3RCeS5maWx0ZXIuanMiLCJob21lL2F2YXRhci5jb250cm9sbGVyLmpzIiwiaG9tZS9jaGFuZ2VQYXNzd29yZC5jb250cm9sbGVyLmpzIiwiaG9tZS9ob21lLmNvbnRyb2xsZXIuanMiLCJob21lL2xlYWRlcmJvYXJkLmNvbnRyb2xsZXIuanMiLCJob21lL3Byb2ZpbGUuY29udHJvbGxlci5qcyIsImhvbWUvcHJvZmlsZS5zZXJ2aWNlLmpzIiwiaG9tZS9yZWcuY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJvdGhlcndpc2UiLCJzdGF0ZSIsInVybCIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsInJlc29sdmUiLCJjdXJyZW50QXV0aCIsIkF1dGhXcmFwcGVyIiwiJHJlcXVpcmVBdXRoIiwiY29uc3RhbnQiLCJGQlVSTCIsIiRpbmplY3QiLCJydW4iLCIkcm9vdFNjb3BlIiwiJGxvY2F0aW9uIiwiJHN0YXRlIiwiJGZpcmViYXNlT2JqZWN0IiwiRklSRUJBU0VEQVRBIiwiJG9uIiwiZXZlbnQiLCJ0b1N0YXRlIiwidG9QYXJhbXMiLCJmcm9tU3RhdGUiLCJmcm9tUGFyYW1zIiwiZXJyb3IiLCJnbyIsIiRnZXRBdXRoIiwiYXV0aERhdGEiLCJyZWYiLCJGaXJlYmFzZSIsInByb2ZpbGVEYXRhIiwiY2hpbGQiLCJ1aWQiLCIkYmluZFRvIiwidGhlbiIsInVuYmluZCIsInVuYmluZEZ1bmN0aW9uIiwiYXV0aFNlcnZpY2UiLCIkcSIsImNoZWNrSWZVc2VyRXhpc3RzIiwiaW5wdXRVc2VybmFtZSIsImRlZmVycmVkIiwiZGVmZXIiLCJkb2VzVXNlckV4aXN0IiwidXNlcnNSZWYiLCJvbmNlIiwiZGF0YVNuYXBzaG90IiwiZm9yRWFjaCIsInVzZXIiLCJ2YWwiLCJ1c2VyTmFtZSIsInByb21pc2UiLCJjcmVhdGVOZXdVc2VyIiwiaW5wdXRFbWFpbCIsImlucHV0UGFzc3dvcmQiLCIkY3JlYXRlVXNlciIsImVtYWlsIiwicGFzc3dvcmQiLCJ1c2VyRGF0YSIsInNldCIsInJvbGUiLCJlcnJvckRhdGEiLCJjb25zb2xlIiwiY29kZSIsIiRhdXRoV2l0aFBhc3N3b3JkIiwibG9naW5Ub0FjY291bnQiLCJsb2dPdXQiLCIkdW5hdXRoIiwidGhpcyIsInNlcnZpY2UiLCIkZmlyZWJhc2VBdXRoIiwiZmFjdG9yeSIsImV2ZW50U2VydmljZSIsIiRmaWx0ZXIiLCIkZmlyZWJhc2VBcnJheSIsImNyZWF0ZU11bHRpR2FtZUZpbmFsU3RhbmRpbmdzIiwiaW5wdXRFdmVudCIsImdldE11bHRpR2FtZUxlYWRlcmJvYXJkIiwicHJvbWlzZVJlc29sdXRpb24iLCJpbnB1dEV2ZW50U3RhbmRpbmdzIiwiJGxvYWRlZCIsInN0YW5kaW5nIiwia2V5IiwicG9zaXRpb24iLCIkc2F2ZSIsImdldEV2ZW50UHJvcGVydGllcyIsImV2ZW50UHJvcGVydGllcyIsImdldEdhbWVEYXRhIiwiaW5wdXRHYW1lIiwiZ2V0R2FtZXNMaXN0IiwiZ2FtZXNMaXN0IiwiZ2FtZSIsImNhbWVsTmFtZSIsInBsYXllclBvaW50cyIsInNjb3JlcyIsInNjb3Jlc0FycmF5IiwiJCIsIm1hcCIsImVsIiwidG90YWxBd2FyZCIsImkiLCJsZW5ndGgiLCJwb2ludHMiLCJoYXZlQm90dG9tU2NvcmVyc0Zsb29yIiwiZmxvb3JSYW5nZSIsImdldFNjb3JlQ291bnRPZiIsInBvaW50c0RhdGEiLCJnZXRTaW5nbGVHYW1lTGVhZGVyYm9hcmQiLCJsZWFkZXJib2FyZERhdGEiLCJnZXRQbGF5ZXJTY29yZXMiLCJpbnB1dEdhbWVzTGlzdCIsImlucHV0UGxheWVyIiwiZGlzcGxheVNjb3JlcyIsIm5ld1Njb3JlT2JqZWN0Iiwic2NvcmUiLCJwb2ludHNFYXJuZWQiLCJpbnBVcmwiLCJ0d2l0Y2hVcmwiLCJtYW1lVmVyc2lvbiIsInB1c2giLCJFdmVudEdhbWVDb250cm9sbGVyIiwiJHNjb3BlIiwiJHN0YXRlUGFyYW1zIiwiJHRpbWVvdXQiLCJpbml0R2FtZVBhZ2UiLCJ2bSIsImV2ZW50TmFtZSIsImdhbWVOYW1lIiwiZ2FtZURhdGEiLCJnYW1lU2NvcmVzIiwiJGlkIiwiZWxlbWVudCIsImNzcyIsIkV2ZW50TWFpbkNvbnRyb2xsZXIiLCJwcm9maWxlU2VydmljZSIsInRlYW1TZXJ2aWNlIiwiY2xvc2VHYW1lTW9kYWwiLCJjbG9zZU1vZGFsIiwiY2xvc2VNdWx0aUdhbWVMZWFkZXJib2FyZE1vZGFsIiwiY2xvc2VQbGF5ZXJNb2RhbCIsImNyZWF0ZVRlYW0iLCJuZXdUZWFtIiwiTWF0ZXJpYWxpemUiLCJ0b2FzdCIsInNob3J0TmFtZSIsImRldGVybWluZVBvaW50cyIsImlucHV0U2NvcmVEYXRhIiwiaW5wdXRJbmRleCIsInVzZXJHYW1lUG9pbnRzIiwic29ydGVkU2NvcmVzIiwiZ2V0Rmlyc3RQbGFjZVNjb3JlcyIsImdhbWVMaXN0IiwiZmlyc3RTY29yZSIsImdvVG9QbGF5ZXJQcm9maWxlIiwidXNlcm5hbWUiLCJpbml0RXZlbnQiLCJmb3JtYXQiLCJtdWx0aUdhbWUiLCJsZWFkZXJib2FyZCIsImxlYWRlcmJvYXJkTGVuZ3RoIiwic3VtbWFyaXplZExlYWRlcmJvYXJkIiwic2xpY2UiLCJ0ZWFtQmFzZWQiLCJnZXRUZWFtTGlzdCIsIm1vZGVsIiwidGVhbUxpc3QiLCJnZXRBdmF0YXJEYXRhIiwiYXZhdGFyRGF0YSIsIm9wZW5CYWRnZXNNb2RhbCIsIm9wZW5Nb2RhbCIsInNjcm9sbFRvcCIsIm9wZW5HYW1lTW9kYWwiLCJpbnB1dEdhbWVOYW1lIiwib3Blbk1hbmFnZW1lbnRNb2RhbCIsIm9wZW5NdWx0aUdhbWVMZWFkZXJib2FyZE1vZGFsIiwiY29tcGxldGVMZWFkZXJib2FyZCIsIm9wZW5QbGF5ZXJNb2RhbCIsImZvY3VzUGxheWVyIiwicGxheWVyU2NvcmVzIiwib3BlbkdhbWVNb2RhbEZyb21QbGF5ZXJNb2RhbCIsIm9wZW5QbGF5ZXJNb2RhbEZyb21HYW1lTW9kYWwiLCJvcGVuUGxheWVyTW9kYWxGcm9tTGVhZGVyYm9hcmRNb2RhbCIsIm9wZW5SdWxlc01vZGFsIiwiY29sbGFwc2libGUiLCJhY2NvcmRpb24iLCJ0YWJzIiwiaW5wdXROZXdUZWFtUHJvcGVydGllcyIsInRlYW1Qb29sIiwiZnVsbE5hbWUiLCJmb3JtYWxOYW1lIiwiSGVhZGVyQ29udHJvbGxlciIsIiR3aW5kb3ciLCJsb2NhdGlvbiIsInJlbG9hZCIsImRyb3Bkb3duIiwiaW5EdXJhdGlvbiIsIm91dER1cmF0aW9uIiwiY29uc3RyYWluX3dpZHRoIiwiaG92ZXIiLCJndXR0ZXIiLCJiZWxvd09yaWdpbiIsInZnR2FtZXNMaXN0IiwibGluayIsInNjb3BlIiwiYXR0cnMiLCJkaXJlY3RpdmUiLCJiaW5kVG9Db250cm9sbGVyIiwiR2FtZXNMaXN0Q29udHJvbGxlciIsImNvbnRyb2xsZXJBcyIsInJlc3RyaWN0IiwiZGF0YSIsIm9wZW5HYW1lRnVuY3Rpb24iLCJ2Z011bHRpR2FtZUxlYWRlcmJvYXJkIiwiTXVsdGlHYW1lTGVhZGVyYm9hcmRDb250cm9sbGVyIiwiY29tcGxldGVMZW5ndGgiLCJvcGVuUGxheWVyRnVuY3Rpb24iLCJvcGVuTGVhZGVyYm9hcmRGdW5jdGlvbiIsInZnU2luZ2xlR2FtZUxlYWRlcmJvYXJkIiwiU2luZ2xlR2FtZUxlYWRlcmJvYXJkQ29udHJvbGxlciIsInZnU3RpY2t5TWVzc2FnZSIsIlN0aWNreU1lc3NhZ2VDb250cm9sbGVyIiwicHJvcGVydGllcyIsIm9yZGVyT2JqZWN0QnkiLCJpdGVtcyIsImZpZWxkIiwicmV2ZXJzZSIsImZpbHRlcmVkIiwiaXRlbSIsInNvcnQiLCJhIiwiYiIsImZpbHRlciIsIkF2YXRhckNvbnRyb2xsZXIiLCJVcGxvYWQiLCJpbWd1ciIsImluaXRBdmF0YXIiLCJnZXRCYWRnZXNEYXRhIiwicHJvZmlsZSIsImJhZGdlc0RhdGEiLCJ1cGxvYWRBdmF0YXIiLCJkaXNhYmxlQnV0dG9uIiwic2V0QVBJS2V5IiwidXBsb2FkIiwiZmlsZSIsInNhdmVBdmF0YXJMaW5rIiwiQ2hhbmdlUGFzc3dvcmRDb250cm9sbGVyIiwic3VibWl0Q2hhbmdlUGFzc3dvcmQiLCJwd0NoYW5nZUZvcm0iLCIkdmFsaWQiLCIkY2hhbmdlUGFzc3dvcmQiLCJvbGRQYXNzd29yZCIsImlucHV0Q3VycmVudFBhc3N3b3JkIiwibmV3UGFzc3dvcmQiLCJpbnB1dE5ld1Bhc3N3b3JkIiwic2hvd0NoYW5nZVBhc3N3b3JkTWVzc2FnZSIsIkhvbWVDb250cm9sbGVyIiwiTGVhZGVyYm9hcmRDb250cm9sbGVyIiwiZ2V0UHJvZmlsZVNjb3JlcyIsInByb2ZpbGVTY29yZURhdGEiLCJQcm9maWxlQ29udHJvbGxlciIsImluaXRQcm9maWxlIiwiZ2V0VXNlckRhdGEiLCJnZXRUb3VybmFtZW50SGlzdG9yeSIsInRvdXJuYW1lbnRIaXN0b3J5RGF0YSIsImV2ZW50U3RhbmRpbmdzIiwiZ2V0VG91cm5hbWVudFN0YW5kaW5ncyIsImlucHV0VXNlciIsImlucHV0VXNlckRhdGEiLCJldmVudHNBcnJheSIsInBsZWRnZWRUbyIsImlucHV0VG91cm5hbWVudEhpc3RvcnkiLCJldmVudFN0YW5kaW5nRGF0YSIsIm5hbWUiLCJwcmVtaWVyIiwiY29sb3IiLCJ1c2Vyc0RhdGEiLCJpbnB1dExpbmsiLCJSZWdDb250cm9sbGVyIiwibG9naW5FbWFpbCIsImxvZ2luUGFzc3dvcmQiLCJzaG93SW52YWxpZFVzZXJFcnJvciIsInNob3dJbnZhbGlkUGFzc3dvcmRFcnJvciIsInBhc3N3b3JkUmVzZXQiLCIkcmVzZXRQYXNzd29yZCIsInNob3dQYXNzd29yZFJlc2V0RW1haWxNZXNzYWdlIiwic3VibWl0TmV3QWNjb3VudCIsIm5ld1VzZXJuYW1lIiwidXNlckV4aXN0cyIsInNob3dEdXBsaWNhdGVVc2VyRXJyb3IiLCJzaG93RW1haWxUYWtlbkVycm9yIiwibmV3RW1haWwiXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0EsWUFFQUEsU0FDQUMsT0FBQSxVQUVBLFlBR0EsWUFDQSxXQUNBLG1CQUNBLFVBQ0EsZUFDQSxlQ2RBLFdBQ0EsWUFVQSxTQUFBQyxHQUFBQyxFQUFBQyxHQUdBQSxFQUFBQyxVQUFBLEtBRUFGLEVBQ0FHLE1BQUEsUUFDQUMsSUFBQSxJQUNBQyxZQUFBLG9CQUNBQyxXQUFBLDJCQUdBSCxNQUFBLG1CQUNBQyxJQUFBLG1CQUNBQyxZQUFBLG9CQUNBQyxXQUFBLHlCQUdBSCxNQUFBLFdBQ0FDLElBQUEscUJBQ0FDLFlBQUEsd0JBQ0FDLFdBQUEsaUNBR0FILE1BQUEsZUFDQUMsSUFBQSxlQUNBQyxZQUFBLDRCQUNBQyxXQUFBLHlDQUdBSCxNQUFBLFNBQ0FDLElBQUEseUJBQ0FDLFlBQUEsc0JBQ0FDLFdBQUEsaUNBR0FILE1BQUEsbUJBQ0FDLElBQUEsbUJBQ0FDLFlBQUEsdUJBQ0FDLFdBQUEsNkJBRUFDLFNBQ0FDLGFBQUEsY0FBQSxTQUFBQyxHQUNBLE1BQUFBLEdBQUFDLG9CQUtBUCxNQUFBLGtCQUNBQyxJQUFBLGtCQUNBQyxZQUFBLCtCQUNBQyxXQUFBLHVDQUVBQyxTQUNBQyxh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R0FBQWUsY0FBQXlFLEVBQUFxSyxTQUFBckssRUFBQStILFlBQUEvSCxFQUFBaUssYUFBQTVQLEtBQUEsU0FBQTRDLEdBRUEsTUFBQSxnQkFBQUEsT0FFQStDLEVBQUFvSyxxQkFBQSxRQUdBLG9CQUFBbk4sR0FFQS9ELEVBQUFVLEdBQUEsV0FBQWlJLFNBQUE3QixFQUFBaUssbUJBN0VBbkssRUFBQSxXQUNBaEksUUFBQXdJLFFBQUEsZ0JBQ0FDLElBQUEsVUFBQSxLQUNBQSxJQUFBLFdBQUEsWUFDQSxJQUVBLElBQUFQLEdBQUF6RCxJQUVBeUQsR0FBQTVELGVBQUFBLEVBQ0E0RCxFQUFBNkosY0FBQUEsRUFDQTdKLEVBQUFnSyxpQkFBQUEsRUFqQkFsUyxRQUNBQyxPQUFBLFVBQ0FRLFdBQUEsZ0JBQUFpUixHcEJ1a0RJQSxFQUFjMVEsU0FBVyxTQUFVLGFBQWMsV0FBWSxVQUFXLFNBQVUsa0JBQW1CLGNBQWUiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcsIFtcbiAgICAgICAgICAgIC8qIEFuZ3VsYXIgbW9kdWxlcyAqL1xuICAgICAgICAgICAgJ25nQW5pbWF0ZScsXG4gICAgICAgICAgICAvKiBBcHAgbW9kdWxlcyAqL1xuICAgICAgICAgICAgLyogVGhpcmQtcGFydHkgbW9kdWxlcyAqL1xuICAgICAgICAgICAgJ3VpLnJvdXRlcicsXG4gICAgICAgICAgICAnZmlyZWJhc2UnLFxuICAgICAgICAgICAgJ3ZhbGlkYXRpb24ubWF0Y2gnLFxuICAgICAgICAgICAgJ29yZGluYWwnLFxuICAgICAgICAgICAgJ25nRmlsZVVwbG9hZCcsXG4gICAgICAgICAgICAnbmdJbWd1cidcbiAgICAgICAgXSk7XG59KSgpOyIsIihmdW5jdGlvbigpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCd2Zy5hcHAnKVxuXHRcdC5jb25zdGFudCgnRklSRUJBU0VEQVRBJywge1xuXHRcdFx0J0ZCVVJMJzogJ2h0dHBzOi8vd29sZnNjb250ZXN0cy5maXJlYmFzZWlvLmNvbSdcblx0XHR9KVxuXHRcdC5jb25maWcoY29uZmlnKTtcblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gY29uZmlnKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcblxuXHRcdC8vIFJlZGlyZWN0IGFueSB1bm1hdGNoZWQgVVJMIHRvIC8uXG5cdFx0JHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpO1xuXG5cdFx0JHN0YXRlUHJvdmlkZXJcblx0XHQgICAgLnN0YXRlKCdob21lJywge1xuXHRcdCAgICBcdHVybDogJy8nLFxuXHRcdCAgICBcdHRlbXBsYXRlVXJsOiAnYXBwL2hvbWUvaG9tZS5odG0nLFxuXHRcdCAgICBcdGNvbnRyb2xsZXI6ICdIb21lQ29udHJvbGxlciBhcyBob21lJ1xuXHRcdCAgICB9KVxuXG5cdFx0ICAgIC5zdGF0ZSgncmVnaXN0ZXJPckxvZ2luJywge1xuXHRcdCAgICBcdHVybDogJy9yZWdpc3Rlck9yTG9naW4nLFxuXHRcdCAgICBcdHRlbXBsYXRlVXJsOiAnL2FwcC9ob21lL3JlZy5odG0nLFxuXHRcdCAgICBcdGNvbnRyb2xsZXI6ICdSZWdDb250cm9sbGVyIGFzIHJlZydcblx0XHQgICAgfSlcblxuXHRcdCAgICAuc3RhdGUoJ3Byb2ZpbGUnLCB7XG5cdFx0ICAgIFx0dXJsOiAnL3Byb2ZpbGUvOnVzZXJuYW1lJyxcblx0XHQgICAgXHR0ZW1wbGF0ZVVybDogJy9hcHAvaG9tZS9wcm9maWxlLmh0bScsXG5cdFx0ICAgIFx0Y29udHJvbGxlcjogJ1Byb2ZpbGVDb250cm9sbGVyIGFzIHByb2ZpbGUnXG5cdFx0ICAgIH0pXG5cblx0XHQgICAgLnN0YXRlKCdsZWFkZXJib2FyZCcsIHtcblx0XHQgICAgXHR1cmw6ICcvbGVhZGVyYm9hcmQnLFxuXHRcdCAgICBcdHRlbXBsYXRlVXJsOiAnL2FwcC9ob21lL2xlYWRlcmJvYXJkLmh0bScsXG5cdFx0ICAgIFx0Y29udHJvbGxlcjogJ0xlYWRlcmJvYXJkQ29udHJvbGxlciBhcyBsZWFkZXJib2FyZCdcblx0XHQgICAgfSlcblxuXHRcdCAgICAuc3RhdGUoJ2V2ZW50Jywge1xuXHRcdCAgICBcdHVybDogJy9ldmVudC86ZXZlbnROYW1lL21haW4nLFxuXHRcdCAgICBcdHRlbXBsYXRlVXJsOiAnL2FwcC9ldmVudC9tYWluLmh0bScsXG5cdFx0ICAgIFx0Y29udHJvbGxlcjogJ0V2ZW50TWFpbkNvbnRyb2xsZXIgYXMgZXZlbnQnXG5cdFx0ICAgIH0pXG5cblx0XHQgICAgLnN0YXRlKCdjdXN0b21pemVBdmF0YXInLCB7XG5cdFx0ICAgIFx0dXJsOiAnL2N1c3RvbWl6ZUF2YXRhcicsXG5cdFx0ICAgIFx0dGVtcGxhdGVVcmw6ICcvYXBwL2hvbWUvYXZhdGFyLmh0bScsXG5cdFx0ICAgIFx0Y29udHJvbGxlcjogJ0F2YXRhckNvbnRyb2xsZXIgYXMgYXZhdGFyJyxcblxuXHRcdCAgICBcdHJlc29sdmU6IHtcblx0XHQgICAgXHRcdCdjdXJyZW50QXV0aCc6IFsnQXV0aFdyYXBwZXInLCBmdW5jdGlvbihBdXRoV3JhcHBlcikge1xuXHRcdCAgICBcdFx0XHRyZXR1cm4gQXV0aFdyYXBwZXIuJHJlcXVpcmVBdXRoKCk7XG5cdFx0ICAgIFx0XHR9XVxuXHRcdCAgICBcdH1cblx0XHQgICAgfSlcblxuXHRcdCAgICAuc3RhdGUoJ2NoYW5nZVBhc3N3b3JkJywge1xuXHRcdCAgICBcdHVybDogJy9jaGFuZ2VQYXNzd29yZCcsXG5cdFx0ICAgIFx0dGVtcGxhdGVVcmw6ICcvYXBwL2hvbWUvY2hhbmdlUGFzc3dvcmQuaHRtJyxcblx0XHQgICAgXHRjb250cm9sbGVyOiAnQ2hhbmdlUGFzc3dvcmRDb250cm9sbGVyIGFzIHB3Y2hhbmdlJyxcblxuXHRcdCAgICBcdHJlc29sdmU6IHtcblx0XHQgICAgXHRcdCdjdXJyZW50QXV0aCc6IFsnQXV0aFdyYXBwZXInLCBmdW5jdGlvbihBdXRoV3JhcHBlcikge1xuXHRcdCAgICBcdFx0XHRyZXR1cm4gQXV0aFdyYXBwZXIuJHJlcXVpcmVBdXRoKCk7XG5cdFx0ICAgIFx0XHR9XVxuXHRcdCAgICBcdH1cblx0XHQgICAgfSk7XG5cdH1cbn0pKCk7IixudWxsLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAucnVuKHJ1bik7XG5cbiAgICBmdW5jdGlvbiBydW4oJHJvb3RTY29wZSwgJGxvY2F0aW9uLCAkc3RhdGUsICRmaXJlYmFzZU9iamVjdCwgQXV0aFdyYXBwZXIsIEZJUkVCQVNFREFUQSkge1xuXG4gICAgICAgICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VFcnJvcicsIGZ1bmN0aW9uKGV2ZW50LCB0b1N0YXRlLCB0b1BhcmFtcywgZnJvbVN0YXRlLCBmcm9tUGFyYW1zLCBlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yID09PSAnQVVUSF9SRVFVSVJFRCcpIHtcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ3JlZ2lzdGVyT3JMb2dpbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAvLyBJZiB1c2VyIGlzIGxvZ2dlZCBpbiwgZG93bmxvYWQgdGhlaXIgcHJvZmlsZSBkYXRhIHRvIGFuIG9iamVjdCBpbiAkcm9vdFNjb3BlLlxuICAgICAgICAgICAgaWYgKEF1dGhXcmFwcGVyLiRnZXRBdXRoKCkpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB2YXIgYXV0aERhdGEgPSBBdXRoV3JhcHBlci4kZ2V0QXV0aCgpO1xuICAgICAgICAgICAgICAgIHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRklSRUJBU0VEQVRBLkZCVVJMKTtcblxuICAgICAgICAgICAgICAgIHZhciBwcm9maWxlRGF0YSA9ICRmaXJlYmFzZU9iamVjdChyZWYuY2hpbGQoJ3VzZXJzJykuY2hpbGQoYXV0aERhdGEudWlkKSk7XG4gICAgICAgICAgICAgICAgcHJvZmlsZURhdGEuJGJpbmRUbygkcm9vdFNjb3BlLCAncHJvZmlsZScpLnRoZW4oZnVuY3Rpb24odW5iaW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUudW5iaW5kRnVuY3Rpb24gPSB1bmJpbmQ7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcblxuICAgIH1cblxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuc2VydmljZSgnYXV0aFNlcnZpY2UnLCBhdXRoU2VydmljZSk7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBhdXRoU2VydmljZSgkcSwgJHJvb3RTY29wZSwgJHN0YXRlLCAkZmlyZWJhc2VPYmplY3QsIEF1dGhXcmFwcGVyLCBGSVJFQkFTRURBVEEpIHtcbiAgICAgICAgXG4gICAgXHR0aGlzLmNoZWNrSWZVc2VyRXhpc3RzID0gY2hlY2tJZlVzZXJFeGlzdHM7XG4gICAgXHR0aGlzLmNyZWF0ZU5ld1VzZXIgPSBjcmVhdGVOZXdVc2VyO1xuICAgICAgICB0aGlzLmxvZ2luVG9BY2NvdW50ID0gbG9naW5Ub0FjY291bnQ7XG4gICAgICAgIHRoaXMubG9nT3V0ID0gbG9nT3V0O1xuXG4gICAgXHQvLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICBcdGZ1bmN0aW9uIGNoZWNrSWZVc2VyRXhpc3RzKGlucHV0VXNlcm5hbWUpIHtcblxuICAgIFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgXHRcdHZhciBkb2VzVXNlckV4aXN0ID0gZmFsc2U7XG4gICAgXHRcdHZhciB1c2Vyc1JlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwgKyAnL3VzZXJzJyk7XG5cbiAgICBcdFx0dXNlcnNSZWYub25jZSgndmFsdWUnLCBmdW5jdGlvbihkYXRhU25hcHNob3QpIHtcblxuICAgIFx0XHRcdGRhdGFTbmFwc2hvdC5mb3JFYWNoKGZ1bmN0aW9uKHVzZXIpIHtcbiAgICBcdFx0XHRcdGlmICh1c2VyLnZhbCgpLnVzZXJOYW1lID09PSBpbnB1dFVzZXJuYW1lKSB7XG4gICAgXHRcdFx0XHRcdGRvZXNVc2VyRXhpc3QgPSB0cnVlO1xuICAgIFx0XHRcdFx0fVxuICAgIFx0XHRcdH0pO1xuXG4gICAgXHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShkb2VzVXNlckV4aXN0KTtcblxuICAgIFx0XHR9KTtcblxuICAgIFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblxuICAgIFx0fVxuXG4gICAgXHRmdW5jdGlvbiBjcmVhdGVOZXdVc2VyKGlucHV0RW1haWwsIGlucHV0UGFzc3dvcmQsIGlucHV0VXNlcm5hbWUpIHtcblxuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgIFx0XHRBdXRoV3JhcHBlci4kY3JlYXRlVXNlcih7XG4gICAgXHRcdFx0ZW1haWw6IGlucHV0RW1haWwsXG4gICAgXHRcdFx0cGFzc3dvcmQ6IGlucHV0UGFzc3dvcmRcbiAgICBcdFx0fSkudGhlbihmdW5jdGlvbih1c2VyRGF0YSkge1xuXG4gICAgXHRcdFx0Ly8gQ3JlYXRlIGEgZGF0YSBlbnRyeSBmb3IgdGhlIG5ldyB1c2VybmFtZS5cbiAgICBcdFx0XHRuZXcgRmlyZWJhc2UoRklSRUJBU0VEQVRBLkZCVVJMKS5jaGlsZCgndXNlcnMvJyArIHVzZXJEYXRhLnVpZCkuc2V0KHtcblxuICAgIFx0XHRcdFx0dXNlck5hbWU6IGlucHV0VXNlcm5hbWUsXG4gICAgXHRcdFx0XHRyb2xlOiAnVXNlcidcblxuICAgIFx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yRGF0YSkge1xuICAgIFx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnJvckRhdGEpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3JEYXRhLmNvZGU7XG4gICAgXHRcdFx0fSk7XG5cbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBkYXRhIGVudHJ5IGZvciB0aGUgdXNlcidzIGF2YXRhci5cbiAgICAgICAgICAgICAgICBuZXcgRmlyZWJhc2UoRklSRUJBU0VEQVRBLkZCVVJMKS5jaGlsZCgnYXZhdGFycycpLmNoaWxkKGlucHV0VXNlcm5hbWUpLnNldCgnaHR0cDovL2FwaS5hZG9yYWJsZS5pby9hdmF0YXJzLzQyLycgKyBpbnB1dFVzZXJuYW1lKTtcblxuICAgIFx0XHRcdC8vIExvZyB0aGUgdXNlciBpbi5cbiAgICBcdFx0XHRBdXRoV3JhcHBlci4kYXV0aFdpdGhQYXNzd29yZCh7XG4gICAgXHRcdFx0XHRlbWFpbDogaW5wdXRFbWFpbCxcbiAgICBcdFx0XHRcdHBhc3N3b3JkOiBpbnB1dFBhc3N3b3JkXG4gICAgXHRcdFx0fSkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgnQUNDT1VOVF9DUkVBVEVEJyk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICBcdFx0fSkuY2F0Y2goZnVuY3Rpb24oZXJyb3JEYXRhKSB7XG5cbiAgICBcdFx0XHRjb25zb2xlLmVycm9yKGVycm9yRGF0YSk7XG5cbiAgICBcdFx0XHRpZiAoZXJyb3JEYXRhLmNvZGUgPT09ICdFTUFJTF9UQUtFTicpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShlcnJvckRhdGEuY29kZSk7XG4gICAgXHRcdFx0fVxuXG4gICAgXHRcdH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblxuICAgIFx0fVxuXG4gICAgICAgIGZ1bmN0aW9uIGxvZ2luVG9BY2NvdW50KGlucHV0RW1haWwsIGlucHV0UGFzc3dvcmQpIHtcblxuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICAgICAgQXV0aFdyYXBwZXIuJGF1dGhXaXRoUGFzc3dvcmQoe1xuICAgICAgICAgICAgICAgIGVtYWlsOiBpbnB1dEVtYWlsLFxuICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBpbnB1dFBhc3N3b3JkXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKGF1dGhEYXRhKSB7XG5cbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCdMT0dJTl9TVUNDRVNTJyk7XG5cbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yRGF0YSkge1xuXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yRGF0YS5jb2RlID09PSAnSU5WQUxJRF9VU0VSJykge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCdJTlZBTElEX1VTRVInKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yRGF0YS5jb2RlID09PSAnSU5WQUxJRF9QQVNTV09SRCcpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgnSU5WQUxJRF9QQVNTV09SRCcpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBsb2dPdXQoKSB7XG4gICAgICAgICAgICBBdXRoV3JhcHBlci4kdW5hdXRoKCk7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLnVuYmluZEZ1bmN0aW9uKCk7XG4gICAgICAgIH1cblxuICAgIH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJylcbiAgICAgICAgLmZhY3RvcnkoJ0F1dGhXcmFwcGVyJywgQXV0aFdyYXBwZXIpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gQXV0aFdyYXBwZXIoJGZpcmViYXNlQXV0aCwgRklSRUJBU0VEQVRBKSB7XG5cbiAgICAgICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuICAgICAgICByZXR1cm4gJGZpcmViYXNlQXV0aChyZWYpO1xuXG4gICAgfVxuICAgIFxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuc2VydmljZSgnZXZlbnRTZXJ2aWNlJywgZXZlbnRTZXJ2aWNlKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIGV2ZW50U2VydmljZSgkcSwgJGZpbHRlciwgJGZpcmViYXNlT2JqZWN0LCAkZmlyZWJhc2VBcnJheSwgRklSRUJBU0VEQVRBKSB7XG5cbiAgICAgICAgdGhpcy5jcmVhdGVNdWx0aUdhbWVGaW5hbFN0YW5kaW5ncyA9IGNyZWF0ZU11bHRpR2FtZUZpbmFsU3RhbmRpbmdzO1xuICAgICAgICB0aGlzLmdldEV2ZW50UHJvcGVydGllcyA9IGdldEV2ZW50UHJvcGVydGllcztcbiAgICAgICAgdGhpcy5nZXRHYW1lRGF0YSA9IGdldEdhbWVEYXRhO1xuICAgICAgICB0aGlzLmdldEdhbWVzTGlzdCA9IGdldEdhbWVzTGlzdDtcbiAgICAgICAgdGhpcy5nZXRNdWx0aUdhbWVMZWFkZXJib2FyZCA9IGdldE11bHRpR2FtZUxlYWRlcmJvYXJkO1xuICAgICAgICB0aGlzLmdldFNpbmdsZUdhbWVMZWFkZXJib2FyZCA9IGdldFNpbmdsZUdhbWVMZWFkZXJib2FyZDtcbiAgICAgICAgdGhpcy5nZXRQbGF5ZXJTY29yZXMgPSBnZXRQbGF5ZXJTY29yZXM7XG5cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZU11bHRpR2FtZUZpbmFsU3RhbmRpbmdzKGlucHV0RXZlbnQpIHtcblxuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBmaW5hbCBzdGFuZGluZ3Mgb2YgdGhlIGV2ZW50LlxuICAgICAgICAgICAgZ2V0TXVsdGlHYW1lTGVhZGVyYm9hcmQoaW5wdXRFdmVudCkudGhlbihmdW5jdGlvbihwcm9taXNlUmVzb2x1dGlvbikge1xuXG4gICAgICAgICAgICAgICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuICAgICAgICAgICAgICAgIHZhciBpbnB1dEV2ZW50U3RhbmRpbmdzID0gJGZpcmViYXNlT2JqZWN0KFxuICAgICAgICAgICAgICAgICAgICByZWZcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZCgnc3RhbmRpbmdzJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZChpbnB1dEV2ZW50KVxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBpbnB1dEV2ZW50U3RhbmRpbmdzLiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2VSZXNvbHV0aW9uLmZvckVhY2goZnVuY3Rpb24oc3RhbmRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0RXZlbnRTdGFuZGluZ3Nbc3RhbmRpbmcua2V5XSA9IHN0YW5kaW5nLnBvc2l0aW9uO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBpbnB1dEV2ZW50U3RhbmRpbmdzLiRzYXZlKCk7XG5cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEV2ZW50UHJvcGVydGllcyhpbnB1dEV2ZW50KSB7XG5cbiAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICAgXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZJUkVCQVNFREFUQS5GQlVSTCk7XG4gICAgICAgIFx0dmFyIGV2ZW50UHJvcGVydGllcyA9ICRmaXJlYmFzZU9iamVjdChcbiAgICAgICAgXHRcdHJlZlxuICAgICAgICBcdFx0XHQuY2hpbGQoJ2NvbnRlc3RzJylcbiAgICAgICAgXHRcdFx0LmNoaWxkKGlucHV0RXZlbnQpXG4gICAgICAgIFx0XHRcdC5jaGlsZCgncHJvcGVydGllcycpXG4gICAgICAgIFx0KTtcblxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShldmVudFByb3BlcnRpZXMpO1xuXG4gICAgICAgIFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEdhbWVEYXRhKGlucHV0RXZlbnQsIGlucHV0R2FtZSkge1xuXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICAgICB2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZJUkVCQVNFREFUQS5GQlVSTCk7XG5cbiAgICAgICAgICAgIGdldEdhbWVzTGlzdChpbnB1dEV2ZW50KS50aGVuKGZ1bmN0aW9uKGdhbWVzTGlzdCkge1xuXG4gICAgICAgICAgICAgICAgZ2FtZXNMaXN0LmZvckVhY2goZnVuY3Rpb24oZ2FtZSkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChnYW1lLmNhbWVsTmFtZSA9PT0gaW5wdXRHYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGdhbWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEdhbWVzTGlzdChpbnB1dEV2ZW50KSB7XG5cbiAgICAgICAgXHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgIFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuICAgICAgICBcdHZhciBnYW1lc0xpc3QgPSAkZmlyZWJhc2VBcnJheShcbiAgICAgICAgXHRcdHJlZlxuICAgICAgICBcdFx0XHQuY2hpbGQoJ2NvbnRlc3RzJylcbiAgICAgICAgXHRcdFx0LmNoaWxkKGlucHV0RXZlbnQpXG4gICAgICAgIFx0XHRcdC5jaGlsZCgnYWN0aXZlR2FtZXMnKVxuICAgICAgICBcdCk7XG5cbiAgICAgICAgXHRnYW1lc0xpc3QuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIFx0XHRkZWZlcnJlZC5yZXNvbHZlKGdhbWVzTGlzdCk7XG4gICAgICAgIFx0fSk7XG5cbiAgICAgICAgXHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0TXVsdGlHYW1lTGVhZGVyYm9hcmQoaW5wdXRFdmVudCkge1xuXG4gICAgICAgIFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICBcdC8vIFdlIG5lZWQgdG8gZ2V0IHRoZSB0b3AgMTIgcGxheWVycyBmb3IgZXZlcnkgZ2FtZS5cbiAgICAgICAgXHR2YXIgcGxheWVyUG9pbnRzID0ge307XG5cbiAgICAgICAgXHRnZXRHYW1lc0xpc3QoaW5wdXRFdmVudCkudGhlbihmdW5jdGlvbihwcm9taXNlUmVzb2x1dGlvbikge1xuXG4gICAgICAgIFx0XHR2YXIgZ2FtZXNMaXN0ID0gcHJvbWlzZVJlc29sdXRpb247XG4gICAgICAgIFx0XHRnYW1lc0xpc3QuZm9yRWFjaChmdW5jdGlvbihnYW1lKSB7XG5cbiAgICAgICAgXHRcdFx0aWYgKGdhbWUuc2NvcmVzKSB7XG5cbiAgICAgICAgXHRcdFx0XHQvLyBDb252ZXJ0IHRoZSBnYW1lJ3Mgc2NvcmVzIHRvIGFuIGFycmF5LlxuICAgICAgICBcdFx0XHRcdHZhciBzY29yZXNBcnJheSA9ICQubWFwKGdhbWUuc2NvcmVzLCBmdW5jdGlvbihlbCkgeyByZXR1cm4gZWw7IH0pO1xuICAgICAgICBcdFx0XHRcdHNjb3Jlc0FycmF5ID0gJGZpbHRlcignb3JkZXJCeScpKHNjb3Jlc0FycmF5LCAnLXNjb3JlJyk7XG5cbiAgICAgICAgXHRcdFx0XHR2YXIgdG90YWxBd2FyZCA9IDEyO1xuXG4gICAgICAgIFx0XHRcdFx0Ly8gSXRlcmF0ZSB0aHJvdWdoIHRoZSB0b3Agc2NvcmVzIGF3YXJkaW5nIHBvaW50cy5cbiAgICAgICAgXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHNjb3Jlc0FycmF5Lmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgXHRcdFx0XHRcdGlmICghcGxheWVyUG9pbnRzW3Njb3Jlc0FycmF5W2ldLnVzZXJOYW1lXSkge1xuICAgICAgICBcdFx0XHRcdFx0XHRwbGF5ZXJQb2ludHNbc2NvcmVzQXJyYXlbaV0udXNlck5hbWVdID0ge1xuICAgICAgICBcdFx0XHRcdFx0XHRcdHBvaW50czogMFxuICAgICAgICBcdFx0XHRcdFx0XHR9O1xuICAgICAgICBcdFx0XHRcdFx0fVxuXG4gICAgICAgIFx0XHRcdFx0XHRwbGF5ZXJQb2ludHNbc2NvcmVzQXJyYXlbaV0udXNlck5hbWVdLnBvaW50cyArPSB0b3RhbEF3YXJkO1xuXG4gICAgICAgIFx0XHRcdFx0XHRpZiAodG90YWxBd2FyZCA+IDApIHtcbiAgICAgICAgXHRcdFx0XHRcdFx0dG90YWxBd2FyZCAtPSAxO1xuICAgICAgICBcdFx0XHRcdFx0fVxuXG4gICAgICAgIFx0XHRcdFx0fVxuXG4gICAgICAgIFx0XHRcdH1cblxuICAgICAgICBcdFx0fSk7XG5cbiAgICAgICAgXHRcdC8vIEZpbmQgYW5kIHJlc29sdmUgdGllcy5cbiAgICAgICAgXHRcdHBsYXllclBvaW50cyA9ICRmaWx0ZXIoJ29yZGVyT2JqZWN0QnknKShwbGF5ZXJQb2ludHMsICdwb2ludHMnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB2YXIgaGF2ZUJvdHRvbVNjb3JlcnNGbG9vciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHZhciBmbG9vclJhbmdlID0gMDtcbiAgICAgICAgXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgcGxheWVyUG9pbnRzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgXHRcdFx0aWYgKHBsYXllclBvaW50c1tpLTFdICYmIHBsYXllclBvaW50c1tpXS5wb2ludHMgJiYgcGxheWVyUG9pbnRzW2ktMV0ucG9pbnRzKSB7XG5cbiAgICAgICAgXHRcdFx0XHRpZiAocGxheWVyUG9pbnRzW2ldLnBvaW50cyA9PT0gcGxheWVyUG9pbnRzW2ktMV0ucG9pbnRzKSB7XG4gICAgICAgIFx0XHRcdFx0XHRwbGF5ZXJQb2ludHNbaV0ucG9zaXRpb24gPSBwbGF5ZXJQb2ludHNbaS0xXS5wb3NpdGlvbjtcbiAgICAgICAgXHRcdFx0XHR9IGVsc2Uge1xuICAgICAgICBcdFx0XHRcdFx0cGxheWVyUG9pbnRzW2ldLnBvc2l0aW9uID0gKGkrMSk7XG4gICAgICAgIFx0XHRcdFx0fVxuXG4gICAgICAgIFx0XHRcdH0gZWxzZSB7XG5cbiAgICAgICAgXHRcdFx0XHRpZiAoaSA9PT0gMCkge1xuICAgICAgICBcdFx0XHRcdFx0cGxheWVyUG9pbnRzW2ldLnBvc2l0aW9uID0gMTtcbiAgICAgICAgXHRcdFx0XHR9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFoYXZlQm90dG9tU2NvcmVyc0Zsb29yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdldCBjb3VudCBvZiBwbGF5ZXJzIGluIG9uZSBwb3NpdGlvbiBoaWdoZXIuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnZXRTY29yZUNvdW50T2YgPSBwbGF5ZXJQb2ludHNbaS0xXS5wb2ludHM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllclBvaW50cy5mb3JFYWNoKGZ1bmN0aW9uKHBvaW50c0RhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb2ludHNEYXRhLnBvaW50cyA9PT0gZ2V0U2NvcmVDb3VudE9mKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxvb3JSYW5nZSArPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXZlQm90dG9tU2NvcmVyc0Zsb29yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgXHRcdFx0XHRcdHBsYXllclBvaW50c1tpXS5wb3NpdGlvbiA9IChwbGF5ZXJQb2ludHMubGVuZ3RoICsgMSkgLSBmbG9vclJhbmdlO1xuICAgICAgICBcdFx0XHRcdH1cblxuICAgICAgICBcdFx0XHR9XG5cbiAgICAgICAgXHRcdH1cblxuICAgICAgICBcdFx0ZGVmZXJyZWQucmVzb2x2ZShwbGF5ZXJQb2ludHMpO1xuXG4gICAgICAgIFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRTaW5nbGVHYW1lTGVhZGVyYm9hcmQoaW5wdXRFdmVudCkge1xuXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICAgICB2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZJUkVCQVNFREFUQS5GQlVSTCk7XG4gICAgICAgICAgICB2YXIgbGVhZGVyYm9hcmREYXRhID0gJGZpcmViYXNlQXJyYXkoXG4gICAgICAgICAgICAgICAgcmVmXG4gICAgICAgICAgICAgICAgICAgIC5jaGlsZCgnY29udGVzdHMnKVxuICAgICAgICAgICAgICAgICAgICAuY2hpbGQoaW5wdXRFdmVudClcbiAgICAgICAgICAgICAgICAgICAgLmNoaWxkKCdzY29yZXMnKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShsZWFkZXJib2FyZERhdGEpO1xuXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0UGxheWVyU2NvcmVzKGlucHV0RXZlbnQsIGlucHV0R2FtZXNMaXN0LCBpbnB1dFBsYXllcikge1xuXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICAgICB2YXIgZGlzcGxheVNjb3JlcyA9IFtdO1xuXG4gICAgICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggZXZlcnkgZ2FtZS5cbiAgICAgICAgICAgIGlucHV0R2FtZXNMaXN0LmZvckVhY2goZnVuY3Rpb24oZ2FtZSkge1xuXG4gICAgICAgICAgICAgICAgaWYgKGdhbWUuc2NvcmVzKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQ29udmVydCB0aGUgZ2FtZSdzIHNjb3JlcyB0byBhbiBhcnJheS5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjb3Jlc0FycmF5ID0gJC5tYXAoZ2FtZS5zY29yZXMsIGZ1bmN0aW9uKGVsKSB7IHJldHVybiBlbDsgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNjb3Jlc0FycmF5ID0gJGZpbHRlcignb3JkZXJCeScpKHNjb3Jlc0FycmF5LCAnLXNjb3JlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvdGFsQXdhcmQgPSAxMjtcblxuICAgICAgICAgICAgICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggdGhlIHNjb3JlcyBzdGFydGluZyBmcm9tIHRoZSB0b3AgYW5kIGZpbmQgb3VyIHVzZXIuXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2NvcmVzQXJyYXkubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm91bmQgb3VyIHBsYXllci5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzY29yZXNBcnJheVtpXS51c2VyTmFtZSA9PT0gaW5wdXRQbGF5ZXIpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdTY29yZU9iamVjdCA9IGdhbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2NvcmVPYmplY3QucG9zaXRpb24gPSBpKzE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2NvcmVPYmplY3Quc2NvcmUgPSBzY29yZXNBcnJheVtpXS5zY29yZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTY29yZU9iamVjdC5wb2ludHNFYXJuZWQgPSB0b3RhbEF3YXJkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Njb3JlT2JqZWN0LmlucFVybCA9IHNjb3Jlc0FycmF5W2ldLmlucFVybCA/IHNjb3Jlc0FycmF5W2ldLmlucFVybCA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2NvcmVPYmplY3QudHdpdGNoVXJsID0gc2NvcmVzQXJyYXlbaV0udHdpdGNoVXJsID8gc2NvcmVzQXJyYXlbaV0udHdpdGNoVXJsIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTY29yZU9iamVjdC5tYW1lVmVyc2lvbiA9IHNjb3Jlc0FycmF5W2ldLm1hbWVWZXJzaW9uID8gc2NvcmVzQXJyYXlbaV0ubWFtZVZlcnNpb24gOiBudWxsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheVNjb3Jlcy5wdXNoKG5ld1Njb3JlT2JqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbEF3YXJkID0gMTI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRvdGFsQXdhcmQgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsQXdhcmQgLT0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkaXNwbGF5U2NvcmVzKTtcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgfVxuXG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuY29udHJvbGxlcignRXZlbnRHYW1lQ29udHJvbGxlcicsIEV2ZW50R2FtZUNvbnRyb2xsZXIpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gRXZlbnRHYW1lQ29udHJvbGxlcigkc2NvcGUsICRmaWx0ZXIsICRzdGF0ZVBhcmFtcywgJHRpbWVvdXQsICRmaXJlYmFzZUFycmF5LCBldmVudFNlcnZpY2UsIGF1dGhTZXJ2aWNlLCBGSVJFQkFTRURBVEEpIHtcblxuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgXHRhbmd1bGFyLmVsZW1lbnQoJyNjb250ZW50VmlldycpXG4gICAgICAgIFx0ICAgIC5jc3MoJ29wYWNpdHknLCAnMScpXG4gICAgICAgIFx0ICAgIC5jc3MoJ3Bvc2l0aW9uJywgJ2luaGVyaXQnKTtcbiAgICAgICAgfSwgNDEwKTtcblxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIHZtLmV2ZW50TmFtZSA9ICRzdGF0ZVBhcmFtcy5ldmVudE5hbWU7XG4gICAgICAgIHZtLmdhbWVOYW1lID0gJHN0YXRlUGFyYW1zLmdhbWVOYW1lO1xuXG4gICAgICAgIHZtLmluaXRHYW1lUGFnZSA9IGluaXRHYW1lUGFnZTtcblxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgZnVuY3Rpb24gaW5pdEdhbWVQYWdlKCkge1xuXG4gICAgICAgICAgICB2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZJUkVCQVNFREFUQS5GQlVSTCk7XG5cbiAgICAgICAgICAgIHZtLmV2ZW50UHJvcGVydGllcyA9IGV2ZW50U2VydmljZS5nZXRFdmVudFByb3BlcnRpZXModm0uZXZlbnROYW1lKTtcblxuICAgICAgICAgICAgZXZlbnRTZXJ2aWNlLmdldEdhbWVEYXRhKHZtLmV2ZW50TmFtZSwgdm0uZ2FtZU5hbWUpLnRoZW4oZnVuY3Rpb24ocHJvbWlzZVJlc29sdXRpb24pIHtcbiAgICAgICAgICAgICAgICB2bS5nYW1lRGF0YSA9IHByb21pc2VSZXNvbHV0aW9uO1xuXG4gICAgICAgICAgICAgICAgdm0uZ2FtZVNjb3JlcyA9ICRmaXJlYmFzZUFycmF5KFxuICAgICAgICAgICAgICAgICAgICByZWZcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZCgnY29udGVzdHMnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNoaWxkKHZtLmV2ZW50TmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZCgnYWN0aXZlR2FtZXMnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNoaWxkKHZtLmdhbWVEYXRhLiRpZClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZCgnc2NvcmVzJylcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG5cbiAgICB9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0V2ZW50TWFpbkNvbnRyb2xsZXInLCBFdmVudE1haW5Db250cm9sbGVyKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIEV2ZW50TWFpbkNvbnRyb2xsZXIoJHNjb3BlLCAkZmlsdGVyLCAkc3RhdGVQYXJhbXMsICRzdGF0ZSwgJHRpbWVvdXQsICRmaXJlYmFzZUFycmF5LCBldmVudFNlcnZpY2UsIGF1dGhTZXJ2aWNlLCBwcm9maWxlU2VydmljZSwgdGVhbVNlcnZpY2UsIEZJUkVCQVNFREFUQSkge1xuXG4gICAgICAgIC8vIEVuYWJsZSBNYXRlcmlhbGl6ZS5jc3MgY29sbGFwc2libGVzLlxuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoJy5jb2xsYXBzaWJsZScpLmNvbGxhcHNpYmxlKHtcbiAgICAgICAgICAgICAgICBhY2NvcmRpb246IHRydWVcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkKCd1bC50YWJzJykudGFicygpO1xuICAgICAgICB9LCAxMDAwKTtcblxuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoJy5jb2xsYXBzaWJsZScpLmNvbGxhcHNpYmxlKHtcbiAgICAgICAgICAgICAgICBhY2NvcmRpb246IHRydWVcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkKCd1bC50YWJzJykudGFicygpO1xuICAgICAgICB9LCAzMDAwKTtcblxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIHZtLmV2ZW50TmFtZSA9ICRzdGF0ZVBhcmFtcy5ldmVudE5hbWU7XG5cbiAgICAgICAgdm0uY2xvc2VHYW1lTW9kYWwgPSBjbG9zZUdhbWVNb2RhbDtcbiAgICAgICAgdm0uY2xvc2VNdWx0aUdhbWVMZWFkZXJib2FyZE1vZGFsID0gY2xvc2VNdWx0aUdhbWVMZWFkZXJib2FyZE1vZGFsO1xuICAgICAgICB2bS5jbG9zZVBsYXllck1vZGFsID0gY2xvc2VQbGF5ZXJNb2RhbDtcbiAgICAgICAgdm0uY3JlYXRlVGVhbSA9IGNyZWF0ZVRlYW07XG4gICAgICAgIHZtLmRldGVybWluZVBvaW50cyA9IGRldGVybWluZVBvaW50cztcbiAgICAgICAgdm0uZ2V0Rmlyc3RQbGFjZVNjb3JlcyA9IGdldEZpcnN0UGxhY2VTY29yZXM7XG4gICAgICAgIHZtLmdvVG9QbGF5ZXJQcm9maWxlID0gZ29Ub1BsYXllclByb2ZpbGU7XG4gICAgICAgIHZtLmluaXRFdmVudCA9IGluaXRFdmVudDtcbiAgICAgICAgdm0ub3BlbkJhZGdlc01vZGFsID0gb3BlbkJhZGdlc01vZGFsO1xuICAgICAgICB2bS5vcGVuR2FtZU1vZGFsID0gb3BlbkdhbWVNb2RhbDtcbiAgICAgICAgdm0ub3BlbkdhbWVNb2RhbEZyb21QbGF5ZXJNb2RhbCA9IG9wZW5HYW1lTW9kYWxGcm9tUGxheWVyTW9kYWw7XG4gICAgICAgIHZtLm9wZW5NYW5hZ2VtZW50TW9kYWwgPSBvcGVuTWFuYWdlbWVudE1vZGFsO1xuICAgICAgICB2bS5vcGVuTXVsdGlHYW1lTGVhZGVyYm9hcmRNb2RhbCA9IG9wZW5NdWx0aUdhbWVMZWFkZXJib2FyZE1vZGFsO1xuICAgICAgICB2bS5vcGVuUGxheWVyTW9kYWwgPSBvcGVuUGxheWVyTW9kYWw7XG4gICAgICAgIHZtLm9wZW5QbGF5ZXJNb2RhbEZyb21HYW1lTW9kYWwgPSBvcGVuUGxheWVyTW9kYWxGcm9tR2FtZU1vZGFsO1xuICAgICAgICB2bS5vcGVuUGxheWVyTW9kYWxGcm9tTGVhZGVyYm9hcmRNb2RhbCA9IG9wZW5QbGF5ZXJNb2RhbEZyb21MZWFkZXJib2FyZE1vZGFsO1xuICAgICAgICB2bS5vcGVuUnVsZXNNb2RhbCA9IG9wZW5SdWxlc01vZGFsO1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgIGZ1bmN0aW9uIGNsb3NlR2FtZU1vZGFsKCkge1xuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjZ2FtZU1vZGFsJykuY2xvc2VNb2RhbCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY2xvc2VNdWx0aUdhbWVMZWFkZXJib2FyZE1vZGFsKCkge1xuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjbXVsdGlHYW1lTGVhZGVyYm9hcmRNb2RhbCcpLmNsb3NlTW9kYWwoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNsb3NlUGxheWVyTW9kYWwoKSB7XG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNwbGF5ZXJNb2RhbCcpLmNsb3NlTW9kYWwoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVRlYW0oKSB7XG4gICAgICAgICAgICB0ZWFtU2VydmljZS5jcmVhdGVUZWFtKHZtLmV2ZW50TmFtZSwgdm0ubmV3VGVhbSkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBNYXRlcmlhbGl6ZS50b2FzdCgnVGVhbSAnICsgdm0ubmV3VGVhbS5zaG9ydE5hbWUgKyAnIGNyZWF0ZWQuJywgNDAwMCk7XG4gICAgICAgICAgICAgICAgdm0ubmV3VGVhbSA9IG51bGw7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRldGVybWluZVBvaW50cyhpbnB1dFNjb3JlRGF0YSwgaW5wdXRJbmRleCkge1xuXG4gICAgICAgICAgICB2YXIgdXNlckdhbWVQb2ludHM7XG5cbiAgICAgICAgICAgIC8vIE5vIHBvc2l0aW9uIGdyZWF0ZXIgdGhhbiAxMiBnZXRzIHBvaW50cy5cbiAgICAgICAgICAgIGlmIChpbnB1dEluZGV4ID4gMTEpIHtcbiAgICAgICAgICAgICAgICB1c2VyR2FtZVBvaW50cyA9IDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJHYW1lUG9pbnRzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB1c2VyR2FtZVBvaW50cyA9IDEyIC0gaW5wdXRJbmRleDtcblxuICAgICAgICAgICAgdmFyIHNvcnRlZFNjb3JlcyA9ICRmaWx0ZXIoJ29yZGVyQnknKSh2bS5nYW1lU2NvcmVzLCAnLXNjb3JlJyk7XG5cbiAgICAgICAgICAgIC8vIEFtIEkgdGllZCB3aXRoIHRoZSBwZXJzb24gYWJvdmUgbWU/IElmIHNvLCBtYXRjaCB0aGVpciBwb2ludHMuXG4gICAgICAgICAgICBpZiAoc29ydGVkU2NvcmVzW2lucHV0SW5kZXggLSAxXSkge1xuXG4gICAgICAgICAgICAgICAgaWYgKHNvcnRlZFNjb3Jlc1tpbnB1dEluZGV4IC0gMV0uc2NvcmUgPT09IGlucHV0U2NvcmVEYXRhLnNjb3JlKSB7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJHYW1lUG9pbnRzICs9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdXNlckdhbWVQb2ludHM7XG5cbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBnZXRGaXJzdFBsYWNlU2NvcmVzKCkge1xuXG4gICAgICAgICAgICB2bS5nYW1lTGlzdC5mb3JFYWNoKGZ1bmN0aW9uKGdhbWUpIHtcblxuICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSBzY29yZXMsIGdldCB0aGUgdG9wIG9uZS5cbiAgICAgICAgICAgICAgICBpZiAoZ2FtZS5zY29yZXMpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgc2NvcmVzQXJyYXkgPSAkLm1hcChnYW1lLnNjb3JlcywgZnVuY3Rpb24oZWwpIHsgcmV0dXJuIGVsOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgc2NvcmVzQXJyYXkgPSAkZmlsdGVyKCdvcmRlckJ5Jykoc2NvcmVzQXJyYXksICctc2NvcmUnKTtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZS5maXJzdFNjb3JlID0gc2NvcmVzQXJyYXlbMF07XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnb1RvUGxheWVyUHJvZmlsZShpbnB1dFBsYXllcikge1xuXG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNwbGF5ZXJNb2RhbCcpLmNsb3NlTW9kYWwoKTtcbiAgICAgICAgICAgICRzdGF0ZS5nbygncHJvZmlsZScsIHt1c2VybmFtZTogaW5wdXRQbGF5ZXJ9KTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaW5pdEV2ZW50KCkge1xuXG4gICAgICAgICAgICBldmVudFNlcnZpY2UuZ2V0RXZlbnRQcm9wZXJ0aWVzKHZtLmV2ZW50TmFtZSkudGhlbihmdW5jdGlvbihwcm9taXNlUmVzb2x1dGlvbikge1xuXG4gICAgICAgICAgICAgICAgdm0uZXZlbnRQcm9wZXJ0aWVzID0gcHJvbWlzZVJlc29sdXRpb247XG5cbiAgICAgICAgICAgICAgICB2bS5ldmVudFByb3BlcnRpZXMuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhpcyBpcyBhIG11bHRpZ2FtZSBldmVudCwgZ2V0IHRoZSBkYXRhIG5lZWRlZCBmb3IgbXVsdGlnYW1lIGNvbXBvbmVudHMuXG4gICAgICAgICAgICAgICAgICAgIGlmICh2bS5ldmVudFByb3BlcnRpZXMuZm9ybWF0Lm11bHRpR2FtZSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudFNlcnZpY2UuZ2V0R2FtZXNMaXN0KHZtLmV2ZW50TmFtZSkudGhlbihmdW5jdGlvbihwcm9taXNlUmVzb2x1dGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLmdhbWVMaXN0ID0gcHJvbWlzZVJlc29sdXRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0Rmlyc3RQbGFjZVNjb3JlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50U2VydmljZS5nZXRNdWx0aUdhbWVMZWFkZXJib2FyZCh2bS5ldmVudE5hbWUpLnRoZW4oZnVuY3Rpb24ocHJvbWlzZVJlc29sdXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGVhZGVyYm9hcmQgPSBwcm9taXNlUmVzb2x1dGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5sZWFkZXJib2FyZExlbmd0aCA9IGxlYWRlcmJvYXJkLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5zdW1tYXJpemVkTGVhZGVyYm9hcmQgPSBsZWFkZXJib2FyZC5zbGljZSgwLCA4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgaXMgYSBzaW5nbGUgZ2FtZSBldmVudCwgZ2V0IHRoZSBkYXRhIG5lZWRlZCBmb3Igc2luZ2xlIGdhbWUgY29tcG9uZW50cy5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRTZXJ2aWNlLmdldFNpbmdsZUdhbWVMZWFkZXJib2FyZCh2bS5ldmVudE5hbWUpLnRoZW4oZnVuY3Rpb24ocHJvbWlzZVJlc29sdXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGVhZGVyYm9hcmQgPSBwcm9taXNlUmVzb2x1dGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5sZWFkZXJib2FyZExlbmd0aCA9IGxlYWRlcmJvYXJkLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5zdW1tYXJpemVkTGVhZGVyYm9hcmQgPSBsZWFkZXJib2FyZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIGlzIGEgdGVhbS1iYXNlZCBldmVudCwgZ2V0IHRoZSBkYXRhIG5lZWRlZCBmb3IgdGVhbSBldmVudCBjb21wb25lbnRzLlxuICAgICAgICAgICAgICAgICAgICBpZiAodm0uZXZlbnRQcm9wZXJ0aWVzLmZvcm1hdC50ZWFtQmFzZWQpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGVhbVNlcnZpY2UuZ2V0VGVhbUxpc3Qodm0uZXZlbnROYW1lKS50aGVuKGZ1bmN0aW9uIHRoZW4obW9kZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS50ZWFtTGlzdCA9IG1vZGVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBwcm9maWxlU2VydmljZS5nZXRBdmF0YXJEYXRhKCkudGhlbihmdW5jdGlvbihwcm9taXNlUmVzb2x1dGlvbikge1xuICAgICAgICAgICAgICAgIHZtLmF2YXRhckRhdGEgPSBwcm9taXNlUmVzb2x1dGlvbjtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvcGVuQmFkZ2VzTW9kYWwoKSB7XG5cbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2JhZGdlc01vZGFsJykub3Blbk1vZGFsKCk7XG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNiYWRnZXNNb2RhbENvbnRlbnQnKS5zY3JvbGxUb3AoMCk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9wZW5HYW1lTW9kYWwoaW5wdXRHYW1lTmFtZSkge1xuXG4gICAgICAgICAgICB2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZJUkVCQVNFREFUQS5GQlVSTCk7XG5cbiAgICAgICAgICAgIGV2ZW50U2VydmljZS5nZXRHYW1lRGF0YSh2bS5ldmVudE5hbWUsIGlucHV0R2FtZU5hbWUpLnRoZW4oZnVuY3Rpb24ocHJvbWlzZVJlc29sdXRpb24pIHtcbiAgICAgICAgICAgICAgICB2bS5nYW1lRGF0YSA9IHByb21pc2VSZXNvbHV0aW9uO1xuXG4gICAgICAgICAgICAgICAgdm0uZ2FtZVNjb3JlcyA9ICRmaXJlYmFzZUFycmF5KFxuICAgICAgICAgICAgICAgICAgICByZWZcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZCgnY29udGVzdHMnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNoaWxkKHZtLmV2ZW50TmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZCgnYWN0aXZlR2FtZXMnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNoaWxkKHZtLmdhbWVEYXRhLiRpZClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZCgnc2NvcmVzJylcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2dhbWVNb2RhbCcpLm9wZW5Nb2RhbCgpO1xuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjZ2FtZU1vZGFsQ29udGVudCcpLnNjcm9sbFRvcCgwKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gb3Blbk1hbmFnZW1lbnRNb2RhbCgpIHtcblxuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjbWFuYWdlbWVudE1vZGFsJykub3Blbk1vZGFsKCk7XG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNtYW5hZ2VtZW50TW9kYWxDb250ZW50Jykuc2Nyb2xsVG9wKDApO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvcGVuTXVsdGlHYW1lTGVhZGVyYm9hcmRNb2RhbCgpIHtcblxuICAgICAgICAgICAgZXZlbnRTZXJ2aWNlLmdldE11bHRpR2FtZUxlYWRlcmJvYXJkKHZtLmV2ZW50TmFtZSkudGhlbihmdW5jdGlvbihwcm9taXNlUmVzb2x1dGlvbikge1xuICAgICAgICAgICAgICAgIHZtLmNvbXBsZXRlTGVhZGVyYm9hcmQgPSBwcm9taXNlUmVzb2x1dGlvbjtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNtdWx0aUdhbWVMZWFkZXJib2FyZE1vZGFsJykub3Blbk1vZGFsKCk7XG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNtdWx0aUdhbWVMZWFkZXJib2FyZE1vZGFsQ29udGVudCcpLnNjcm9sbFRvcCgwKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gb3BlblBsYXllck1vZGFsKGlucHV0UGxheWVyKSB7XG5cbiAgICAgICAgICAgIHZtLmZvY3VzUGxheWVyID0gaW5wdXRQbGF5ZXI7XG5cbiAgICAgICAgICAgIGV2ZW50U2VydmljZS5nZXRQbGF5ZXJTY29yZXModm0uZXZlbnROYW1lLCB2bS5nYW1lTGlzdCwgdm0uZm9jdXNQbGF5ZXIpLnRoZW4oZnVuY3Rpb24ocHJvbWlzZVJlc29sdXRpb24pIHtcbiAgICAgICAgICAgICAgICB2bS5wbGF5ZXJTY29yZXMgPSBwcm9taXNlUmVzb2x1dGlvbjtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNwbGF5ZXJNb2RhbCcpLm9wZW5Nb2RhbCgpO1xuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjcGxheWVyTW9kYWxDb250ZW50Jykuc2Nyb2xsVG9wKDApO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvcGVuR2FtZU1vZGFsRnJvbVBsYXllck1vZGFsKGlucHV0R2FtZSkge1xuXG4gICAgICAgICAgICBjbG9zZVBsYXllck1vZGFsKCk7XG5cbiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIG9wZW5HYW1lTW9kYWwoaW5wdXRHYW1lKTtcbiAgICAgICAgICAgIH0sIDQ1MCk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9wZW5QbGF5ZXJNb2RhbEZyb21HYW1lTW9kYWwoaW5wdXRQbGF5ZXIpIHtcblxuICAgICAgICAgICAgY2xvc2VHYW1lTW9kYWwoKTtcblxuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgb3BlblBsYXllck1vZGFsKGlucHV0UGxheWVyKTtcbiAgICAgICAgICAgIH0sIDQ1MCk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9wZW5QbGF5ZXJNb2RhbEZyb21MZWFkZXJib2FyZE1vZGFsKGlucHV0UGxheWVyKSB7XG5cbiAgICAgICAgICAgIGNsb3NlTXVsdGlHYW1lTGVhZGVyYm9hcmRNb2RhbCgpO1xuXG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBvcGVuUGxheWVyTW9kYWwoaW5wdXRQbGF5ZXIpO1xuICAgICAgICAgICAgfSwgNDUwKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gb3BlblJ1bGVzTW9kYWwoKSB7XG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNydWxlc01vZGFsJykub3Blbk1vZGFsKCk7XG4gICAgICAgIH1cblxuICAgIH1cblxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuc2VydmljZSgndGVhbVNlcnZpY2UnLCB0ZWFtU2VydmljZSk7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiB0ZWFtU2VydmljZSgkcSwgJGZpcmViYXNlQXJyYXksICRmaXJlYmFzZU9iamVjdCwgRklSRUJBU0VEQVRBKSB7XG5cbiAgICBcdHRoaXMuY3JlYXRlVGVhbSA9IGNyZWF0ZVRlYW07XG4gICAgICAgIHRoaXMuZ2V0VGVhbUxpc3QgPSBnZXRUZWFtTGlzdDtcblxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlVGVhbShpbnB1dEV2ZW50LCBpbnB1dE5ld1RlYW1Qcm9wZXJ0aWVzKSB7XG5cbiAgICAgICAgXHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgIFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuICAgICAgICBcdHZhciB0ZWFtUG9vbCA9ICRmaXJlYmFzZU9iamVjdChcbiAgICAgICAgXHRcdHJlZlxuICAgICAgICBcdFx0XHQuY2hpbGQoJ2NvbnRlc3RzJylcbiAgICAgICAgXHRcdFx0LmNoaWxkKGlucHV0RXZlbnQpXG4gICAgICAgIFx0XHRcdC5jaGlsZCgndGVhbVBvb2wnKVxuICAgICAgICBcdCk7XG5cbiAgICAgICAgXHR0ZWFtUG9vbC4kbG9hZGVkKCkudGhlbihmdW5jdGlvbigpIHtcblxuICAgICAgICBcdFx0dGVhbVBvb2xbaW5wdXROZXdUZWFtUHJvcGVydGllcy5zaG9ydE5hbWVdID0ge1xuICAgICAgICBcdFx0XHRmdWxsTmFtZTogaW5wdXROZXdUZWFtUHJvcGVydGllcy5mb3JtYWxOYW1lXG4gICAgICAgIFx0XHR9O1xuICAgICAgICBcdFx0dGVhbVBvb2wuJHNhdmUoKTtcbiAgICAgICAgXHRcdGRlZmVycmVkLnJlc29sdmUoKTtcblxuICAgICAgICBcdH0pO1xuXG4gICAgICAgIFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFRlYW1MaXN0KGlucHV0RXZlbnQpIHtcblxuICAgICAgICBcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICAgXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZJUkVCQVNFREFUQS5GQlVSTCk7XG4gICAgICAgIFx0dmFyIHRlYW1MaXN0ID0gJGZpcmViYXNlQXJyYXkoXG4gICAgICAgIFx0XHRyZWZcbiAgICAgICAgXHRcdFx0LmNoaWxkKCdjb250ZXN0cycpXG4gICAgICAgIFx0XHRcdC5jaGlsZChpbnB1dEV2ZW50KVxuICAgICAgICBcdFx0XHQuY2hpbGQoJ3RlYW1Qb29sJylcbiAgICAgICAgXHQpO1xuXG4gICAgICAgIFx0dGVhbUxpc3QuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIFx0XHRkZWZlcnJlZC5yZXNvbHZlKHRlYW1MaXN0KTtcbiAgICAgICAgXHR9KTtcblxuICAgICAgICBcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgICAgIH1cbiAgICB9XG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdIZWFkZXJDb250cm9sbGVyJywgSGVhZGVyQ29udHJvbGxlcik7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBIZWFkZXJDb250cm9sbGVyKCR0aW1lb3V0LCAkcm9vdFNjb3BlLCAkd2luZG93LCAkc3RhdGUsIGF1dGhTZXJ2aWNlKSB7XG5cbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJy5kcm9wZG93bi1idXR0b24nKVxuICAgICAgICAgICAgICAgIC5kcm9wZG93bih7XG4gICAgICAgICAgICAgICAgICAgIGluRHVyYXRpb246IDMwMCxcbiAgICAgICAgICAgICAgICAgICAgb3V0RHVyYXRpb246IDIyNSxcbiAgICAgICAgICAgICAgICAgICAgY29uc3RyYWluX3dpZHRoOiBmYWxzZSwgLy8gRG9lcyBub3QgY2hhbmdlIHdpZHRoIG9mIGRyb3Bkb3duIHRvIHRoYXQgb2YgdGhlIGFjdGl2YXRvclxuICAgICAgICAgICAgICAgICAgICBob3ZlcjogZmFsc2UsIC8vIEFjdGl2YXRlIG9uIGhvdmVyXG4gICAgICAgICAgICAgICAgICAgIGd1dHRlcjogLTExNCwgLy8gU3BhY2luZyBmcm9tIGVkZ2VcbiAgICAgICAgICAgICAgICAgICAgYmVsb3dPcmlnaW46IHRydWUgLy8gRGlzcGxheXMgZHJvcGRvd24gYmVsb3cgdGhlIGJ1dHRvblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCA0MDApO1xuXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICAgIHZtLmxvZ091dCA9IGxvZ091dDtcblxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgIGZ1bmN0aW9uIGxvZ091dCgpIHtcbiAgICAgICAgICAgIGF1dGhTZXJ2aWNlLmxvZ091dCgpO1xuICAgICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgfVxuXG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuZGlyZWN0aXZlKCd2Z0dhbWVzTGlzdCcsIHZnR2FtZXNMaXN0KTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIHZnR2FtZXNMaXN0ICgpIHtcbiAgICAgICAgLy8gVXNhZ2U6XG4gICAgICAgIC8vXG4gICAgICAgIC8vIENyZWF0ZXM6XG4gICAgICAgIC8vXG4gICAgICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICAgICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgICAgICAgY29udHJvbGxlcjogR2FtZXNMaXN0Q29udHJvbGxlcixcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIGxpbms6IGxpbmssXG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcuL2FwcC9ldmVudENvbXBvbmVudHMvZ2FtZXNMaXN0LmRpcmVjdGl2ZS5odG0nLFxuICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIFx0ZGF0YTogJz0nLFxuICAgICAgICAgICAgXHRvcGVuR2FtZUZ1bmN0aW9uOiAnPSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgICAgICBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gR2FtZXNMaXN0Q29udHJvbGxlcigpIHtcbiAgICBcdHZhciB2bSA9IHRoaXM7XG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuZGlyZWN0aXZlKCd2Z011bHRpR2FtZUxlYWRlcmJvYXJkJywgdmdNdWx0aUdhbWVMZWFkZXJib2FyZCk7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiB2Z011bHRpR2FtZUxlYWRlcmJvYXJkICgpIHtcbiAgICAgICAgLy8gVXNhZ2U6XG4gICAgICAgIC8vXG4gICAgICAgIC8vIENyZWF0ZXM6XG4gICAgICAgIC8vXG4gICAgICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICAgICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgICAgICAgY29udHJvbGxlcjogTXVsdGlHYW1lTGVhZGVyYm9hcmRDb250cm9sbGVyLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgbGluazogbGluayxcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy4vYXBwL2V2ZW50Q29tcG9uZW50cy9tdWx0aUdhbWVMZWFkZXJib2FyZC5kaXJlY3RpdmUuaHRtJyxcbiAgICAgICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICBcdGRhdGE6ICc9JyxcbiAgICAgICAgICAgICAgICBhdmF0YXJEYXRhOiAnPScsXG4gICAgICAgICAgICBcdGNvbXBsZXRlTGVuZ3RoOiAnPScsXG4gICAgICAgICAgICBcdG9wZW5QbGF5ZXJGdW5jdGlvbjogJz0nLFxuICAgICAgICAgICAgICAgIG9wZW5MZWFkZXJib2FyZEZ1bmN0aW9uOiAnPSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgICAgICBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gTXVsdGlHYW1lTGVhZGVyYm9hcmRDb250cm9sbGVyKCkge1xuICAgIFx0dmFyIHZtID0gdGhpcztcbiAgICB9XG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ3ZnU2luZ2xlR2FtZUxlYWRlcmJvYXJkJywgdmdTaW5nbGVHYW1lTGVhZGVyYm9hcmQpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gdmdTaW5nbGVHYW1lTGVhZGVyYm9hcmQgKCkge1xuICAgICAgICAvLyBVc2FnZTpcbiAgICAgICAgLy9cbiAgICAgICAgLy8gQ3JlYXRlczpcbiAgICAgICAgLy9cbiAgICAgICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBTaW5nbGVHYW1lTGVhZGVyYm9hcmRDb250cm9sbGVyLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgbGluazogbGluayxcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy4vYXBwL2V2ZW50Q29tcG9uZW50cy9zaW5nbGVHYW1lTGVhZGVyYm9hcmQuZGlyZWN0aXZlLmh0bScsXG4gICAgICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgXHRkYXRhOiAnPScsXG4gICAgICAgICAgICAgICAgYXZhdGFyRGF0YTogJz0nLFxuICAgICAgICAgICAgXHRjb21wbGV0ZUxlbmd0aDogJz0nLFxuICAgICAgICAgICAgICAgIG9wZW5MZWFkZXJib2FyZEZ1bmN0aW9uOiAnPSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgICAgICBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gU2luZ2xlR2FtZUxlYWRlcmJvYXJkQ29udHJvbGxlcigpIHtcbiAgICBcdHZhciB2bSA9IHRoaXM7XG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuZGlyZWN0aXZlKCd2Z1N0aWNreU1lc3NhZ2UnLCB2Z1N0aWNreU1lc3NhZ2UpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gdmdTdGlja3lNZXNzYWdlICgpIHtcbiAgICAgICAgLy8gVXNhZ2U6XG4gICAgICAgIC8vXG4gICAgICAgIC8vIENyZWF0ZXM6XG4gICAgICAgIC8vXG4gICAgICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICAgICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgICAgICAgY29udHJvbGxlcjogU3RpY2t5TWVzc2FnZUNvbnRyb2xsZXIsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICBsaW5rOiBsaW5rLFxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnLi9hcHAvZXZlbnRDb21wb25lbnRzL3N0aWNreU1lc3NhZ2UuZGlyZWN0aXZlLmh0bScsXG4gICAgICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgXHRwcm9wZXJ0aWVzOiAnPSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgICAgICBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gU3RpY2t5TWVzc2FnZUNvbnRyb2xsZXIoJHRpbWVvdXQpIHtcbiAgICBcdHZhciB2bSA9IHRoaXM7XG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuZmlsdGVyKCdvcmRlck9iamVjdEJ5Jywgb3JkZXJPYmplY3RCeSk7XG5cbiAgICBmdW5jdGlvbiBvcmRlck9iamVjdEJ5KCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oaXRlbXMsIGZpZWxkLCByZXZlcnNlKSB7XG4gICAgICAgICAgICB2YXIgZmlsdGVyZWQgPSBbXTtcblxuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGl0ZW1zLCBmdW5jdGlvbihpdGVtLCBrZXkpIHtcbiAgICAgICAgICAgICAgICBpdGVtLmtleSA9IGtleTtcbiAgICAgICAgICAgICAgICBmaWx0ZXJlZC5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZpbHRlcmVkLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKGFbZmllbGRdID4gYltmaWVsZF0gPyAxIDogLTEpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmKHJldmVyc2UpIGZpbHRlcmVkLnJldmVyc2UoKTtcblxuICAgICAgICAgICAgcmV0dXJuIGZpbHRlcmVkO1xuICAgICAgICB9O1xuICAgIH1cblxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuY29udHJvbGxlcignQXZhdGFyQ29udHJvbGxlcicsIEF2YXRhckNvbnRyb2xsZXIpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gQXZhdGFyQ29udHJvbGxlcigkcm9vdFNjb3BlLCAkc3RhdGUsICRzdGF0ZVBhcmFtcywgJHRpbWVvdXQsIFVwbG9hZCwgaW1ndXIsIHByb2ZpbGVTZXJ2aWNlKSB7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICB2bS5pbml0QXZhdGFyID0gaW5pdEF2YXRhcjtcbiAgICAgICAgdm0udXBsb2FkQXZhdGFyID0gdXBsb2FkQXZhdGFyO1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICBmdW5jdGlvbiBpbml0QXZhdGFyKCkge1xuICAgICAgICBcdHByb2ZpbGVTZXJ2aWNlLmdldEF2YXRhckRhdGEoKS50aGVuKGZ1bmN0aW9uIHRoZW4obW9kZWwpIHtcbiAgICAgICAgICAgICAgICB2bS5hdmF0YXJEYXRhID0gbW9kZWw7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcHJvZmlsZVNlcnZpY2UuZ2V0QmFkZ2VzRGF0YSgkcm9vdFNjb3BlLnByb2ZpbGUudXNlck5hbWUpLnRoZW4oZnVuY3Rpb24gdGhlbihtb2RlbCkge1xuICAgICAgICAgICAgICAgICAgICB2bS5iYWRnZXNEYXRhID0gbW9kZWw7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdXBsb2FkQXZhdGFyKCkge1xuXG4gICAgICAgIFx0dm0uZGlzYWJsZUJ1dHRvbiA9IHRydWU7XG5cbiAgICAgICAgXHRpbWd1ci5zZXRBUElLZXkoJ0NsaWVudC1JRCBmNTNkNmQ1ODMzYjA3YmMnKTtcbiAgICAgICAgXHRpbWd1ci51cGxvYWQodm0uZmlsZSkudGhlbihmdW5jdGlvbiB0aGVuKG1vZGVsKSB7XG4gICAgICAgIFx0XHRwcm9maWxlU2VydmljZS5zYXZlQXZhdGFyTGluayhtb2RlbFswXS5saW5rLCAkcm9vdFNjb3BlLnByb2ZpbGUudXNlck5hbWUpO1xuICAgICAgICBcdFx0TWF0ZXJpYWxpemUudG9hc3QoJ1lvdXIgYXZhdGFyIHdhcyB1cGxvYWRlZCcsIDQwMDApO1xuXG4gICAgICAgIFx0XHQkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgXHRcdFx0JHN0YXRlLmdvKCdob21lJyk7XG4gICAgICAgIFx0XHR9LCAxMDAwKTtcbiAgICAgICAgXHR9KTtcblxuICAgICAgICB9XG5cbiAgICB9XG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdDaGFuZ2VQYXNzd29yZENvbnRyb2xsZXInLCBDaGFuZ2VQYXNzd29yZENvbnRyb2xsZXIpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gQ2hhbmdlUGFzc3dvcmRDb250cm9sbGVyKCRzY29wZSwgJHRpbWVvdXQsICRzdGF0ZSwgQXV0aFdyYXBwZXIpIHtcblxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBcdGFuZ3VsYXIuZWxlbWVudCgnI2NvbnRlbnRWaWV3JylcbiAgICAgICAgICAgICAgICAuY3NzKCdvcGFjaXR5JywgJzEnKVxuICAgICAgICAgICAgICAgIC5jc3MoJ3Bvc2l0aW9uJywgJ2luaGVyaXQnKTtcbiAgICAgICAgfSwgMzEwKTtcblxuICAgICAgICB2bS5zdWJtaXRDaGFuZ2VQYXNzd29yZCA9IHN1Ym1pdENoYW5nZVBhc3N3b3JkO1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgIGZ1bmN0aW9uIHN1Ym1pdENoYW5nZVBhc3N3b3JkKCkge1xuXG4gICAgICAgICAgICBpZiAoJHNjb3BlLnB3Q2hhbmdlRm9ybS4kdmFsaWQpIHtcblxuICAgICAgICAgICAgICAgIEF1dGhXcmFwcGVyLiRjaGFuZ2VQYXNzd29yZCh7XG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiBBdXRoV3JhcHBlci4kZ2V0QXV0aCgpLnBhc3N3b3JkLmVtYWlsLFxuICAgICAgICAgICAgICAgICAgICBvbGRQYXNzd29yZDogdm0uaW5wdXRDdXJyZW50UGFzc3dvcmQsXG4gICAgICAgICAgICAgICAgICAgIG5ld1Bhc3N3b3JkOiB2bS5pbnB1dE5ld1Bhc3N3b3JkXG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICBNYXRlcmlhbGl6ZS50b2FzdCgnWW91ciBwYXNzd29yZCB3YXMgY2hhbmdlZC4nLCA0MDAwKTtcbiAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgMTAwMCk7XG5cbiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLmNvZGUgPT09ICdJTlZBTElEX1BBU1NXT1JEJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdm0uc2hvd0NoYW5nZVBhc3N3b3JkTWVzc2FnZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfTtcblxuICAgIH1cblxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuY29udHJvbGxlcignSG9tZUNvbnRyb2xsZXInLCBIb21lQ29udHJvbGxlcik7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBIb21lQ29udHJvbGxlcigkc2NvcGUsICR0aW1lb3V0KSB7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgXHRhbmd1bGFyLmVsZW1lbnQoJyNjb250ZW50VmlldycpXG4gICAgICAgICAgICAgICAgLmNzcygnb3BhY2l0eScsICcxJylcbiAgICAgICAgICAgICAgICAuY3NzKCdwb3NpdGlvbicsICdpbmhlcml0Jyk7XG4gICAgICAgIH0sIDMxMCk7XG5cbiAgICB9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0xlYWRlcmJvYXJkQ29udHJvbGxlcicsIExlYWRlcmJvYXJkQ29udHJvbGxlcik7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBMZWFkZXJib2FyZENvbnRyb2xsZXIoJHEsICR0aW1lb3V0LCAkZmlyZWJhc2VBcnJheSwgcHJvZmlsZVNlcnZpY2UsIEZJUkVCQVNFREFUQSkge1xuXG4gICAgXHR2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBcdGFuZ3VsYXIuZWxlbWVudCgnI2NvbnRlbnRWaWV3JylcbiAgICAgICAgICAgICAgICAuY3NzKCdvcGFjaXR5JywgJzEnKVxuICAgICAgICAgICAgICAgIC5jc3MoJ3Bvc2l0aW9uJywgJ2luaGVyaXQnKTtcbiAgICAgICAgfSwgMzEwKTtcblxuICAgICAgICBnZXRQcm9maWxlU2NvcmVzKCkudGhlbihmdW5jdGlvbiB0aGVuKG1vZGVsKSB7XG4gICAgICAgIFx0dm0ucHJvZmlsZVNjb3JlRGF0YSA9IG1vZGVsO1xuICAgICAgICB9KTtcblxuICAgICAgICBwcm9maWxlU2VydmljZS5nZXRBdmF0YXJEYXRhKCkudGhlbihmdW5jdGlvbiB0aGVuKG1vZGVsKSB7XG4gICAgICAgIFx0dm0uYXZhdGFyRGF0YSA9IG1vZGVsO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0UHJvZmlsZVNjb3JlcygpIHtcblxuICAgICAgICBcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgIFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuXG4gICAgICAgIFx0dmFyIHByb2ZpbGVTY29yZURhdGEgPSAkZmlyZWJhc2VBcnJheShcbiAgICAgICAgXHRcdHJlZlxuICAgICAgICBcdFx0XHQuY2hpbGQoJ2JhZGdlcycpXG4gICAgICAgIFx0KTtcblxuICAgICAgICBcdHByb2ZpbGVTY29yZURhdGEuJGxvYWRlZChmdW5jdGlvbigpIHtcbiAgICAgICAgXHRcdGRlZmVycmVkLnJlc29sdmUocHJvZmlsZVNjb3JlRGF0YSk7XG4gICAgICAgIFx0fSk7XG5cbiAgICAgICAgXHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblxuICAgICAgICB9XG5cbiAgICB9XG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdQcm9maWxlQ29udHJvbGxlcicsIFByb2ZpbGVDb250cm9sbGVyKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIFByb2ZpbGVDb250cm9sbGVyKCRzY29wZSwgJHN0YXRlUGFyYW1zLCAkcSwgJHRpbWVvdXQsICRzdGF0ZSwgJGZpcmViYXNlQXJyYXksIGF1dGhTZXJ2aWNlLCBwcm9maWxlU2VydmljZSwgZXZlbnRTZXJ2aWNlKSB7XG5cbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIFx0YW5ndWxhci5lbGVtZW50KCcjY29udGVudFZpZXcnKVxuICAgICAgICBcdCAgICAuY3NzKCdvcGFjaXR5JywgJzEnKVxuICAgICAgICBcdCAgICAuY3NzKCdwb3NpdGlvbicsICdpbmhlcml0Jyk7XG5cbiAgICAgICAgICAgICQoJy5jb2xsYXBzaWJsZScpLmNvbGxhcHNpYmxlKHtcbiAgICAgICAgICAgICAgICBhY2NvcmRpb246IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCA0MTApO1xuXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgdm0uaW5pdFByb2ZpbGUgPSBpbml0UHJvZmlsZTtcblxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICBmdW5jdGlvbiBpbml0UHJvZmlsZSgpIHtcbiAgICAgICAgICAgIHByb2ZpbGVTZXJ2aWNlLmdldFVzZXJEYXRhKCRzdGF0ZVBhcmFtcy51c2VybmFtZSkudGhlbihmdW5jdGlvbihwcm9taXNlUmVzb2x1dGlvbikge1xuICAgICAgICAgICAgICAgIHZtLnByb2ZpbGVEYXRhID0gcHJvbWlzZVJlc29sdXRpb247XG5cbiAgICAgICAgICAgICAgICBwcm9maWxlU2VydmljZS5nZXRUb3VybmFtZW50SGlzdG9yeSh2bS5wcm9maWxlRGF0YSkudGhlbihmdW5jdGlvbihwcm9taXNlUmVzb2x1dGlvbikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG91cm5hbWVudEhpc3RvcnlEYXRhID0gcHJvbWlzZVJlc29sdXRpb247XG4gICAgICAgICAgICAgICAgICAgIHZtLmV2ZW50U3RhbmRpbmdzID0gcHJvZmlsZVNlcnZpY2UuZ2V0VG91cm5hbWVudFN0YW5kaW5ncyh0b3VybmFtZW50SGlzdG9yeURhdGEsICRzdGF0ZVBhcmFtcy51c2VybmFtZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcHJvZmlsZVNlcnZpY2UuZ2V0QXZhdGFyRGF0YSgpLnRoZW4oZnVuY3Rpb24ocHJvbWlzZVJlc29sdXRpb24pIHtcbiAgICAgICAgICAgICAgICB2bS5hdmF0YXJEYXRhID0gcHJvbWlzZVJlc29sdXRpb247XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcHJvZmlsZVNlcnZpY2UuZ2V0QmFkZ2VzRGF0YSgkc3RhdGVQYXJhbXMudXNlcm5hbWUpLnRoZW4oZnVuY3Rpb24gdGhlbihtb2RlbCkge1xuICAgICAgICAgICAgICAgIHZtLmJhZGdlc0RhdGEgPSBtb2RlbDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICB9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJylcbiAgICAgICAgLnNlcnZpY2UoJ3Byb2ZpbGVTZXJ2aWNlJywgcHJvZmlsZVNlcnZpY2UpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gcHJvZmlsZVNlcnZpY2UoJHJvb3RTY29wZSwgJHEsICRmaXJlYmFzZUFycmF5LCAkZmlyZWJhc2VPYmplY3QsIGV2ZW50U2VydmljZSwgRklSRUJBU0VEQVRBKSB7XG5cbiAgICBcdHRoaXMuZ2V0QXZhdGFyRGF0YSA9IGdldEF2YXRhckRhdGE7XG4gICAgICAgIHRoaXMuZ2V0QmFkZ2VzRGF0YSA9IGdldEJhZGdlc0RhdGE7XG4gICAgXHR0aGlzLmdldFRvdXJuYW1lbnRIaXN0b3J5ID0gZ2V0VG91cm5hbWVudEhpc3Rvcnk7XG4gICAgICAgIHRoaXMuZ2V0VG91cm5hbWVudFN0YW5kaW5ncyA9IGdldFRvdXJuYW1lbnRTdGFuZGluZ3M7XG4gICAgICAgIHRoaXMuZ2V0VXNlckRhdGEgPSBnZXRVc2VyRGF0YTtcbiAgICAgICAgdGhpcy5zYXZlQXZhdGFyTGluayA9IHNhdmVBdmF0YXJMaW5rO1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICBmdW5jdGlvbiBnZXRBdmF0YXJEYXRhKCkge1xuXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuXG4gICAgICAgICAgICB2YXIgYXZhdGFyRGF0YSA9ICRmaXJlYmFzZU9iamVjdChcbiAgICAgICAgICAgICAgICByZWZcbiAgICAgICAgICAgICAgICAgICAgLmNoaWxkKCdhdmF0YXJzJylcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF2YXRhckRhdGEuJGxvYWRlZChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGF2YXRhckRhdGEpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRCYWRnZXNEYXRhKGlucHV0VXNlcikge1xuXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuXG4gICAgICAgICAgICB2YXIgYmFkZ2VzRGF0YSA9ICRmaXJlYmFzZU9iamVjdChcbiAgICAgICAgICAgICAgICByZWZcbiAgICAgICAgICAgICAgICAgICAgLmNoaWxkKCdiYWRnZXMnKVxuICAgICAgICAgICAgICAgICAgICAuY2hpbGQoaW5wdXRVc2VyKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYmFkZ2VzRGF0YS4kbG9hZGVkKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoYmFkZ2VzRGF0YSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFRvdXJuYW1lbnRIaXN0b3J5KGlucHV0VXNlckRhdGEpIHtcblxuICAgICAgICBcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgIFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuXG4gICAgICAgIFx0Ly8gTG9vcCB0aHJvdWdoIGVhY2ggZXZlbnQgaW4gdGhlIHBsZWRnZWRUbyBvYmplY3QuXG4gICAgICAgIFx0dmFyIGV2ZW50c0FycmF5ID0gW107XG4gICAgICAgIFx0Zm9yICh2YXIga2V5IGluIGlucHV0VXNlckRhdGEucGxlZGdlZFRvKSB7XG4gICAgICAgIFx0XHRldmVudHNBcnJheS5wdXNoKGtleSk7XG4gICAgICAgIFx0fVxuXG4gICAgICAgIFx0ZGVmZXJyZWQucmVzb2x2ZShldmVudHNBcnJheSk7XG5cbiAgICAgICAgXHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0VG91cm5hbWVudFN0YW5kaW5ncyhpbnB1dFRvdXJuYW1lbnRIaXN0b3J5LCBpbnB1dFVzZXIpIHtcblxuICAgICAgICAgICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuXG4gICAgICAgICAgICAvLyBMb29wIHRocm91Z2ggZWFjaCBldmVudCBpbiB0aGUgdXNlcidzIGhpc3RvcnkuXG4gICAgICAgICAgICB2YXIgZXZlbnRTdGFuZGluZ3MgPSBbXTtcbiAgICAgICAgICAgIGlucHV0VG91cm5hbWVudEhpc3RvcnkuZm9yRWFjaChmdW5jdGlvbihldmVudCkge1xuXG4gICAgICAgICAgICAgICAgZXZlbnRTZXJ2aWNlLmdldEV2ZW50UHJvcGVydGllcyhldmVudCkudGhlbihmdW5jdGlvbihldmVudFByb3BlcnRpZXMpIHtcblxuICAgICAgICAgICAgICAgICAgICBldmVudFByb3BlcnRpZXMuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGNvbmNsdWRlZCwgZ2V0IHRoZSB1c2VyJ3Mgc3RhbmRpbmcuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnRQcm9wZXJ0aWVzLnN0YXRlID09PSAnY29uY2x1ZGVkJykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV2ZW50U3RhbmRpbmdEYXRhID0gJGZpcmViYXNlT2JqZWN0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZCgnc3RhbmRpbmdzJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZChldmVudClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRTdGFuZGluZ0RhdGEuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50U3RhbmRpbmdEYXRhW2lucHV0VXNlcl0pIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRTdGFuZGluZ3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZXZlbnRQcm9wZXJ0aWVzLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlbWllcjogZXZlbnRQcm9wZXJ0aWVzLnByZW1pZXIgPyB0cnVlIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG9ydE5hbWU6IGV2ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiAnY29uY2x1ZGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogZXZlbnRQcm9wZXJ0aWVzLmNvbG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBldmVudFN0YW5kaW5nRGF0YVtpbnB1dFVzZXJdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudFN0YW5kaW5ncy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBldmVudFByb3BlcnRpZXMubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVtaWVyOiBldmVudFByb3BlcnRpZXMucHJlbWllciA/IHRydWUgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0TmFtZTogZXZlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6ICdjb25jbHVkZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBldmVudFByb3BlcnRpZXMuY29sb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudFByb3BlcnRpZXMuc3RhdGUgPT09ICdpbnByb2dyZXNzJyB8fCBldmVudFByb3BlcnRpZXMuc3RhdGUgPT09ICd1cGNvbWluZycpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50U3RhbmRpbmdzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBldmVudFByb3BlcnRpZXMubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlbWllcjogZXZlbnRQcm9wZXJ0aWVzLnByZW1pZXIgPyB0cnVlIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnROYW1lOiBldmVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IGV2ZW50UHJvcGVydGllcy5jb2xvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6IGV2ZW50UHJvcGVydGllcy5zdGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBldmVudFN0YW5kaW5ncztcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0VXNlckRhdGEoaW5wdXRVc2VyKSB7XG5cbiAgICAgICAgXHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICBcdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRklSRUJBU0VEQVRBLkZCVVJMKTtcblxuICAgICAgICBcdHZhciB1c2Vyc0RhdGEgPSAkZmlyZWJhc2VBcnJheShcbiAgICAgICAgXHRcdHJlZlxuICAgICAgICBcdFx0XHQuY2hpbGQoJ3VzZXJzJylcbiAgICAgICAgXHQpO1xuXG4gICAgICAgIFx0dXNlcnNEYXRhLiRsb2FkZWQoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgXHRcdHVzZXJzRGF0YS5mb3JFYWNoKGZ1bmN0aW9uKHVzZXIpIHtcbiAgICAgICAgXHRcdFx0aWYgKHVzZXIudXNlck5hbWUgPT09IGlucHV0VXNlcikge1xuICAgICAgICBcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUodXNlcik7XG4gICAgICAgIFx0XHRcdH1cbiAgICAgICAgXHRcdH0pO1xuXG4gICAgICAgIFx0fSk7XG5cbiAgICAgICAgXHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblxuICAgICAgICB9XG5cbiAgICAgICAgLy8gRklYTUU6IE1ha2UgdGhpcyBzZXJ2ZXItc2lkZS5cbiAgICAgICAgZnVuY3Rpb24gc2F2ZUF2YXRhckxpbmsoaW5wdXRMaW5rLCBpbnB1dFVzZXIpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuXG4gICAgICAgICAgICB2YXIgYXZhdGFyRGF0YSA9ICRmaXJlYmFzZU9iamVjdChcbiAgICAgICAgICAgICAgICByZWZcbiAgICAgICAgICAgICAgICAgICAgLmNoaWxkKCdhdmF0YXJzJylcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF2YXRhckRhdGEuJGxvYWRlZChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBhdmF0YXJEYXRhW2lucHV0VXNlcl0gPSBpbnB1dExpbms7XG4gICAgICAgICAgICAgICAgYXZhdGFyRGF0YS4kc2F2ZSgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuY29udHJvbGxlcignUmVnQ29udHJvbGxlcicsIFJlZ0NvbnRyb2xsZXIpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gUmVnQ29udHJvbGxlcigkc2NvcGUsICRyb290U2NvcGUsICR0aW1lb3V0LCAkd2luZG93LCAkc3RhdGUsICRmaXJlYmFzZU9iamVjdCwgYXV0aFNlcnZpY2UsIEF1dGhXcmFwcGVyKSB7XG5cbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIFx0YW5ndWxhci5lbGVtZW50KCcjY29udGVudFZpZXcnKVxuICAgICAgICBcdCAgICAuY3NzKCdvcGFjaXR5JywgJzEnKVxuICAgICAgICBcdCAgICAuY3NzKCdwb3NpdGlvbicsICdpbmhlcml0Jyk7XG4gICAgICAgIH0sIDQxMCk7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICB2bS5sb2dpblRvQWNjb3VudCA9IGxvZ2luVG9BY2NvdW50O1xuICAgICAgICB2bS5wYXNzd29yZFJlc2V0ID0gcGFzc3dvcmRSZXNldDtcbiAgICAgICAgdm0uc3VibWl0TmV3QWNjb3VudCA9IHN1Ym1pdE5ld0FjY291bnQ7XG5cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgZnVuY3Rpb24gbG9naW5Ub0FjY291bnQoKSB7XG5cbiAgICAgICAgICAgIGF1dGhTZXJ2aWNlLmxvZ2luVG9BY2NvdW50KHZtLmxvZ2luRW1haWwsIHZtLmxvZ2luUGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24ocHJvbWlzZVJlc29sdXRpb24pIHtcblxuICAgICAgICAgICAgICAgIHZtLnNob3dJbnZhbGlkVXNlckVycm9yID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdm0uc2hvd0ludmFsaWRQYXNzd29yZEVycm9yID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBpZiAocHJvbWlzZVJlc29sdXRpb24gPT09ICdMT0dJTl9TVUNDRVNTJykge1xuXG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnaG9tZScpO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwcm9taXNlUmVzb2x1dGlvbiA9PT0gJ0lOVkFMSURfVVNFUicpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0uc2hvd0ludmFsaWRVc2VyRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwcm9taXNlUmVzb2x1dGlvbiA9PT0gJ0lOVkFMSURfUEFTU1dPUkQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLnNob3dJbnZhbGlkUGFzc3dvcmRFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcGFzc3dvcmRSZXNldCgpIHtcblxuICAgICAgICAgICAgaWYgKCF2bS5sb2dpbkVtYWlsKSB7XG4gICAgICAgICAgICAgICAgdm0uc2hvd1Bhc3N3b3JkUmVzZXRFbWFpbE1lc3NhZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgQXV0aFdyYXBwZXIuJHJlc2V0UGFzc3dvcmQoe1xuICAgICAgICAgICAgICAgIGVtYWlsOiB2bS5sb2dpbkVtYWlsXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZtLnNob3dQYXNzd29yZFJlc2V0RW1haWxNZXNzYWdlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgTWF0ZXJpYWxpemUudG9hc3QoJ0EgcGFzc3dvcmQgcmVzZXQgZW1haWwgaGFzIGJlZW4gc2VudCB0byAnICsgdm0ubG9naW5FbWFpbCArICcuJywgNDAwMCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc3VibWl0TmV3QWNjb3VudCgpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRG9lcyB0aGUgdXNlciBleGlzdD8gSWYgc28sIHNob3cgYW4gZXJyb3IgbWVzc2FnZS5cbiAgICAgICAgICAgIGF1dGhTZXJ2aWNlLmNoZWNrSWZVc2VyRXhpc3RzKHZtLm5ld1VzZXJuYW1lKS50aGVuKGZ1bmN0aW9uKHVzZXJFeGlzdHMpIHtcblxuICAgICAgICAgICAgICAgIHZtLnNob3dEdXBsaWNhdGVVc2VyRXJyb3IgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB2bS5zaG93RW1haWxUYWtlbkVycm9yID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBpZiAodXNlckV4aXN0cykge1xuXG4gICAgICAgICAgICAgICAgICAgIHZtLnNob3dEdXBsaWNhdGVVc2VyRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAvLyBUcnkgdG8gY3JlYXRlIHRoZSBuZXcgdXNlci5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIGF1dGhTZXJ2aWNlLmNyZWF0ZU5ld1VzZXIodm0ubmV3RW1haWwsIHZtLm5ld1Bhc3N3b3JkLCB2bS5uZXdVc2VybmFtZSkudGhlbihmdW5jdGlvbihwcm9taXNlUmVzb2x1dGlvbikge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvbWlzZVJlc29sdXRpb24gPT09ICdFTUFJTF9UQUtFTicpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLnNob3dFbWFpbFRha2VuRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwcm9taXNlUmVzb2x1dGlvbiA9PT0gJ0FDQ09VTlRfQ1JFQVRFRCcpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygncHJvZmlsZScsIHt1c2VybmFtZTogdm0ubmV3VXNlcm5hbWV9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG5cbiAgICB9XG5cbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9