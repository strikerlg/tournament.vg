!function(){"use strict";angular.module("vg.app",["ngAnimate","ui.router","firebase","validation.match","ordinal","ngFileUpload","ngImgur"])}(),function(){"use strict";function e(e,t){t.otherwise("/"),e.state("home",{url:"/",templateUrl:"app/home/home.htm",controller:"HomeController as home"}).state("registerOrLogin",{url:"/registerOrLogin",templateUrl:"/app/home/reg.htm",controller:"RegController as reg"}).state("profile",{url:"/profile/:username",templateUrl:"/app/home/profile.htm",controller:"ProfileController as profile"}).state("leaderboard",{url:"/leaderboard",templateUrl:"/app/home/leaderboard.htm",controller:"LeaderboardController as leaderboard"}).state("event",{url:"/event/:eventName/main",templateUrl:"/app/event/main.htm",controller:"EventMainController as event"}).state("customizeAvatar",{url:"/customizeAvatar",templateUrl:"/app/home/avatar.htm",controller:"AvatarController as avatar",resolve:{currentAuth:["AuthWrapper",function(e){return e.$requireAuth()}]}}).state("changePassword",{url:"/changePassword",templateUrl:"/app/home/changePassword.htm",controller:"ChangePasswordController as pwchange",resolve:{currentAuth:["AuthWrapper",function(e){return e.$requireAuth()}]}})}angular.module("vg.app").constant("FIREBASEDATA",{FBURL:"https://wolfscontests.firebaseio.com"}).config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e,t,n,r,o,a){e.$on("$stateChangeError",function(e,t,r,o,a,i){"AUTH_REQUIRED"===i&&n.go("registerOrLogin")}),e.$on("$stateChangeSuccess",function(){if(o.$getAuth()){var t=o.$getAuth(),n=new Firebase(a.FBURL),i=r(n.child("users").child(t.uid));i.$bindTo(e,"profile").then(function(t){e.unbindFunction=t})}})}angular.module("vg.app").run(e),e.$inject=["$rootScope","$location","$state","$firebaseObject","AuthWrapper","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,n,r,o,a){function i(t){var n=e.defer(),r=!1,o=new Firebase(a.FBURL+"/users");return o.once("value",function(e){e.forEach(function(e){e.val().userName===t&&(r=!0)}),n.resolve(r)}),n.promise}function s(t,n,r){var i=e.defer();return o.$createUser({email:t,password:n}).then(function(e){new Firebase(a.FBURL).child("users/"+e.uid).set({userName:r,role:"User"},function(e){return console.error(e),e.code}),new Firebase(a.FBURL).child("avatars").child(r).set("http://api.adorable.io/avatars/42/"+r),o.$authWithPassword({email:t,password:n}).then(function(){i.resolve("ACCOUNT_CREATED")})})["catch"](function(e){console.error(e),"EMAIL_TAKEN"===e.code&&i.resolve(e.code)}),i.promise}function l(t,n){var r=e.defer();return o.$authWithPassword({email:t,password:n}).then(function(e){r.resolve("LOGIN_SUCCESS")})["catch"](function(e){"INVALID_USER"===e.code?r.resolve("INVALID_USER"):"INVALID_PASSWORD"===e.code&&r.resolve("INVALID_PASSWORD")}),r.promise}function c(){o.$unauth(),t.unbindFunction()}this.checkIfUserExists=i,this.createNewUser=s,this.loginToAccount=l,this.logOut=c}angular.module("vg.app").service("authService",e),e.$inject=["$q","$rootScope","$state","$firebaseObject","AuthWrapper","FIREBASEDATA"]}(),function(){"use strict";function e(e,t){var n=new Firebase(t.FBURL);return e(n)}angular.module("vg.app").factory("AuthWrapper",e),e.$inject=["$firebaseAuth","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,n,r,o){function a(e){c(e).then(function(t){var r=new Firebase(o.FBURL),a=n(r.child("standings").child(e));a.$loaded().then(function(){t.forEach(function(e){a[e.key]=e.position}),a.$save()})})}function i(t){var r=e.defer(),a=new Firebase(o.FBURL),i=n(a.child("contests").child(t).child("properties"));return r.resolve(i),r.promise}function s(t,n){{var r=e.defer();new Firebase(o.FBURL)}return l(t).then(function(e){e.forEach(function(e){e.camelName===n&&r.resolve(e)})}),r.promise}function l(t){var n=e.defer(),a=new Firebase(o.FBURL),i=r(a.child("contests").child(t).child("activeGames"));return i.$loaded().then(function(){n.resolve(i)}),n.promise}function c(n){var r=e.defer(),o={};return l(n).then(function(e){var n=e;n.forEach(function(e){if(e.scores){var n=$.map(e.scores,function(e){return e});n=t("orderBy")(n,"-score");for(var r=12,a=0;a<n.length;a++)o[n[a].userName]||(o[n[a].userName]={points:0}),o[n[a].userName].points+=r,r>0&&(r-=1)}}),o=t("orderObjectBy")(o,"points",!0);for(var a=!1,i=0,s=0;s<o.length;s++)if(o[s-1]&&o[s].points&&o[s-1].points)o[s].position=o[s].points===o[s-1].points?o[s-1].position:s+1;else if(0===s)o[s].position=1;else{if(!a){var l=o[s-1].points;o.forEach(function(e){e.points===l&&(i+=1)}),a=!0}o[s].position=o.length+1-i}r.resolve(o)}),r.promise}function u(t){var n=e.defer(),a=new Firebase(o.FBURL),i=r(a.child("contests").child(t).child("scores"));return n.resolve(i),n.promise}function d(n,r,o){var a=e.defer(),i=[];return r.forEach(function(e){if(e.scores){var n=$.map(e.scores,function(e){return e});n=t("orderBy")(n,"-score");for(var r=12,a=0;a<n.length;a++){if(n[a].userName===o){var s=e;s.position=a+1,s.score=n[a].score,s.pointsEarned=r,s.inpUrl=n[a].inpUrl?n[a].inpUrl:null,s.twitchUrl=n[a].twitchUrl?n[a].twitchUrl:null,s.mameVersion=n[a].mameVersion?n[a].mameVersion:null,i.push(s),r=12;break}r>0&&(r-=1)}}}),a.resolve(i),a.promise}this.createMultiGameFinalStandings=a,this.getEventProperties=i,this.getGameData=s,this.getGamesList=l,this.getMultiGameLeaderboard=c,this.getSingleGameLeaderboard=u,this.getPlayerScores=d}angular.module("vg.app").service("eventService",e),e.$inject=["$q","$filter","$firebaseObject","$firebaseArray","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,n,r,o,a,i,s,l,c,u){function d(){angular.element("#gameModal").closeModal()}function m(){angular.element("#multiGameLeaderboardModal").closeModal()}function f(){angular.element("#playerModal").closeModal()}function p(){c.createTeam(D.eventName,D.newTeam).then(function(){Materialize.toast("Team "+D.newTeam.shortName+" created.",4e3),D.newTeam=null})}function h(e,n){var r;if(n>11)return r=0;r=12-n;var o=t("orderBy")(D.gameScores,"-score");return o[n-1]&&o[n-1].score===e.score&&(r+=1),r}function v(){D.gameList.forEach(function(e){if(e.scores){var n=$.map(e.scores,function(e){return e});n=t("orderBy")(n,"-score"),e.firstScore=n[0]}})}function g(e){angular.element("#playerModal").closeModal(),r.go("profile",{username:e})}function b(){o(function(){$(".collapsible").collapsible({accordion:!0}),$("ul.tabs").tabs()},1e3),o(function(){$(".collapsible").collapsible({accordion:!0}),$("ul.tabs").tabs()},3e3),i.getEventProperties(D.eventName).then(function(e){D.eventProperties=e,D.eventProperties.$loaded().then(function(){D.eventProperties.format.multiGame?(i.getGamesList(D.eventName).then(function(e){D.gameList=e,v()}),i.getMultiGameLeaderboard(D.eventName).then(function(e){var t=e;D.leaderboardLength=t.length,D.summarizedLeaderboard=t.slice(0,8)})):i.getSingleGameLeaderboard(D.eventName).then(function(e){var t=e;D.leaderboardLength=t.length,D.summarizedLeaderboard=t}),D.eventProperties.format.teamBased&&c.getTeamList(D.eventName).then(function(e){D.teamList=e})})}),l.getAvatarData().then(function(e){D.avatarData=e})}function w(){angular.element("#badgesModal").openModal(),angular.element("#badgesModalContent").scrollTop(0)}function A(e){var t=new Firebase(u.FBURL);i.getGameData(D.eventName,e).then(function(e){D.gameData=e,D.gameScores=a(t.child("contests").child(D.eventName).child("activeGames").child(D.gameData.$id).child("scores"))}),angular.element("#gameModal").openModal(),angular.element("#gameModalContent").scrollTop(0)}function E(){angular.element("#managementModal").openModal(),angular.element("#managementModalContent").scrollTop(0)}function L(){i.getMultiGameLeaderboard(D.eventName).then(function(e){D.completeLeaderboard=e}),angular.element("#multiGameLeaderboardModal").openModal(),angular.element("#multiGameLeaderboardModalContent").scrollTop(0)}function S(e){D.focusPlayer=e,i.getPlayerScores(D.eventName,D.gameList,D.focusPlayer).then(function(e){D.playerScores=e}),angular.element("#playerModal").openModal(),angular.element("#playerModalContent").scrollTop(0)}function U(e){f(),o(function(){A(e)},450)}function F(e){d(),o(function(){S(e)},450)}function M(e){m(),o(function(){S(e)},450)}function P(){angular.element("#rulesModal").openModal()}var D=this;D.eventName=n.eventName,D.closeGameModal=d,D.closeMultiGameLeaderboardModal=m,D.closePlayerModal=f,D.createTeam=p,D.determinePoints=h,D.getFirstPlaceScores=v,D.goToPlayerProfile=g,D.openBadgesModal=w,D.openGameModal=A,D.openGameModalFromPlayerModal=U,D.openManagementModal=E,D.openMultiGameLeaderboardModal=L,D.openPlayerModal=S,D.openPlayerModalFromGameModal=F,D.openPlayerModalFromLeaderboardModal=M,D.openRulesModal=P,b()}angular.module("vg.app").controller("EventMainController",e),e.$inject=["$scope","$filter","$stateParams","$state","$timeout","$firebaseArray","eventService","authService","profileService","teamService","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,n,r){function o(t,o){var a=e.defer(),i=new Firebase(r.FBURL),s=n(i.child("contests").child(t).child("teamPool"));return s.$loaded().then(function(){s[o.shortName]={fullName:o.formalName},s.$save(),a.resolve()}),a.promise}function a(n){var o=e.defer(),a=new Firebase(r.FBURL),i=t(a.child("contests").child(n).child("teamPool"));return i.$loaded().then(function(){o.resolve(i)}),o.promise}this.createTeam=o,this.getTeamList=a}angular.module("vg.app").service("teamService",e),e.$inject=["$q","$firebaseArray","$firebaseObject","FIREBASEDATA"]}(),function(){"use strict";function e(){function e(e,t,n){}var n={bindToController:!0,controller:t,controllerAs:"vm",link:e,restrict:"E",templateUrl:"./app/eventComponents/gamesList.directive.htm",scope:{data:"=",openGameFunction:"="}};return n}function t(){}angular.module("vg.app").directive("vgGamesList",e)}(),function(){"use strict";function e(){function e(e,t,n){}var n={bindToController:!0,controller:t,controllerAs:"vm",link:e,restrict:"E",templateUrl:"./app/eventComponents/multiGameLeaderboard.directive.htm",scope:{data:"=",avatarData:"=",completeLength:"=",openPlayerFunction:"=",openLeaderboardFunction:"="}};return n}function t(){}angular.module("vg.app").directive("vgMultiGameLeaderboard",e)}(),function(){"use strict";function e(){function e(e,t,n){}var n={bindToController:!0,controller:t,controllerAs:"vm",link:e,restrict:"E",templateUrl:"./app/eventComponents/singleGameLeaderboard.directive.htm",scope:{data:"=",avatarData:"=",completeLength:"=",openLeaderboardFunction:"="}};return n}function t(){}angular.module("vg.app").directive("vgSingleGameLeaderboard",e)}(),function(){"use strict";function e(){function e(e,t,n){}var n={bindToController:!0,controller:t,controllerAs:"vm",link:e,restrict:"E",templateUrl:"./app/eventComponents/stickyMessage.directive.htm",scope:{properties:"="}};return n}function t(e){}angular.module("vg.app").directive("vgStickyMessage",e),t.$inject=["$timeout"]}(),function(){"use strict";function e(e,t,n,r,o){function a(){e(function(){angular.element(".dropdown-button").dropdown({inDuration:300,outDuration:225,constrain_width:!1,hover:!1,gutter:-114,belowOrigin:!0})},400)}function i(){o.logOut(),n.location.reload()}var s=this;s.logOut=i,a()}angular.module("vg.app").controller("HeaderController",e),e.$inject=["$timeout","$rootScope","$window","$state","authService"]}(),function(){"use strict";function e(){return function(e,t,n){var r=[];return angular.forEach(e,function(e,t){e.key=t,r.push(e)}),r.sort(function(e,n){return e[t]>n[t]?1:-1}),n&&r.reverse(),r}}angular.module("vg.app").filter("orderObjectBy",e)}(),function(){"use strict";function e(e,t,n,r,o,a,i){function s(){i.getAvatarData().then(function(e){c.avatarData=e}),r(function(){i.getBadgesData(e.profile.userName).then(function(e){c.badgesData=e})},500)}function l(){c.disableButton=!0,a.setAPIKey("Client-ID f53d6d5833b07bc"),a.upload(c.file).then(function(n){i.saveAvatarLink(n[0].link,e.profile.userName),Materialize.toast("Your avatar was uploaded",4e3),r(function(){t.go("home")},1e3)})}var c=this;c.uploadAvatar=l,s()}angular.module("vg.app").controller("AvatarController",e),e.$inject=["$rootScope","$state","$stateParams","$timeout","Upload","imgur","profileService"]}(),function(){"use strict";function e(e,t,n,r){function o(){t(function(){angular.element("#contentView").css("opacity","1").css("position","inherit")},310)}function a(){e.pwChangeForm.$valid&&r.$changePassword({email:r.$getAuth().password.email,oldPassword:i.inputCurrentPassword,newPassword:i.inputNewPassword}).then(function(){Materialize.toast("Your password was changed.",4e3),t(function(){n.go("home")},1e3)})["catch"](function(e){"INVALID_PASSWORD"===e.code&&(i.showChangePasswordMessage=!0)})}var i=this;i.submitChangePassword=a,o()}angular.module("vg.app").controller("ChangePasswordController",e),e.$inject=["$scope","$timeout","$state","AuthWrapper"]}(),function(){"use strict";function e(e,t){function n(){t(function(){angular.element("#contentView").css("opacity","1").css("position","inherit")},310)}n()}angular.module("vg.app").controller("HomeController",e),e.$inject=["$scope","$timeout"]}(),function(){"use strict";function e(e,t,n,r,o){function a(){t(function(){angular.element("#contentView").css("opacity","1").css("position","inherit")},310),i().then(function(e){s.profileScoreData=e}),r.getAvatarData().then(function(e){s.avatarData=e})}function i(){var t=e.defer(),r=new Firebase(o.FBURL),a=n(r.child("badges"));return a.$loaded(function(){t.resolve(a)}),t.promise}var s=this;a()}angular.module("vg.app").controller("LeaderboardController",e),e.$inject=["$q","$timeout","$firebaseArray","profileService","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,n,r,o,a,i,s,l){function c(){r(function(){angular.element("#contentView").css("opacity","1").css("position","inherit"),$(".collapsible").collapsible({accordion:!0})},410),s.getUserData(t.username).then(function(e){u.profileData=e,s.getTournamentHistory(u.profileData).then(function(e){var n=e;u.eventStandings=s.getTournamentStandings(n,t.username)})}),s.getAvatarData().then(function(e){u.avatarData=e}),s.getBadgesData(t.username).then(function(e){u.badgesData=e})}var u=this;c()}angular.module("vg.app").controller("ProfileController",e),e.$inject=["$scope","$stateParams","$q","$timeout","$state","$firebaseArray","authService","profileService","eventService"]}(),function(){"use strict";function e(e,t,n,r,o,a){function i(){var e=t.defer(),n=new Firebase(a.FBURL),o=r(n.child("avatars"));return o.$loaded(function(){e.resolve(o)}),e.promise}function s(e){var n=t.defer(),o=new Firebase(a.FBURL),i=r(o.child("badges").child(e));return i.$loaded(function(){n.resolve(i)}),n.promise}function l(e){var n=t.defer(),r=(new Firebase(a.FBURL),[]);for(var o in e.pledgedTo)r.push(o);return n.resolve(r),n.promise}function c(e,t){var n=new Firebase(a.FBURL),i=[];return e.forEach(function(e){o.getEventProperties(e).then(function(o){o.$loaded().then(function(){if("concluded"===o.state){var a=r(n.child("standings").child(e));a.$loaded().then(function(){i.push(a[t]?{name:o.name,premier:o.premier?!0:null,shortName:e,state:"concluded",color:o.color,position:a[t]}:{name:o.name,premier:o.premier?!0:null,shortName:e,state:"concluded",color:o.color,position:-1})})}else("inprogress"===o.state||"upcoming"===o.state)&&i.push({name:o.name,premier:o.premier?!0:null,shortName:e,color:o.color,state:o.state})})})}),i}function u(e){var r=t.defer(),o=new Firebase(a.FBURL),i=n(o.child("users"));return i.$loaded(function(){i.forEach(function(t){t.userName===e&&r.resolve(t)})}),r.promise}function d(e,t){var n=new Firebase(a.FBURL),o=r(n.child("avatars"));o.$loaded(function(){o[t]=e,o.$save()})}this.getAvatarData=i,this.getBadgesData=s,this.getTournamentHistory=l,this.getTournamentStandings=c,this.getUserData=u,this.saveAvatarLink=d}angular.module("vg.app").service("profileService",e),e.$inject=["$rootScope","$q","$firebaseArray","$firebaseObject","eventService","FIREBASEDATA"]}(),function(){"use strict";function e(e,t,n,r,o,a,i,s){function l(){n(function(){angular.element("#contentView").css("opacity","1").css("position","inherit")},410)}function c(){i.loginToAccount(m.loginEmail,m.loginPassword).then(function(e){if(m.showInvalidUserError=!1,m.showInvalidPasswordError=!1,"LOGIN_SUCCESS"===e)o.go("home");else{if("INVALID_USER"===e)return void(m.showInvalidUserError=!0);"INVALID_PASSWORD"===e&&(m.showInvalidPasswordError=!0)}})}function u(){return m.loginEmail?void s.$resetPassword({email:m.loginEmail}).then(function(){m.showPasswordResetEmailMessage=!1,Materialize.toast("A password reset email has been sent to "+m.loginEmail+".",4e3)}):void(m.showPasswordResetEmailMessage=!0)}function d(){i.checkIfUserExists(m.newUsername).then(function(e){return m.showDuplicateUserError=!1,m.showEmailTakenError=!1,e?void(m.showDuplicateUserError=!0):void i.createNewUser(m.newEmail,m.newPassword,m.newUsername).then(function(e){return"EMAIL_TAKEN"===e?void(m.showEmailTakenError=!0):void("ACCOUNT_CREATED"===e&&o.go("profile",{username:m.newUsername}))})})}var m=this;m.loginToAccount=c,m.passwordReset=u,m.submitNewAccount=d,l()}angular.module("vg.app").controller("RegController",e),e.$inject=["$scope","$rootScope","$timeout","$window","$state","$firebaseObject","authService","AuthWrapper"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJhcHAuY29uZmlnLmpzIiwiYXBwLm1pbi5qcyIsImFwcC5ydW4uanMiLCJhdXRoL2F1dGguc2VydmljZS5qcyIsImF1dGgvYXV0aHdyYXBwZXIuZmFjdG9yeS5qcyIsImV2ZW50L2V2ZW50LnNlcnZpY2UuanMiLCJldmVudC9tYWluLmNvbnRyb2xsZXIuanMiLCJldmVudC90ZWFtLnNlcnZpY2UuanMiLCJldmVudENvbXBvbmVudHMvZ2FtZXNMaXN0LmRpcmVjdGl2ZS5qcyIsImV2ZW50Q29tcG9uZW50cy9tdWx0aUdhbWVMZWFkZXJib2FyZC5kaXJlY3RpdmUuanMiLCJldmVudENvbXBvbmVudHMvc2luZ2xlR2FtZUxlYWRlcmJvYXJkLmRpcmVjdGl2ZS5qcyIsImV2ZW50Q29tcG9uZW50cy9zdGlja3lNZXNzYWdlLmRpcmVjdGl2ZS5qcyIsImhlYWRlci9oZWFkZXIuY29udHJvbGxlci5qcyIsImhlbHBlcnMvb3JkZXJPYmplY3RCeS5maWx0ZXIuanMiLCJob21lL2F2YXRhci5jb250cm9sbGVyLmpzIiwiaG9tZS9jaGFuZ2VQYXNzd29yZC5jb250cm9sbGVyLmpzIiwiaG9tZS9ob21lLmNvbnRyb2xsZXIuanMiLCJob21lL2xlYWRlcmJvYXJkLmNvbnRyb2xsZXIuanMiLCJob21lL3Byb2ZpbGUuY29udHJvbGxlci5qcyIsImhvbWUvcHJvZmlsZS5zZXJ2aWNlLmpzIiwiaG9tZS9yZWcuY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJvdGhlcndpc2UiLCJzdGF0ZSIsInVybCIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsInJlc29sdmUiLCJjdXJyZW50QXV0aCIsIkF1dGhXcmFwcGVyIiwiJHJlcXVpcmVBdXRoIiwiY29uc3RhbnQiLCJGQlVSTCIsIiRpbmplY3QiLCJydW4iLCIkcm9vdFNjb3BlIiwiJGxvY2F0aW9uIiwiJHN0YXRlIiwiJGZpcmViYXNlT2JqZWN0IiwiRklSRUJBU0VEQVRBIiwiJG9uIiwiZXZlbnQiLCJ0b1N0YXRlIiwidG9QYXJhbXMiLCJmcm9tU3RhdGUiLCJmcm9tUGFyYW1zIiwiZXJyb3IiLCJnbyIsIiRnZXRBdXRoIiwiYXV0aERhdGEiLCJyZWYiLCJGaXJlYmFzZSIsInByb2ZpbGVEYXRhIiwiY2hpbGQiLCJ1aWQiLCIkYmluZFRvIiwidGhlbiIsInVuYmluZCIsInVuYmluZEZ1bmN0aW9uIiwiYXV0aFNlcnZpY2UiLCIkcSIsImNoZWNrSWZVc2VyRXhpc3RzIiwiaW5wdXRVc2VybmFtZSIsImRlZmVycmVkIiwiZGVmZXIiLCJkb2VzVXNlckV4aXN0IiwidXNlcnNSZWYiLCJvbmNlIiwiZGF0YVNuYXBzaG90IiwiZm9yRWFjaCIsInVzZXIiLCJ2YWwiLCJ1c2VyTmFtZSIsInByb21pc2UiLCJjcmVhdGVOZXdVc2VyIiwiaW5wdXRFbWFpbCIsImlucHV0UGFzc3dvcmQiLCIkY3JlYXRlVXNlciIsImVtYWlsIiwicGFzc3dvcmQiLCJ1c2VyRGF0YSIsInNldCIsInJvbGUiLCJlcnJvckRhdGEiLCJjb25zb2xlIiwiY29kZSIsIiRhdXRoV2l0aFBhc3N3b3JkIiwibG9naW5Ub0FjY291bnQiLCJsb2dPdXQiLCIkdW5hdXRoIiwidGhpcyIsInNlcnZpY2UiLCIkZmlyZWJhc2VBdXRoIiwiZmFjdG9yeSIsImV2ZW50U2VydmljZSIsIiRmaWx0ZXIiLCIkZmlyZWJhc2VBcnJheSIsImNyZWF0ZU11bHRpR2FtZUZpbmFsU3RhbmRpbmdzIiwiaW5wdXRFdmVudCIsImdldE11bHRpR2FtZUxlYWRlcmJvYXJkIiwibW9kZWwiLCJpbnB1dEV2ZW50U3RhbmRpbmdzIiwiJGxvYWRlZCIsInN0YW5kaW5nIiwia2V5IiwicG9zaXRpb24iLCIkc2F2ZSIsImdldEV2ZW50UHJvcGVydGllcyIsImV2ZW50UHJvcGVydGllcyIsImdldEdhbWVEYXRhIiwiaW5wdXRHYW1lIiwiZ2V0R2FtZXNMaXN0IiwiZ2FtZXNMaXN0IiwiZ2FtZSIsImNhbWVsTmFtZSIsInBsYXllclBvaW50cyIsInNjb3JlcyIsInNjb3Jlc0FycmF5IiwiJCIsIm1hcCIsImVsIiwidG90YWxBd2FyZCIsImkiLCJsZW5ndGgiLCJwb2ludHMiLCJoYXZlQm90dG9tU2NvcmVyc0Zsb29yIiwiZmxvb3JSYW5nZSIsImdldFNjb3JlQ291bnRPZiIsInBvaW50c0RhdGEiLCJnZXRTaW5nbGVHYW1lTGVhZGVyYm9hcmQiLCJsZWFkZXJib2FyZERhdGEiLCJnZXRQbGF5ZXJTY29yZXMiLCJpbnB1dEdhbWVzTGlzdCIsImlucHV0UGxheWVyIiwiZGlzcGxheVNjb3JlcyIsIm5ld1Njb3JlT2JqZWN0Iiwic2NvcmUiLCJwb2ludHNFYXJuZWQiLCJpbnBVcmwiLCJ0d2l0Y2hVcmwiLCJtYW1lVmVyc2lvbiIsInB1c2giLCJFdmVudE1haW5Db250cm9sbGVyIiwiJHNjb3BlIiwiJHN0YXRlUGFyYW1zIiwiJHRpbWVvdXQiLCJwcm9maWxlU2VydmljZSIsInRlYW1TZXJ2aWNlIiwiY2xvc2VHYW1lTW9kYWwiLCJlbGVtZW50IiwiY2xvc2VNb2RhbCIsImNsb3NlTXVsdGlHYW1lTGVhZGVyYm9hcmRNb2RhbCIsImNsb3NlUGxheWVyTW9kYWwiLCJjcmVhdGVUZWFtIiwidm0iLCJldmVudE5hbWUiLCJuZXdUZWFtIiwiTWF0ZXJpYWxpemUiLCJ0b2FzdCIsInNob3J0TmFtZSIsImRldGVybWluZVBvaW50cyIsImlucHV0U2NvcmVEYXRhIiwiaW5wdXRJbmRleCIsInVzZXJHYW1lUG9pbnRzIiwic29ydGVkU2NvcmVzIiwiZ2FtZVNjb3JlcyIsImdldEZpcnN0UGxhY2VTY29yZXMiLCJnYW1lTGlzdCIsImZpcnN0U2NvcmUiLCJnb1RvUGxheWVyUHJvZmlsZSIsInVzZXJuYW1lIiwiaW5pdEV2ZW50IiwiY29sbGFwc2libGUiLCJhY2NvcmRpb24iLCJ0YWJzIiwiZm9ybWF0IiwibXVsdGlHYW1lIiwibGVhZGVyYm9hcmQiLCJsZWFkZXJib2FyZExlbmd0aCIsInN1bW1hcml6ZWRMZWFkZXJib2FyZCIsInNsaWNlIiwidGVhbUJhc2VkIiwiZ2V0VGVhbUxpc3QiLCJ0ZWFtTGlzdCIsImdldEF2YXRhckRhdGEiLCJhdmF0YXJEYXRhIiwib3BlbkJhZGdlc01vZGFsIiwib3Blbk1vZGFsIiwic2Nyb2xsVG9wIiwib3BlbkdhbWVNb2RhbCIsImlucHV0R2FtZU5hbWUiLCJnYW1lRGF0YSIsIiRpZCIsIm9wZW5NYW5hZ2VtZW50TW9kYWwiLCJvcGVuTXVsdGlHYW1lTGVhZGVyYm9hcmRNb2RhbCIsImNvbXBsZXRlTGVhZGVyYm9hcmQiLCJvcGVuUGxheWVyTW9kYWwiLCJmb2N1c1BsYXllciIsInBsYXllclNjb3JlcyIsIm9wZW5HYW1lTW9kYWxGcm9tUGxheWVyTW9kYWwiLCJvcGVuUGxheWVyTW9kYWxGcm9tR2FtZU1vZGFsIiwib3BlblBsYXllck1vZGFsRnJvbUxlYWRlcmJvYXJkTW9kYWwiLCJvcGVuUnVsZXNNb2RhbCIsImlucHV0TmV3VGVhbVByb3BlcnRpZXMiLCJ0ZWFtUG9vbCIsImZ1bGxOYW1lIiwiZm9ybWFsTmFtZSIsInZnR2FtZXNMaXN0IiwibGluayIsInNjb3BlIiwiYXR0cnMiLCJkaXJlY3RpdmUiLCJiaW5kVG9Db250cm9sbGVyIiwiR2FtZXNMaXN0Q29udHJvbGxlciIsImNvbnRyb2xsZXJBcyIsInJlc3RyaWN0IiwiZGF0YSIsIm9wZW5HYW1lRnVuY3Rpb24iLCJ2Z011bHRpR2FtZUxlYWRlcmJvYXJkIiwiTXVsdGlHYW1lTGVhZGVyYm9hcmRDb250cm9sbGVyIiwiY29tcGxldGVMZW5ndGgiLCJvcGVuUGxheWVyRnVuY3Rpb24iLCJvcGVuTGVhZGVyYm9hcmRGdW5jdGlvbiIsInZnU2luZ2xlR2FtZUxlYWRlcmJvYXJkIiwiU2luZ2xlR2FtZUxlYWRlcmJvYXJkQ29udHJvbGxlciIsInZnU3RpY2t5TWVzc2FnZSIsIlN0aWNreU1lc3NhZ2VDb250cm9sbGVyIiwicHJvcGVydGllcyIsIkhlYWRlckNvbnRyb2xsZXIiLCIkd2luZG93IiwiYWN0aXZhdGUiLCJkcm9wZG93biIsImluRHVyYXRpb24iLCJvdXREdXJhdGlvbiIsImNvbnN0cmFpbl93aWR0aCIsImhvdmVyIiwiZ3V0dGVyIiwiYmVsb3dPcmlnaW4iLCJsb2NhdGlvbiIsInJlbG9hZCIsIm9yZGVyT2JqZWN0QnkiLCJpdGVtcyIsImZpZWxkIiwicmV2ZXJzZSIsImZpbHRlcmVkIiwiaXRlbSIsInNvcnQiLCJhIiwiYiIsImZpbHRlciIsIkF2YXRhckNvbnRyb2xsZXIiLCJVcGxvYWQiLCJpbWd1ciIsImdldEJhZGdlc0RhdGEiLCJwcm9maWxlIiwiYmFkZ2VzRGF0YSIsInVwbG9hZEF2YXRhciIsImRpc2FibGVCdXR0b24iLCJzZXRBUElLZXkiLCJ1cGxvYWQiLCJmaWxlIiwic2F2ZUF2YXRhckxpbmsiLCJDaGFuZ2VQYXNzd29yZENvbnRyb2xsZXIiLCJjc3MiLCJzdWJtaXRDaGFuZ2VQYXNzd29yZCIsInB3Q2hhbmdlRm9ybSIsIiR2YWxpZCIsIiRjaGFuZ2VQYXNzd29yZCIsIm9sZFBhc3N3b3JkIiwiaW5wdXRDdXJyZW50UGFzc3dvcmQiLCJuZXdQYXNzd29yZCIsImlucHV0TmV3UGFzc3dvcmQiLCJzaG93Q2hhbmdlUGFzc3dvcmRNZXNzYWdlIiwiSG9tZUNvbnRyb2xsZXIiLCJMZWFkZXJib2FyZENvbnRyb2xsZXIiLCJnZXRQcm9maWxlU2NvcmVzIiwicHJvZmlsZVNjb3JlRGF0YSIsIlByb2ZpbGVDb250cm9sbGVyIiwiZ2V0VXNlckRhdGEiLCJnZXRUb3VybmFtZW50SGlzdG9yeSIsInRvdXJuYW1lbnRIaXN0b3J5RGF0YSIsImV2ZW50U3RhbmRpbmdzIiwiZ2V0VG91cm5hbWVudFN0YW5kaW5ncyIsImlucHV0VXNlciIsImlucHV0VXNlckRhdGEiLCJldmVudHNBcnJheSIsInBsZWRnZWRUbyIsImlucHV0VG91cm5hbWVudEhpc3RvcnkiLCJldmVudFN0YW5kaW5nRGF0YSIsIm5hbWUiLCJwcmVtaWVyIiwiY29sb3IiLCJ1c2Vyc0RhdGEiLCJpbnB1dExpbmsiLCJSZWdDb250cm9sbGVyIiwibG9naW5FbWFpbCIsImxvZ2luUGFzc3dvcmQiLCJzaG93SW52YWxpZFVzZXJFcnJvciIsInNob3dJbnZhbGlkUGFzc3dvcmRFcnJvciIsInBhc3N3b3JkUmVzZXQiLCIkcmVzZXRQYXNzd29yZCIsInNob3dQYXNzd29yZFJlc2V0RW1haWxNZXNzYWdlIiwic3VibWl0TmV3QWNjb3VudCIsIm5ld1VzZXJuYW1lIiwidXNlckV4aXN0cyIsInNob3dEdXBsaWNhdGVVc2VyRXJyb3IiLCJzaG93RW1haWxUYWtlbkVycm9yIiwibmV3RW1haWwiXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0EsWUFFQUEsU0FDQUMsT0FBQSxVQUVBLFlBR0EsWUFDQSxXQUNBLG1CQUNBLFVBQ0EsZUFDQSxlQ2RBLFdBQ0EsWUFVQSxTQUFBQyxHQUFBQyxFQUFBQyxHQUdBQSxFQUFBQyxVQUFBLEtBRUFGLEVBQ0FHLE1BQUEsUUFDQUMsSUFBQSxJQUNBQyxZQUFBLG9CQUNBQyxXQUFBLDJCQUdBSCxNQUFBLG1CQUNBQyxJQUFBLG1CQUNBQyxZQUFBLG9CQUNBQyxXQUFBLHlCQUdBSCxNQUFBLFdBQ0FDLElBQUEscUJBQ0FDLFlBQUEsd0JBQ0FDLFdBQUEsaUNBR0FILE1BQUEsZUFDQUMsSUFBQSxlQUNBQyxZQUFBLDRCQUNBQyxXQUFBLHlDQUdBSCxNQUFBLFNBQ0FDLElBQUEseUJBQ0FDLFlBQUEsc0JBQ0FDLFdBQUEsaUNBR0FILE1BQUEsbUJBQ0FDLElBQUEsbUJBQ0FDLFlBQUEsdUJBQ0FDLFdBQUEsNkJBRUFDLFNBQ0FDLGFBQUEsY0FBQSxTQUFBQyxHQUNBLE1BQUFBLEdBQUFDLG9CQUtBUCxNQUFBLGtCQUNBQyxJQUFBLGtCQUNBQyxZQUFBLCtCQUNBQyxXQUFBLHVDQUVBQyxTQUNBQyxhQUFBLGNBQUEsU0FBQUMsR0FDQSxNQUFBQSxHQUFBQyxvQkEvREFiLFFBQ0FDLE9BQUEsVUFDQWEsU0FBQSxnQkFDQUMsTUFBQSx5Q0FFQWIsT0FBQUEsR0MrRUNBLEVBQU9jLFNBQVcsaUJBQWtC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RUEsTUFBQWpKLEdBQUE2SSxlQUtBMVEsR0FBQStRLGdCQUNBOU4sTUFBQTRFLEVBQUE2SSxhQUNBL08sS0FBQSxXQUNBa0csRUFBQW1KLCtCQUFBLEVBQ0FoSixZQUFBQyxNQUFBLDJDQUFBSixFQUFBNkksV0FBQSxJQUFBLFlBUkE3SSxFQUFBbUosK0JBQUEsR0FhQSxRQUFBQyxLQUdBblAsRUFBQUUsa0JBQUE2RixFQUFBcUosYUFBQXZQLEtBQUEsU0FBQXdQLEdBS0EsTUFIQXRKLEdBQUF1Six3QkFBQSxFQUNBdkosRUFBQXdKLHFCQUFBLEVBRUFGLE9BRUF0SixFQUFBdUosd0JBQUEsT0FNQXRQLEdBQUFlLGNBQUFnRixFQUFBeUosU0FBQXpKLEVBQUFvSCxZQUFBcEgsRUFBQXFKLGFBQUF2UCxLQUFBLFNBQUE0QyxHQUVBLE1BQUEsZ0JBQUFBLE9BRUFzRCxFQUFBd0oscUJBQUEsUUFHQSxvQkFBQTlNLEdBRUEvRCxFQUFBVSxHQUFBLFdBQUEySCxTQUFBaEIsRUFBQXFKLG1CQWpGQSxHQUFBckosR0FBQWhFLElBRUFnRSxHQUFBbkUsZUFBQUEsRUFDQW1FLEVBQUFpSixjQUFBQSxFQUNBakosRUFBQW9KLGlCQUFBQSxFQUVBeEUsSUFkQXJOLFFBQ0FDLE9BQUEsVUFDQVEsV0FBQSxnQkFBQTRRLEduQndqRElBLEVBQWNyUSxTQUFXLFNBQVUsYUFBYyxXQUFZLFVBQVcsU0FBVSxrQkFBbUIsY0FBZSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJywgW1xuICAgICAgICAgICAgLyogQW5ndWxhciBtb2R1bGVzICovXG4gICAgICAgICAgICAnbmdBbmltYXRlJyxcbiAgICAgICAgICAgIC8qIEFwcCBtb2R1bGVzICovXG4gICAgICAgICAgICAvKiBUaGlyZC1wYXJ0eSBtb2R1bGVzICovXG4gICAgICAgICAgICAndWkucm91dGVyJyxcbiAgICAgICAgICAgICdmaXJlYmFzZScsXG4gICAgICAgICAgICAndmFsaWRhdGlvbi5tYXRjaCcsXG4gICAgICAgICAgICAnb3JkaW5hbCcsXG4gICAgICAgICAgICAnbmdGaWxlVXBsb2FkJyxcbiAgICAgICAgICAgICduZ0ltZ3VyJ1xuICAgICAgICBdKTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ3ZnLmFwcCcpXG5cdFx0LmNvbnN0YW50KCdGSVJFQkFTRURBVEEnLCB7XG5cdFx0XHQnRkJVUkwnOiAnaHR0cHM6Ly93b2xmc2NvbnRlc3RzLmZpcmViYXNlaW8uY29tJ1xuXHRcdH0pXG5cdFx0LmNvbmZpZyhjb25maWcpO1xuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBjb25maWcoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xuXG5cdFx0Ly8gUmVkaXJlY3QgYW55IHVubWF0Y2hlZCBVUkwgdG8gLy5cblx0XHQkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvJyk7XG5cblx0XHQkc3RhdGVQcm92aWRlclxuXHRcdCAgICAuc3RhdGUoJ2hvbWUnLCB7XG5cdFx0ICAgIFx0dXJsOiAnLycsXG5cdFx0ICAgIFx0dGVtcGxhdGVVcmw6ICdhcHAvaG9tZS9ob21lLmh0bScsXG5cdFx0ICAgIFx0Y29udHJvbGxlcjogJ0hvbWVDb250cm9sbGVyIGFzIGhvbWUnXG5cdFx0ICAgIH0pXG5cblx0XHQgICAgLnN0YXRlKCdyZWdpc3Rlck9yTG9naW4nLCB7XG5cdFx0ICAgIFx0dXJsOiAnL3JlZ2lzdGVyT3JMb2dpbicsXG5cdFx0ICAgIFx0dGVtcGxhdGVVcmw6ICcvYXBwL2hvbWUvcmVnLmh0bScsXG5cdFx0ICAgIFx0Y29udHJvbGxlcjogJ1JlZ0NvbnRyb2xsZXIgYXMgcmVnJ1xuXHRcdCAgICB9KVxuXG5cdFx0ICAgIC5zdGF0ZSgncHJvZmlsZScsIHtcblx0XHQgICAgXHR1cmw6ICcvcHJvZmlsZS86dXNlcm5hbWUnLFxuXHRcdCAgICBcdHRlbXBsYXRlVXJsOiAnL2FwcC9ob21lL3Byb2ZpbGUuaHRtJyxcblx0XHQgICAgXHRjb250cm9sbGVyOiAnUHJvZmlsZUNvbnRyb2xsZXIgYXMgcHJvZmlsZSdcblx0XHQgICAgfSlcblxuXHRcdCAgICAuc3RhdGUoJ2xlYWRlcmJvYXJkJywge1xuXHRcdCAgICBcdHVybDogJy9sZWFkZXJib2FyZCcsXG5cdFx0ICAgIFx0dGVtcGxhdGVVcmw6ICcvYXBwL2hvbWUvbGVhZGVyYm9hcmQuaHRtJyxcblx0XHQgICAgXHRjb250cm9sbGVyOiAnTGVhZGVyYm9hcmRDb250cm9sbGVyIGFzIGxlYWRlcmJvYXJkJ1xuXHRcdCAgICB9KVxuXG5cdFx0ICAgIC5zdGF0ZSgnZXZlbnQnLCB7XG5cdFx0ICAgIFx0dXJsOiAnL2V2ZW50LzpldmVudE5hbWUvbWFpbicsXG5cdFx0ICAgIFx0dGVtcGxhdGVVcmw6ICcvYXBwL2V2ZW50L21haW4uaHRtJyxcblx0XHQgICAgXHRjb250cm9sbGVyOiAnRXZlbnRNYWluQ29udHJvbGxlciBhcyBldmVudCdcblx0XHQgICAgfSlcblxuXHRcdCAgICAuc3RhdGUoJ2N1c3RvbWl6ZUF2YXRhcicsIHtcblx0XHQgICAgXHR1cmw6ICcvY3VzdG9taXplQXZhdGFyJyxcblx0XHQgICAgXHR0ZW1wbGF0ZVVybDogJy9hcHAvaG9tZS9hdmF0YXIuaHRtJyxcblx0XHQgICAgXHRjb250cm9sbGVyOiAnQXZhdGFyQ29udHJvbGxlciBhcyBhdmF0YXInLFxuXG5cdFx0ICAgIFx0cmVzb2x2ZToge1xuXHRcdCAgICBcdFx0J2N1cnJlbnRBdXRoJzogWydBdXRoV3JhcHBlcicsIGZ1bmN0aW9uKEF1dGhXcmFwcGVyKSB7XG5cdFx0ICAgIFx0XHRcdHJldHVybiBBdXRoV3JhcHBlci4kcmVxdWlyZUF1dGgoKTtcblx0XHQgICAgXHRcdH1dXG5cdFx0ICAgIFx0fVxuXHRcdCAgICB9KVxuXG5cdFx0ICAgIC5zdGF0ZSgnY2hhbmdlUGFzc3dvcmQnLCB7XG5cdFx0ICAgIFx0dXJsOiAnL2NoYW5nZVBhc3N3b3JkJyxcblx0XHQgICAgXHR0ZW1wbGF0ZVVybDogJy9hcHAvaG9tZS9jaGFuZ2VQYXNzd29yZC5odG0nLFxuXHRcdCAgICBcdGNvbnRyb2xsZXI6ICdDaGFuZ2VQYXNzd29yZENvbnRyb2xsZXIgYXMgcHdjaGFuZ2UnLFxuXG5cdFx0ICAgIFx0cmVzb2x2ZToge1xuXHRcdCAgICBcdFx0J2N1cnJlbnRBdXRoJzogWydBdXRoV3JhcHBlcicsIGZ1bmN0aW9uKEF1dGhXcmFwcGVyKSB7XG5cdFx0ICAgIFx0XHRcdHJldHVybiBBdXRoV3JhcHBlci4kcmVxdWlyZUF1dGgoKTtcblx0XHQgICAgXHRcdH1dXG5cdFx0ICAgIFx0fVxuXHRcdCAgICB9KTtcblx0fVxufSkoKTsiLG51bGwsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5ydW4ocnVuKTtcblxuICAgIGZ1bmN0aW9uIHJ1bigkcm9vdFNjb3BlLCAkbG9jYXRpb24sICRzdGF0ZSwgJGZpcmViYXNlT2JqZWN0LCBBdXRoV3JhcHBlciwgRklSRUJBU0VEQVRBKSB7XG5cbiAgICAgICAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZUVycm9yJywgZnVuY3Rpb24oZXZlbnQsIHRvU3RhdGUsIHRvUGFyYW1zLCBmcm9tU3RhdGUsIGZyb21QYXJhbXMsIGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IgPT09ICdBVVRIX1JFUVVJUkVEJykge1xuICAgICAgICAgICAgICAgICRzdGF0ZS5nbygncmVnaXN0ZXJPckxvZ2luJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdWNjZXNzJywgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIC8vIElmIHVzZXIgaXMgbG9nZ2VkIGluLCBkb3dubG9hZCB0aGVpciBwcm9maWxlIGRhdGEgdG8gYW4gb2JqZWN0IGluICRyb290U2NvcGUuXG4gICAgICAgICAgICBpZiAoQXV0aFdyYXBwZXIuJGdldEF1dGgoKSkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHZhciBhdXRoRGF0YSA9IEF1dGhXcmFwcGVyLiRnZXRBdXRoKCk7XG4gICAgICAgICAgICAgICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuXG4gICAgICAgICAgICAgICAgdmFyIHByb2ZpbGVEYXRhID0gJGZpcmViYXNlT2JqZWN0KHJlZi5jaGlsZCgndXNlcnMnKS5jaGlsZChhdXRoRGF0YS51aWQpKTtcbiAgICAgICAgICAgICAgICBwcm9maWxlRGF0YS4kYmluZFRvKCRyb290U2NvcGUsICdwcm9maWxlJykudGhlbihmdW5jdGlvbih1bmJpbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS51bmJpbmRGdW5jdGlvbiA9IHVuYmluZDtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5zZXJ2aWNlKCdhdXRoU2VydmljZScsIGF1dGhTZXJ2aWNlKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIGF1dGhTZXJ2aWNlKCRxLCAkcm9vdFNjb3BlLCAkc3RhdGUsICRmaXJlYmFzZU9iamVjdCwgQXV0aFdyYXBwZXIsIEZJUkVCQVNFREFUQSkge1xuICAgICAgICBcbiAgICBcdHRoaXMuY2hlY2tJZlVzZXJFeGlzdHMgPSBjaGVja0lmVXNlckV4aXN0cztcbiAgICBcdHRoaXMuY3JlYXRlTmV3VXNlciA9IGNyZWF0ZU5ld1VzZXI7XG4gICAgICAgIHRoaXMubG9naW5Ub0FjY291bnQgPSBsb2dpblRvQWNjb3VudDtcbiAgICAgICAgdGhpcy5sb2dPdXQgPSBsb2dPdXQ7XG5cbiAgICBcdC8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgIFx0ZnVuY3Rpb24gY2hlY2tJZlVzZXJFeGlzdHMoaW5wdXRVc2VybmFtZSkge1xuXG4gICAgXHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICBcdFx0dmFyIGRvZXNVc2VyRXhpc3QgPSBmYWxzZTtcbiAgICBcdFx0dmFyIHVzZXJzUmVmID0gbmV3IEZpcmViYXNlKEZJUkVCQVNFREFUQS5GQlVSTCArICcvdXNlcnMnKTtcblxuICAgIFx0XHR1c2Vyc1JlZi5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKGRhdGFTbmFwc2hvdCkge1xuXG4gICAgXHRcdFx0ZGF0YVNuYXBzaG90LmZvckVhY2goZnVuY3Rpb24odXNlcikge1xuICAgIFx0XHRcdFx0aWYgKHVzZXIudmFsKCkudXNlck5hbWUgPT09IGlucHV0VXNlcm5hbWUpIHtcbiAgICBcdFx0XHRcdFx0ZG9lc1VzZXJFeGlzdCA9IHRydWU7XG4gICAgXHRcdFx0XHR9XG4gICAgXHRcdFx0fSk7XG5cbiAgICBcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKGRvZXNVc2VyRXhpc3QpO1xuXG4gICAgXHRcdH0pO1xuXG4gICAgXHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgXHR9XG5cbiAgICBcdGZ1bmN0aW9uIGNyZWF0ZU5ld1VzZXIoaW5wdXRFbWFpbCwgaW5wdXRQYXNzd29yZCwgaW5wdXRVc2VybmFtZSkge1xuXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgXHRcdEF1dGhXcmFwcGVyLiRjcmVhdGVVc2VyKHtcbiAgICBcdFx0XHRlbWFpbDogaW5wdXRFbWFpbCxcbiAgICBcdFx0XHRwYXNzd29yZDogaW5wdXRQYXNzd29yZFxuICAgIFx0XHR9KS50aGVuKGZ1bmN0aW9uKHVzZXJEYXRhKSB7XG5cbiAgICBcdFx0XHQvLyBDcmVhdGUgYSBkYXRhIGVudHJ5IGZvciB0aGUgbmV3IHVzZXJuYW1lLlxuICAgIFx0XHRcdG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpLmNoaWxkKCd1c2Vycy8nICsgdXNlckRhdGEudWlkKS5zZXQoe1xuXG4gICAgXHRcdFx0XHR1c2VyTmFtZTogaW5wdXRVc2VybmFtZSxcbiAgICBcdFx0XHRcdHJvbGU6ICdVc2VyJ1xuXG4gICAgXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3JEYXRhKSB7XG4gICAgXHRcdFx0XHRjb25zb2xlLmVycm9yKGVycm9yRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvckRhdGEuY29kZTtcbiAgICBcdFx0XHR9KTtcblxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhIGRhdGEgZW50cnkgZm9yIHRoZSB1c2VyJ3MgYXZhdGFyLlxuICAgICAgICAgICAgICAgIG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpLmNoaWxkKCdhdmF0YXJzJykuY2hpbGQoaW5wdXRVc2VybmFtZSkuc2V0KCdodHRwOi8vYXBpLmFkb3JhYmxlLmlvL2F2YXRhcnMvNDIvJyArIGlucHV0VXNlcm5hbWUpO1xuXG4gICAgXHRcdFx0Ly8gTG9nIHRoZSB1c2VyIGluLlxuICAgIFx0XHRcdEF1dGhXcmFwcGVyLiRhdXRoV2l0aFBhc3N3b3JkKHtcbiAgICBcdFx0XHRcdGVtYWlsOiBpbnB1dEVtYWlsLFxuICAgIFx0XHRcdFx0cGFzc3dvcmQ6IGlucHV0UGFzc3dvcmRcbiAgICBcdFx0XHR9KS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCdBQ0NPVU5UX0NSRUFURUQnKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgIFx0XHR9KS5jYXRjaChmdW5jdGlvbihlcnJvckRhdGEpIHtcblxuICAgIFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3JEYXRhKTtcblxuICAgIFx0XHRcdGlmIChlcnJvckRhdGEuY29kZSA9PT0gJ0VNQUlMX1RBS0VOJykge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGVycm9yRGF0YS5jb2RlKTtcbiAgICBcdFx0XHR9XG5cbiAgICBcdFx0fSk7XG5cbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgXHR9XG5cbiAgICAgICAgZnVuY3Rpb24gbG9naW5Ub0FjY291bnQoaW5wdXRFbWFpbCwgaW5wdXRQYXNzd29yZCkge1xuXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICAgICBBdXRoV3JhcHBlci4kYXV0aFdpdGhQYXNzd29yZCh7XG4gICAgICAgICAgICAgICAgZW1haWw6IGlucHV0RW1haWwsXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6IGlucHV0UGFzc3dvcmRcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oYXV0aERhdGEpIHtcblxuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoJ0xPR0lOX1NVQ0NFU1MnKTtcblxuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyb3JEYXRhKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoZXJyb3JEYXRhLmNvZGUgPT09ICdJTlZBTElEX1VTRVInKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoJ0lOVkFMSURfVVNFUicpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3JEYXRhLmNvZGUgPT09ICdJTlZBTElEX1BBU1NXT1JEJykge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCdJTlZBTElEX1BBU1NXT1JEJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGxvZ091dCgpIHtcbiAgICAgICAgICAgIEF1dGhXcmFwcGVyLiR1bmF1dGgoKTtcbiAgICAgICAgICAgICRyb290U2NvcGUudW5iaW5kRnVuY3Rpb24oKTtcbiAgICAgICAgfVxuXG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuZmFjdG9yeSgnQXV0aFdyYXBwZXInLCBBdXRoV3JhcHBlcik7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBBdXRoV3JhcHBlcigkZmlyZWJhc2VBdXRoLCBGSVJFQkFTRURBVEEpIHtcblxuICAgICAgICB2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZJUkVCQVNFREFUQS5GQlVSTCk7XG4gICAgICAgIHJldHVybiAkZmlyZWJhc2VBdXRoKHJlZik7XG5cbiAgICB9XG4gICAgXG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5zZXJ2aWNlKCdldmVudFNlcnZpY2UnLCBldmVudFNlcnZpY2UpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gZXZlbnRTZXJ2aWNlKCRxLCAkZmlsdGVyLCAkZmlyZWJhc2VPYmplY3QsICRmaXJlYmFzZUFycmF5LCBGSVJFQkFTRURBVEEpIHtcblxuICAgICAgICB0aGlzLmNyZWF0ZU11bHRpR2FtZUZpbmFsU3RhbmRpbmdzID0gY3JlYXRlTXVsdGlHYW1lRmluYWxTdGFuZGluZ3M7XG4gICAgICAgIHRoaXMuZ2V0RXZlbnRQcm9wZXJ0aWVzID0gZ2V0RXZlbnRQcm9wZXJ0aWVzO1xuICAgICAgICB0aGlzLmdldEdhbWVEYXRhID0gZ2V0R2FtZURhdGE7XG4gICAgICAgIHRoaXMuZ2V0R2FtZXNMaXN0ID0gZ2V0R2FtZXNMaXN0O1xuICAgICAgICB0aGlzLmdldE11bHRpR2FtZUxlYWRlcmJvYXJkID0gZ2V0TXVsdGlHYW1lTGVhZGVyYm9hcmQ7XG4gICAgICAgIHRoaXMuZ2V0U2luZ2xlR2FtZUxlYWRlcmJvYXJkID0gZ2V0U2luZ2xlR2FtZUxlYWRlcmJvYXJkO1xuICAgICAgICB0aGlzLmdldFBsYXllclNjb3JlcyA9IGdldFBsYXllclNjb3JlcztcblxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlTXVsdGlHYW1lRmluYWxTdGFuZGluZ3MoaW5wdXRFdmVudCkge1xuXG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIGZpbmFsIHN0YW5kaW5ncyBvZiB0aGUgZXZlbnQuXG4gICAgICAgICAgICBnZXRNdWx0aUdhbWVMZWFkZXJib2FyZChpbnB1dEV2ZW50KS50aGVuKGZ1bmN0aW9uIHRoZW4obW9kZWwpIHtcblxuICAgICAgICAgICAgICAgIHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRklSRUJBU0VEQVRBLkZCVVJMKTtcbiAgICAgICAgICAgICAgICB2YXIgaW5wdXRFdmVudFN0YW5kaW5ncyA9ICRmaXJlYmFzZU9iamVjdChcbiAgICAgICAgICAgICAgICAgICAgcmVmXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGQoJ3N0YW5kaW5ncycpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGQoaW5wdXRFdmVudClcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgaW5wdXRFdmVudFN0YW5kaW5ncy4kbG9hZGVkKCkudGhlbihmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICBtb2RlbC5mb3JFYWNoKGZ1bmN0aW9uKHN0YW5kaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dEV2ZW50U3RhbmRpbmdzW3N0YW5kaW5nLmtleV0gPSBzdGFuZGluZy5wb3NpdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaW5wdXRFdmVudFN0YW5kaW5ncy4kc2F2ZSgpO1xuXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRFdmVudFByb3BlcnRpZXMoaW5wdXRFdmVudCkge1xuXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgIFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuICAgICAgICBcdHZhciBldmVudFByb3BlcnRpZXMgPSAkZmlyZWJhc2VPYmplY3QoXG4gICAgICAgIFx0XHRyZWZcbiAgICAgICAgXHRcdFx0LmNoaWxkKCdjb250ZXN0cycpXG4gICAgICAgIFx0XHRcdC5jaGlsZChpbnB1dEV2ZW50KVxuICAgICAgICBcdFx0XHQuY2hpbGQoJ3Byb3BlcnRpZXMnKVxuICAgICAgICBcdCk7XG5cbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZXZlbnRQcm9wZXJ0aWVzKTtcblxuICAgICAgICBcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRHYW1lRGF0YShpbnB1dEV2ZW50LCBpbnB1dEdhbWUpIHtcblxuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICAgICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuXG4gICAgICAgICAgICBnZXRHYW1lc0xpc3QoaW5wdXRFdmVudCkudGhlbihmdW5jdGlvbihnYW1lc0xpc3QpIHtcblxuICAgICAgICAgICAgICAgIGdhbWVzTGlzdC5mb3JFYWNoKGZ1bmN0aW9uKGdhbWUpIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZS5jYW1lbE5hbWUgPT09IGlucHV0R2FtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShnYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRHYW1lc0xpc3QoaW5wdXRFdmVudCkge1xuXG4gICAgICAgIFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICBcdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRklSRUJBU0VEQVRBLkZCVVJMKTtcbiAgICAgICAgXHR2YXIgZ2FtZXNMaXN0ID0gJGZpcmViYXNlQXJyYXkoXG4gICAgICAgIFx0XHRyZWZcbiAgICAgICAgXHRcdFx0LmNoaWxkKCdjb250ZXN0cycpXG4gICAgICAgIFx0XHRcdC5jaGlsZChpbnB1dEV2ZW50KVxuICAgICAgICBcdFx0XHQuY2hpbGQoJ2FjdGl2ZUdhbWVzJylcbiAgICAgICAgXHQpO1xuXG4gICAgICAgIFx0Z2FtZXNMaXN0LiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICBcdFx0ZGVmZXJyZWQucmVzb2x2ZShnYW1lc0xpc3QpO1xuICAgICAgICBcdH0pO1xuXG4gICAgICAgIFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldE11bHRpR2FtZUxlYWRlcmJvYXJkKGlucHV0RXZlbnQpIHtcblxuICAgICAgICBcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICAgXHQvLyBXZSBuZWVkIHRvIGdldCB0aGUgdG9wIDEyIHBsYXllcnMgZm9yIGV2ZXJ5IGdhbWUuXG4gICAgICAgIFx0dmFyIHBsYXllclBvaW50cyA9IHt9O1xuXG4gICAgICAgIFx0Z2V0R2FtZXNMaXN0KGlucHV0RXZlbnQpLnRoZW4oZnVuY3Rpb24gdGhlbihtb2RlbCkge1xuXG4gICAgICAgIFx0XHR2YXIgZ2FtZXNMaXN0ID0gbW9kZWw7XG4gICAgICAgIFx0XHRnYW1lc0xpc3QuZm9yRWFjaChmdW5jdGlvbihnYW1lKSB7XG5cbiAgICAgICAgXHRcdFx0aWYgKGdhbWUuc2NvcmVzKSB7XG5cbiAgICAgICAgXHRcdFx0XHQvLyBDb252ZXJ0IHRoZSBnYW1lJ3Mgc2NvcmVzIHRvIGFuIGFycmF5LlxuICAgICAgICBcdFx0XHRcdHZhciBzY29yZXNBcnJheSA9ICQubWFwKGdhbWUuc2NvcmVzLCBmdW5jdGlvbihlbCkgeyByZXR1cm4gZWw7IH0pO1xuICAgICAgICBcdFx0XHRcdHNjb3Jlc0FycmF5ID0gJGZpbHRlcignb3JkZXJCeScpKHNjb3Jlc0FycmF5LCAnLXNjb3JlJyk7XG5cbiAgICAgICAgXHRcdFx0XHR2YXIgdG90YWxBd2FyZCA9IDEyO1xuXG4gICAgICAgIFx0XHRcdFx0Ly8gSXRlcmF0ZSB0aHJvdWdoIHRoZSB0b3Agc2NvcmVzIGF3YXJkaW5nIHBvaW50cy5cbiAgICAgICAgXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHNjb3Jlc0FycmF5Lmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgXHRcdFx0XHRcdGlmICghcGxheWVyUG9pbnRzW3Njb3Jlc0FycmF5W2ldLnVzZXJOYW1lXSkge1xuICAgICAgICBcdFx0XHRcdFx0XHRwbGF5ZXJQb2ludHNbc2NvcmVzQXJyYXlbaV0udXNlck5hbWVdID0ge1xuICAgICAgICBcdFx0XHRcdFx0XHRcdHBvaW50czogMFxuICAgICAgICBcdFx0XHRcdFx0XHR9O1xuICAgICAgICBcdFx0XHRcdFx0fVxuXG4gICAgICAgIFx0XHRcdFx0XHRwbGF5ZXJQb2ludHNbc2NvcmVzQXJyYXlbaV0udXNlck5hbWVdLnBvaW50cyArPSB0b3RhbEF3YXJkO1xuXG4gICAgICAgIFx0XHRcdFx0XHRpZiAodG90YWxBd2FyZCA+IDApIHtcbiAgICAgICAgXHRcdFx0XHRcdFx0dG90YWxBd2FyZCAtPSAxO1xuICAgICAgICBcdFx0XHRcdFx0fVxuXG4gICAgICAgIFx0XHRcdFx0fVxuXG4gICAgICAgIFx0XHRcdH1cblxuICAgICAgICBcdFx0fSk7XG5cbiAgICAgICAgXHRcdC8vIEZpbmQgYW5kIHJlc29sdmUgdGllcy5cbiAgICAgICAgXHRcdHBsYXllclBvaW50cyA9ICRmaWx0ZXIoJ29yZGVyT2JqZWN0QnknKShwbGF5ZXJQb2ludHMsICdwb2ludHMnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB2YXIgaGF2ZUJvdHRvbVNjb3JlcnNGbG9vciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHZhciBmbG9vclJhbmdlID0gMDtcbiAgICAgICAgXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgcGxheWVyUG9pbnRzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgXHRcdFx0aWYgKHBsYXllclBvaW50c1tpLTFdICYmIHBsYXllclBvaW50c1tpXS5wb2ludHMgJiYgcGxheWVyUG9pbnRzW2ktMV0ucG9pbnRzKSB7XG5cbiAgICAgICAgXHRcdFx0XHRpZiAocGxheWVyUG9pbnRzW2ldLnBvaW50cyA9PT0gcGxheWVyUG9pbnRzW2ktMV0ucG9pbnRzKSB7XG4gICAgICAgIFx0XHRcdFx0XHRwbGF5ZXJQb2ludHNbaV0ucG9zaXRpb24gPSBwbGF5ZXJQb2ludHNbaS0xXS5wb3NpdGlvbjtcbiAgICAgICAgXHRcdFx0XHR9IGVsc2Uge1xuICAgICAgICBcdFx0XHRcdFx0cGxheWVyUG9pbnRzW2ldLnBvc2l0aW9uID0gKGkrMSk7XG4gICAgICAgIFx0XHRcdFx0fVxuXG4gICAgICAgIFx0XHRcdH0gZWxzZSB7XG5cbiAgICAgICAgXHRcdFx0XHRpZiAoaSA9PT0gMCkge1xuICAgICAgICBcdFx0XHRcdFx0cGxheWVyUG9pbnRzW2ldLnBvc2l0aW9uID0gMTtcbiAgICAgICAgXHRcdFx0XHR9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFoYXZlQm90dG9tU2NvcmVyc0Zsb29yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdldCBjb3VudCBvZiBwbGF5ZXJzIGluIG9uZSBwb3NpdGlvbiBoaWdoZXIuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnZXRTY29yZUNvdW50T2YgPSBwbGF5ZXJQb2ludHNbaS0xXS5wb2ludHM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllclBvaW50cy5mb3JFYWNoKGZ1bmN0aW9uKHBvaW50c0RhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb2ludHNEYXRhLnBvaW50cyA9PT0gZ2V0U2NvcmVDb3VudE9mKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxvb3JSYW5nZSArPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXZlQm90dG9tU2NvcmVyc0Zsb29yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgXHRcdFx0XHRcdHBsYXllclBvaW50c1tpXS5wb3NpdGlvbiA9IChwbGF5ZXJQb2ludHMubGVuZ3RoICsgMSkgLSBmbG9vclJhbmdlO1xuICAgICAgICBcdFx0XHRcdH1cblxuICAgICAgICBcdFx0XHR9XG5cbiAgICAgICAgXHRcdH1cblxuICAgICAgICBcdFx0ZGVmZXJyZWQucmVzb2x2ZShwbGF5ZXJQb2ludHMpO1xuXG4gICAgICAgIFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRTaW5nbGVHYW1lTGVhZGVyYm9hcmQoaW5wdXRFdmVudCkge1xuXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICAgICB2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZJUkVCQVNFREFUQS5GQlVSTCk7XG4gICAgICAgICAgICB2YXIgbGVhZGVyYm9hcmREYXRhID0gJGZpcmViYXNlQXJyYXkoXG4gICAgICAgICAgICAgICAgcmVmXG4gICAgICAgICAgICAgICAgICAgIC5jaGlsZCgnY29udGVzdHMnKVxuICAgICAgICAgICAgICAgICAgICAuY2hpbGQoaW5wdXRFdmVudClcbiAgICAgICAgICAgICAgICAgICAgLmNoaWxkKCdzY29yZXMnKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShsZWFkZXJib2FyZERhdGEpO1xuXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0UGxheWVyU2NvcmVzKGlucHV0RXZlbnQsIGlucHV0R2FtZXNMaXN0LCBpbnB1dFBsYXllcikge1xuXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICAgICB2YXIgZGlzcGxheVNjb3JlcyA9IFtdO1xuXG4gICAgICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggZXZlcnkgZ2FtZS5cbiAgICAgICAgICAgIGlucHV0R2FtZXNMaXN0LmZvckVhY2goZnVuY3Rpb24oZ2FtZSkge1xuXG4gICAgICAgICAgICAgICAgaWYgKGdhbWUuc2NvcmVzKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQ29udmVydCB0aGUgZ2FtZSdzIHNjb3JlcyB0byBhbiBhcnJheS5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjb3Jlc0FycmF5ID0gJC5tYXAoZ2FtZS5zY29yZXMsIGZ1bmN0aW9uKGVsKSB7IHJldHVybiBlbDsgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNjb3Jlc0FycmF5ID0gJGZpbHRlcignb3JkZXJCeScpKHNjb3Jlc0FycmF5LCAnLXNjb3JlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvdGFsQXdhcmQgPSAxMjtcblxuICAgICAgICAgICAgICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggdGhlIHNjb3JlcyBzdGFydGluZyBmcm9tIHRoZSB0b3AgYW5kIGZpbmQgb3VyIHVzZXIuXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2NvcmVzQXJyYXkubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm91bmQgb3VyIHBsYXllci5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzY29yZXNBcnJheVtpXS51c2VyTmFtZSA9PT0gaW5wdXRQbGF5ZXIpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdTY29yZU9iamVjdCA9IGdhbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2NvcmVPYmplY3QucG9zaXRpb24gPSBpKzE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2NvcmVPYmplY3Quc2NvcmUgPSBzY29yZXNBcnJheVtpXS5zY29yZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTY29yZU9iamVjdC5wb2ludHNFYXJuZWQgPSB0b3RhbEF3YXJkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Njb3JlT2JqZWN0LmlucFVybCA9IHNjb3Jlc0FycmF5W2ldLmlucFVybCA/IHNjb3Jlc0FycmF5W2ldLmlucFVybCA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2NvcmVPYmplY3QudHdpdGNoVXJsID0gc2NvcmVzQXJyYXlbaV0udHdpdGNoVXJsID8gc2NvcmVzQXJyYXlbaV0udHdpdGNoVXJsIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTY29yZU9iamVjdC5tYW1lVmVyc2lvbiA9IHNjb3Jlc0FycmF5W2ldLm1hbWVWZXJzaW9uID8gc2NvcmVzQXJyYXlbaV0ubWFtZVZlcnNpb24gOiBudWxsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheVNjb3Jlcy5wdXNoKG5ld1Njb3JlT2JqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbEF3YXJkID0gMTI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRvdGFsQXdhcmQgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsQXdhcmQgLT0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkaXNwbGF5U2NvcmVzKTtcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgfVxuXG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuY29udHJvbGxlcignRXZlbnRNYWluQ29udHJvbGxlcicsIEV2ZW50TWFpbkNvbnRyb2xsZXIpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gRXZlbnRNYWluQ29udHJvbGxlcigkc2NvcGUsICRmaWx0ZXIsICRzdGF0ZVBhcmFtcywgJHN0YXRlLCAkdGltZW91dCwgJGZpcmViYXNlQXJyYXksIGV2ZW50U2VydmljZSwgYXV0aFNlcnZpY2UsIHByb2ZpbGVTZXJ2aWNlLCB0ZWFtU2VydmljZSwgRklSRUJBU0VEQVRBKSB7XG5cbiAgICAgICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIHZtLmV2ZW50TmFtZSA9ICRzdGF0ZVBhcmFtcy5ldmVudE5hbWU7XG5cbiAgICAgICAgdm0uY2xvc2VHYW1lTW9kYWwgPSBjbG9zZUdhbWVNb2RhbDtcbiAgICAgICAgdm0uY2xvc2VNdWx0aUdhbWVMZWFkZXJib2FyZE1vZGFsID0gY2xvc2VNdWx0aUdhbWVMZWFkZXJib2FyZE1vZGFsO1xuICAgICAgICB2bS5jbG9zZVBsYXllck1vZGFsID0gY2xvc2VQbGF5ZXJNb2RhbDtcbiAgICAgICAgdm0uY3JlYXRlVGVhbSA9IGNyZWF0ZVRlYW07XG4gICAgICAgIHZtLmRldGVybWluZVBvaW50cyA9IGRldGVybWluZVBvaW50cztcbiAgICAgICAgdm0uZ2V0Rmlyc3RQbGFjZVNjb3JlcyA9IGdldEZpcnN0UGxhY2VTY29yZXM7XG4gICAgICAgIHZtLmdvVG9QbGF5ZXJQcm9maWxlID0gZ29Ub1BsYXllclByb2ZpbGU7XG4gICAgICAgIHZtLm9wZW5CYWRnZXNNb2RhbCA9IG9wZW5CYWRnZXNNb2RhbDtcbiAgICAgICAgdm0ub3BlbkdhbWVNb2RhbCA9IG9wZW5HYW1lTW9kYWw7XG4gICAgICAgIHZtLm9wZW5HYW1lTW9kYWxGcm9tUGxheWVyTW9kYWwgPSBvcGVuR2FtZU1vZGFsRnJvbVBsYXllck1vZGFsO1xuICAgICAgICB2bS5vcGVuTWFuYWdlbWVudE1vZGFsID0gb3Blbk1hbmFnZW1lbnRNb2RhbDtcbiAgICAgICAgdm0ub3Blbk11bHRpR2FtZUxlYWRlcmJvYXJkTW9kYWwgPSBvcGVuTXVsdGlHYW1lTGVhZGVyYm9hcmRNb2RhbDtcbiAgICAgICAgdm0ub3BlblBsYXllck1vZGFsID0gb3BlblBsYXllck1vZGFsO1xuICAgICAgICB2bS5vcGVuUGxheWVyTW9kYWxGcm9tR2FtZU1vZGFsID0gb3BlblBsYXllck1vZGFsRnJvbUdhbWVNb2RhbDtcbiAgICAgICAgdm0ub3BlblBsYXllck1vZGFsRnJvbUxlYWRlcmJvYXJkTW9kYWwgPSBvcGVuUGxheWVyTW9kYWxGcm9tTGVhZGVyYm9hcmRNb2RhbDtcbiAgICAgICAgdm0ub3BlblJ1bGVzTW9kYWwgPSBvcGVuUnVsZXNNb2RhbDtcblxuICAgICAgICBpbml0RXZlbnQoKTtcblxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICBmdW5jdGlvbiBjbG9zZUdhbWVNb2RhbCgpIHtcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2dhbWVNb2RhbCcpLmNsb3NlTW9kYWwoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNsb3NlTXVsdGlHYW1lTGVhZGVyYm9hcmRNb2RhbCgpIHtcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI211bHRpR2FtZUxlYWRlcmJvYXJkTW9kYWwnKS5jbG9zZU1vZGFsKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjbG9zZVBsYXllck1vZGFsKCkge1xuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjcGxheWVyTW9kYWwnKS5jbG9zZU1vZGFsKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVUZWFtKCkge1xuICAgICAgICAgICAgdGVhbVNlcnZpY2UuY3JlYXRlVGVhbSh2bS5ldmVudE5hbWUsIHZtLm5ld1RlYW0pLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgTWF0ZXJpYWxpemUudG9hc3QoJ1RlYW0gJyArIHZtLm5ld1RlYW0uc2hvcnROYW1lICsgJyBjcmVhdGVkLicsIDQwMDApO1xuICAgICAgICAgICAgICAgIHZtLm5ld1RlYW0gPSBudWxsO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkZXRlcm1pbmVQb2ludHMoaW5wdXRTY29yZURhdGEsIGlucHV0SW5kZXgpIHtcblxuICAgICAgICAgICAgdmFyIHVzZXJHYW1lUG9pbnRzO1xuXG4gICAgICAgICAgICAvLyBObyBwb3NpdGlvbiBncmVhdGVyIHRoYW4gMTIgZ2V0cyBwb2ludHMuXG4gICAgICAgICAgICBpZiAoaW5wdXRJbmRleCA+IDExKSB7XG4gICAgICAgICAgICAgICAgdXNlckdhbWVQb2ludHMgPSAwO1xuICAgICAgICAgICAgICAgIHJldHVybiB1c2VyR2FtZVBvaW50cztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdXNlckdhbWVQb2ludHMgPSAxMiAtIGlucHV0SW5kZXg7XG5cbiAgICAgICAgICAgIHZhciBzb3J0ZWRTY29yZXMgPSAkZmlsdGVyKCdvcmRlckJ5Jykodm0uZ2FtZVNjb3JlcywgJy1zY29yZScpO1xuXG4gICAgICAgICAgICAvLyBBbSBJIHRpZWQgd2l0aCB0aGUgcGVyc29uIGFib3ZlIG1lPyBJZiBzbywgbWF0Y2ggdGhlaXIgcG9pbnRzLlxuICAgICAgICAgICAgaWYgKHNvcnRlZFNjb3Jlc1tpbnB1dEluZGV4IC0gMV0pIHtcblxuICAgICAgICAgICAgICAgIGlmIChzb3J0ZWRTY29yZXNbaW5wdXRJbmRleCAtIDFdLnNjb3JlID09PSBpbnB1dFNjb3JlRGF0YS5zY29yZSkge1xuICAgICAgICAgICAgICAgICAgICB1c2VyR2FtZVBvaW50cyArPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHVzZXJHYW1lUG9pbnRzO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0Rmlyc3RQbGFjZVNjb3JlcygpIHtcblxuICAgICAgICAgICAgdm0uZ2FtZUxpc3QuZm9yRWFjaChmdW5jdGlvbihnYW1lKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSBhcmUgc2NvcmVzLCBnZXQgdGhlIHRvcCBvbmUuXG4gICAgICAgICAgICAgICAgaWYgKGdhbWUuc2NvcmVzKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjb3Jlc0FycmF5ID0gJC5tYXAoZ2FtZS5zY29yZXMsIGZ1bmN0aW9uKGVsKSB7IHJldHVybiBlbDsgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNjb3Jlc0FycmF5ID0gJGZpbHRlcignb3JkZXJCeScpKHNjb3Jlc0FycmF5LCAnLXNjb3JlJyk7XG4gICAgICAgICAgICAgICAgICAgIGdhbWUuZmlyc3RTY29yZSA9IHNjb3Jlc0FycmF5WzBdO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ29Ub1BsYXllclByb2ZpbGUoaW5wdXRQbGF5ZXIpIHtcblxuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjcGxheWVyTW9kYWwnKS5jbG9zZU1vZGFsKCk7XG4gICAgICAgICAgICAkc3RhdGUuZ28oJ3Byb2ZpbGUnLCB7dXNlcm5hbWU6IGlucHV0UGxheWVyfSk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGluaXRFdmVudCgpIHtcblxuICAgICAgICAgICAgLy8gRW5hYmxlIE1hdGVyaWFsaXplLmNzcyBjb2xsYXBzaWJsZXMuXG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKCcuY29sbGFwc2libGUnKS5jb2xsYXBzaWJsZSh7XG4gICAgICAgICAgICAgICAgICAgIGFjY29yZGlvbjogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgJCgndWwudGFicycpLnRhYnMoKTtcbiAgICAgICAgICAgIH0sIDEwMDApO1xuXG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKCcuY29sbGFwc2libGUnKS5jb2xsYXBzaWJsZSh7XG4gICAgICAgICAgICAgICAgICAgIGFjY29yZGlvbjogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgJCgndWwudGFicycpLnRhYnMoKTtcbiAgICAgICAgICAgIH0sIDMwMDApO1xuXG4gICAgICAgICAgICBldmVudFNlcnZpY2UuZ2V0RXZlbnRQcm9wZXJ0aWVzKHZtLmV2ZW50TmFtZSkudGhlbihmdW5jdGlvbiB0aGVuKG1vZGVsKSB7XG5cbiAgICAgICAgICAgICAgICB2bS5ldmVudFByb3BlcnRpZXMgPSBtb2RlbDtcblxuICAgICAgICAgICAgICAgIHZtLmV2ZW50UHJvcGVydGllcy4kbG9hZGVkKCkudGhlbihmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIGlzIGEgbXVsdGlnYW1lIGV2ZW50LCBnZXQgdGhlIGRhdGEgbmVlZGVkIGZvciBtdWx0aWdhbWUgY29tcG9uZW50cy5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHZtLmV2ZW50UHJvcGVydGllcy5mb3JtYXQubXVsdGlHYW1lKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50U2VydmljZS5nZXRHYW1lc0xpc3Qodm0uZXZlbnROYW1lKS50aGVuKGZ1bmN0aW9uIHRoZW4obW9kZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5nYW1lTGlzdCA9IG1vZGVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldEZpcnN0UGxhY2VTY29yZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudFNlcnZpY2UuZ2V0TXVsdGlHYW1lTGVhZGVyYm9hcmQodm0uZXZlbnROYW1lKS50aGVuKGZ1bmN0aW9uIHRoZW4obW9kZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGVhZGVyYm9hcmQgPSBtb2RlbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5sZWFkZXJib2FyZExlbmd0aCA9IGxlYWRlcmJvYXJkLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5zdW1tYXJpemVkTGVhZGVyYm9hcmQgPSBsZWFkZXJib2FyZC5zbGljZSgwLCA4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgaXMgYSBzaW5nbGUgZ2FtZSBldmVudCwgZ2V0IHRoZSBkYXRhIG5lZWRlZCBmb3Igc2luZ2xlIGdhbWUgY29tcG9uZW50cy5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRTZXJ2aWNlLmdldFNpbmdsZUdhbWVMZWFkZXJib2FyZCh2bS5ldmVudE5hbWUpLnRoZW4oZnVuY3Rpb24gdGhlbihtb2RlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsZWFkZXJib2FyZCA9IG1vZGVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLmxlYWRlcmJvYXJkTGVuZ3RoID0gbGVhZGVyYm9hcmQubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLnN1bW1hcml6ZWRMZWFkZXJib2FyZCA9IGxlYWRlcmJvYXJkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgaXMgYSB0ZWFtLWJhc2VkIGV2ZW50LCBnZXQgdGhlIGRhdGEgbmVlZGVkIGZvciB0ZWFtIGV2ZW50IGNvbXBvbmVudHMuXG4gICAgICAgICAgICAgICAgICAgIGlmICh2bS5ldmVudFByb3BlcnRpZXMuZm9ybWF0LnRlYW1CYXNlZCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZWFtU2VydmljZS5nZXRUZWFtTGlzdCh2bS5ldmVudE5hbWUpLnRoZW4oZnVuY3Rpb24gdGhlbihtb2RlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLnRlYW1MaXN0ID0gbW9kZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHByb2ZpbGVTZXJ2aWNlLmdldEF2YXRhckRhdGEoKS50aGVuKGZ1bmN0aW9uIHRoZW4obW9kZWwpIHtcbiAgICAgICAgICAgICAgICB2bS5hdmF0YXJEYXRhID0gbW9kZWw7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gb3BlbkJhZGdlc01vZGFsKCkge1xuXG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNiYWRnZXNNb2RhbCcpLm9wZW5Nb2RhbCgpO1xuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjYmFkZ2VzTW9kYWxDb250ZW50Jykuc2Nyb2xsVG9wKDApO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvcGVuR2FtZU1vZGFsKGlucHV0R2FtZU5hbWUpIHtcblxuICAgICAgICAgICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuXG4gICAgICAgICAgICBldmVudFNlcnZpY2UuZ2V0R2FtZURhdGEodm0uZXZlbnROYW1lLCBpbnB1dEdhbWVOYW1lKS50aGVuKGZ1bmN0aW9uIHRoZW4obW9kZWwpIHtcbiAgICAgICAgICAgICAgICB2bS5nYW1lRGF0YSA9IG1vZGVsO1xuXG4gICAgICAgICAgICAgICAgdm0uZ2FtZVNjb3JlcyA9ICRmaXJlYmFzZUFycmF5KFxuICAgICAgICAgICAgICAgICAgICByZWZcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZCgnY29udGVzdHMnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNoaWxkKHZtLmV2ZW50TmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZCgnYWN0aXZlR2FtZXMnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNoaWxkKHZtLmdhbWVEYXRhLiRpZClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZCgnc2NvcmVzJylcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2dhbWVNb2RhbCcpLm9wZW5Nb2RhbCgpO1xuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjZ2FtZU1vZGFsQ29udGVudCcpLnNjcm9sbFRvcCgwKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gb3Blbk1hbmFnZW1lbnRNb2RhbCgpIHtcblxuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjbWFuYWdlbWVudE1vZGFsJykub3Blbk1vZGFsKCk7XG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNtYW5hZ2VtZW50TW9kYWxDb250ZW50Jykuc2Nyb2xsVG9wKDApO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvcGVuTXVsdGlHYW1lTGVhZGVyYm9hcmRNb2RhbCgpIHtcblxuICAgICAgICAgICAgZXZlbnRTZXJ2aWNlLmdldE11bHRpR2FtZUxlYWRlcmJvYXJkKHZtLmV2ZW50TmFtZSkudGhlbihmdW5jdGlvbiB0aGVuKG1vZGVsKSB7XG4gICAgICAgICAgICAgICAgdm0uY29tcGxldGVMZWFkZXJib2FyZCA9IG1vZGVsO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI211bHRpR2FtZUxlYWRlcmJvYXJkTW9kYWwnKS5vcGVuTW9kYWwoKTtcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI211bHRpR2FtZUxlYWRlcmJvYXJkTW9kYWxDb250ZW50Jykuc2Nyb2xsVG9wKDApO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvcGVuUGxheWVyTW9kYWwoaW5wdXRQbGF5ZXIpIHtcblxuICAgICAgICAgICAgdm0uZm9jdXNQbGF5ZXIgPSBpbnB1dFBsYXllcjtcblxuICAgICAgICAgICAgZXZlbnRTZXJ2aWNlLmdldFBsYXllclNjb3Jlcyh2bS5ldmVudE5hbWUsIHZtLmdhbWVMaXN0LCB2bS5mb2N1c1BsYXllcikudGhlbihmdW5jdGlvbiB0aGVuKG1vZGVsKSB7XG4gICAgICAgICAgICAgICAgdm0ucGxheWVyU2NvcmVzID0gbW9kZWw7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjcGxheWVyTW9kYWwnKS5vcGVuTW9kYWwoKTtcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI3BsYXllck1vZGFsQ29udGVudCcpLnNjcm9sbFRvcCgwKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gb3BlbkdhbWVNb2RhbEZyb21QbGF5ZXJNb2RhbChpbnB1dEdhbWUpIHtcblxuICAgICAgICAgICAgY2xvc2VQbGF5ZXJNb2RhbCgpO1xuXG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBvcGVuR2FtZU1vZGFsKGlucHV0R2FtZSk7XG4gICAgICAgICAgICB9LCA0NTApO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvcGVuUGxheWVyTW9kYWxGcm9tR2FtZU1vZGFsKGlucHV0UGxheWVyKSB7XG5cbiAgICAgICAgICAgIGNsb3NlR2FtZU1vZGFsKCk7XG5cbiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIG9wZW5QbGF5ZXJNb2RhbChpbnB1dFBsYXllcik7XG4gICAgICAgICAgICB9LCA0NTApO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvcGVuUGxheWVyTW9kYWxGcm9tTGVhZGVyYm9hcmRNb2RhbChpbnB1dFBsYXllcikge1xuXG4gICAgICAgICAgICBjbG9zZU11bHRpR2FtZUxlYWRlcmJvYXJkTW9kYWwoKTtcblxuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgb3BlblBsYXllck1vZGFsKGlucHV0UGxheWVyKTtcbiAgICAgICAgICAgIH0sIDQ1MCk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9wZW5SdWxlc01vZGFsKCkge1xuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjcnVsZXNNb2RhbCcpLm9wZW5Nb2RhbCgpO1xuICAgICAgICB9XG5cbiAgICB9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJylcbiAgICAgICAgLnNlcnZpY2UoJ3RlYW1TZXJ2aWNlJywgdGVhbVNlcnZpY2UpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gdGVhbVNlcnZpY2UoJHEsICRmaXJlYmFzZUFycmF5LCAkZmlyZWJhc2VPYmplY3QsIEZJUkVCQVNFREFUQSkge1xuXG4gICAgXHR0aGlzLmNyZWF0ZVRlYW0gPSBjcmVhdGVUZWFtO1xuICAgICAgICB0aGlzLmdldFRlYW1MaXN0ID0gZ2V0VGVhbUxpc3Q7XG5cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVRlYW0oaW5wdXRFdmVudCwgaW5wdXROZXdUZWFtUHJvcGVydGllcykge1xuXG4gICAgICAgIFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICBcdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRklSRUJBU0VEQVRBLkZCVVJMKTtcbiAgICAgICAgXHR2YXIgdGVhbVBvb2wgPSAkZmlyZWJhc2VPYmplY3QoXG4gICAgICAgIFx0XHRyZWZcbiAgICAgICAgXHRcdFx0LmNoaWxkKCdjb250ZXN0cycpXG4gICAgICAgIFx0XHRcdC5jaGlsZChpbnB1dEV2ZW50KVxuICAgICAgICBcdFx0XHQuY2hpbGQoJ3RlYW1Qb29sJylcbiAgICAgICAgXHQpO1xuXG4gICAgICAgIFx0dGVhbVBvb2wuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgXHRcdHRlYW1Qb29sW2lucHV0TmV3VGVhbVByb3BlcnRpZXMuc2hvcnROYW1lXSA9IHtcbiAgICAgICAgXHRcdFx0ZnVsbE5hbWU6IGlucHV0TmV3VGVhbVByb3BlcnRpZXMuZm9ybWFsTmFtZVxuICAgICAgICBcdFx0fTtcbiAgICAgICAgXHRcdHRlYW1Qb29sLiRzYXZlKCk7XG4gICAgICAgIFx0XHRkZWZlcnJlZC5yZXNvbHZlKCk7XG5cbiAgICAgICAgXHR9KTtcblxuICAgICAgICBcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRUZWFtTGlzdChpbnB1dEV2ZW50KSB7XG5cbiAgICAgICAgXHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgIFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGSVJFQkFTRURBVEEuRkJVUkwpO1xuICAgICAgICBcdHZhciB0ZWFtTGlzdCA9ICRmaXJlYmFzZUFycmF5KFxuICAgICAgICBcdFx0cmVmXG4gICAgICAgIFx0XHRcdC5jaGlsZCgnY29udGVzdHMnKVxuICAgICAgICBcdFx0XHQuY2hpbGQoaW5wdXRFdmVudClcbiAgICAgICAgXHRcdFx0LmNoaWxkKCd0ZWFtUG9vbCcpXG4gICAgICAgIFx0KTtcblxuICAgICAgICBcdHRlYW1MaXN0LiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICBcdFx0ZGVmZXJyZWQucmVzb2x2ZSh0ZWFtTGlzdCk7XG4gICAgICAgIFx0fSk7XG5cbiAgICAgICAgXHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblxuICAgICAgICB9XG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuZGlyZWN0aXZlKCd2Z0dhbWVzTGlzdCcsIHZnR2FtZXNMaXN0KTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIHZnR2FtZXNMaXN0ICgpIHtcbiAgICAgICAgLy8gVXNhZ2U6XG4gICAgICAgIC8vXG4gICAgICAgIC8vIENyZWF0ZXM6XG4gICAgICAgIC8vXG4gICAgICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICAgICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgICAgICAgY29udHJvbGxlcjogR2FtZXNMaXN0Q29udHJvbGxlcixcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIGxpbms6IGxpbmssXG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcuL2FwcC9ldmVudENvbXBvbmVudHMvZ2FtZXNMaXN0LmRpcmVjdGl2ZS5odG0nLFxuICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIFx0ZGF0YTogJz0nLFxuICAgICAgICAgICAgXHRvcGVuR2FtZUZ1bmN0aW9uOiAnPSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgICAgICBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gR2FtZXNMaXN0Q29udHJvbGxlcigpIHtcbiAgICAgICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuICAgIFx0dmFyIHZtID0gdGhpcztcbiAgICB9XG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ3ZnTXVsdGlHYW1lTGVhZGVyYm9hcmQnLCB2Z011bHRpR2FtZUxlYWRlcmJvYXJkKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIHZnTXVsdGlHYW1lTGVhZGVyYm9hcmQgKCkge1xuICAgICAgICAvLyBVc2FnZTpcbiAgICAgICAgLy9cbiAgICAgICAgLy8gQ3JlYXRlczpcbiAgICAgICAgLy9cbiAgICAgICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBNdWx0aUdhbWVMZWFkZXJib2FyZENvbnRyb2xsZXIsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICBsaW5rOiBsaW5rLFxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnLi9hcHAvZXZlbnRDb21wb25lbnRzL211bHRpR2FtZUxlYWRlcmJvYXJkLmRpcmVjdGl2ZS5odG0nLFxuICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIFx0ZGF0YTogJz0nLFxuICAgICAgICAgICAgICAgIGF2YXRhckRhdGE6ICc9JyxcbiAgICAgICAgICAgIFx0Y29tcGxldGVMZW5ndGg6ICc9JyxcbiAgICAgICAgICAgIFx0b3BlblBsYXllckZ1bmN0aW9uOiAnPScsXG4gICAgICAgICAgICAgICAgb3BlbkxlYWRlcmJvYXJkRnVuY3Rpb246ICc9J1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZGlyZWN0aXZlO1xuXG4gICAgICAgIGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBNdWx0aUdhbWVMZWFkZXJib2FyZENvbnRyb2xsZXIoKSB7XG4gICAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cbiAgICBcdHZhciB2bSA9IHRoaXM7XG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuZGlyZWN0aXZlKCd2Z1NpbmdsZUdhbWVMZWFkZXJib2FyZCcsIHZnU2luZ2xlR2FtZUxlYWRlcmJvYXJkKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIHZnU2luZ2xlR2FtZUxlYWRlcmJvYXJkICgpIHtcbiAgICAgICAgLy8gVXNhZ2U6XG4gICAgICAgIC8vXG4gICAgICAgIC8vIENyZWF0ZXM6XG4gICAgICAgIC8vXG4gICAgICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICAgICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgICAgICAgY29udHJvbGxlcjogU2luZ2xlR2FtZUxlYWRlcmJvYXJkQ29udHJvbGxlcixcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIGxpbms6IGxpbmssXG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcuL2FwcC9ldmVudENvbXBvbmVudHMvc2luZ2xlR2FtZUxlYWRlcmJvYXJkLmRpcmVjdGl2ZS5odG0nLFxuICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIFx0ZGF0YTogJz0nLFxuICAgICAgICAgICAgICAgIGF2YXRhckRhdGE6ICc9JyxcbiAgICAgICAgICAgIFx0Y29tcGxldGVMZW5ndGg6ICc9JyxcbiAgICAgICAgICAgICAgICBvcGVuTGVhZGVyYm9hcmRGdW5jdGlvbjogJz0nXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbiAgICAgICAgZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIFNpbmdsZUdhbWVMZWFkZXJib2FyZENvbnRyb2xsZXIoKSB7XG4gICAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cbiAgICBcdHZhciB2bSA9IHRoaXM7XG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuZGlyZWN0aXZlKCd2Z1N0aWNreU1lc3NhZ2UnLCB2Z1N0aWNreU1lc3NhZ2UpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gdmdTdGlja3lNZXNzYWdlICgpIHtcbiAgICAgICAgLy8gVXNhZ2U6XG4gICAgICAgIC8vXG4gICAgICAgIC8vIENyZWF0ZXM6XG4gICAgICAgIC8vXG4gICAgICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICAgICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgICAgICAgY29udHJvbGxlcjogU3RpY2t5TWVzc2FnZUNvbnRyb2xsZXIsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICBsaW5rOiBsaW5rLFxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnLi9hcHAvZXZlbnRDb21wb25lbnRzL3N0aWNreU1lc3NhZ2UuZGlyZWN0aXZlLmh0bScsXG4gICAgICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgXHRwcm9wZXJ0aWVzOiAnPSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgICAgICBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gU3RpY2t5TWVzc2FnZUNvbnRyb2xsZXIoJHRpbWVvdXQpIHtcbiAgICAgICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuICAgIFx0dmFyIHZtID0gdGhpcztcbiAgICB9XG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdIZWFkZXJDb250cm9sbGVyJywgSGVhZGVyQ29udHJvbGxlcik7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBIZWFkZXJDb250cm9sbGVyKCR0aW1lb3V0LCAkcm9vdFNjb3BlLCAkd2luZG93LCAkc3RhdGUsIGF1dGhTZXJ2aWNlKSB7XG5cbiAgICAgICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICB2bS5sb2dPdXQgPSBsb2dPdXQ7XG5cbiAgICAgICAgYWN0aXZhdGUoKTtcblxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcuZHJvcGRvd24tYnV0dG9uJylcbiAgICAgICAgICAgICAgICAgICAgLmRyb3Bkb3duKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluRHVyYXRpb246IDMwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dER1cmF0aW9uOiAyMjUsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdHJhaW5fd2lkdGg6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaG92ZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ3V0dGVyOiAtMTE0LFxuICAgICAgICAgICAgICAgICAgICAgICAgYmVsb3dPcmlnaW46IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCA0MDApO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbG9nT3V0KCkge1xuICAgICAgICAgICAgYXV0aFNlcnZpY2UubG9nT3V0KCk7XG4gICAgICAgICAgICAkd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICB9XG5cbiAgICB9XG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5maWx0ZXIoJ29yZGVyT2JqZWN0QnknLCBvcmRlck9iamVjdEJ5KTtcblxuICAgIGZ1bmN0aW9uIG9yZGVyT2JqZWN0QnkoKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihpdGVtcywgZmllbGQsIHJldmVyc2UpIHtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJlZCA9IFtdO1xuXG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goaXRlbXMsIGZ1bmN0aW9uKGl0ZW0sIGtleSkge1xuICAgICAgICAgICAgICAgIGl0ZW0ua2V5ID0ga2V5O1xuICAgICAgICAgICAgICAgIGZpbHRlcmVkLnB1c2goaXRlbSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZmlsdGVyZWQuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgICAgIHJldHVybiAoYVtmaWVsZF0gPiBiW2ZpZWxkXSA/IDEgOiAtMSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYocmV2ZXJzZSkgZmlsdGVyZWQucmV2ZXJzZSgpO1xuXG4gICAgICAgICAgICByZXR1cm4gZmlsdGVyZWQ7XG4gICAgICAgIH07XG4gICAgfVxuXG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdBdmF0YXJDb250cm9sbGVyJywgQXZhdGFyQ29udHJvbGxlcik7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBBdmF0YXJDb250cm9sbGVyKCRyb290U2NvcGUsICRzdGF0ZSwgJHN0YXRlUGFyYW1zLCAkdGltZW91dCwgVXBsb2FkLCBpbWd1ciwgcHJvZmlsZVNlcnZpY2UpIHtcblxuICAgICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICAgIHZtLnVwbG9hZEF2YXRhciA9IHVwbG9hZEF2YXRhcjtcblxuICAgICAgICBhY3RpdmF0ZSgpO1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICAgXHRwcm9maWxlU2VydmljZS5nZXRBdmF0YXJEYXRhKCkudGhlbihmdW5jdGlvbiB0aGVuKG1vZGVsKSB7XG4gICAgICAgICAgICAgICAgdm0uYXZhdGFyRGF0YSA9IG1vZGVsO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHByb2ZpbGVTZXJ2aWNlLmdldEJhZGdlc0RhdGEoJHJvb3RTY29wZS5wcm9maWxlLnVzZXJOYW1lKS50aGVuKGZ1bmN0aW9uIHRoZW4obW9kZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0uYmFkZ2VzRGF0YSA9IG1vZGVsO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwbG9hZEF2YXRhcigpIHtcblxuICAgICAgICBcdHZtLmRpc2FibGVCdXR0b24gPSB0cnVlO1xuXG4gICAgICAgIFx0aW1ndXIuc2V0QVBJS2V5KCdDbGllbnQtSUQgZjUzZDZkNTgzM2IwN2JjJyk7XG4gICAgICAgIFx0aW1ndXIudXBsb2FkKHZtLmZpbGUpLnRoZW4oZnVuY3Rpb24gdGhlbihtb2RlbCkge1xuICAgICAgICBcdFx0cHJvZmlsZVNlcnZpY2Uuc2F2ZUF2YXRhckxpbmsobW9kZWxbMF0ubGluaywgJHJvb3RTY29wZS5wcm9maWxlLnVzZXJOYW1lKTtcbiAgICAgICAgXHRcdE1hdGVyaWFsaXplLnRvYXN0KCdZb3VyIGF2YXRhciB3YXMgdXBsb2FkZWQnLCA0MDAwKTtcblxuICAgICAgICBcdFx0JHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIFx0XHRcdCRzdGF0ZS5nbygnaG9tZScpO1xuICAgICAgICBcdFx0fSwgMTAwMCk7XG4gICAgICAgIFx0fSk7XG5cbiAgICAgICAgfVxuXG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuY29udHJvbGxlcignQ2hhbmdlUGFzc3dvcmRDb250cm9sbGVyJywgQ2hhbmdlUGFzc3dvcmRDb250cm9sbGVyKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIENoYW5nZVBhc3N3b3JkQ29udHJvbGxlcigkc2NvcGUsICR0aW1lb3V0LCAkc3RhdGUsIEF1dGhXcmFwcGVyKSB7XG5cbiAgICAgICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICBcbiAgICAgICAgdm0uc3VibWl0Q2hhbmdlUGFzc3dvcmQgPSBzdWJtaXRDaGFuZ2VQYXNzd29yZDtcblxuICAgICAgICBhY3RpdmF0ZSgpO1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjY29udGVudFZpZXcnKVxuICAgICAgICAgICAgICAgICAgICAuY3NzKCdvcGFjaXR5JywgJzEnKVxuICAgICAgICAgICAgICAgICAgICAuY3NzKCdwb3NpdGlvbicsICdpbmhlcml0Jyk7XG4gICAgICAgICAgICB9LCAzMTApO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc3VibWl0Q2hhbmdlUGFzc3dvcmQoKSB7XG5cbiAgICAgICAgICAgIGlmICgkc2NvcGUucHdDaGFuZ2VGb3JtLiR2YWxpZCkge1xuXG4gICAgICAgICAgICAgICAgQXV0aFdyYXBwZXIuJGNoYW5nZVBhc3N3b3JkKHtcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IEF1dGhXcmFwcGVyLiRnZXRBdXRoKCkucGFzc3dvcmQuZW1haWwsXG4gICAgICAgICAgICAgICAgICAgIG9sZFBhc3N3b3JkOiB2bS5pbnB1dEN1cnJlbnRQYXNzd29yZCxcbiAgICAgICAgICAgICAgICAgICAgbmV3UGFzc3dvcmQ6IHZtLmlucHV0TmV3UGFzc3dvcmRcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIE1hdGVyaWFsaXplLnRvYXN0KCdZb3VyIHBhc3N3b3JkIHdhcyBjaGFuZ2VkLicsIDQwMDApO1xuICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnaG9tZScpO1xuICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKTtcblxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IuY29kZSA9PT0gJ0lOVkFMSURfUEFTU1dPUkQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2bS5zaG93Q2hhbmdlUGFzc3dvcmRNZXNzYWdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9O1xuXG4gICAgfVxuXG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdIb21lQ29udHJvbGxlcicsIEhvbWVDb250cm9sbGVyKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIEhvbWVDb250cm9sbGVyKCRzY29wZSwgJHRpbWVvdXQpIHtcblxuICAgICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgYWN0aXZhdGUoKTtcblxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2NvbnRlbnRWaWV3JylcbiAgICAgICAgICAgICAgICAgICAgLmNzcygnb3BhY2l0eScsICcxJylcbiAgICAgICAgICAgICAgICAgICAgLmNzcygncG9zaXRpb24nLCAnaW5oZXJpdCcpO1xuICAgICAgICAgICAgfSwgMzEwKTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdMZWFkZXJib2FyZENvbnRyb2xsZXInLCBMZWFkZXJib2FyZENvbnRyb2xsZXIpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gTGVhZGVyYm9hcmRDb250cm9sbGVyKCRxLCAkdGltZW91dCwgJGZpcmViYXNlQXJyYXksIHByb2ZpbGVTZXJ2aWNlLCBGSVJFQkFTRURBVEEpIHtcblxuICAgICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXG4gICAgXHR2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIGFjdGl2YXRlKCk7XG5cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjY29udGVudFZpZXcnKVxuICAgICAgICAgICAgICAgICAgICAuY3NzKCdvcGFjaXR5JywgJzEnKVxuICAgICAgICAgICAgICAgICAgICAuY3NzKCdwb3NpdGlvbicsICdpbmhlcml0Jyk7XG4gICAgICAgICAgICB9LCAzMTApO1xuXG4gICAgICAgICAgICBnZXRQcm9maWxlU2NvcmVzKCkudGhlbihmdW5jdGlvbiB0aGVuKG1vZGVsKSB7XG4gICAgICAgICAgICAgICAgdm0ucHJvZmlsZVNjb3JlRGF0YSA9IG1vZGVsO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHByb2ZpbGVTZXJ2aWNlLmdldEF2YXRhckRhdGEoKS50aGVuKGZ1bmN0aW9uIHRoZW4obW9kZWwpIHtcbiAgICAgICAgICAgICAgICB2bS5hdmF0YXJEYXRhID0gbW9kZWw7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFByb2ZpbGVTY29yZXMoKSB7XG5cbiAgICAgICAgXHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICBcdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRklSRUJBU0VEQVRBLkZCVVJMKTtcblxuICAgICAgICBcdHZhciBwcm9maWxlU2NvcmVEYXRhID0gJGZpcmViYXNlQXJyYXkoXG4gICAgICAgIFx0XHRyZWZcbiAgICAgICAgXHRcdFx0LmNoaWxkKCdiYWRnZXMnKVxuICAgICAgICBcdCk7XG5cbiAgICAgICAgXHRwcm9maWxlU2NvcmVEYXRhLiRsb2FkZWQoZnVuY3Rpb24oKSB7XG4gICAgICAgIFx0XHRkZWZlcnJlZC5yZXNvbHZlKHByb2ZpbGVTY29yZURhdGEpO1xuICAgICAgICBcdH0pO1xuXG4gICAgICAgIFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgfVxuXG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuY29udHJvbGxlcignUHJvZmlsZUNvbnRyb2xsZXInLCBQcm9maWxlQ29udHJvbGxlcik7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBQcm9maWxlQ29udHJvbGxlcigkc2NvcGUsICRzdGF0ZVBhcmFtcywgJHEsICR0aW1lb3V0LCAkc3RhdGUsICRmaXJlYmFzZUFycmF5LCBhdXRoU2VydmljZSwgcHJvZmlsZVNlcnZpY2UsIGV2ZW50U2VydmljZSkge1xuXG4gICAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cbiAgICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgICAgXG4gICAgICAgIGFjdGl2YXRlKCk7XG5cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNjb250ZW50VmlldycpXG4gICAgICAgICAgICAgICAgICAgIC5jc3MoJ29wYWNpdHknLCAnMScpXG4gICAgICAgICAgICAgICAgICAgIC5jc3MoJ3Bvc2l0aW9uJywgJ2luaGVyaXQnKTtcblxuICAgICAgICAgICAgICAgICQoJy5jb2xsYXBzaWJsZScpLmNvbGxhcHNpYmxlKHtcbiAgICAgICAgICAgICAgICAgICAgYWNjb3JkaW9uOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCA0MTApO1xuXG4gICAgICAgICAgICBwcm9maWxlU2VydmljZS5nZXRVc2VyRGF0YSgkc3RhdGVQYXJhbXMudXNlcm5hbWUpLnRoZW4oZnVuY3Rpb24gdGhlbihtb2RlbCkge1xuICAgICAgICAgICAgICAgIHZtLnByb2ZpbGVEYXRhID0gbW9kZWw7XG5cbiAgICAgICAgICAgICAgICBwcm9maWxlU2VydmljZS5nZXRUb3VybmFtZW50SGlzdG9yeSh2bS5wcm9maWxlRGF0YSkudGhlbihmdW5jdGlvbiB0aGVuKG1vZGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0b3VybmFtZW50SGlzdG9yeURhdGEgPSBtb2RlbDtcbiAgICAgICAgICAgICAgICAgICAgdm0uZXZlbnRTdGFuZGluZ3MgPSBwcm9maWxlU2VydmljZS5nZXRUb3VybmFtZW50U3RhbmRpbmdzKHRvdXJuYW1lbnRIaXN0b3J5RGF0YSwgJHN0YXRlUGFyYW1zLnVzZXJuYW1lKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBwcm9maWxlU2VydmljZS5nZXRBdmF0YXJEYXRhKCkudGhlbihmdW5jdGlvbiB0aGVuKG1vZGVsKSB7XG4gICAgICAgICAgICAgICAgdm0uYXZhdGFyRGF0YSA9IG1vZGVsO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHByb2ZpbGVTZXJ2aWNlLmdldEJhZGdlc0RhdGEoJHN0YXRlUGFyYW1zLnVzZXJuYW1lKS50aGVuKGZ1bmN0aW9uIHRoZW4obW9kZWwpIHtcbiAgICAgICAgICAgICAgICB2bS5iYWRnZXNEYXRhID0gbW9kZWw7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5zZXJ2aWNlKCdwcm9maWxlU2VydmljZScsIHByb2ZpbGVTZXJ2aWNlKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIHByb2ZpbGVTZXJ2aWNlKCRyb290U2NvcGUsICRxLCAkZmlyZWJhc2VBcnJheSwgJGZpcmViYXNlT2JqZWN0LCBldmVudFNlcnZpY2UsIEZJUkVCQVNFREFUQSkge1xuXG4gICAgXHR0aGlzLmdldEF2YXRhckRhdGEgPSBnZXRBdmF0YXJEYXRhO1xuICAgICAgICB0aGlzLmdldEJhZGdlc0RhdGEgPSBnZXRCYWRnZXNEYXRhO1xuICAgIFx0dGhpcy5nZXRUb3VybmFtZW50SGlzdG9yeSA9IGdldFRvdXJuYW1lbnRIaXN0b3J5O1xuICAgICAgICB0aGlzLmdldFRvdXJuYW1lbnRTdGFuZGluZ3MgPSBnZXRUb3VybmFtZW50U3RhbmRpbmdzO1xuICAgICAgICB0aGlzLmdldFVzZXJEYXRhID0gZ2V0VXNlckRhdGE7XG4gICAgICAgIHRoaXMuc2F2ZUF2YXRhckxpbmsgPSBzYXZlQXZhdGFyTGluaztcblxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0QXZhdGFyRGF0YSgpIHtcblxuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgICAgIHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRklSRUJBU0VEQVRBLkZCVVJMKTtcblxuICAgICAgICAgICAgdmFyIGF2YXRhckRhdGEgPSAkZmlyZWJhc2VPYmplY3QoXG4gICAgICAgICAgICAgICAgcmVmXG4gICAgICAgICAgICAgICAgICAgIC5jaGlsZCgnYXZhdGFycycpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhdmF0YXJEYXRhLiRsb2FkZWQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShhdmF0YXJEYXRhKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0QmFkZ2VzRGF0YShpbnB1dFVzZXIpIHtcblxuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgICAgIHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRklSRUJBU0VEQVRBLkZCVVJMKTtcblxuICAgICAgICAgICAgdmFyIGJhZGdlc0RhdGEgPSAkZmlyZWJhc2VPYmplY3QoXG4gICAgICAgICAgICAgICAgcmVmXG4gICAgICAgICAgICAgICAgICAgIC5jaGlsZCgnYmFkZ2VzJylcbiAgICAgICAgICAgICAgICAgICAgLmNoaWxkKGlucHV0VXNlcilcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGJhZGdlc0RhdGEuJGxvYWRlZChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGJhZGdlc0RhdGEpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRUb3VybmFtZW50SGlzdG9yeShpbnB1dFVzZXJEYXRhKSB7XG5cbiAgICAgICAgXHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICBcdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRklSRUJBU0VEQVRBLkZCVVJMKTtcblxuICAgICAgICBcdC8vIExvb3AgdGhyb3VnaCBlYWNoIGV2ZW50IGluIHRoZSBwbGVkZ2VkVG8gb2JqZWN0LlxuICAgICAgICBcdHZhciBldmVudHNBcnJheSA9IFtdO1xuICAgICAgICBcdGZvciAodmFyIGtleSBpbiBpbnB1dFVzZXJEYXRhLnBsZWRnZWRUbykge1xuICAgICAgICBcdFx0ZXZlbnRzQXJyYXkucHVzaChrZXkpO1xuICAgICAgICBcdH1cblxuICAgICAgICBcdGRlZmVycmVkLnJlc29sdmUoZXZlbnRzQXJyYXkpO1xuXG4gICAgICAgIFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFRvdXJuYW1lbnRTdGFuZGluZ3MoaW5wdXRUb3VybmFtZW50SGlzdG9yeSwgaW5wdXRVc2VyKSB7XG5cbiAgICAgICAgICAgIHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRklSRUJBU0VEQVRBLkZCVVJMKTtcblxuICAgICAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGVhY2ggZXZlbnQgaW4gdGhlIHVzZXIncyBoaXN0b3J5LlxuICAgICAgICAgICAgdmFyIGV2ZW50U3RhbmRpbmdzID0gW107XG4gICAgICAgICAgICBpbnB1dFRvdXJuYW1lbnRIaXN0b3J5LmZvckVhY2goZnVuY3Rpb24oZXZlbnQpIHtcblxuICAgICAgICAgICAgICAgIGV2ZW50U2VydmljZS5nZXRFdmVudFByb3BlcnRpZXMoZXZlbnQpLnRoZW4oZnVuY3Rpb24oZXZlbnRQcm9wZXJ0aWVzKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgZXZlbnRQcm9wZXJ0aWVzLiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBjb25jbHVkZWQsIGdldCB0aGUgdXNlcidzIHN0YW5kaW5nLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50UHJvcGVydGllcy5zdGF0ZSA9PT0gJ2NvbmNsdWRlZCcpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBldmVudFN0YW5kaW5nRGF0YSA9ICRmaXJlYmFzZU9iamVjdChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGQoJ3N0YW5kaW5ncycpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGQoZXZlbnQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50U3RhbmRpbmdEYXRhLiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudFN0YW5kaW5nRGF0YVtpbnB1dFVzZXJdKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50U3RhbmRpbmdzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGV2ZW50UHJvcGVydGllcy5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZW1pZXI6IGV2ZW50UHJvcGVydGllcy5wcmVtaWVyID8gdHJ1ZSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnROYW1lOiBldmVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTogJ2NvbmNsdWRlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IGV2ZW50UHJvcGVydGllcy5jb2xvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogZXZlbnRTdGFuZGluZ0RhdGFbaW5wdXRVc2VyXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRTdGFuZGluZ3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZXZlbnRQcm9wZXJ0aWVzLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlbWllcjogZXZlbnRQcm9wZXJ0aWVzLnByZW1pZXIgPyB0cnVlIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG9ydE5hbWU6IGV2ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiAnY29uY2x1ZGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogZXZlbnRQcm9wZXJ0aWVzLmNvbG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnRQcm9wZXJ0aWVzLnN0YXRlID09PSAnaW5wcm9ncmVzcycgfHwgZXZlbnRQcm9wZXJ0aWVzLnN0YXRlID09PSAndXBjb21pbmcnKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudFN0YW5kaW5ncy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZXZlbnRQcm9wZXJ0aWVzLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZW1pZXI6IGV2ZW50UHJvcGVydGllcy5wcmVtaWVyID8gdHJ1ZSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0TmFtZTogZXZlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBldmVudFByb3BlcnRpZXMuY29sb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiBldmVudFByb3BlcnRpZXMuc3RhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gZXZlbnRTdGFuZGluZ3M7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFVzZXJEYXRhKGlucHV0VXNlcikge1xuXG4gICAgICAgIFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZJUkVCQVNFREFUQS5GQlVSTCk7XG5cbiAgICAgICAgXHR2YXIgdXNlcnNEYXRhID0gJGZpcmViYXNlQXJyYXkoXG4gICAgICAgIFx0XHRyZWZcbiAgICAgICAgXHRcdFx0LmNoaWxkKCd1c2VycycpXG4gICAgICAgIFx0KTtcblxuICAgICAgICBcdHVzZXJzRGF0YS4kbG9hZGVkKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIFx0XHR1c2Vyc0RhdGEuZm9yRWFjaChmdW5jdGlvbih1c2VyKSB7XG4gICAgICAgIFx0XHRcdGlmICh1c2VyLnVzZXJOYW1lID09PSBpbnB1dFVzZXIpIHtcbiAgICAgICAgXHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHVzZXIpO1xuICAgICAgICBcdFx0XHR9XG4gICAgICAgIFx0XHR9KTtcblxuICAgICAgICBcdH0pO1xuXG4gICAgICAgIFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZJWE1FOiBNYWtlIHRoaXMgc2VydmVyLXNpZGUuXG4gICAgICAgIGZ1bmN0aW9uIHNhdmVBdmF0YXJMaW5rKGlucHV0TGluaywgaW5wdXRVc2VyKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRklSRUJBU0VEQVRBLkZCVVJMKTtcblxuICAgICAgICAgICAgdmFyIGF2YXRhckRhdGEgPSAkZmlyZWJhc2VPYmplY3QoXG4gICAgICAgICAgICAgICAgcmVmXG4gICAgICAgICAgICAgICAgICAgIC5jaGlsZCgnYXZhdGFycycpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhdmF0YXJEYXRhLiRsb2FkZWQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgYXZhdGFyRGF0YVtpbnB1dFVzZXJdID0gaW5wdXRMaW5rO1xuICAgICAgICAgICAgICAgIGF2YXRhckRhdGEuJHNhdmUoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cblxuICAgIH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ1JlZ0NvbnRyb2xsZXInLCBSZWdDb250cm9sbGVyKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIFJlZ0NvbnRyb2xsZXIoJHNjb3BlLCAkcm9vdFNjb3BlLCAkdGltZW91dCwgJHdpbmRvdywgJHN0YXRlLCAkZmlyZWJhc2VPYmplY3QsIGF1dGhTZXJ2aWNlLCBBdXRoV3JhcHBlcikge1xuXG4gICAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICB2bS5sb2dpblRvQWNjb3VudCA9IGxvZ2luVG9BY2NvdW50O1xuICAgICAgICB2bS5wYXNzd29yZFJlc2V0ID0gcGFzc3dvcmRSZXNldDtcbiAgICAgICAgdm0uc3VibWl0TmV3QWNjb3VudCA9IHN1Ym1pdE5ld0FjY291bnQ7XG5cbiAgICAgICAgYWN0aXZhdGUgKCk7XG5cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNjb250ZW50VmlldycpXG4gICAgICAgICAgICAgICAgICAgIC5jc3MoJ29wYWNpdHknLCAnMScpXG4gICAgICAgICAgICAgICAgICAgIC5jc3MoJ3Bvc2l0aW9uJywgJ2luaGVyaXQnKTtcbiAgICAgICAgICAgIH0sIDQxMCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBsb2dpblRvQWNjb3VudCgpIHtcblxuICAgICAgICAgICAgYXV0aFNlcnZpY2UubG9naW5Ub0FjY291bnQodm0ubG9naW5FbWFpbCwgdm0ubG9naW5QYXNzd29yZCkudGhlbihmdW5jdGlvbiB0aGVuKG1vZGVsKSB7XG5cbiAgICAgICAgICAgICAgICB2bS5zaG93SW52YWxpZFVzZXJFcnJvciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHZtLnNob3dJbnZhbGlkUGFzc3dvcmRFcnJvciA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgaWYgKG1vZGVsID09PSAnTE9HSU5fU1VDQ0VTUycpIHtcblxuICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobW9kZWwgPT09ICdJTlZBTElEX1VTRVInKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLnNob3dJbnZhbGlkVXNlckVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobW9kZWwgPT09ICdJTlZBTElEX1BBU1NXT1JEJykge1xuICAgICAgICAgICAgICAgICAgICB2bS5zaG93SW52YWxpZFBhc3N3b3JkRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHBhc3N3b3JkUmVzZXQoKSB7XG5cbiAgICAgICAgICAgIGlmICghdm0ubG9naW5FbWFpbCkge1xuICAgICAgICAgICAgICAgIHZtLnNob3dQYXNzd29yZFJlc2V0RW1haWxNZXNzYWdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIEF1dGhXcmFwcGVyLiRyZXNldFBhc3N3b3JkKHtcbiAgICAgICAgICAgICAgICBlbWFpbDogdm0ubG9naW5FbWFpbFxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2bS5zaG93UGFzc3dvcmRSZXNldEVtYWlsTWVzc2FnZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIE1hdGVyaWFsaXplLnRvYXN0KCdBIHBhc3N3b3JkIHJlc2V0IGVtYWlsIGhhcyBiZWVuIHNlbnQgdG8gJyArIHZtLmxvZ2luRW1haWwgKyAnLicsIDQwMDApO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHN1Ym1pdE5ld0FjY291bnQoKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIERvZXMgdGhlIHVzZXIgZXhpc3Q/IElmIHNvLCBzaG93IGFuIGVycm9yIG1lc3NhZ2UuXG4gICAgICAgICAgICBhdXRoU2VydmljZS5jaGVja0lmVXNlckV4aXN0cyh2bS5uZXdVc2VybmFtZSkudGhlbihmdW5jdGlvbih1c2VyRXhpc3RzKSB7XG5cbiAgICAgICAgICAgICAgICB2bS5zaG93RHVwbGljYXRlVXNlckVycm9yID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdm0uc2hvd0VtYWlsVGFrZW5FcnJvciA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgaWYgKHVzZXJFeGlzdHMpIHtcblxuICAgICAgICAgICAgICAgICAgICB2bS5zaG93RHVwbGljYXRlVXNlckVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgLy8gVHJ5IHRvIGNyZWF0ZSB0aGUgbmV3IHVzZXIuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBhdXRoU2VydmljZS5jcmVhdGVOZXdVc2VyKHZtLm5ld0VtYWlsLCB2bS5uZXdQYXNzd29yZCwgdm0ubmV3VXNlcm5hbWUpLnRoZW4oZnVuY3Rpb24gdGhlbihtb2RlbCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kZWwgPT09ICdFTUFJTF9UQUtFTicpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLnNob3dFbWFpbFRha2VuRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtb2RlbCA9PT0gJ0FDQ09VTlRfQ1JFQVRFRCcpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygncHJvZmlsZScsIHt1c2VybmFtZTogdm0ubmV3VXNlcm5hbWV9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG5cbiAgICB9XG5cbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9