!function(){"use strict";angular.module("vg.app",["ngAnimate","ui.router","firebase","validation.match","ordinal","ngFileUpload","ngImgur"])}(),function(){"use strict";function e(e,t){t.otherwise("/"),e.state("index",{url:"/",views:{header:{templateUrl:"app/header/homeHeader.htm",controller:"HeaderController as header",data:{headerType:"tall"}},content:{templateUrl:"app/home/home.htm",controller:"HomeController as home"}}}).state("registerOrLogin",{url:"/registerOrLogin",views:{header:{templateUrl:"/app/header/homeHeader.htm",controller:"HeaderController as header",data:{headerType:"tall"}},content:{templateUrl:"/app/home/reg.htm",controller:"RegController as reg"}}}).state("profile",{url:"/profile/:username",views:{header:{templateUrl:"/app/header/homeHeader.htm",controller:"HeaderController as header",data:{headerType:"tall"}},content:{templateUrl:"/app/home/profile.htm",controller:"ProfileController as profile"}}}).state("eventMain",{url:"/event/:eventName/main",views:{header:{templateUrl:"/app/header/homeHeader.htm",controller:"HeaderController as header",data:{headerType:"tall"}},content:{templateUrl:"/app/event/main.htm",controller:"EventMainController as event"}}}).state("customizeAvatar",{url:"/customizeAvatar",views:{header:{templateUrl:"/app/header/homeHeader.htm",controller:"HeaderController as header",data:{headerType:"tall"}},content:{templateUrl:"/app/home/avatar.htm",controller:"AvatarController as avatar"}}}).state("passwordChange",{url:"/passwordChange",views:{header:{templateUrl:"/app/header/homeHeader.htm",controller:"HeaderController as header",data:{headerType:"tall"}},content:{templateUrl:"/app/home/passwordChange.htm",controller:"PasswordChangeController as pwchange"}}}).state("eventGame",{url:"/event/:eventName/game/:gameName",views:{header:{templateUrl:"/app/header/homeHeader.htm",controller:"HeaderController as header",data:{headerType:"tall"}},content:{templateUrl:"/app/event/game.htm",controller:"EventGameController as game"}}})}angular.module("vg.app").config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e,t,r,a){e.$on("$stateChangeSuccess",function(){if(a.$getAuth()){var t=a.$getAuth(),n=new Firebase("https://wolfscontests.firebaseio.com"),o=r(n.child("users").child(t.uid));o.$bindTo(e,"profile").then(function(t){e.unbindFunction=t})}})}angular.module("vg.app").run(e),e.$inject=["$rootScope","$location","$firebaseObject","AuthWrapper"]}(),function(){"use strict";function e(e,t,r,a,n){function o(t){var r=e.defer(),a=!1,n=new Firebase(c+"/users");return n.once("value",function(e){e.forEach(function(e){e.val().userName===t&&(a=!0)}),r.resolve(a)}),r.promise}function i(t,r,a){var o=e.defer();return n.$createUser({email:t,password:r}).then(function(e){new Firebase(c).child("users/"+e.uid).set({userName:a,role:"User"},function(e){return console.error(e),e.code}),new Firebase(c).child("avatars").child(a).set("http://api.adorable.io/avatars/42/"+a),n.$authWithPassword({email:t,password:r}).then(function(){o.resolve("ACCOUNT_CREATED")})})["catch"](function(e){console.error(e),"EMAIL_TAKEN"===e.code&&o.resolve(e.code)}),o.promise}function s(t,r){var a=e.defer();return n.$authWithPassword({email:t,password:r}).then(function(e){a.resolve("LOGIN_SUCCESS")})["catch"](function(e){"INVALID_USER"===e.code?a.resolve("INVALID_USER"):"INVALID_PASSWORD"===e.code&&a.resolve("INVALID_PASSWORD")}),a.promise}function l(){n.$unauth(),t.unbindFunction(),r.go("index")}var c="https://wolfscontests.firebaseio.com";this.checkIfUserExists=o,this.createNewUser=i,this.loginToAccount=s,this.logOut=l}angular.module("vg.app").service("authService",e),e.$inject=["$q","$rootScope","$state","$firebaseObject","AuthWrapper"]}(),function(){"use strict";function e(e){var t=new Firebase("https://wolfscontests.firebaseio.com");return e(t)}angular.module("vg.app").factory("AuthWrapper",e),e.$inject=["$firebaseAuth"]}(),function(){"use strict";function e(e,t,r,a){function n(e){l(e).then(function(t){console.debug(t);var a=new Firebase(d),n=r(a.child("standings").child(e));n.$loaded().then(function(){t.forEach(function(e){n[e.key]=e.position}),n.$save()})})}function o(t){var a=e.defer(),n=new Firebase(d),o=r(n.child("contests").child(t).child("properties"));return a.resolve(o),a.promise}function i(t,r){{var a=e.defer();new Firebase(d)}return s(t).then(function(e){e.forEach(function(e){e.camelName===r&&a.resolve(e)})}),a.promise}function s(t){var r=e.defer(),n=new Firebase(d),o=a(n.child("contests").child(t).child("activeGames"));return o.$loaded().then(function(){r.resolve(o)}),r.promise}function l(r){var a=e.defer(),n={};return s(r).then(function(e){var r=e;r.forEach(function(e){if(e.scores){var r=$.map(e.scores,function(e){return e});r=t("orderBy")(r,"-score");for(var a=12,o=0;o<r.length;o++)n[r[o].userName]||(n[r[o].userName]={points:0}),n[r[o].userName].points+=a,a>0&&(a-=1)}}),n=t("orderObjectBy")(n,"points",!0);for(var o=!1,i=0,s=0;s<n.length;s++)if(n[s-1]&&n[s].points&&n[s-1].points)n[s].position=n[s].points===n[s-1].points?n[s-1].position:s+1;else if(0===s)n[s].position=1;else{if(!o){var l=n[s-1].points;n.forEach(function(e){e.points===l&&(i+=1)}),o=!0}n[s].position=n.length+1-i}a.resolve(n)}),a.promise}function c(t){var r=e.defer(),n=new Firebase(d),o=a(n.child("contests").child(t).child("scores"));return r.resolve(o),r.promise}function u(r,a,n){var o=e.defer(),i=[];return a.forEach(function(e){if(e.scores){var r=$.map(e.scores,function(e){return e});r=t("orderBy")(r,"-score");for(var a=12,o=0;o<r.length;o++){if(r[o].userName===n){var s=e;s.position=o+1,s.score=r[o].score,s.pointsEarned=a,s.inpUrl=r[o].inpUrl?r[o].inpUrl:null,s.twitchUrl=r[o].twitchUrl?r[o].twitchUrl:null,s.mameVersion=r[o].mameVersion?r[o].mameVersion:null,i.push(s),a=12;break}a>0&&(a-=1)}}}),o.resolve(i),o.promise}var d="https://wolfscontests.firebaseio.com";this.createMultiGameFinalStandings=n,this.getEventProperties=o,this.getGameData=i,this.getGamesList=s,this.getMultiGameLeaderboard=l,this.getSingleGameLeaderboard=c,this.getPlayerScores=u}angular.module("vg.app").service("eventService",e),e.$inject=["$q","$filter","$firebaseObject","$firebaseArray"]}(),function(){"use strict";function e(e,t,r,a,n,o,i){function s(){var e=new Firebase(l);c.eventProperties=o.getEventProperties(c.eventName),o.getGameData(c.eventName,c.gameName).then(function(t){c.gameData=t,c.gameScores=n(e.child("contests").child(c.eventName).child("activeGames").child(c.gameData.$id).child("scores")),console.debug(c.gameData),console.debug(c.gameScores)})}a(function(){angular.element("#contentView").css("opacity","1").css("position","inherit")},410);var l="https://wolfscontests.firebaseio.com",c=this;c.eventName=r.eventName,c.gameName=r.gameName,c.initGamePage=s}angular.module("vg.app").controller("EventGameController",e),e.$inject=["$scope","$filter","$stateParams","$timeout","$firebaseArray","eventService","authService"]}(),function(){"use strict";function e(e,t,r,a,n,o,i,s,l){function c(){angular.element("#gameModal").closeModal()}function u(){angular.element("#multiGameLeaderboardModal").closeModal()}function d(){angular.element("#playerModal").closeModal()}function m(e,r){var a;if(r>11)return a=0;a=12-r;var n=t("orderBy")(P.gameScores,"-score");return n[r-1]&&n[r-1].score===e.score&&(a+=1),a}function p(){P.gameList.forEach(function(e){if(e.scores){var r=$.map(e.scores,function(e){return e});r=t("orderBy")(r,"-score"),e.firstScore=r[0]}})}function f(e){angular.element("#playerModal").closeModal(),a.go("profile",{username:e})}function h(){i.getEventProperties(P.eventName).then(function(e){P.eventProperties=e,P.eventProperties.$loaded().then(function(){P.eventProperties.format.multiGame?(i.getGamesList(P.eventName).then(function(e){P.gameList=e,p()}),i.getMultiGameLeaderboard(P.eventName).then(function(e){var t=e;P.leaderboardLength=t.length,P.summarizedLeaderboard=t.slice(0,8)})):i.getSingleGameLeaderboard(P.eventName).then(function(e){var t=e;console.debug(t),P.leaderboardLength=t.length,P.summarizedLeaderboard=t,console.debug(P.summarizedLeaderboard)})})}),l.getAvatarData().then(function(e){P.avatarData=e})}function v(){angular.element("#badgesModal").openModal(),angular.element("#badgesModalContent").scrollTop(0)}function g(e){var t=new Firebase(C);i.getGameData(P.eventName,e).then(function(e){P.gameData=e,P.gameScores=o(t.child("contests").child(P.eventName).child("activeGames").child(P.gameData.$id).child("scores"))}),angular.element("#gameModal").openModal(),angular.element("#gameModalContent").scrollTop(0)}function w(){i.getMultiGameLeaderboard(P.eventName).then(function(e){P.completeLeaderboard=e}),angular.element("#multiGameLeaderboardModal").openModal(),angular.element("#multiGameLeaderboardModalContent").scrollTop(0)}function b(e){P.focusPlayer=e,i.getPlayerScores(P.eventName,P.gameList,P.focusPlayer).then(function(e){P.playerScores=e}),angular.element("#playerModal").openModal(),angular.element("#playerModalContent").scrollTop(0)}function A(e){d(),n(function(){g(e)},450)}function E(e){c(),n(function(){b(e)},450)}function M(e){u(),n(function(){b(e)},450)}function S(){angular.element("#rulesModal").openModal()}var C="https://wolfscontests.firebaseio.com",P=this;P.eventName=r.eventName,P.closeGameModal=c,P.closeMultiGameLeaderboardModal=u,P.closePlayerModal=d,P.determinePoints=m,P.getFirstPlaceScores=p,P.goToPlayerProfile=f,P.initEvent=h,P.openBadgesModal=v,P.openGameModal=g,P.openGameModalFromPlayerModal=A,P.openMultiGameLeaderboardModal=w,P.openPlayerModal=b,P.openPlayerModalFromGameModal=E,P.openPlayerModalFromLeaderboardModal=M,P.openRulesModal=S}angular.module("vg.app").controller("EventMainController",e),e.$inject=["$scope","$filter","$stateParams","$state","$timeout","$firebaseArray","eventService","authService","profileService"]}(),function(){"use strict";function e(){function e(e,t,r){}var r={bindToController:!0,controller:t,controllerAs:"vm",link:e,restrict:"E",templateUrl:"./app/eventComponents/gamesList.directive.htm",scope:{data:"=",openGameFunction:"="}};return r}function t(){}angular.module("vg.app").directive("vgGamesList",e)}(),function(){"use strict";function e(){function e(e,t,r){}var r={bindToController:!0,controller:t,controllerAs:"vm",link:e,restrict:"E",templateUrl:"./app/eventComponents/multiGameLeaderboard.directive.htm",scope:{data:"=",avatarData:"=",completeLength:"=",openPlayerFunction:"=",openLeaderboardFunction:"="}};return r}function t(){}angular.module("vg.app").directive("vgMultiGameLeaderboard",e)}(),function(){"use strict";function e(){function e(e,t,r){}var r={bindToController:!0,controller:t,controllerAs:"vm",link:e,restrict:"E",templateUrl:"./app/eventComponents/singleGameLeaderboard.directive.htm",scope:{data:"=",avatarData:"=",completeLength:"=",openLeaderboardFunction:"="}};return r}function t(){}angular.module("vg.app").directive("vgSingleGameLeaderboard",e)}(),function(){"use strict";function e(){function e(e,t,r){}var r={bindToController:!0,controller:t,controllerAs:"vm",link:e,restrict:"E",templateUrl:"./app/eventComponents/stickyMessage.directive.htm",scope:{properties:"="}};return r}function t(e){}angular.module("vg.app").directive("vgStickyMessage",e),t.$inject=["$timeout"]}(),function(){"use strict";function e(e,t,r,a,n){function o(){n.logOut(),r.location.reload()}e(function(){angular.element(".dropdown-button").dropdown({inDuration:300,outDuration:225,constrain_width:!1,hover:!1,gutter:-114,belowOrigin:!0})},400);var i=this;i.headerType=a.current.views.header.data.headerType,i.logOut=o}angular.module("vg.app").controller("HeaderController",e),e.$inject=["$timeout","$rootScope","$window","$state","authService"]}(),function(){"use strict";function e(){return function(e,t,r){var a=[];return angular.forEach(e,function(e,t){e.key=t,a.push(e)}),a.sort(function(e,r){return e[t]>r[t]?1:-1}),r&&a.reverse(),a}}angular.module("vg.app").filter("orderObjectBy",e)}(),function(){"use strict";function e(e,t,r,a,n,o,i){function s(){i.getAvatarData().then(function(e){c.avatarData=e}),a(function(){i.getBadgesData(e.profile.userName).then(function(e){c.badgesData=e,console.debug(c.badgesData)})},500)}function l(){c.disableButton=!0,o.setAPIKey("Client-ID f53d6d5833b07bc"),o.upload(c.file).then(function(r){i.saveAvatarLink(r[0].link,e.profile.userName),Materialize.toast("Your avatar was uploaded",4e3),a(function(){t.go("index")},1e3)})}var c=this;c.initAvatar=s,c.uploadAvatar=l}angular.module("vg.app").controller("AvatarController",e),e.$inject=["$rootScope","$state","$stateParams","$timeout","Upload","imgur","profileService"]}(),function(){"use strict";function e(e,t){t(function(){angular.element("#contentView").css("opacity","1").css("position","inherit")},310)}angular.module("vg.app").controller("HomeController",e),e.$inject=["$scope","$timeout"]}(),function(){"use strict";function e(e,t,r,a){function n(){e.pwChangeForm.$valid&&a.$changePassword({email:a.$getAuth().password.email,oldPassword:o.inputCurrentPassword,newPassword:o.inputNewPassword}).then(function(){Materialize.toast("Your password was changed.",4e3),t(function(){r.go("index")},1e3)})["catch"](function(e){"INVALID_PASSWORD"===e.code&&(o.showChangePasswordMessage=!0)})}var o=this;t(function(){angular.element("#contentView").css("opacity","1").css("position","inherit")},310),o.submitChangePassword=n}angular.module("vg.app").controller("PasswordChangeController",e),e.$inject=["$scope","$timeout","$state","AuthWrapper"]}(),function(){"use strict";function e(e,t,r,a,n,o,i,s,l){function c(){s.getUserData(t.username).then(function(e){u.profileData=e,s.getTournamentHistory(u.profileData).then(function(e){var r=e;u.eventStandings=s.getTournamentStandings(r,t.username)})}),s.getAvatarData().then(function(e){u.avatarData=e}),s.getBadgesData(t.username).then(function(e){u.badgesData=e})}a(function(){angular.element("#contentView").css("opacity","1").css("position","inherit"),$(".collapsible").collapsible({accordion:!0})},410);var u=this;u.initProfile=c}angular.module("vg.app").controller("ProfileController",e),e.$inject=["$scope","$stateParams","$q","$timeout","$state","$firebaseArray","authService","profileService","eventService"]}(),function(){"use strict";function e(e,t,r,a,n){function o(){var e=t.defer(),r=new Firebase(d),n=a(r.child("avatars"));return n.$loaded(function(){e.resolve(n)}),e.promise}function i(e){var r=t.defer(),n=new Firebase(d),o=a(n.child("badges").child(e));return o.$loaded(function(){r.resolve(o)}),r.promise}function s(e){var r=t.defer(),a=(new Firebase(d),[]);for(var n in e.pledgedTo)a.push(n);return r.resolve(a),r.promise}function l(e,t){var r=new Firebase(d),o=[];return e.forEach(function(e){n.getEventProperties(e).then(function(n){n.$loaded().then(function(){if("concluded"===n.state){var i=a(r.child("standings").child(e));i.$loaded().then(function(){o.push(i[t]?{name:n.name,premier:n.premier?!0:null,shortName:e,state:"concluded",color:n.color,position:i[t]}:{name:n.name,premier:n.premier?!0:null,shortName:e,state:"concluded",color:n.color,position:-1})})}else("inprogress"===n.state||"upcoming"===n.state)&&o.push({name:n.name,premier:n.premier?!0:null,shortName:e,color:n.color,state:n.state})})})}),o}function c(e){var a=t.defer(),n=new Firebase(d),o=r(n.child("users"));return o.$loaded(function(){o.forEach(function(t){t.userName===e&&a.resolve(t)})}),a.promise}function u(e,t){var r=new Firebase(d),n=a(r.child("avatars"));n.$loaded(function(){n[t]=e,n.$save()})}var d="https://wolfscontests.firebaseio.com";this.getAvatarData=o,this.getBadgesData=i,this.getTournamentHistory=s,this.getTournamentStandings=l,this.getUserData=c,this.saveAvatarLink=u}angular.module("vg.app").service("profileService",e),e.$inject=["$rootScope","$q","$firebaseArray","$firebaseObject","eventService"]}(),function(){"use strict";function e(e,t,r,a,n,o,i,s){function l(){i.loginToAccount(d.loginEmail,d.loginPassword).then(function(e){if(d.showInvalidUserError=!1,d.showInvalidPasswordError=!1,"LOGIN_SUCCESS"===e)n.go("index");else{if("INVALID_USER"===e)return void(d.showInvalidUserError=!0);"INVALID_PASSWORD"===e&&(d.showInvalidPasswordError=!0)}})}function c(){return d.loginEmail?void s.$resetPassword({email:d.loginEmail}).then(function(){d.showPasswordResetEmailMessage=!1,Materialize.toast("A password reset email has been sent to "+d.loginEmail+".",4e3)}):void(d.showPasswordResetEmailMessage=!0)}function u(){i.checkIfUserExists(d.newUsername).then(function(e){return d.showDuplicateUserError=!1,d.showEmailTakenError=!1,e?void(d.showDuplicateUserError=!0):void i.createNewUser(d.newEmail,d.newPassword,d.newUsername).then(function(e){return"EMAIL_TAKEN"===e?void(d.showEmailTakenError=!0):void("ACCOUNT_CREATED"===e&&n.go("profile",{username:d.newUsername}))})})}r(function(){angular.element("#contentView").css("opacity","1").css("position","inherit")},410);var d=this;d.loginToAccount=l,d.passwordReset=c,d.submitNewAccount=u}angular.module("vg.app").controller("RegController",e),e.$inject=["$scope","$rootScope","$timeout","$window","$state","$firebaseObject","authService","AuthWrapper"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJhcHAuY29uZmlnLmpzIiwiYXBwLm1pbi5qcyIsImFwcC5ydW4uanMiLCJhdXRoL2F1dGguc2VydmljZS5qcyIsImF1dGgvYXV0aHdyYXBwZXIuZmFjdG9yeS5qcyIsImV2ZW50L2V2ZW50LnNlcnZpY2UuanMiLCJldmVudC9nYW1lLmNvbnRyb2xsZXIuanMiLCJldmVudC9tYWluLmNvbnRyb2xsZXIuanMiLCJldmVudENvbXBvbmVudHMvZ2FtZXNMaXN0LmRpcmVjdGl2ZS5qcyIsImV2ZW50Q29tcG9uZW50cy9tdWx0aUdhbWVMZWFkZXJib2FyZC5kaXJlY3RpdmUuanMiLCJldmVudENvbXBvbmVudHMvc2luZ2xlR2FtZUxlYWRlcmJvYXJkLmRpcmVjdGl2ZS5qcyIsImV2ZW50Q29tcG9uZW50cy9zdGlja3lNZXNzYWdlLmRpcmVjdGl2ZS5qcyIsImhlYWRlci9oZWFkZXIuY29udHJvbGxlci5qcyIsImhlbHBlcnMvb3JkZXJPYmplY3RCeS5maWx0ZXIuanMiLCJob21lL2F2YXRhci5jb250cm9sbGVyLmpzIiwiaG9tZS9ob21lLmNvbnRyb2xsZXIuanMiLCJob21lL3Bhc3N3b3JkQ2hhbmdlLmNvbnRyb2xsZXIuanMiLCJob21lL3Byb2ZpbGUuY29udHJvbGxlci5qcyIsImhvbWUvcHJvZmlsZS5zZXJ2aWNlLmpzIiwiaG9tZS9yZWcuY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJvdGhlcndpc2UiLCJzdGF0ZSIsInVybCIsInZpZXdzIiwiaGVhZGVyIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiZGF0YSIsImhlYWRlclR5cGUiLCJjb250ZW50IiwiJGluamVjdCIsInJ1biIsIiRyb290U2NvcGUiLCIkbG9jYXRpb24iLCIkZmlyZWJhc2VPYmplY3QiLCJBdXRoV3JhcHBlciIsIiRvbiIsIiRnZXRBdXRoIiwiYXV0aERhdGEiLCJyZWYiLCJGaXJlYmFzZSIsInByb2ZpbGVEYXRhIiwiY2hpbGQiLCJ1aWQiLCIkYmluZFRvIiwidGhlbiIsInVuYmluZCIsInVuYmluZEZ1bmN0aW9uIiwiYXV0aFNlcnZpY2UiLCIkcSIsIiRzdGF0ZSIsImNoZWNrSWZVc2VyRXhpc3RzIiwiaW5wdXRVc2VybmFtZSIsImRlZmVycmVkIiwiZGVmZXIiLCJkb2VzVXNlckV4aXN0IiwidXNlcnNSZWYiLCJGQlVSTCIsIm9uY2UiLCJkYXRhU25hcHNob3QiLCJmb3JFYWNoIiwidXNlciIsInZhbCIsInVzZXJOYW1lIiwicmVzb2x2ZSIsInByb21pc2UiLCJjcmVhdGVOZXdVc2VyIiwiaW5wdXRFbWFpbCIsImlucHV0UGFzc3dvcmQiLCIkY3JlYXRlVXNlciIsImVtYWlsIiwicGFzc3dvcmQiLCJ1c2VyRGF0YSIsInNldCIsInJvbGUiLCJlcnJvckRhdGEiLCJjb25zb2xlIiwiZXJyb3IiLCJjb2RlIiwiJGF1dGhXaXRoUGFzc3dvcmQiLCJsb2dpblRvQWNjb3VudCIsImxvZ091dCIsIiR1bmF1dGgiLCJnbyIsInRoaXMiLCJzZXJ2aWNlIiwiJGZpcmViYXNlQXV0aCIsImZhY3RvcnkiLCJldmVudFNlcnZpY2UiLCIkZmlsdGVyIiwiJGZpcmViYXNlQXJyYXkiLCJjcmVhdGVNdWx0aUdhbWVGaW5hbFN0YW5kaW5ncyIsImlucHV0RXZlbnQiLCJnZXRNdWx0aUdhbWVMZWFkZXJib2FyZCIsInByb21pc2VSZXNvbHV0aW9uIiwiZGVidWciLCJpbnB1dEV2ZW50U3RhbmRpbmdzIiwiJGxvYWRlZCIsInN0YW5kaW5nIiwia2V5IiwicG9zaXRpb24iLCIkc2F2ZSIsImdldEV2ZW50UHJvcGVydGllcyIsImV2ZW50UHJvcGVydGllcyIsImdldEdhbWVEYXRhIiwiaW5wdXRHYW1lIiwiZ2V0R2FtZXNMaXN0IiwiZ2FtZXNMaXN0IiwiZ2FtZSIsImNhbWVsTmFtZSIsInBsYXllclBvaW50cyIsInNjb3JlcyIsInNjb3Jlc0FycmF5IiwiJCIsIm1hcCIsImVsIiwidG90YWxBd2FyZCIsImkiLCJsZW5ndGgiLCJwb2ludHMiLCJoYXZlQm90dG9tU2NvcmVyc0Zsb29yIiwiZmxvb3JSYW5nZSIsImdldFNjb3JlQ291bnRPZiIsInBvaW50c0RhdGEiLCJnZXRTaW5nbGVHYW1lTGVhZGVyYm9hcmQiLCJsZWFkZXJib2FyZERhdGEiLCJnZXRQbGF5ZXJTY29yZXMiLCJpbnB1dEdhbWVzTGlzdCIsImlucHV0UGxheWVyIiwiZGlzcGxheVNjb3JlcyIsIm5ld1Njb3JlT2JqZWN0Iiwic2NvcmUiLCJwb2ludHNFYXJuZWQiLCJpbnBVcmwiLCJ0d2l0Y2hVcmwiLCJtYW1lVmVyc2lvbiIsInB1c2giLCJFdmVudEdhbWVDb250cm9sbGVyIiwiJHNjb3BlIiwiJHN0YXRlUGFyYW1zIiwiJHRpbWVvdXQiLCJpbml0R2FtZVBhZ2UiLCJ2bSIsImV2ZW50TmFtZSIsImdhbWVOYW1lIiwiZ2FtZURhdGEiLCJnYW1lU2NvcmVzIiwiJGlkIiwiZWxlbWVudCIsImNzcyIsIkV2ZW50TWFpbkNvbnRyb2xsZXIiLCJwcm9maWxlU2VydmljZSIsImNsb3NlR2FtZU1vZGFsIiwiY2xvc2VNb2RhbCIsImNsb3NlTXVsdGlHYW1lTGVhZGVyYm9hcmRNb2RhbCIsImNsb3NlUGxheWVyTW9kYWwiLCJkZXRlcm1pbmVQb2ludHMiLCJpbnB1dFNjb3JlRGF0YSIsImlucHV0SW5kZXgiLCJ1c2VyR2FtZVBvaW50cyIsInNvcnRlZFNjb3JlcyIsImdldEZpcnN0UGxhY2VTY29yZXMiLCJnYW1lTGlzdCIsImZpcnN0U2NvcmUiLCJnb1RvUGxheWVyUHJvZmlsZSIsInVzZXJuYW1lIiwiaW5pdEV2ZW50IiwiZm9ybWF0IiwibXVsdGlHYW1lIiwibGVhZGVyYm9hcmQiLCJsZWFkZXJib2FyZExlbmd0aCIsInN1bW1hcml6ZWRMZWFkZXJib2FyZCIsInNsaWNlIiwiZ2V0QXZhdGFyRGF0YSIsImF2YXRhckRhdGEiLCJvcGVuQmFkZ2VzTW9kYWwiLCJvcGVuTW9kYWwiLCJzY3JvbGxUb3AiLCJvcGVuR2FtZU1vZGFsIiwiaW5wdXRHYW1lTmFtZSIsIm9wZW5NdWx0aUdhbWVMZWFkZXJib2FyZE1vZGFsIiwiY29tcGxldGVMZWFkZXJib2FyZCIsIm9wZW5QbGF5ZXJNb2RhbCIsImZvY3VzUGxheWVyIiwicGxheWVyU2NvcmVzIiwib3BlbkdhbWVNb2RhbEZyb21QbGF5ZXJNb2RhbCIsIm9wZW5QbGF5ZXJNb2RhbEZyb21HYW1lTW9kYWwiLCJvcGVuUGxheWVyTW9kYWxGcm9tTGVhZGVyYm9hcmRNb2RhbCIsIm9wZW5SdWxlc01vZGFsIiwidmdHYW1lc0xpc3QiLCJsaW5rIiwic2NvcGUiLCJhdHRycyIsImRpcmVjdGl2ZSIsImJpbmRUb0NvbnRyb2xsZXIiLCJHYW1lc0xpc3RDb250cm9sbGVyIiwiY29udHJvbGxlckFzIiwicmVzdHJpY3QiLCJvcGVuR2FtZUZ1bmN0aW9uIiwidmdNdWx0aUdhbWVMZWFkZXJib2FyZCIsIk11bHRpR2FtZUxlYWRlcmJvYXJkQ29udHJvbGxlciIsImNvbXBsZXRlTGVuZ3RoIiwib3BlblBsYXllckZ1bmN0aW9uIiwib3BlbkxlYWRlcmJvYXJkRnVuY3Rpb24iLCJ2Z1NpbmdsZUdhbWVMZWFkZXJib2FyZCIsIlNpbmdsZUdhbWVMZWFkZXJib2FyZENvbnRyb2xsZXIiLCJ2Z1N0aWNreU1lc3NhZ2UiLCJTdGlja3lNZXNzYWdlQ29udHJvbGxlciIsInByb3BlcnRpZXMiLCJIZWFkZXJDb250cm9sbGVyIiwiJHdpbmRvdyIsImxvY2F0aW9uIiwicmVsb2FkIiwiZHJvcGRvd24iLCJpbkR1cmF0aW9uIiwib3V0RHVyYXRpb24iLCJjb25zdHJhaW5fd2lkdGgiLCJob3ZlciIsImd1dHRlciIsImJlbG93T3JpZ2luIiwiY3VycmVudCIsIm9yZGVyT2JqZWN0QnkiLCJpdGVtcyIsImZpZWxkIiwicmV2ZXJzZSIsImZpbHRlcmVkIiwiaXRlbSIsInNvcnQiLCJhIiwiYiIsImZpbHRlciIsIkF2YXRhckNvbnRyb2xsZXIiLCJVcGxvYWQiLCJpbWd1ciIsImluaXRBdmF0YXIiLCJtb2RlbCIsImdldEJhZGdlc0RhdGEiLCJwcm9maWxlIiwiYmFkZ2VzRGF0YSIsInVwbG9hZEF2YXRhciIsImRpc2FibGVCdXR0b24iLCJzZXRBUElLZXkiLCJ1cGxvYWQiLCJmaWxlIiwic2F2ZUF2YXRhckxpbmsiLCJNYXRlcmlhbGl6ZSIsInRvYXN0IiwiSG9tZUNvbnRyb2xsZXIiLCJQYXNzd29yZENoYW5nZUNvbnRyb2xsZXIiLCJzdWJtaXRDaGFuZ2VQYXNzd29yZCIsInB3Q2hhbmdlRm9ybSIsIiR2YWxpZCIsIiRjaGFuZ2VQYXNzd29yZCIsIm9sZFBhc3N3b3JkIiwiaW5wdXRDdXJyZW50UGFzc3dvcmQiLCJuZXdQYXNzd29yZCIsImlucHV0TmV3UGFzc3dvcmQiLCJzaG93Q2hhbmdlUGFzc3dvcmRNZXNzYWdlIiwiUHJvZmlsZUNvbnRyb2xsZXIiLCJpbml0UHJvZmlsZSIsImdldFVzZXJEYXRhIiwiZ2V0VG91cm5hbWVudEhpc3RvcnkiLCJ0b3VybmFtZW50SGlzdG9yeURhdGEiLCJldmVudFN0YW5kaW5ncyIsImdldFRvdXJuYW1lbnRTdGFuZGluZ3MiLCJjb2xsYXBzaWJsZSIsImFjY29yZGlvbiIsImlucHV0VXNlciIsImlucHV0VXNlckRhdGEiLCJldmVudHNBcnJheSIsInBsZWRnZWRUbyIsImlucHV0VG91cm5hbWVudEhpc3RvcnkiLCJldmVudCIsImV2ZW50U3RhbmRpbmdEYXRhIiwibmFtZSIsInByZW1pZXIiLCJzaG9ydE5hbWUiLCJjb2xvciIsInVzZXJzRGF0YSIsImlucHV0TGluayIsIlJlZ0NvbnRyb2xsZXIiLCJsb2dpbkVtYWlsIiwibG9naW5QYXNzd29yZCIsInNob3dJbnZhbGlkVXNlckVycm9yIiwic2hvd0ludmFsaWRQYXNzd29yZEVycm9yIiwicGFzc3dvcmRSZXNldCIsIiRyZXNldFBhc3N3b3JkIiwic2hvd1Bhc3N3b3JkUmVzZXRFbWFpbE1lc3NhZ2UiLCJzdWJtaXROZXdBY2NvdW50IiwibmV3VXNlcm5hbWUiLCJ1c2VyRXhpc3RzIiwic2hv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RyxFQUFBMkksV0FBQSxJQUFBLFlBUkEzSSxFQUFBaUosK0JBQUEsR0FhQSxRQUFBQyxLQUdBaFAsRUFBQUcsa0JBQUEyRixFQUFBbUosYUFBQXBQLEtBQUEsU0FBQXFQLEdBS0EsTUFIQXBKLEdBQUFxSix3QkFBQSxFQUNBckosRUFBQXNKLHFCQUFBLEVBRUFGLE9BRUFwSixFQUFBcUosd0JBQUEsT0FNQW5QLEdBQUFrQixjQUFBNEUsRUFBQXVKLFNBQUF2SixFQUFBaUgsWUFBQWpILEVBQUFtSixhQUFBcFAsS0FBQSxTQUFBaUQsR0FFQSxNQUFBLGdCQUFBQSxPQUVBZ0QsRUFBQXNKLHFCQUFBLFFBR0Esb0JBQUF0TSxHQUVBNUMsRUFBQWlDLEdBQUEsV0FBQWtGLFNBQUF2QixFQUFBbUosbUJBOUVBckosRUFBQSxXQUNBN0gsUUFBQXFJLFFBQUEsZ0JBQ0FDLElBQUEsVUFBQSxLQUNBQSxJQUFBLFdBQUEsWUFDQSxJQUVBLElBQ0FQLEdBQUExRCxJQUVBMEQsR0FBQTlELGVBQUFBLEVBQ0E4RCxFQUFBK0ksY0FBQUEsRUFDQS9JLEVBQUFrSixpQkFBQUEsRUFsQkFqUixRQUNBQyxPQUFBLFVBQ0FVLFdBQUEsZ0JBQUE4UCxHbEJvZ0RJQSxFQUFjMVAsU0FBVyxTQUFVLGFBQWMsV0FBWSxVQUFXLFNBQVUsa0JBQW1CLGNBQWUiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcsIFtcbiAgICAgICAgICAgIC8qIEFuZ3VsYXIgbW9kdWxlcyAqL1xuICAgICAgICAgICAgJ25nQW5pbWF0ZScsXG4gICAgICAgICAgICAvKiBBcHAgbW9kdWxlcyAqL1xuICAgICAgICAgICAgLyogVGhpcmQtcGFydHkgbW9kdWxlcyAqL1xuICAgICAgICAgICAgJ3VpLnJvdXRlcicsXG4gICAgICAgICAgICAnZmlyZWJhc2UnLFxuICAgICAgICAgICAgJ3ZhbGlkYXRpb24ubWF0Y2gnLFxuICAgICAgICAgICAgJ29yZGluYWwnLFxuICAgICAgICAgICAgJ25nRmlsZVVwbG9hZCcsXG4gICAgICAgICAgICAnbmdJbWd1cidcbiAgICAgICAgXSk7XG59KSgpOyIsIihmdW5jdGlvbigpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCd2Zy5hcHAnKVxuXHRcdC5jb25maWcoY29uZmlnKTtcblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gY29uZmlnKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcblxuXHRcdC8vIFJlZGlyZWN0IGFueSB1bm1hdGNoZWQgVVJMIHRvIC8uXG5cdFx0JHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpO1xuXG5cdFx0JHN0YXRlUHJvdmlkZXJcblx0XHQgICAgLnN0YXRlKCdpbmRleCcsIHtcblx0XHQgICAgXHR1cmw6ICcvJyxcblxuXHRcdCAgICBcdHZpZXdzOiB7XG5cdFx0ICAgIFx0XHQnaGVhZGVyJzoge1xuXHRcdCAgICBcdFx0XHR0ZW1wbGF0ZVVybDogJ2FwcC9oZWFkZXIvaG9tZUhlYWRlci5odG0nLFxuXHRcdCAgICBcdFx0XHRjb250cm9sbGVyOiAnSGVhZGVyQ29udHJvbGxlciBhcyBoZWFkZXInLFxuXHRcdCAgICBcdFx0XHRkYXRhOiB7XG5cdFx0ICAgIFx0XHRcdFx0aGVhZGVyVHlwZTogJ3RhbGwnXG5cdFx0ICAgIFx0XHRcdH1cblx0XHQgICAgXHRcdH0sXG5cdFx0ICAgIFx0XHQnY29udGVudCc6IHtcblx0XHQgICAgXHRcdFx0dGVtcGxhdGVVcmw6ICdhcHAvaG9tZS9ob21lLmh0bScsXG5cdFx0ICAgIFx0XHRcdGNvbnRyb2xsZXI6ICdIb21lQ29udHJvbGxlciBhcyBob21lJ1xuXHRcdCAgICBcdFx0fVxuXHRcdCAgICBcdH1cblx0XHQgICAgfSlcblxuXHRcdCAgICAuc3RhdGUoJ3JlZ2lzdGVyT3JMb2dpbicsIHtcblx0XHQgICAgXHR1cmw6ICcvcmVnaXN0ZXJPckxvZ2luJyxcblxuXHRcdCAgICBcdHZpZXdzOiB7XG5cdFx0ICAgIFx0XHQnaGVhZGVyJzoge1xuXHRcdCAgICBcdFx0XHR0ZW1wbGF0ZVVybDogJy9hcHAvaGVhZGVyL2hvbWVIZWFkZXIuaHRtJyxcblx0XHQgICAgXHRcdFx0Y29udHJvbGxlcjogJ0hlYWRlckNvbnRyb2xsZXIgYXMgaGVhZGVyJyxcblx0XHQgICAgXHRcdFx0ZGF0YToge1xuXHRcdCAgICBcdFx0XHRcdGhlYWRlclR5cGU6ICd0YWxsJ1xuXHRcdCAgICBcdFx0XHR9XG5cdFx0ICAgIFx0XHR9LFxuXHRcdCAgICBcdFx0J2NvbnRlbnQnOiB7XG5cdFx0ICAgIFx0XHRcdHRlbXBsYXRlVXJsOiAnL2FwcC9ob21lL3JlZy5odG0nLFxuXHRcdCAgICBcdFx0XHRjb250cm9sbGVyOiAnUmVnQ29udHJvbGxlciBhcyByZWcnXG5cdFx0ICAgIFx0XHR9XG5cdFx0ICAgIFx0fVxuXHRcdCAgICB9KVxuXG5cdFx0ICAgIC5zdGF0ZSgncHJvZmlsZScsIHtcblx0XHQgICAgXHR1cmw6ICcvcHJvZmlsZS86dXNlcm5hbWUnLFxuXG5cdFx0ICAgIFx0dmlld3M6IHtcblx0XHQgICAgXHRcdCdoZWFkZXInOiB7XG5cdFx0ICAgIFx0XHRcdHRlbXBsYXRlVXJsOiAnL2FwcC9oZWFkZXIvaG9tZUhlYWRlci5odG0nLFxuXHRcdCAgICBcdFx0XHRjb250cm9sbGVyOiAnSGVhZGVyQ29udHJvbGxlciBhcyBoZWFkZXInLFxuXHRcdCAgICBcdFx0XHRkYXRhOiB7XG5cdFx0ICAgIFx0XHRcdFx0aGVhZGVyVHlwZTogJ3RhbGwnXG5cdFx0ICAgIFx0XHRcdH1cblx0XHQgICAgXHRcdH0sXG5cdFx0ICAgIFx0XHQnY29udGVudCc6IHtcblx0XHQgICAgXHRcdFx0dGVtcGxhdGVVcmw6ICcvYXBwL2hvbWUvcHJvZmlsZS5odG0nLFxuXHRcdCAgICBcdFx0XHRjb250cm9sbGVyOiAnUHJvZmlsZUNvbnRyb2xsZXIgYXMgcHJvZmlsZSdcblx0XHQgICAgXHRcdH1cblx0XHQgICAgXHR9XG5cdFx0ICAgIH0pXG5cblx0XHQgICAgLnN0YXRlKCdldmVudE1haW4nLCB7XG5cdFx0ICAgIFx0dXJsOiAnL2V2ZW50LzpldmVudE5hbWUvbWFpbicsXG5cblx0XHQgICAgXHR2aWV3czoge1xuXHRcdCAgICBcdFx0J2hlYWRlcic6IHtcblx0XHQgICAgXHRcdFx0dGVtcGxhdGVVcmw6ICcvYXBwL2hlYWRlci9ob21lSGVhZGVyLmh0bScsXG5cdFx0ICAgIFx0XHRcdGNvbnRyb2xsZXI6ICdIZWFkZXJDb250cm9sbGVyIGFzIGhlYWRlcicsXG5cdFx0ICAgIFx0XHRcdGRhdGE6IHtcblx0XHQgICAgXHRcdFx0XHRoZWFkZXJUeXBlOiAndGFsbCdcblx0XHQgICAgXHRcdFx0fVxuXHRcdCAgICBcdFx0fSxcblx0XHQgICAgXHRcdCdjb250ZW50Jzoge1xuXHRcdCAgICBcdFx0XHR0ZW1wbGF0ZVVybDogJy9hcHAvZXZlbnQvbWFpbi5odG0nLFxuXHRcdCAgICBcdFx0XHRjb250cm9sbGVyOiAnRXZlbnRNYWluQ29udHJvbGxlciBhcyBldmVudCdcblx0XHQgICAgXHRcdH1cblx0XHQgICAgXHR9XG5cdFx0ICAgIH0pXG5cblx0XHQgICAgLnN0YXRlKCdjdXN0b21pemVBdmF0YXInLCB7XG5cdFx0ICAgIFx0dXJsOiAnL2N1c3RvbWl6ZUF2YXRhcicsXG5cblx0XHQgICAgXHR2aWV3czoge1xuXHRcdCAgICBcdFx0J2hlYWRlcic6IHtcblx0XHQgICAgXHRcdFx0dGVtcGxhdGVVcmw6ICcvYXBwL2hlYWRlci9ob21lSGVhZGVyLmh0bScsXG5cdFx0ICAgIFx0XHRcdGNvbnRyb2xsZXI6ICdIZWFkZXJDb250cm9sbGVyIGFzIGhlYWRlcicsXG5cdFx0ICAgIFx0XHRcdGRhdGE6IHtcblx0XHQgICAgXHRcdFx0XHRoZWFkZXJUeXBlOiAndGFsbCdcblx0XHQgICAgXHRcdFx0fVxuXHRcdCAgICBcdFx0fSxcblx0XHQgICAgXHRcdCdjb250ZW50Jzoge1xuXHRcdCAgICBcdFx0XHR0ZW1wbGF0ZVVybDogJy9hcHAvaG9tZS9hdmF0YXIuaHRtJyxcblx0XHQgICAgXHRcdFx0Y29udHJvbGxlcjogJ0F2YXRhckNvbnRyb2xsZXIgYXMgYXZhdGFyJ1xuXHRcdCAgICBcdFx0fVxuXHRcdCAgICBcdH1cblx0XHQgICAgfSlcblxuXHRcdCAgICAuc3RhdGUoJ3Bhc3N3b3JkQ2hhbmdlJywge1xuXHRcdCAgICBcdHVybDogJy9wYXNzd29yZENoYW5nZScsXG5cblx0XHQgICAgXHR2aWV3czoge1xuXHRcdCAgICBcdFx0J2hlYWRlcic6IHtcblx0XHQgICAgXHRcdFx0dGVtcGxhdGVVcmw6ICcvYXBwL2hlYWRlci9ob21lSGVhZGVyLmh0bScsXG5cdFx0ICAgIFx0XHRcdGNvbnRyb2xsZXI6ICdIZWFkZXJDb250cm9sbGVyIGFzIGhlYWRlcicsXG5cdFx0ICAgIFx0XHRcdGRhdGE6IHtcblx0XHQgICAgXHRcdFx0XHRoZWFkZXJUeXBlOiAndGFsbCdcblx0XHQgICAgXHRcdFx0fVxuXHRcdCAgICBcdFx0fSxcblx0XHQgICAgXHRcdCdjb250ZW50Jzoge1xuXHRcdCAgICBcdFx0XHR0ZW1wbGF0ZVVybDogJy9hcHAvaG9tZS9wYXNzd29yZENoYW5nZS5odG0nLFxuXHRcdCAgICBcdFx0XHRjb250cm9sbGVyOiAnUGFzc3dvcmRDaGFuZ2VDb250cm9sbGVyIGFzIHB3Y2hhbmdlJ1xuXHRcdCAgICBcdFx0fVxuXHRcdCAgICBcdH1cblx0XHQgICAgfSlcblxuXHRcdCAgICAuc3RhdGUoJ2V2ZW50R2FtZScsIHtcblx0XHQgICAgXHR1cmw6ICcvZXZlbnQvOmV2ZW50TmFtZS9nYW1lLzpnYW1lTmFtZScsXG5cblx0XHQgICAgXHR2aWV3czoge1xuXHRcdCAgICBcdFx0J2hlYWRlcic6IHtcblx0XHQgICAgXHRcdFx0dGVtcGxhdGVVcmw6ICcvYXBwL2hlYWRlci9ob21lSGVhZGVyLmh0bScsXG5cdFx0ICAgIFx0XHRcdGNvbnRyb2xsZXI6ICdIZWFkZXJDb250cm9sbGVyIGFzIGhlYWRlcicsXG5cdFx0ICAgIFx0XHRcdGRhdGE6IHtcblx0XHQgICAgXHRcdFx0XHRoZWFkZXJUeXBlOiAndGFsbCdcblx0XHQgICAgXHRcdFx0fVxuXHRcdCAgICBcdFx0fSxcblx0XHQgICAgXHRcdCdjb250ZW50Jzoge1xuXHRcdCAgICBcdFx0XHR0ZW1wbGF0ZVVybDogJy9hcHAvZXZlbnQvZ2FtZS5odG0nLFxuXHRcdCAgICBcdFx0XHRjb250cm9sbGVyOiAnRXZlbnRHYW1lQ29udHJvbGxlciBhcyBnYW1lJ1xuXHRcdCAgICBcdFx0fVxuXHRcdCAgICBcdH1cblx0XHQgICAgfSk7XG5cdH1cbn0pKCk7IixudWxsLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAucnVuKHJ1bik7XG5cbiAgICBmdW5jdGlvbiBydW4oJHJvb3RTY29wZSwgJGxvY2F0aW9uLCAkZmlyZWJhc2VPYmplY3QsIEF1dGhXcmFwcGVyKSB7XG5cbiAgICAgICAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgLy8gSWYgdXNlciBpcyBsb2dnZWQgaW4sIGRvd25sb2FkIHRoZWlyIHByb2ZpbGUgZGF0YSB0byBhbiBvYmplY3QgaW4gJHJvb3RTY29wZS5cbiAgICAgICAgICAgIGlmIChBdXRoV3JhcHBlci4kZ2V0QXV0aCgpKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdmFyIGF1dGhEYXRhID0gQXV0aFdyYXBwZXIuJGdldEF1dGgoKTtcbiAgICAgICAgICAgICAgICB2YXIgcmVmID0gbmV3IEZpcmViYXNlKCdodHRwczovL3dvbGZzY29udGVzdHMuZmlyZWJhc2Vpby5jb20nKTtcblxuICAgICAgICAgICAgICAgIHZhciBwcm9maWxlRGF0YSA9ICRmaXJlYmFzZU9iamVjdChyZWYuY2hpbGQoJ3VzZXJzJykuY2hpbGQoYXV0aERhdGEudWlkKSk7XG4gICAgICAgICAgICAgICAgcHJvZmlsZURhdGEuJGJpbmRUbygkcm9vdFNjb3BlLCAncHJvZmlsZScpLnRoZW4oZnVuY3Rpb24odW5iaW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUudW5iaW5kRnVuY3Rpb24gPSB1bmJpbmQ7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcblxuICAgIH1cblxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuc2VydmljZSgnYXV0aFNlcnZpY2UnLCBhdXRoU2VydmljZSk7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBhdXRoU2VydmljZSgkcSwgJHJvb3RTY29wZSwgJHN0YXRlLCAkZmlyZWJhc2VPYmplY3QsIEF1dGhXcmFwcGVyKSB7XG4gICAgICAgIFxuICAgIFx0dmFyIEZCVVJMID0gJ2h0dHBzOi8vd29sZnNjb250ZXN0cy5maXJlYmFzZWlvLmNvbSc7XG5cbiAgICBcdHRoaXMuY2hlY2tJZlVzZXJFeGlzdHMgPSBjaGVja0lmVXNlckV4aXN0cztcbiAgICBcdHRoaXMuY3JlYXRlTmV3VXNlciA9IGNyZWF0ZU5ld1VzZXI7XG4gICAgICAgIHRoaXMubG9naW5Ub0FjY291bnQgPSBsb2dpblRvQWNjb3VudDtcbiAgICAgICAgdGhpcy5sb2dPdXQgPSBsb2dPdXQ7XG5cbiAgICBcdC8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgIFx0ZnVuY3Rpb24gY2hlY2tJZlVzZXJFeGlzdHMoaW5wdXRVc2VybmFtZSkge1xuXG4gICAgXHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICBcdFx0dmFyIGRvZXNVc2VyRXhpc3QgPSBmYWxzZTtcbiAgICBcdFx0dmFyIHVzZXJzUmVmID0gbmV3IEZpcmViYXNlKEZCVVJMICsgJy91c2VycycpO1xuXG4gICAgXHRcdHVzZXJzUmVmLm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24oZGF0YVNuYXBzaG90KSB7XG5cbiAgICBcdFx0XHRkYXRhU25hcHNob3QuZm9yRWFjaChmdW5jdGlvbih1c2VyKSB7XG4gICAgXHRcdFx0XHRpZiAodXNlci52YWwoKS51c2VyTmFtZSA9PT0gaW5wdXRVc2VybmFtZSkge1xuICAgIFx0XHRcdFx0XHRkb2VzVXNlckV4aXN0ID0gdHJ1ZTtcbiAgICBcdFx0XHRcdH1cbiAgICBcdFx0XHR9KTtcblxuICAgIFx0XHRcdGRlZmVycmVkLnJlc29sdmUoZG9lc1VzZXJFeGlzdCk7XG5cbiAgICBcdFx0fSk7XG5cbiAgICBcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICBcdH1cblxuICAgIFx0ZnVuY3Rpb24gY3JlYXRlTmV3VXNlcihpbnB1dEVtYWlsLCBpbnB1dFBhc3N3b3JkLCBpbnB1dFVzZXJuYW1lKSB7XG5cbiAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICBcdFx0QXV0aFdyYXBwZXIuJGNyZWF0ZVVzZXIoe1xuICAgIFx0XHRcdGVtYWlsOiBpbnB1dEVtYWlsLFxuICAgIFx0XHRcdHBhc3N3b3JkOiBpbnB1dFBhc3N3b3JkXG4gICAgXHRcdH0pLnRoZW4oZnVuY3Rpb24odXNlckRhdGEpIHtcblxuICAgIFx0XHRcdC8vIENyZWF0ZSBhIGRhdGEgZW50cnkgZm9yIHRoZSBuZXcgdXNlcm5hbWUuXG4gICAgXHRcdFx0bmV3IEZpcmViYXNlKEZCVVJMKS5jaGlsZCgndXNlcnMvJyArIHVzZXJEYXRhLnVpZCkuc2V0KHtcblxuICAgIFx0XHRcdFx0dXNlck5hbWU6IGlucHV0VXNlcm5hbWUsXG4gICAgXHRcdFx0XHRyb2xlOiAnVXNlcidcblxuICAgIFx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yRGF0YSkge1xuICAgIFx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnJvckRhdGEpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3JEYXRhLmNvZGU7XG4gICAgXHRcdFx0fSk7XG5cbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBkYXRhIGVudHJ5IGZvciB0aGUgdXNlcidzIGF2YXRhci5cbiAgICAgICAgICAgICAgICBuZXcgRmlyZWJhc2UoRkJVUkwpLmNoaWxkKCdhdmF0YXJzJykuY2hpbGQoaW5wdXRVc2VybmFtZSkuc2V0KCdodHRwOi8vYXBpLmFkb3JhYmxlLmlvL2F2YXRhcnMvNDIvJyArIGlucHV0VXNlcm5hbWUpO1xuXG4gICAgXHRcdFx0Ly8gTG9nIHRoZSB1c2VyIGluLlxuICAgIFx0XHRcdEF1dGhXcmFwcGVyLiRhdXRoV2l0aFBhc3N3b3JkKHtcbiAgICBcdFx0XHRcdGVtYWlsOiBpbnB1dEVtYWlsLFxuICAgIFx0XHRcdFx0cGFzc3dvcmQ6IGlucHV0UGFzc3dvcmRcbiAgICBcdFx0XHR9KS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCdBQ0NPVU5UX0NSRUFURUQnKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgIFx0XHR9KS5jYXRjaChmdW5jdGlvbihlcnJvckRhdGEpIHtcblxuICAgIFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3JEYXRhKTtcblxuICAgIFx0XHRcdGlmIChlcnJvckRhdGEuY29kZSA9PT0gJ0VNQUlMX1RBS0VOJykge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGVycm9yRGF0YS5jb2RlKTtcbiAgICBcdFx0XHR9XG5cbiAgICBcdFx0fSk7XG5cbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgXHR9XG5cbiAgICAgICAgZnVuY3Rpb24gbG9naW5Ub0FjY291bnQoaW5wdXRFbWFpbCwgaW5wdXRQYXNzd29yZCkge1xuXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICAgICBBdXRoV3JhcHBlci4kYXV0aFdpdGhQYXNzd29yZCh7XG4gICAgICAgICAgICAgICAgZW1haWw6IGlucHV0RW1haWwsXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6IGlucHV0UGFzc3dvcmRcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oYXV0aERhdGEpIHtcblxuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoJ0xPR0lOX1NVQ0NFU1MnKTtcblxuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyb3JEYXRhKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoZXJyb3JEYXRhLmNvZGUgPT09ICdJTlZBTElEX1VTRVInKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoJ0lOVkFMSURfVVNFUicpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3JEYXRhLmNvZGUgPT09ICdJTlZBTElEX1BBU1NXT1JEJykge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCdJTlZBTElEX1BBU1NXT1JEJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGxvZ091dCgpIHtcbiAgICAgICAgICAgIEF1dGhXcmFwcGVyLiR1bmF1dGgoKTtcbiAgICAgICAgICAgICRyb290U2NvcGUudW5iaW5kRnVuY3Rpb24oKTtcblxuICAgICAgICAgICAgJHN0YXRlLmdvKCdpbmRleCcpO1xuICAgICAgICB9XG5cbiAgICB9XG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5mYWN0b3J5KCdBdXRoV3JhcHBlcicsIEF1dGhXcmFwcGVyKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIEF1dGhXcmFwcGVyKCRmaXJlYmFzZUF1dGgpIHtcblxuICAgICAgICB2YXIgcmVmID0gbmV3IEZpcmViYXNlKCdodHRwczovL3dvbGZzY29udGVzdHMuZmlyZWJhc2Vpby5jb20nKTtcbiAgICAgICAgcmV0dXJuICRmaXJlYmFzZUF1dGgocmVmKTtcblxuICAgIH1cbiAgICBcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJylcbiAgICAgICAgLnNlcnZpY2UoJ2V2ZW50U2VydmljZScsIGV2ZW50U2VydmljZSk7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBldmVudFNlcnZpY2UoJHEsICRmaWx0ZXIsICRmaXJlYmFzZU9iamVjdCwgJGZpcmViYXNlQXJyYXkpIHtcblxuICAgIFx0dmFyIEZCVVJMID0gJ2h0dHBzOi8vd29sZnNjb250ZXN0cy5maXJlYmFzZWlvLmNvbSc7XG5cbiAgICAgICAgdGhpcy5jcmVhdGVNdWx0aUdhbWVGaW5hbFN0YW5kaW5ncyA9IGNyZWF0ZU11bHRpR2FtZUZpbmFsU3RhbmRpbmdzO1xuICAgICAgICB0aGlzLmdldEV2ZW50UHJvcGVydGllcyA9IGdldEV2ZW50UHJvcGVydGllcztcbiAgICAgICAgdGhpcy5nZXRHYW1lRGF0YSA9IGdldEdhbWVEYXRhO1xuICAgICAgICB0aGlzLmdldEdhbWVzTGlzdCA9IGdldEdhbWVzTGlzdDtcbiAgICAgICAgdGhpcy5nZXRNdWx0aUdhbWVMZWFkZXJib2FyZCA9IGdldE11bHRpR2FtZUxlYWRlcmJvYXJkO1xuICAgICAgICB0aGlzLmdldFNpbmdsZUdhbWVMZWFkZXJib2FyZCA9IGdldFNpbmdsZUdhbWVMZWFkZXJib2FyZDtcbiAgICAgICAgdGhpcy5nZXRQbGF5ZXJTY29yZXMgPSBnZXRQbGF5ZXJTY29yZXM7XG5cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZU11bHRpR2FtZUZpbmFsU3RhbmRpbmdzKGlucHV0RXZlbnQpIHtcblxuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBmaW5hbCBzdGFuZGluZ3Mgb2YgdGhlIGV2ZW50LlxuICAgICAgICAgICAgZ2V0TXVsdGlHYW1lTGVhZGVyYm9hcmQoaW5wdXRFdmVudCkudGhlbihmdW5jdGlvbihwcm9taXNlUmVzb2x1dGlvbikge1xuXG4gICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1Zyhwcm9taXNlUmVzb2x1dGlvbik7XG5cbiAgICAgICAgICAgICAgICB2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZCVVJMKTtcbiAgICAgICAgICAgICAgICB2YXIgaW5wdXRFdmVudFN0YW5kaW5ncyA9ICRmaXJlYmFzZU9iamVjdChcbiAgICAgICAgICAgICAgICAgICAgcmVmXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGQoJ3N0YW5kaW5ncycpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGQoaW5wdXRFdmVudClcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgaW5wdXRFdmVudFN0YW5kaW5ncy4kbG9hZGVkKCkudGhlbihmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlUmVzb2x1dGlvbi5mb3JFYWNoKGZ1bmN0aW9uKHN0YW5kaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dEV2ZW50U3RhbmRpbmdzW3N0YW5kaW5nLmtleV0gPSBzdGFuZGluZy5wb3NpdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaW5wdXRFdmVudFN0YW5kaW5ncy4kc2F2ZSgpO1xuXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRFdmVudFByb3BlcnRpZXMoaW5wdXRFdmVudCkge1xuXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgIFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGQlVSTCk7XG4gICAgICAgIFx0dmFyIGV2ZW50UHJvcGVydGllcyA9ICRmaXJlYmFzZU9iamVjdChcbiAgICAgICAgXHRcdHJlZlxuICAgICAgICBcdFx0XHQuY2hpbGQoJ2NvbnRlc3RzJylcbiAgICAgICAgXHRcdFx0LmNoaWxkKGlucHV0RXZlbnQpXG4gICAgICAgIFx0XHRcdC5jaGlsZCgncHJvcGVydGllcycpXG4gICAgICAgIFx0KTtcblxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShldmVudFByb3BlcnRpZXMpO1xuXG4gICAgICAgIFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEdhbWVEYXRhKGlucHV0RXZlbnQsIGlucHV0R2FtZSkge1xuXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICAgICB2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZCVVJMKTtcblxuICAgICAgICAgICAgZ2V0R2FtZXNMaXN0KGlucHV0RXZlbnQpLnRoZW4oZnVuY3Rpb24oZ2FtZXNMaXN0KSB7XG5cbiAgICAgICAgICAgICAgICBnYW1lc0xpc3QuZm9yRWFjaChmdW5jdGlvbihnYW1lKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWUuY2FtZWxOYW1lID09PSBpbnB1dEdhbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZ2FtZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0R2FtZXNMaXN0KGlucHV0RXZlbnQpIHtcblxuICAgICAgICBcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICAgXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZCVVJMKTtcbiAgICAgICAgXHR2YXIgZ2FtZXNMaXN0ID0gJGZpcmViYXNlQXJyYXkoXG4gICAgICAgIFx0XHRyZWZcbiAgICAgICAgXHRcdFx0LmNoaWxkKCdjb250ZXN0cycpXG4gICAgICAgIFx0XHRcdC5jaGlsZChpbnB1dEV2ZW50KVxuICAgICAgICBcdFx0XHQuY2hpbGQoJ2FjdGl2ZUdhbWVzJylcbiAgICAgICAgXHQpO1xuXG4gICAgICAgIFx0Z2FtZXNMaXN0LiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICBcdFx0ZGVmZXJyZWQucmVzb2x2ZShnYW1lc0xpc3QpO1xuICAgICAgICBcdH0pO1xuXG4gICAgICAgIFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldE11bHRpR2FtZUxlYWRlcmJvYXJkKGlucHV0RXZlbnQpIHtcblxuICAgICAgICBcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICAgXHQvLyBXZSBuZWVkIHRvIGdldCB0aGUgdG9wIDEyIHBsYXllcnMgZm9yIGV2ZXJ5IGdhbWUuXG4gICAgICAgIFx0dmFyIHBsYXllclBvaW50cyA9IHt9O1xuXG4gICAgICAgIFx0Z2V0R2FtZXNMaXN0KGlucHV0RXZlbnQpLnRoZW4oZnVuY3Rpb24ocHJvbWlzZVJlc29sdXRpb24pIHtcblxuICAgICAgICBcdFx0dmFyIGdhbWVzTGlzdCA9IHByb21pc2VSZXNvbHV0aW9uO1xuICAgICAgICBcdFx0Z2FtZXNMaXN0LmZvckVhY2goZnVuY3Rpb24oZ2FtZSkge1xuXG4gICAgICAgIFx0XHRcdGlmIChnYW1lLnNjb3Jlcykge1xuXG4gICAgICAgIFx0XHRcdFx0Ly8gQ29udmVydCB0aGUgZ2FtZSdzIHNjb3JlcyB0byBhbiBhcnJheS5cbiAgICAgICAgXHRcdFx0XHR2YXIgc2NvcmVzQXJyYXkgPSAkLm1hcChnYW1lLnNjb3JlcywgZnVuY3Rpb24oZWwpIHsgcmV0dXJuIGVsOyB9KTtcbiAgICAgICAgXHRcdFx0XHRzY29yZXNBcnJheSA9ICRmaWx0ZXIoJ29yZGVyQnknKShzY29yZXNBcnJheSwgJy1zY29yZScpO1xuXG4gICAgICAgIFx0XHRcdFx0dmFyIHRvdGFsQXdhcmQgPSAxMjtcblxuICAgICAgICBcdFx0XHRcdC8vIEl0ZXJhdGUgdGhyb3VnaCB0aGUgdG9wIHNjb3JlcyBhd2FyZGluZyBwb2ludHMuXG4gICAgICAgIFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzY29yZXNBcnJheS5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgIFx0XHRcdFx0XHRpZiAoIXBsYXllclBvaW50c1tzY29yZXNBcnJheVtpXS51c2VyTmFtZV0pIHtcbiAgICAgICAgXHRcdFx0XHRcdFx0cGxheWVyUG9pbnRzW3Njb3Jlc0FycmF5W2ldLnVzZXJOYW1lXSA9IHtcbiAgICAgICAgXHRcdFx0XHRcdFx0XHRwb2ludHM6IDBcbiAgICAgICAgXHRcdFx0XHRcdFx0fTtcbiAgICAgICAgXHRcdFx0XHRcdH1cblxuICAgICAgICBcdFx0XHRcdFx0cGxheWVyUG9pbnRzW3Njb3Jlc0FycmF5W2ldLnVzZXJOYW1lXS5wb2ludHMgKz0gdG90YWxBd2FyZDtcblxuICAgICAgICBcdFx0XHRcdFx0aWYgKHRvdGFsQXdhcmQgPiAwKSB7XG4gICAgICAgIFx0XHRcdFx0XHRcdHRvdGFsQXdhcmQgLT0gMTtcbiAgICAgICAgXHRcdFx0XHRcdH1cblxuICAgICAgICBcdFx0XHRcdH1cblxuICAgICAgICBcdFx0XHR9XG5cbiAgICAgICAgXHRcdH0pO1xuXG4gICAgICAgIFx0XHQvLyBGaW5kIGFuZCByZXNvbHZlIHRpZXMuXG4gICAgICAgIFx0XHRwbGF5ZXJQb2ludHMgPSAkZmlsdGVyKCdvcmRlck9iamVjdEJ5JykocGxheWVyUG9pbnRzLCAncG9pbnRzJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdmFyIGhhdmVCb3R0b21TY29yZXJzRmxvb3IgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB2YXIgZmxvb3JSYW5nZSA9IDA7XG4gICAgICAgIFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHBsYXllclBvaW50cy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgIFx0XHRcdGlmIChwbGF5ZXJQb2ludHNbaS0xXSAmJiBwbGF5ZXJQb2ludHNbaV0ucG9pbnRzICYmIHBsYXllclBvaW50c1tpLTFdLnBvaW50cykge1xuXG4gICAgICAgIFx0XHRcdFx0aWYgKHBsYXllclBvaW50c1tpXS5wb2ludHMgPT09IHBsYXllclBvaW50c1tpLTFdLnBvaW50cykge1xuICAgICAgICBcdFx0XHRcdFx0cGxheWVyUG9pbnRzW2ldLnBvc2l0aW9uID0gcGxheWVyUG9pbnRzW2ktMV0ucG9zaXRpb247XG4gICAgICAgIFx0XHRcdFx0fSBlbHNlIHtcbiAgICAgICAgXHRcdFx0XHRcdHBsYXllclBvaW50c1tpXS5wb3NpdGlvbiA9IChpKzEpO1xuICAgICAgICBcdFx0XHRcdH1cblxuICAgICAgICBcdFx0XHR9IGVsc2Uge1xuXG4gICAgICAgIFx0XHRcdFx0aWYgKGkgPT09IDApIHtcbiAgICAgICAgXHRcdFx0XHRcdHBsYXllclBvaW50c1tpXS5wb3NpdGlvbiA9IDE7XG4gICAgICAgIFx0XHRcdFx0fSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaGF2ZUJvdHRvbVNjb3JlcnNGbG9vcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHZXQgY291bnQgb2YgcGxheWVycyBpbiBvbmUgcG9zaXRpb24gaGlnaGVyLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2V0U2NvcmVDb3VudE9mID0gcGxheWVyUG9pbnRzW2ktMV0ucG9pbnRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJQb2ludHMuZm9yRWFjaChmdW5jdGlvbihwb2ludHNEYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocG9pbnRzRGF0YS5wb2ludHMgPT09IGdldFNjb3JlQ291bnRPZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsb29yUmFuZ2UgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGF2ZUJvdHRvbVNjb3JlcnNGbG9vciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgIFx0XHRcdFx0XHRwbGF5ZXJQb2ludHNbaV0ucG9zaXRpb24gPSAocGxheWVyUG9pbnRzLmxlbmd0aCArIDEpIC0gZmxvb3JSYW5nZTtcbiAgICAgICAgXHRcdFx0XHR9XG5cbiAgICAgICAgXHRcdFx0fVxuXG4gICAgICAgIFx0XHR9XG5cbiAgICAgICAgXHRcdGRlZmVycmVkLnJlc29sdmUocGxheWVyUG9pbnRzKTtcblxuICAgICAgICBcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0U2luZ2xlR2FtZUxlYWRlcmJvYXJkKGlucHV0RXZlbnQpIHtcblxuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICAgICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGQlVSTCk7XG4gICAgICAgICAgICB2YXIgbGVhZGVyYm9hcmREYXRhID0gJGZpcmViYXNlQXJyYXkoXG4gICAgICAgICAgICAgICAgcmVmXG4gICAgICAgICAgICAgICAgICAgIC5jaGlsZCgnY29udGVzdHMnKVxuICAgICAgICAgICAgICAgICAgICAuY2hpbGQoaW5wdXRFdmVudClcbiAgICAgICAgICAgICAgICAgICAgLmNoaWxkKCdzY29yZXMnKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShsZWFkZXJib2FyZERhdGEpO1xuXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0UGxheWVyU2NvcmVzKGlucHV0RXZlbnQsIGlucHV0R2FtZXNMaXN0LCBpbnB1dFBsYXllcikge1xuXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICAgICB2YXIgZGlzcGxheVNjb3JlcyA9IFtdO1xuXG4gICAgICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggZXZlcnkgZ2FtZS5cbiAgICAgICAgICAgIGlucHV0R2FtZXNMaXN0LmZvckVhY2goZnVuY3Rpb24oZ2FtZSkge1xuXG4gICAgICAgICAgICAgICAgaWYgKGdhbWUuc2NvcmVzKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQ29udmVydCB0aGUgZ2FtZSdzIHNjb3JlcyB0byBhbiBhcnJheS5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjb3Jlc0FycmF5ID0gJC5tYXAoZ2FtZS5zY29yZXMsIGZ1bmN0aW9uKGVsKSB7IHJldHVybiBlbDsgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNjb3Jlc0FycmF5ID0gJGZpbHRlcignb3JkZXJCeScpKHNjb3Jlc0FycmF5LCAnLXNjb3JlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvdGFsQXdhcmQgPSAxMjtcblxuICAgICAgICAgICAgICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggdGhlIHNjb3JlcyBzdGFydGluZyBmcm9tIHRoZSB0b3AgYW5kIGZpbmQgb3VyIHVzZXIuXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2NvcmVzQXJyYXkubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm91bmQgb3VyIHBsYXllci5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzY29yZXNBcnJheVtpXS51c2VyTmFtZSA9PT0gaW5wdXRQbGF5ZXIpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdTY29yZU9iamVjdCA9IGdhbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2NvcmVPYmplY3QucG9zaXRpb24gPSBpKzE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2NvcmVPYmplY3Quc2NvcmUgPSBzY29yZXNBcnJheVtpXS5zY29yZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTY29yZU9iamVjdC5wb2ludHNFYXJuZWQgPSB0b3RhbEF3YXJkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Njb3JlT2JqZWN0LmlucFVybCA9IHNjb3Jlc0FycmF5W2ldLmlucFVybCA/IHNjb3Jlc0FycmF5W2ldLmlucFVybCA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2NvcmVPYmplY3QudHdpdGNoVXJsID0gc2NvcmVzQXJyYXlbaV0udHdpdGNoVXJsID8gc2NvcmVzQXJyYXlbaV0udHdpdGNoVXJsIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTY29yZU9iamVjdC5tYW1lVmVyc2lvbiA9IHNjb3Jlc0FycmF5W2ldLm1hbWVWZXJzaW9uID8gc2NvcmVzQXJyYXlbaV0ubWFtZVZlcnNpb24gOiBudWxsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheVNjb3Jlcy5wdXNoKG5ld1Njb3JlT2JqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbEF3YXJkID0gMTI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRvdGFsQXdhcmQgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsQXdhcmQgLT0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkaXNwbGF5U2NvcmVzKTtcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgfVxuXG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuY29udHJvbGxlcignRXZlbnRHYW1lQ29udHJvbGxlcicsIEV2ZW50R2FtZUNvbnRyb2xsZXIpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gRXZlbnRHYW1lQ29udHJvbGxlcigkc2NvcGUsICRmaWx0ZXIsICRzdGF0ZVBhcmFtcywgJHRpbWVvdXQsICRmaXJlYmFzZUFycmF5LCBldmVudFNlcnZpY2UsIGF1dGhTZXJ2aWNlKSB7XG5cbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIFx0YW5ndWxhci5lbGVtZW50KCcjY29udGVudFZpZXcnKVxuICAgICAgICBcdCAgICAuY3NzKCdvcGFjaXR5JywgJzEnKVxuICAgICAgICBcdCAgICAuY3NzKCdwb3NpdGlvbicsICdpbmhlcml0Jyk7XG4gICAgICAgIH0sIDQxMCk7XG5cbiAgICAgICAgdmFyIEZCVVJMID0gJ2h0dHBzOi8vd29sZnNjb250ZXN0cy5maXJlYmFzZWlvLmNvbSc7XG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgdm0uZXZlbnROYW1lID0gJHN0YXRlUGFyYW1zLmV2ZW50TmFtZTtcbiAgICAgICAgdm0uZ2FtZU5hbWUgPSAkc3RhdGVQYXJhbXMuZ2FtZU5hbWU7XG5cbiAgICAgICAgdm0uaW5pdEdhbWVQYWdlID0gaW5pdEdhbWVQYWdlO1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICBmdW5jdGlvbiBpbml0R2FtZVBhZ2UoKSB7XG5cbiAgICAgICAgICAgIHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRkJVUkwpO1xuXG4gICAgICAgICAgICB2bS5ldmVudFByb3BlcnRpZXMgPSBldmVudFNlcnZpY2UuZ2V0RXZlbnRQcm9wZXJ0aWVzKHZtLmV2ZW50TmFtZSk7XG5cbiAgICAgICAgICAgIGV2ZW50U2VydmljZS5nZXRHYW1lRGF0YSh2bS5ldmVudE5hbWUsIHZtLmdhbWVOYW1lKS50aGVuKGZ1bmN0aW9uKHByb21pc2VSZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICAgICAgdm0uZ2FtZURhdGEgPSBwcm9taXNlUmVzb2x1dGlvbjtcblxuICAgICAgICAgICAgICAgIHZtLmdhbWVTY29yZXMgPSAkZmlyZWJhc2VBcnJheShcbiAgICAgICAgICAgICAgICAgICAgcmVmXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGQoJ2NvbnRlc3RzJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZCh2bS5ldmVudE5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGQoJ2FjdGl2ZUdhbWVzJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZCh2bS5nYW1lRGF0YS4kaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGQoJ3Njb3JlcycpXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcodm0uZ2FtZURhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcodm0uZ2FtZVNjb3Jlcyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG5cbiAgICB9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0V2ZW50TWFpbkNvbnRyb2xsZXInLCBFdmVudE1haW5Db250cm9sbGVyKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIEV2ZW50TWFpbkNvbnRyb2xsZXIoJHNjb3BlLCAkZmlsdGVyLCAkc3RhdGVQYXJhbXMsICRzdGF0ZSwgJHRpbWVvdXQsICRmaXJlYmFzZUFycmF5LCBldmVudFNlcnZpY2UsIGF1dGhTZXJ2aWNlLCBwcm9maWxlU2VydmljZSkge1xuXG4gICAgICAgIHZhciBGQlVSTCA9ICdodHRwczovL3dvbGZzY29udGVzdHMuZmlyZWJhc2Vpby5jb20nO1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIHZtLmV2ZW50TmFtZSA9ICRzdGF0ZVBhcmFtcy5ldmVudE5hbWU7XG5cbiAgICAgICAgdm0uY2xvc2VHYW1lTW9kYWwgPSBjbG9zZUdhbWVNb2RhbDtcbiAgICAgICAgdm0uY2xvc2VNdWx0aUdhbWVMZWFkZXJib2FyZE1vZGFsID0gY2xvc2VNdWx0aUdhbWVMZWFkZXJib2FyZE1vZGFsO1xuICAgICAgICB2bS5jbG9zZVBsYXllck1vZGFsID0gY2xvc2VQbGF5ZXJNb2RhbDtcbiAgICAgICAgdm0uZGV0ZXJtaW5lUG9pbnRzID0gZGV0ZXJtaW5lUG9pbnRzO1xuICAgICAgICB2bS5nZXRGaXJzdFBsYWNlU2NvcmVzID0gZ2V0Rmlyc3RQbGFjZVNjb3JlcztcbiAgICAgICAgdm0uZ29Ub1BsYXllclByb2ZpbGUgPSBnb1RvUGxheWVyUHJvZmlsZTtcbiAgICAgICAgdm0uaW5pdEV2ZW50ID0gaW5pdEV2ZW50O1xuICAgICAgICB2bS5vcGVuQmFkZ2VzTW9kYWwgPSBvcGVuQmFkZ2VzTW9kYWw7XG4gICAgICAgIHZtLm9wZW5HYW1lTW9kYWwgPSBvcGVuR2FtZU1vZGFsO1xuICAgICAgICB2bS5vcGVuR2FtZU1vZGFsRnJvbVBsYXllck1vZGFsID0gb3BlbkdhbWVNb2RhbEZyb21QbGF5ZXJNb2RhbDtcbiAgICAgICAgdm0ub3Blbk11bHRpR2FtZUxlYWRlcmJvYXJkTW9kYWwgPSBvcGVuTXVsdGlHYW1lTGVhZGVyYm9hcmRNb2RhbDtcbiAgICAgICAgdm0ub3BlblBsYXllck1vZGFsID0gb3BlblBsYXllck1vZGFsO1xuICAgICAgICB2bS5vcGVuUGxheWVyTW9kYWxGcm9tR2FtZU1vZGFsID0gb3BlblBsYXllck1vZGFsRnJvbUdhbWVNb2RhbDtcbiAgICAgICAgdm0ub3BlblBsYXllck1vZGFsRnJvbUxlYWRlcmJvYXJkTW9kYWwgPSBvcGVuUGxheWVyTW9kYWxGcm9tTGVhZGVyYm9hcmRNb2RhbDtcbiAgICAgICAgdm0ub3BlblJ1bGVzTW9kYWwgPSBvcGVuUnVsZXNNb2RhbDtcblxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICBmdW5jdGlvbiBjbG9zZUdhbWVNb2RhbCgpIHtcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2dhbWVNb2RhbCcpLmNsb3NlTW9kYWwoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNsb3NlTXVsdGlHYW1lTGVhZGVyYm9hcmRNb2RhbCgpIHtcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI211bHRpR2FtZUxlYWRlcmJvYXJkTW9kYWwnKS5jbG9zZU1vZGFsKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjbG9zZVBsYXllck1vZGFsKCkge1xuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjcGxheWVyTW9kYWwnKS5jbG9zZU1vZGFsKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkZXRlcm1pbmVQb2ludHMoaW5wdXRTY29yZURhdGEsIGlucHV0SW5kZXgpIHtcblxuICAgICAgICAgICAgdmFyIHVzZXJHYW1lUG9pbnRzO1xuXG4gICAgICAgICAgICAvLyBObyBwb3NpdGlvbiBncmVhdGVyIHRoYW4gMTIgZ2V0cyBwb2ludHMuXG4gICAgICAgICAgICBpZiAoaW5wdXRJbmRleCA+IDExKSB7XG4gICAgICAgICAgICAgICAgdXNlckdhbWVQb2ludHMgPSAwO1xuICAgICAgICAgICAgICAgIHJldHVybiB1c2VyR2FtZVBvaW50cztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdXNlckdhbWVQb2ludHMgPSAxMiAtIGlucHV0SW5kZXg7XG5cbiAgICAgICAgICAgIHZhciBzb3J0ZWRTY29yZXMgPSAkZmlsdGVyKCdvcmRlckJ5Jykodm0uZ2FtZVNjb3JlcywgJy1zY29yZScpO1xuXG4gICAgICAgICAgICAvLyBBbSBJIHRpZWQgd2l0aCB0aGUgcGVyc29uIGFib3ZlIG1lPyBJZiBzbywgbWF0Y2ggdGhlaXIgcG9pbnRzLlxuICAgICAgICAgICAgaWYgKHNvcnRlZFNjb3Jlc1tpbnB1dEluZGV4IC0gMV0pIHtcblxuICAgICAgICAgICAgICAgIGlmIChzb3J0ZWRTY29yZXNbaW5wdXRJbmRleCAtIDFdLnNjb3JlID09PSBpbnB1dFNjb3JlRGF0YS5zY29yZSkge1xuICAgICAgICAgICAgICAgICAgICB1c2VyR2FtZVBvaW50cyArPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHVzZXJHYW1lUG9pbnRzO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0Rmlyc3RQbGFjZVNjb3JlcygpIHtcblxuICAgICAgICAgICAgdm0uZ2FtZUxpc3QuZm9yRWFjaChmdW5jdGlvbihnYW1lKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSBhcmUgc2NvcmVzLCBnZXQgdGhlIHRvcCBvbmUuXG4gICAgICAgICAgICAgICAgaWYgKGdhbWUuc2NvcmVzKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjb3Jlc0FycmF5ID0gJC5tYXAoZ2FtZS5zY29yZXMsIGZ1bmN0aW9uKGVsKSB7IHJldHVybiBlbDsgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNjb3Jlc0FycmF5ID0gJGZpbHRlcignb3JkZXJCeScpKHNjb3Jlc0FycmF5LCAnLXNjb3JlJyk7XG4gICAgICAgICAgICAgICAgICAgIGdhbWUuZmlyc3RTY29yZSA9IHNjb3Jlc0FycmF5WzBdO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ29Ub1BsYXllclByb2ZpbGUoaW5wdXRQbGF5ZXIpIHtcblxuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjcGxheWVyTW9kYWwnKS5jbG9zZU1vZGFsKCk7XG4gICAgICAgICAgICAkc3RhdGUuZ28oJ3Byb2ZpbGUnLCB7dXNlcm5hbWU6IGlucHV0UGxheWVyfSk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGluaXRFdmVudCgpIHtcblxuICAgICAgICAgICAgZXZlbnRTZXJ2aWNlLmdldEV2ZW50UHJvcGVydGllcyh2bS5ldmVudE5hbWUpLnRoZW4oZnVuY3Rpb24ocHJvbWlzZVJlc29sdXRpb24pIHtcblxuICAgICAgICAgICAgICAgIHZtLmV2ZW50UHJvcGVydGllcyA9IHByb21pc2VSZXNvbHV0aW9uO1xuXG4gICAgICAgICAgICAgICAgdm0uZXZlbnRQcm9wZXJ0aWVzLiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgaXMgYSBtdWx0aWdhbWUgZXZlbnQsIGdldCB0aGUgZGF0YSBuZWVkZWQgZm9yIG11bHRpZ2FtZSBjb21wb25lbnRzLlxuICAgICAgICAgICAgICAgICAgICBpZiAodm0uZXZlbnRQcm9wZXJ0aWVzLmZvcm1hdC5tdWx0aUdhbWUpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRTZXJ2aWNlLmdldEdhbWVzTGlzdCh2bS5ldmVudE5hbWUpLnRoZW4oZnVuY3Rpb24ocHJvbWlzZVJlc29sdXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5nYW1lTGlzdCA9IHByb21pc2VSZXNvbHV0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldEZpcnN0UGxhY2VTY29yZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudFNlcnZpY2UuZ2V0TXVsdGlHYW1lTGVhZGVyYm9hcmQodm0uZXZlbnROYW1lKS50aGVuKGZ1bmN0aW9uKHByb21pc2VSZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxlYWRlcmJvYXJkID0gcHJvbWlzZVJlc29sdXRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0ubGVhZGVyYm9hcmRMZW5ndGggPSBsZWFkZXJib2FyZC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uc3VtbWFyaXplZExlYWRlcmJvYXJkID0gbGVhZGVyYm9hcmQuc2xpY2UoMCwgOCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIGlzIGEgc2luZ2xlIGdhbWUgZXZlbnQsIGdldCB0aGUgZGF0YSBuZWVkZWQgZm9yIHNpbmdsZSBnYW1lIGNvbXBvbmVudHMuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50U2VydmljZS5nZXRTaW5nbGVHYW1lTGVhZGVyYm9hcmQodm0uZXZlbnROYW1lKS50aGVuKGZ1bmN0aW9uKHByb21pc2VSZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxlYWRlcmJvYXJkID0gcHJvbWlzZVJlc29sdXRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZyhsZWFkZXJib2FyZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0ubGVhZGVyYm9hcmRMZW5ndGggPSBsZWFkZXJib2FyZC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uc3VtbWFyaXplZExlYWRlcmJvYXJkID0gbGVhZGVyYm9hcmQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy92bS5zdW1tYXJpemVkTGVhZGVyYm9hcmQgPSBsZWFkZXJib2FyZC5zbGljZSgwLCA4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKHZtLnN1bW1hcml6ZWRMZWFkZXJib2FyZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHByb2ZpbGVTZXJ2aWNlLmdldEF2YXRhckRhdGEoKS50aGVuKGZ1bmN0aW9uKHByb21pc2VSZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICAgICAgdm0uYXZhdGFyRGF0YSA9IHByb21pc2VSZXNvbHV0aW9uO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9wZW5CYWRnZXNNb2RhbCgpIHtcblxuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjYmFkZ2VzTW9kYWwnKS5vcGVuTW9kYWwoKTtcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2JhZGdlc01vZGFsQ29udGVudCcpLnNjcm9sbFRvcCgwKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gb3BlbkdhbWVNb2RhbChpbnB1dEdhbWVOYW1lKSB7XG5cbiAgICAgICAgICAgIHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRkJVUkwpO1xuXG4gICAgICAgICAgICBldmVudFNlcnZpY2UuZ2V0R2FtZURhdGEodm0uZXZlbnROYW1lLCBpbnB1dEdhbWVOYW1lKS50aGVuKGZ1bmN0aW9uKHByb21pc2VSZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICAgICAgdm0uZ2FtZURhdGEgPSBwcm9taXNlUmVzb2x1dGlvbjtcblxuICAgICAgICAgICAgICAgIHZtLmdhbWVTY29yZXMgPSAkZmlyZWJhc2VBcnJheShcbiAgICAgICAgICAgICAgICAgICAgcmVmXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGQoJ2NvbnRlc3RzJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZCh2bS5ldmVudE5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGQoJ2FjdGl2ZUdhbWVzJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZCh2bS5nYW1lRGF0YS4kaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGQoJ3Njb3JlcycpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNnYW1lTW9kYWwnKS5vcGVuTW9kYWwoKTtcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2dhbWVNb2RhbENvbnRlbnQnKS5zY3JvbGxUb3AoMCk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9wZW5NdWx0aUdhbWVMZWFkZXJib2FyZE1vZGFsKCkge1xuXG4gICAgICAgICAgICBldmVudFNlcnZpY2UuZ2V0TXVsdGlHYW1lTGVhZGVyYm9hcmQodm0uZXZlbnROYW1lKS50aGVuKGZ1bmN0aW9uKHByb21pc2VSZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICAgICAgdm0uY29tcGxldGVMZWFkZXJib2FyZCA9IHByb21pc2VSZXNvbHV0aW9uO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI211bHRpR2FtZUxlYWRlcmJvYXJkTW9kYWwnKS5vcGVuTW9kYWwoKTtcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI211bHRpR2FtZUxlYWRlcmJvYXJkTW9kYWxDb250ZW50Jykuc2Nyb2xsVG9wKDApO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvcGVuUGxheWVyTW9kYWwoaW5wdXRQbGF5ZXIpIHtcblxuICAgICAgICAgICAgdm0uZm9jdXNQbGF5ZXIgPSBpbnB1dFBsYXllcjtcblxuICAgICAgICAgICAgZXZlbnRTZXJ2aWNlLmdldFBsYXllclNjb3Jlcyh2bS5ldmVudE5hbWUsIHZtLmdhbWVMaXN0LCB2bS5mb2N1c1BsYXllcikudGhlbihmdW5jdGlvbihwcm9taXNlUmVzb2x1dGlvbikge1xuICAgICAgICAgICAgICAgIHZtLnBsYXllclNjb3JlcyA9IHByb21pc2VSZXNvbHV0aW9uO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI3BsYXllck1vZGFsJykub3Blbk1vZGFsKCk7XG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNwbGF5ZXJNb2RhbENvbnRlbnQnKS5zY3JvbGxUb3AoMCk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9wZW5HYW1lTW9kYWxGcm9tUGxheWVyTW9kYWwoaW5wdXRHYW1lKSB7XG5cbiAgICAgICAgICAgIGNsb3NlUGxheWVyTW9kYWwoKTtcblxuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgb3BlbkdhbWVNb2RhbChpbnB1dEdhbWUpO1xuICAgICAgICAgICAgfSwgNDUwKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gb3BlblBsYXllck1vZGFsRnJvbUdhbWVNb2RhbChpbnB1dFBsYXllcikge1xuXG4gICAgICAgICAgICBjbG9zZUdhbWVNb2RhbCgpO1xuXG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBvcGVuUGxheWVyTW9kYWwoaW5wdXRQbGF5ZXIpO1xuICAgICAgICAgICAgfSwgNDUwKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gb3BlblBsYXllck1vZGFsRnJvbUxlYWRlcmJvYXJkTW9kYWwoaW5wdXRQbGF5ZXIpIHtcblxuICAgICAgICAgICAgY2xvc2VNdWx0aUdhbWVMZWFkZXJib2FyZE1vZGFsKCk7XG5cbiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIG9wZW5QbGF5ZXJNb2RhbChpbnB1dFBsYXllcik7XG4gICAgICAgICAgICB9LCA0NTApO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvcGVuUnVsZXNNb2RhbCgpIHtcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI3J1bGVzTW9kYWwnKS5vcGVuTW9kYWwoKTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ3ZnR2FtZXNMaXN0JywgdmdHYW1lc0xpc3QpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gdmdHYW1lc0xpc3QgKCkge1xuICAgICAgICAvLyBVc2FnZTpcbiAgICAgICAgLy9cbiAgICAgICAgLy8gQ3JlYXRlczpcbiAgICAgICAgLy9cbiAgICAgICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBHYW1lc0xpc3RDb250cm9sbGVyLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgbGluazogbGluayxcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy4vYXBwL2V2ZW50Q29tcG9uZW50cy9nYW1lc0xpc3QuZGlyZWN0aXZlLmh0bScsXG4gICAgICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgXHRkYXRhOiAnPScsXG4gICAgICAgICAgICBcdG9wZW5HYW1lRnVuY3Rpb246ICc9J1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZGlyZWN0aXZlO1xuXG4gICAgICAgIGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBHYW1lc0xpc3RDb250cm9sbGVyKCkge1xuICAgIFx0dmFyIHZtID0gdGhpcztcbiAgICB9XG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ3ZnTXVsdGlHYW1lTGVhZGVyYm9hcmQnLCB2Z011bHRpR2FtZUxlYWRlcmJvYXJkKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIHZnTXVsdGlHYW1lTGVhZGVyYm9hcmQgKCkge1xuICAgICAgICAvLyBVc2FnZTpcbiAgICAgICAgLy9cbiAgICAgICAgLy8gQ3JlYXRlczpcbiAgICAgICAgLy9cbiAgICAgICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBNdWx0aUdhbWVMZWFkZXJib2FyZENvbnRyb2xsZXIsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICBsaW5rOiBsaW5rLFxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnLi9hcHAvZXZlbnRDb21wb25lbnRzL211bHRpR2FtZUxlYWRlcmJvYXJkLmRpcmVjdGl2ZS5odG0nLFxuICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIFx0ZGF0YTogJz0nLFxuICAgICAgICAgICAgICAgIGF2YXRhckRhdGE6ICc9JyxcbiAgICAgICAgICAgIFx0Y29tcGxldGVMZW5ndGg6ICc9JyxcbiAgICAgICAgICAgIFx0b3BlblBsYXllckZ1bmN0aW9uOiAnPScsXG4gICAgICAgICAgICAgICAgb3BlbkxlYWRlcmJvYXJkRnVuY3Rpb246ICc9J1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZGlyZWN0aXZlO1xuXG4gICAgICAgIGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBNdWx0aUdhbWVMZWFkZXJib2FyZENvbnRyb2xsZXIoKSB7XG4gICAgXHR2YXIgdm0gPSB0aGlzO1xuICAgIH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJylcbiAgICAgICAgLmRpcmVjdGl2ZSgndmdTaW5nbGVHYW1lTGVhZGVyYm9hcmQnLCB2Z1NpbmdsZUdhbWVMZWFkZXJib2FyZCk7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiB2Z1NpbmdsZUdhbWVMZWFkZXJib2FyZCAoKSB7XG4gICAgICAgIC8vIFVzYWdlOlxuICAgICAgICAvL1xuICAgICAgICAvLyBDcmVhdGVzOlxuICAgICAgICAvL1xuICAgICAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IFNpbmdsZUdhbWVMZWFkZXJib2FyZENvbnRyb2xsZXIsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICBsaW5rOiBsaW5rLFxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnLi9hcHAvZXZlbnRDb21wb25lbnRzL3NpbmdsZUdhbWVMZWFkZXJib2FyZC5kaXJlY3RpdmUuaHRtJyxcbiAgICAgICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICBcdGRhdGE6ICc9JyxcbiAgICAgICAgICAgICAgICBhdmF0YXJEYXRhOiAnPScsXG4gICAgICAgICAgICBcdGNvbXBsZXRlTGVuZ3RoOiAnPScsXG4gICAgICAgICAgICAgICAgb3BlbkxlYWRlcmJvYXJkRnVuY3Rpb246ICc9J1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZGlyZWN0aXZlO1xuXG4gICAgICAgIGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBTaW5nbGVHYW1lTGVhZGVyYm9hcmRDb250cm9sbGVyKCkge1xuICAgIFx0dmFyIHZtID0gdGhpcztcbiAgICB9XG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ3ZnU3RpY2t5TWVzc2FnZScsIHZnU3RpY2t5TWVzc2FnZSk7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiB2Z1N0aWNreU1lc3NhZ2UgKCkge1xuICAgICAgICAvLyBVc2FnZTpcbiAgICAgICAgLy9cbiAgICAgICAgLy8gQ3JlYXRlczpcbiAgICAgICAgLy9cbiAgICAgICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBTdGlja3lNZXNzYWdlQ29udHJvbGxlcixcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIGxpbms6IGxpbmssXG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcuL2FwcC9ldmVudENvbXBvbmVudHMvc3RpY2t5TWVzc2FnZS5kaXJlY3RpdmUuaHRtJyxcbiAgICAgICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICBcdHByb3BlcnRpZXM6ICc9J1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZGlyZWN0aXZlO1xuXG4gICAgICAgIGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBTdGlja3lNZXNzYWdlQ29udHJvbGxlcigkdGltZW91dCkge1xuICAgIFx0dmFyIHZtID0gdGhpcztcbiAgICB9XG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3ZnLmFwcCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdIZWFkZXJDb250cm9sbGVyJywgSGVhZGVyQ29udHJvbGxlcik7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBIZWFkZXJDb250cm9sbGVyKCR0aW1lb3V0LCAkcm9vdFNjb3BlLCAkd2luZG93LCAkc3RhdGUsIGF1dGhTZXJ2aWNlKSB7XG5cbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJy5kcm9wZG93bi1idXR0b24nKVxuICAgICAgICAgICAgICAgIC5kcm9wZG93bih7XG4gICAgICAgICAgICAgICAgICAgIGluRHVyYXRpb246IDMwMCxcbiAgICAgICAgICAgICAgICAgICAgb3V0RHVyYXRpb246IDIyNSxcbiAgICAgICAgICAgICAgICAgICAgY29uc3RyYWluX3dpZHRoOiBmYWxzZSwgLy8gRG9lcyBub3QgY2hhbmdlIHdpZHRoIG9mIGRyb3Bkb3duIHRvIHRoYXQgb2YgdGhlIGFjdGl2YXRvclxuICAgICAgICAgICAgICAgICAgICBob3ZlcjogZmFsc2UsIC8vIEFjdGl2YXRlIG9uIGhvdmVyXG4gICAgICAgICAgICAgICAgICAgIGd1dHRlcjogLTExNCwgLy8gU3BhY2luZyBmcm9tIGVkZ2VcbiAgICAgICAgICAgICAgICAgICAgYmVsb3dPcmlnaW46IHRydWUgLy8gRGlzcGxheXMgZHJvcGRvd24gYmVsb3cgdGhlIGJ1dHRvblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCA0MDApO1xuXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICAgIHZtLmhlYWRlclR5cGUgPSAkc3RhdGUuY3VycmVudC52aWV3cy5oZWFkZXIuZGF0YS5oZWFkZXJUeXBlO1xuXG4gICAgICAgIHZtLmxvZ091dCA9IGxvZ091dDtcblxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgIGZ1bmN0aW9uIGxvZ091dCgpIHtcbiAgICAgICAgICAgIGF1dGhTZXJ2aWNlLmxvZ091dCgpO1xuICAgICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgfVxuXG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuZmlsdGVyKCdvcmRlck9iamVjdEJ5Jywgb3JkZXJPYmplY3RCeSk7XG5cbiAgICBmdW5jdGlvbiBvcmRlck9iamVjdEJ5KCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oaXRlbXMsIGZpZWxkLCByZXZlcnNlKSB7XG4gICAgICAgICAgICB2YXIgZmlsdGVyZWQgPSBbXTtcblxuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGl0ZW1zLCBmdW5jdGlvbihpdGVtLCBrZXkpIHtcbiAgICAgICAgICAgICAgICBpdGVtLmtleSA9IGtleTtcbiAgICAgICAgICAgICAgICBmaWx0ZXJlZC5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZpbHRlcmVkLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKGFbZmllbGRdID4gYltmaWVsZF0gPyAxIDogLTEpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmKHJldmVyc2UpIGZpbHRlcmVkLnJldmVyc2UoKTtcblxuICAgICAgICAgICAgcmV0dXJuIGZpbHRlcmVkO1xuICAgICAgICB9O1xuICAgIH1cblxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuY29udHJvbGxlcignQXZhdGFyQ29udHJvbGxlcicsIEF2YXRhckNvbnRyb2xsZXIpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gQXZhdGFyQ29udHJvbGxlcigkcm9vdFNjb3BlLCAkc3RhdGUsICRzdGF0ZVBhcmFtcywgJHRpbWVvdXQsIFVwbG9hZCwgaW1ndXIsIHByb2ZpbGVTZXJ2aWNlKSB7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICB2bS5pbml0QXZhdGFyID0gaW5pdEF2YXRhcjtcbiAgICAgICAgdm0udXBsb2FkQXZhdGFyID0gdXBsb2FkQXZhdGFyO1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICBmdW5jdGlvbiBpbml0QXZhdGFyKCkge1xuICAgICAgICBcdHByb2ZpbGVTZXJ2aWNlLmdldEF2YXRhckRhdGEoKS50aGVuKGZ1bmN0aW9uIHRoZW4obW9kZWwpIHtcbiAgICAgICAgICAgICAgICB2bS5hdmF0YXJEYXRhID0gbW9kZWw7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcHJvZmlsZVNlcnZpY2UuZ2V0QmFkZ2VzRGF0YSgkcm9vdFNjb3BlLnByb2ZpbGUudXNlck5hbWUpLnRoZW4oZnVuY3Rpb24gdGhlbihtb2RlbCkge1xuICAgICAgICAgICAgICAgICAgICB2bS5iYWRnZXNEYXRhID0gbW9kZWw7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcodm0uYmFkZ2VzRGF0YSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdXBsb2FkQXZhdGFyKCkge1xuXG4gICAgICAgIFx0dm0uZGlzYWJsZUJ1dHRvbiA9IHRydWU7XG5cbiAgICAgICAgXHRpbWd1ci5zZXRBUElLZXkoJ0NsaWVudC1JRCBmNTNkNmQ1ODMzYjA3YmMnKTtcbiAgICAgICAgXHRpbWd1ci51cGxvYWQodm0uZmlsZSkudGhlbihmdW5jdGlvbiB0aGVuKG1vZGVsKSB7XG4gICAgICAgIFx0XHRwcm9maWxlU2VydmljZS5zYXZlQXZhdGFyTGluayhtb2RlbFswXS5saW5rLCAkcm9vdFNjb3BlLnByb2ZpbGUudXNlck5hbWUpO1xuICAgICAgICBcdFx0TWF0ZXJpYWxpemUudG9hc3QoJ1lvdXIgYXZhdGFyIHdhcyB1cGxvYWRlZCcsIDQwMDApO1xuXG4gICAgICAgIFx0XHQkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgXHRcdFx0JHN0YXRlLmdvKCdpbmRleCcpO1xuICAgICAgICBcdFx0fSwgMTAwMCk7XG4gICAgICAgIFx0fSk7XG5cbiAgICAgICAgfVxuXG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuY29udHJvbGxlcignSG9tZUNvbnRyb2xsZXInLCBIb21lQ29udHJvbGxlcik7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBIb21lQ29udHJvbGxlcigkc2NvcGUsICR0aW1lb3V0KSB7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgXHRhbmd1bGFyLmVsZW1lbnQoJyNjb250ZW50VmlldycpXG4gICAgICAgICAgICAgICAgLmNzcygnb3BhY2l0eScsICcxJylcbiAgICAgICAgICAgICAgICAuY3NzKCdwb3NpdGlvbicsICdpbmhlcml0Jyk7XG4gICAgICAgIH0sIDMxMCk7XG5cbiAgICB9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndmcuYXBwJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ1Bhc3N3b3JkQ2hhbmdlQ29udHJvbGxlcicsIFBhc3N3b3JkQ2hhbmdlQ29udHJvbGxlcik7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBQYXNzd29yZENoYW5nZUNvbnRyb2xsZXIoJHNjb3BlLCAkdGltZW91dCwgJHN0YXRlLCBBdXRoV3JhcHBlcikge1xuXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIFx0YW5ndWxhci5lbGVtZW50KCcjY29udGVudFZpZXcnKVxuICAgICAgICAgICAgICAgIC5jc3MoJ29wYWNpdHknLCAnMScpXG4gICAgICAgICAgICAgICAgLmNzcygncG9zaXRpb24nLCAnaW5oZXJpdCcpO1xuICAgICAgICB9LCAzMTApO1xuXG4gICAgICAgIHZtLnN1Ym1pdENoYW5nZVBhc3N3b3JkID0gc3VibWl0Q2hhbmdlUGFzc3dvcmQ7XG5cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgZnVuY3Rpb24gc3VibWl0Q2hhbmdlUGFzc3dvcmQoKSB7XG5cbiAgICAgICAgICAgIGlmICgkc2NvcGUucHdDaGFuZ2VGb3JtLiR2YWxpZCkge1xuXG4gICAgICAgICAgICAgICAgQXV0aFdyYXBwZXIuJGNoYW5nZVBhc3N3b3JkKHtcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IEF1dGhXcmFwcGVyLiRnZXRBdXRoKCkucGFzc3dvcmQuZW1haWwsXG4gICAgICAgICAgICAgICAgICAgIG9sZFBhc3N3b3JkOiB2bS5pbnB1dEN1cnJlbnRQYXNzd29yZCxcbiAgICAgICAgICAgICAgICAgICAgbmV3UGFzc3dvcmQ6IHZtLmlucHV0TmV3UGFzc3dvcmRcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIE1hdGVyaWFsaXplLnRvYXN0KCdZb3VyIHBhc3N3b3JkIHdhcyBjaGFuZ2VkLicsIDQwMDApO1xuICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnaW5kZXgnKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgMTAwMCk7XG5cbiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLmNvZGUgPT09ICdJTlZBTElEX1BBU1NXT1JEJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdm0uc2hvd0NoYW5nZVBhc3N3b3JkTWVzc2FnZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfTtcblxuICAgIH1cblxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuY29udHJvbGxlcignUHJvZmlsZUNvbnRyb2xsZXInLCBQcm9maWxlQ29udHJvbGxlcik7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBQcm9maWxlQ29udHJvbGxlcigkc2NvcGUsICRzdGF0ZVBhcmFtcywgJHEsICR0aW1lb3V0LCAkc3RhdGUsICRmaXJlYmFzZUFycmF5LCBhdXRoU2VydmljZSwgcHJvZmlsZVNlcnZpY2UsIGV2ZW50U2VydmljZSkge1xuXG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBcdGFuZ3VsYXIuZWxlbWVudCgnI2NvbnRlbnRWaWV3JylcbiAgICAgICAgXHQgICAgLmNzcygnb3BhY2l0eScsICcxJylcbiAgICAgICAgXHQgICAgLmNzcygncG9zaXRpb24nLCAnaW5oZXJpdCcpO1xuXG4gICAgICAgICAgICAkKCcuY29sbGFwc2libGUnKS5jb2xsYXBzaWJsZSh7XG4gICAgICAgICAgICAgICAgYWNjb3JkaW9uOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgNDEwKTtcblxuICAgICAgICB2YXIgRkJVUkwgPSAnaHR0cHM6Ly93b2xmc2NvbnRlc3RzLmZpcmViYXNlaW8uY29tJztcbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICB2bS5pbml0UHJvZmlsZSA9IGluaXRQcm9maWxlO1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgIGZ1bmN0aW9uIGluaXRQcm9maWxlKCkge1xuICAgICAgICAgICAgcHJvZmlsZVNlcnZpY2UuZ2V0VXNlckRhdGEoJHN0YXRlUGFyYW1zLnVzZXJuYW1lKS50aGVuKGZ1bmN0aW9uKHByb21pc2VSZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICAgICAgdm0ucHJvZmlsZURhdGEgPSBwcm9taXNlUmVzb2x1dGlvbjtcblxuICAgICAgICAgICAgICAgIHByb2ZpbGVTZXJ2aWNlLmdldFRvdXJuYW1lbnRIaXN0b3J5KHZtLnByb2ZpbGVEYXRhKS50aGVuKGZ1bmN0aW9uKHByb21pc2VSZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0b3VybmFtZW50SGlzdG9yeURhdGEgPSBwcm9taXNlUmVzb2x1dGlvbjtcbiAgICAgICAgICAgICAgICAgICAgdm0uZXZlbnRTdGFuZGluZ3MgPSBwcm9maWxlU2VydmljZS5nZXRUb3VybmFtZW50U3RhbmRpbmdzKHRvdXJuYW1lbnRIaXN0b3J5RGF0YSwgJHN0YXRlUGFyYW1zLnVzZXJuYW1lKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBwcm9maWxlU2VydmljZS5nZXRBdmF0YXJEYXRhKCkudGhlbihmdW5jdGlvbihwcm9taXNlUmVzb2x1dGlvbikge1xuICAgICAgICAgICAgICAgIHZtLmF2YXRhckRhdGEgPSBwcm9taXNlUmVzb2x1dGlvbjtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBwcm9maWxlU2VydmljZS5nZXRCYWRnZXNEYXRhKCRzdGF0ZVBhcmFtcy51c2VybmFtZSkudGhlbihmdW5jdGlvbiB0aGVuKG1vZGVsKSB7XG4gICAgICAgICAgICAgICAgdm0uYmFkZ2VzRGF0YSA9IG1vZGVsO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgIH1cblxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuc2VydmljZSgncHJvZmlsZVNlcnZpY2UnLCBwcm9maWxlU2VydmljZSk7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBwcm9maWxlU2VydmljZSgkcm9vdFNjb3BlLCAkcSwgJGZpcmViYXNlQXJyYXksICRmaXJlYmFzZU9iamVjdCwgZXZlbnRTZXJ2aWNlKSB7XG5cbiAgICBcdHZhciBGQlVSTCA9ICdodHRwczovL3dvbGZzY29udGVzdHMuZmlyZWJhc2Vpby5jb20nO1xuXG4gICAgICAgIHRoaXMuZ2V0QXZhdGFyRGF0YSA9IGdldEF2YXRhckRhdGE7XG4gICAgICAgIHRoaXMuZ2V0QmFkZ2VzRGF0YSA9IGdldEJhZGdlc0RhdGE7XG4gICAgXHR0aGlzLmdldFRvdXJuYW1lbnRIaXN0b3J5ID0gZ2V0VG91cm5hbWVudEhpc3Rvcnk7XG4gICAgICAgIHRoaXMuZ2V0VG91cm5hbWVudFN0YW5kaW5ncyA9IGdldFRvdXJuYW1lbnRTdGFuZGluZ3M7XG4gICAgICAgIHRoaXMuZ2V0VXNlckRhdGEgPSBnZXRVc2VyRGF0YTtcbiAgICAgICAgdGhpcy5zYXZlQXZhdGFyTGluayA9IHNhdmVBdmF0YXJMaW5rO1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICBmdW5jdGlvbiBnZXRBdmF0YXJEYXRhKCkge1xuXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGQlVSTCk7XG5cbiAgICAgICAgICAgIHZhciBhdmF0YXJEYXRhID0gJGZpcmViYXNlT2JqZWN0KFxuICAgICAgICAgICAgICAgIHJlZlxuICAgICAgICAgICAgICAgICAgICAuY2hpbGQoJ2F2YXRhcnMnKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXZhdGFyRGF0YS4kbG9hZGVkKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoYXZhdGFyRGF0YSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEJhZGdlc0RhdGEoaW5wdXRVc2VyKSB7XG5cbiAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICAgICB2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZCVVJMKTtcblxuICAgICAgICAgICAgdmFyIGJhZGdlc0RhdGEgPSAkZmlyZWJhc2VPYmplY3QoXG4gICAgICAgICAgICAgICAgcmVmXG4gICAgICAgICAgICAgICAgICAgIC5jaGlsZCgnYmFkZ2VzJylcbiAgICAgICAgICAgICAgICAgICAgLmNoaWxkKGlucHV0VXNlcilcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGJhZGdlc0RhdGEuJGxvYWRlZChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGJhZGdlc0RhdGEpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRUb3VybmFtZW50SGlzdG9yeShpbnB1dFVzZXJEYXRhKSB7XG5cbiAgICAgICAgXHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICBcdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRkJVUkwpO1xuXG4gICAgICAgIFx0Ly8gTG9vcCB0aHJvdWdoIGVhY2ggZXZlbnQgaW4gdGhlIHBsZWRnZWRUbyBvYmplY3QuXG4gICAgICAgIFx0dmFyIGV2ZW50c0FycmF5ID0gW107XG4gICAgICAgIFx0Zm9yICh2YXIga2V5IGluIGlucHV0VXNlckRhdGEucGxlZGdlZFRvKSB7XG4gICAgICAgIFx0XHRldmVudHNBcnJheS5wdXNoKGtleSk7XG4gICAgICAgIFx0fVxuXG4gICAgICAgIFx0ZGVmZXJyZWQucmVzb2x2ZShldmVudHNBcnJheSk7XG5cbiAgICAgICAgXHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0VG91cm5hbWVudFN0YW5kaW5ncyhpbnB1dFRvdXJuYW1lbnRIaXN0b3J5LCBpbnB1dFVzZXIpIHtcblxuICAgICAgICAgICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGQlVSTCk7XG5cbiAgICAgICAgICAgIC8vIExvb3AgdGhyb3VnaCBlYWNoIGV2ZW50IGluIHRoZSB1c2VyJ3MgaGlzdG9yeS5cbiAgICAgICAgICAgIHZhciBldmVudFN0YW5kaW5ncyA9IFtdO1xuICAgICAgICAgICAgaW5wdXRUb3VybmFtZW50SGlzdG9yeS5mb3JFYWNoKGZ1bmN0aW9uKGV2ZW50KSB7XG5cbiAgICAgICAgICAgICAgICBldmVudFNlcnZpY2UuZ2V0RXZlbnRQcm9wZXJ0aWVzKGV2ZW50KS50aGVuKGZ1bmN0aW9uKGV2ZW50UHJvcGVydGllcykge1xuXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50UHJvcGVydGllcy4kbG9hZGVkKCkudGhlbihmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgY29uY2x1ZGVkLCBnZXQgdGhlIHVzZXIncyBzdGFuZGluZy5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudFByb3BlcnRpZXMuc3RhdGUgPT09ICdjb25jbHVkZWQnKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXZlbnRTdGFuZGluZ0RhdGEgPSAkZmlyZWJhc2VPYmplY3QoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNoaWxkKCdzdGFuZGluZ3MnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNoaWxkKGV2ZW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudFN0YW5kaW5nRGF0YS4kbG9hZGVkKCkudGhlbihmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnRTdGFuZGluZ0RhdGFbaW5wdXRVc2VyXSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudFN0YW5kaW5ncy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBldmVudFByb3BlcnRpZXMubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVtaWVyOiBldmVudFByb3BlcnRpZXMucHJlbWllciA/IHRydWUgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0TmFtZTogZXZlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6ICdjb25jbHVkZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBldmVudFByb3BlcnRpZXMuY29sb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGV2ZW50U3RhbmRpbmdEYXRhW2lucHV0VXNlcl1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50U3RhbmRpbmdzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGV2ZW50UHJvcGVydGllcy5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZW1pZXI6IGV2ZW50UHJvcGVydGllcy5wcmVtaWVyID8gdHJ1ZSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnROYW1lOiBldmVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTogJ2NvbmNsdWRlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IGV2ZW50UHJvcGVydGllcy5jb2xvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50UHJvcGVydGllcy5zdGF0ZSA9PT0gJ2lucHJvZ3Jlc3MnIHx8IGV2ZW50UHJvcGVydGllcy5zdGF0ZSA9PT0gJ3VwY29taW5nJykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRTdGFuZGluZ3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGV2ZW50UHJvcGVydGllcy5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVtaWVyOiBldmVudFByb3BlcnRpZXMucHJlbWllciA/IHRydWUgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG9ydE5hbWU6IGV2ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogZXZlbnRQcm9wZXJ0aWVzLmNvbG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTogZXZlbnRQcm9wZXJ0aWVzLnN0YXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGV2ZW50U3RhbmRpbmdzO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRVc2VyRGF0YShpbnB1dFVzZXIpIHtcblxuICAgICAgICBcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgIFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGQlVSTCk7XG5cbiAgICAgICAgXHR2YXIgdXNlcnNEYXRhID0gJGZpcmViYXNlQXJyYXkoXG4gICAgICAgIFx0XHRyZWZcbiAgICAgICAgXHRcdFx0LmNoaWxkKCd1c2VycycpXG4gICAgICAgIFx0KTtcblxuICAgICAgICBcdHVzZXJzRGF0YS4kbG9hZGVkKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIFx0XHR1c2Vyc0RhdGEuZm9yRWFjaChmdW5jdGlvbih1c2VyKSB7XG4gICAgICAgIFx0XHRcdGlmICh1c2VyLnVzZXJOYW1lID09PSBpbnB1dFVzZXIpIHtcbiAgICAgICAgXHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHVzZXIpO1xuICAgICAgICBcdFx0XHR9XG4gICAgICAgIFx0XHR9KTtcblxuICAgICAgICBcdH0pO1xuXG4gICAgICAgIFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZJWE1FOiBNYWtlIHRoaXMgc2VydmVyLXNpZGUuXG4gICAgICAgIGZ1bmN0aW9uIHNhdmVBdmF0YXJMaW5rKGlucHV0TGluaywgaW5wdXRVc2VyKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRkJVUkwpO1xuXG4gICAgICAgICAgICB2YXIgYXZhdGFyRGF0YSA9ICRmaXJlYmFzZU9iamVjdChcbiAgICAgICAgICAgICAgICByZWZcbiAgICAgICAgICAgICAgICAgICAgLmNoaWxkKCdhdmF0YXJzJylcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF2YXRhckRhdGEuJGxvYWRlZChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBhdmF0YXJEYXRhW2lucHV0VXNlcl0gPSBpbnB1dExpbms7XG4gICAgICAgICAgICAgICAgYXZhdGFyRGF0YS4kc2F2ZSgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd2Zy5hcHAnKVxuICAgICAgICAuY29udHJvbGxlcignUmVnQ29udHJvbGxlcicsIFJlZ0NvbnRyb2xsZXIpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gUmVnQ29udHJvbGxlcigkc2NvcGUsICRyb290U2NvcGUsICR0aW1lb3V0LCAkd2luZG93LCAkc3RhdGUsICRmaXJlYmFzZU9iamVjdCwgYXV0aFNlcnZpY2UsIEF1dGhXcmFwcGVyKSB7XG5cbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIFx0YW5ndWxhci5lbGVtZW50KCcjY29udGVudFZpZXcnKVxuICAgICAgICBcdCAgICAuY3NzKCdvcGFjaXR5JywgJzEnKVxuICAgICAgICBcdCAgICAuY3NzKCdwb3NpdGlvbicsICdpbmhlcml0Jyk7XG4gICAgICAgIH0sIDQxMCk7XG5cbiAgICAgICAgdmFyIEZCVVJMID0gJ2h0dHBzOi8vd29sZnNjb250ZXN0cy5maXJlYmFzZWlvLmNvbSc7XG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgdm0ubG9naW5Ub0FjY291bnQgPSBsb2dpblRvQWNjb3VudDtcbiAgICAgICAgdm0ucGFzc3dvcmRSZXNldCA9IHBhc3N3b3JkUmVzZXQ7XG4gICAgICAgIHZtLnN1Ym1pdE5ld0FjY291bnQgPSBzdWJtaXROZXdBY2NvdW50O1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgIGZ1bmN0aW9uIGxvZ2luVG9BY2NvdW50KCkge1xuXG4gICAgICAgICAgICBhdXRoU2VydmljZS5sb2dpblRvQWNjb3VudCh2bS5sb2dpbkVtYWlsLCB2bS5sb2dpblBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uKHByb21pc2VSZXNvbHV0aW9uKSB7XG5cbiAgICAgICAgICAgICAgICB2bS5zaG93SW52YWxpZFVzZXJFcnJvciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHZtLnNob3dJbnZhbGlkUGFzc3dvcmRFcnJvciA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgaWYgKHByb21pc2VSZXNvbHV0aW9uID09PSAnTE9HSU5fU1VDQ0VTUycpIHtcblxuICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2luZGV4Jyk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHByb21pc2VSZXNvbHV0aW9uID09PSAnSU5WQUxJRF9VU0VSJykge1xuICAgICAgICAgICAgICAgICAgICB2bS5zaG93SW52YWxpZFVzZXJFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHByb21pc2VSZXNvbHV0aW9uID09PSAnSU5WQUxJRF9QQVNTV09SRCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0uc2hvd0ludmFsaWRQYXNzd29yZEVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBwYXNzd29yZFJlc2V0KCkge1xuXG4gICAgICAgICAgICBpZiAoIXZtLmxvZ2luRW1haWwpIHtcbiAgICAgICAgICAgICAgICB2bS5zaG93UGFzc3dvcmRSZXNldEVtYWlsTWVzc2FnZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBBdXRoV3JhcHBlci4kcmVzZXRQYXNzd29yZCh7XG4gICAgICAgICAgICAgICAgZW1haWw6IHZtLmxvZ2luRW1haWxcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdm0uc2hvd1Bhc3N3b3JkUmVzZXRFbWFpbE1lc3NhZ2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBNYXRlcmlhbGl6ZS50b2FzdCgnQSBwYXNzd29yZCByZXNldCBlbWFpbCBoYXMgYmVlbiBzZW50IHRvICcgKyB2bS5sb2dpbkVtYWlsICsgJy4nLCA0MDAwKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzdWJtaXROZXdBY2NvdW50KCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBEb2VzIHRoZSB1c2VyIGV4aXN0PyBJZiBzbywgc2hvdyBhbiBlcnJvciBtZXNzYWdlLlxuICAgICAgICAgICAgYXV0aFNlcnZpY2UuY2hlY2tJZlVzZXJFeGlzdHModm0ubmV3VXNlcm5hbWUpLnRoZW4oZnVuY3Rpb24odXNlckV4aXN0cykge1xuXG4gICAgICAgICAgICAgICAgdm0uc2hvd0R1cGxpY2F0ZVVzZXJFcnJvciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHZtLnNob3dFbWFpbFRha2VuRXJyb3IgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIGlmICh1c2VyRXhpc3RzKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdm0uc2hvd0R1cGxpY2F0ZVVzZXJFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgIC8vIFRyeSB0byBjcmVhdGUgdGhlIG5ldyB1c2VyLlxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgYXV0aFNlcnZpY2UuY3JlYXRlTmV3VXNlcih2bS5uZXdFbWFpbCwgdm0ubmV3UGFzc3dvcmQsIHZtLm5ld1VzZXJuYW1lKS50aGVuKGZ1bmN0aW9uKHByb21pc2VSZXNvbHV0aW9uKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9taXNlUmVzb2x1dGlvbiA9PT0gJ0VNQUlMX1RBS0VOJykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uc2hvd0VtYWlsVGFrZW5FcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHByb21pc2VSZXNvbHV0aW9uID09PSAnQUNDT1VOVF9DUkVBVEVEJykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdwcm9maWxlJywge3VzZXJuYW1lOiB2bS5uZXdVc2VybmFtZX0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cblxuICAgIH1cblxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=